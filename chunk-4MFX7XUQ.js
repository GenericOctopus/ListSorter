import{$ as Dh,A as xh,B as Oi,C as wh,D as Gl,E as vr,F as Qo,G as gt,H as or,I as Kr,J as qr,K as Qr,L as Qn,M as Xr,N as ar,O as St,P as yr,Q as Ch,R as Zl,S as Sh,T as kh,U as Qi,V as Eh,X as Ih,Y as ws,Z as Cs,_ as Ss,a as uh,aa as ks,b as gs,ba as Es,c as _s,ca as Jl,da as Rh,ea as Xn,f as vs,fa as ed,ga as Mh,h as mh,ha as br,i as hh,ia as Is,j as ph,ja as Yn,ka as Ti,l as ys,la as mi,m as fh,n as gh,o as bs,p as Wr,q as ei,r as qn,s as qi,t as xs,u as ui,v as _h,w as qo,x as vh,y as yh,z as bh}from"./chunk-JNJJOCWW.js";import{$ as ms,$a as ue,$b as ch,A as jm,Aa as Ne,Ba as Jt,Bb as Yl,C as $n,Ca as Dt,D as zn,Da as Ve,Db as ps,E as Hm,Ea as Je,Eb as th,Fa as rr,Fb as je,G as Um,Gb as lt,I as Wm,Ia as Ql,J as jo,Ja as Ke,Ka as Wt,Kb as Mt,L as ci,La as Qm,Lb as Xe,M as Ho,Ma as Kt,Mb as At,N as bi,Na as Xm,O as jn,Oa as Ym,Ob as ih,Pa as Gm,Qa as pe,Qb as rh,R as Uo,Ra as N,Rb as Ur,S as at,Sa as B,Sb as Kn,T as qe,Ta as ft,U as Ie,Ua as Ki,Ub as nh,V as Wo,Va as nr,Vb as oh,W as E,Wa as jr,Wb as di,Xb as ah,Y as us,Ya as Tt,Z as ge,Za as Zm,_ as _e,_a as he,_b as sh,a as fe,ab as li,b as Ue,ba as It,bb as tt,ca as st,cb as Ct,d as Db,da as Ko,db as Vt,e as Rb,eb as Oe,ec as lh,f as R,fb as Te,g as Ft,ga as ct,gc as dh,h as _n,ha as fr,hc as fs,i as ne,ia as Pi,j as Bt,ja as We,jb as Xl,k as Ul,ka as Kl,kb as Hr,l as Bm,lb as it,ma as Km,mb as _r,n as tr,na as qm,nb as W,o as Vm,ob as $t,p as vn,pa as Hn,pb as xi,q as pt,qa as K,qb as Wn,r as ds,ra as gr,s as Ui,sa as ir,ta as Wi,u as $m,ua as Un,ub as Rt,v as zm,va as zr,vb as hs,w as yi,wb as Jm,xa as ql,xb as eh,y as Me,ya as ke,z as Wl,za as Qe}from"./chunk-G4U66F5H.js";var Lv=Db(($u,zu)=>{"use strict";(function(t,i){typeof $u=="object"&&typeof zu<"u"?zu.exports=i():typeof define=="function"&&define.amd?define(i):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=i())})($u,function(){"use strict";var t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(l[m]=d[m])},t(a,s)};function i(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(a,s);function l(){this.constructor=a}a.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}var e=function(){return e=Object.assign||function(s){for(var l,d=1,m=arguments.length;d<m;d++){l=arguments[d];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p])}return s},e.apply(this,arguments)};function r(a,s,l){if(l||arguments.length===2)for(var d=0,m=s.length,p;d<m;d++)(p||!(d in s))&&(p||(p=Array.prototype.slice.call(s,0,d)),p[d]=s[d]);return a.concat(p||Array.prototype.slice.call(s))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o=Object.keys,c=Array.isArray;typeof Promise<"u"&&!n.Promise&&(n.Promise=Promise);function u(a,s){return typeof s!="object"||o(s).forEach(function(l){a[l]=s[l]}),a}var h=Object.getPrototypeOf,_={}.hasOwnProperty;function g(a,s){return _.call(a,s)}function b(a,s){typeof s=="function"&&(s=s(h(a))),(typeof Reflect>"u"?o:Reflect.ownKeys)(s).forEach(function(l){C(a,l,s[l])})}var D=Object.defineProperty;function C(a,s,l,d){D(a,s,u(l&&g(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},d))}function S(a){return{from:function(s){return a.prototype=Object.create(s.prototype),C(a.prototype,"constructor",a),{extend:b.bind(null,a.prototype)}}}}var P=Object.getOwnPropertyDescriptor;function T(a,s){var l=P(a,s),d;return l||(d=h(a))&&T(d,s)}var ee=[].slice;function te(a,s,l){return ee.call(a,s,l)}function ie(a,s){return s(a)}function Ce(a){if(!a)throw new Error("Assertion Failed")}function xe(a){n.setImmediate?setImmediate(a):setTimeout(a,0)}function Be(a,s){return a.reduce(function(l,d,m){var p=s(d,m);return p&&(l[p[0]]=p[1]),l},{})}function oe(a,s){if(typeof s=="string"&&g(a,s))return a[s];if(!s)return a;if(typeof s!="string"){for(var l=[],d=0,m=s.length;d<m;++d){var p=oe(a,s[d]);l.push(p)}return l}var f=s.indexOf(".");if(f!==-1){var v=a[s.substr(0,f)];return v==null?void 0:oe(v,s.substr(f+1))}}function ve(a,s,l){if(!(!a||s===void 0)&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof s!="string"&&"length"in s){Ce(typeof l!="string"&&"length"in l);for(var d=0,m=s.length;d<m;++d)ve(a,s[d],l[d])}else{var p=s.indexOf(".");if(p!==-1){var f=s.substr(0,p),v=s.substr(p+1);if(v==="")l===void 0?c(a)&&!isNaN(parseInt(f))?a.splice(f,1):delete a[f]:a[f]=l;else{var y=a[f];(!y||!g(a,f))&&(y=a[f]={}),ve(y,v,l)}}else l===void 0?c(a)&&!isNaN(parseInt(s))?a.splice(s,1):delete a[s]:a[s]=l}}function Ze(a,s){typeof s=="string"?ve(a,s,void 0):"length"in s&&[].map.call(s,function(l){ve(a,l,void 0)})}function Et(a){var s={};for(var l in a)g(a,l)&&(s[l]=a[l]);return s}var vt=[].concat;function Ae(a){return vt.apply([],a)}var Pt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ae([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(s){return s+a+"Array"})}))).filter(function(a){return n[a]}),yt=new Set(Pt.map(function(a){return n[a]}));function bt(a){var s={};for(var l in a)if(g(a,l)){var d=a[l];s[l]=!d||typeof d!="object"||yt.has(d.constructor)?d:bt(d)}return s}function zi(a){for(var s in a)if(g(a,s))return!1;return!0}var _i=null;function xt(a){_i=new WeakMap;var s=Ri(a);return _i=null,s}function Ri(a){if(!a||typeof a!="object")return a;var s=_i.get(a);if(s)return s;if(c(a)){s=[],_i.set(a,s);for(var l=0,d=a.length;l<d;++l)s.push(Ri(a[l]))}else if(yt.has(a.constructor))s=a;else{var m=h(a);s=m===Object.prototype?{}:Object.create(m),_i.set(a,s);for(var p in a)g(a,p)&&(s[p]=Ri(a[p]))}return s}var De={}.toString;function rt(a){return De.call(a).slice(8,-1)}var Ot=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ze=typeof Ot=="symbol"?function(a){var s;return a!=null&&(s=a[Ot])&&s.apply(a)}:function(){return null};function nt(a,s){var l=a.indexOf(s);return l>=0&&a.splice(l,1),l>=0}var ai={};function ji(a){var s,l,d,m;if(arguments.length===1){if(c(a))return a.slice();if(this===ai&&typeof a=="string")return[a];if(m=ze(a)){for(l=[];d=m.next(),!d.done;)l.push(d.value);return l}if(a==null)return[a];if(s=a.length,typeof s=="number"){for(l=new Array(s);s--;)l[s]=a[s];return l}return[a]}for(s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return l}var il=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ty=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ju=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rl=ty.concat(Ju),iy={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function On(a,s){this.name=a,this.message=s}S(On).from(Error).extend({toString:function(){return this.name+": "+this.message}});function em(a,s){return a+". Errors: "+Object.keys(s).map(function(l){return s[l].toString()}).filter(function(l,d,m){return m.indexOf(l)===d}).join(`
`)}function Fa(a,s,l,d){this.failures=s,this.failedKeys=d,this.successCount=l,this.message=em(a,s)}S(Fa).from(On);function Tn(a,s){this.name="BulkError",this.failures=Object.keys(s).map(function(l){return s[l]}),this.failuresByPos=s,this.message=em(a,this.failures)}S(Tn).from(On);var nl=rl.reduce(function(a,s){return a[s]=s+"Error",a},{}),ry=On,le=rl.reduce(function(a,s){var l=s+"Error";function d(m,p){this.name=l,m?typeof m=="string"?(this.message="".concat(m).concat(p?`
 `+p:""),this.inner=p||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=iy[s]||l,this.inner=null)}return S(d).from(ry),a[s]=d,a},{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var tm=Ju.reduce(function(a,s){return a[s+"Error"]=le[s],a},{});function ny(a,s){if(!a||a instanceof On||a instanceof TypeError||a instanceof SyntaxError||!a.name||!tm[a.name])return a;var l=new tm[a.name](s||a.message,a);return"stack"in a&&C(l,"stack",{get:function(){return this.inner.stack}}),l}var Ba=rl.reduce(function(a,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(a[s+"Error"]=le[s]),a},{});Ba.ModifyError=Fa,Ba.DexieError=On,Ba.BulkError=Tn;function Ye(){}function Do(a){return a}function oy(a,s){return a==null||a===Do?s:function(l){return s(a(l))}}function cn(a,s){return function(){a.apply(this,arguments),s.apply(this,arguments)}}function ay(a,s){return a===Ye?s:function(){var l=a.apply(this,arguments);l!==void 0&&(arguments[0]=l);var d=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var p=s.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?cn(d,this.onsuccess):d),m&&(this.onerror=this.onerror?cn(m,this.onerror):m),p!==void 0?p:l}}function sy(a,s){return a===Ye?s:function(){a.apply(this,arguments);var l=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?cn(l,this.onsuccess):l),d&&(this.onerror=this.onerror?cn(d,this.onerror):d)}}function cy(a,s){return a===Ye?s:function(l){var d=a.apply(this,arguments);u(l,d);var m=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var f=s.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?cn(m,this.onsuccess):m),p&&(this.onerror=this.onerror?cn(p,this.onerror):p),d===void 0?f===void 0?void 0:f:u(d,f)}}function ly(a,s){return a===Ye?s:function(){return s.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function ol(a,s){return a===Ye?s:function(){var l=a.apply(this,arguments);if(l&&typeof l.then=="function"){for(var d=this,m=arguments.length,p=new Array(m);m--;)p[m]=arguments[m];return l.then(function(){return s.apply(d,p)})}return s.apply(this,arguments)}}var Gi=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function im(a,s){Gi=a}var Ro={},rm=100,al=typeof Promise>"u"?[]:(function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,h(a),a];var s=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[s,h(s),a]})(),nm=al[0],om=al[1],dy=al[2],uy=om&&om.then,ln=nm&&nm.constructor,sl=!!dy;function my(){queueMicrotask(py)}var Mo=function(a,s){Po.push([a,s]),Va&&(my(),Va=!1)},cl=!0,Va=!0,dn=[],$a=[],ll=Do,Or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ye,pgp:!1,env:{},finalize:Ye},se=Or,Po=[],un=0,za=[];function Z(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=se;if(typeof a!="function"){if(a!==Ro)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ul(this,this._value);return}this._state=null,this._value=null,++s.ref,sm(this,a)}var dl={get:function(){var a=se,s=Wa;function l(d,m){var p=this,f=!a.global&&(a!==se||s!==Wa),v=f&&!Ar(),y=new Z(function(x,I){ml(p,new am(dm(d,a,f,v),dm(m,a,f,v),x,I,a))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return l.prototype=Ro,l},set:function(a){C(this,"then",a&&a.prototype===Ro?dl:{get:function(){return a},set:dl.set})}};b(Z.prototype,{then:dl,_then:function(a,s){ml(this,new am(null,null,a,s,se))},catch:function(a){if(arguments.length===1)return this.then(null,a);var s=arguments[0],l=arguments[1];return typeof s=="function"?this.then(null,function(d){return d instanceof s?l(d):ja(d)}):this.then(null,function(d){return d&&d.name===s?l(d):ja(d)})},finally:function(a){return this.then(function(s){return Z.resolve(a()).then(function(){return s})},function(s){return Z.resolve(a()).then(function(){return ja(s)})})},timeout:function(a,s){var l=this;return a<1/0?new Z(function(d,m){var p=setTimeout(function(){return m(new le.Timeout(s))},a);l.then(d,m).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),Or.env=lm();function am(a,s,l,d,m){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof s=="function"?s:null,this.resolve=l,this.reject=d,this.psd=m}b(Z,{all:function(){var a=ji.apply(null,arguments).map(Ka);return new Z(function(s,l){a.length===0&&s([]);var d=a.length;a.forEach(function(m,p){return Z.resolve(m).then(function(f){a[p]=f,--d||s(a)},l)})})},resolve:function(a){if(a instanceof Z)return a;if(a&&typeof a.then=="function")return new Z(function(l,d){a.then(l,d)});var s=new Z(Ro,!0,a);return s},reject:ja,race:function(){var a=ji.apply(null,arguments).map(Ka);return new Z(function(s,l){a.map(function(d){return Z.resolve(d).then(s,l)})})},PSD:{get:function(){return se},set:function(a){return se=a}},totalEchoes:{get:function(){return Wa}},newPSD:Tr,usePSD:mn,scheduler:{get:function(){return Mo},set:function(a){Mo=a}},rejectionMapper:{get:function(){return ll},set:function(a){ll=a}},follow:function(a,s){return new Z(function(l,d){return Tr(function(m,p){var f=se;f.unhandleds=[],f.onunhandled=p,f.finalize=cn(function(){var v=this;fy(function(){v.unhandleds.length===0?m():p(v.unhandleds[0])})},f.finalize),a()},s,l,d)})}}),ln&&(ln.allSettled&&C(Z,"allSettled",function(){var a=ji.apply(null,arguments).map(Ka);return new Z(function(s){a.length===0&&s([]);var l=a.length,d=new Array(l);a.forEach(function(m,p){return Z.resolve(m).then(function(f){return d[p]={status:"fulfilled",value:f}},function(f){return d[p]={status:"rejected",reason:f}}).then(function(){return--l||s(d)})})})}),ln.any&&typeof AggregateError<"u"&&C(Z,"any",function(){var a=ji.apply(null,arguments).map(Ka);return new Z(function(s,l){a.length===0&&l(new AggregateError([]));var d=a.length,m=new Array(d);a.forEach(function(p,f){return Z.resolve(p).then(function(v){return s(v)},function(v){m[f]=v,--d||l(new AggregateError(m))})})})}),ln.withResolvers&&(Z.withResolvers=ln.withResolvers));function sm(a,s){try{s(function(l){if(a._state===null){if(l===a)throw new TypeError("A promise cannot be resolved with itself.");var d=a._lib&&An();l&&typeof l.then=="function"?sm(a,function(m,p){l instanceof Z?l._then(m,p):l.then(m,p)}):(a._state=!0,a._value=l,cm(a)),d&&Ln()}},ul.bind(null,a))}catch(l){ul(a,l)}}function ul(a,s){if($a.push(s),a._state===null){var l=a._lib&&An();s=ll(s),a._state=!1,a._value=s,gy(a),cm(a),l&&Ln()}}function cm(a){var s=a._listeners;a._listeners=[];for(var l=0,d=s.length;l<d;++l)ml(a,s[l]);var m=a._PSD;--m.ref||m.finalize(),un===0&&(++un,Mo(function(){--un===0&&hl()},[]))}function ml(a,s){if(a._state===null){a._listeners.push(s);return}var l=a._state?s.onFulfilled:s.onRejected;if(l===null)return(a._state?s.resolve:s.reject)(a._value);++s.psd.ref,++un,Mo(hy,[l,a,s])}function hy(a,s,l){try{var d,m=s._value;!s._state&&$a.length&&($a=[]),d=Gi&&s._consoleTask?s._consoleTask.run(function(){return a(m)}):a(m),!s._state&&$a.indexOf(m)===-1&&_y(s),l.resolve(d)}catch(p){l.reject(p)}finally{--un===0&&hl(),--l.psd.ref||l.psd.finalize()}}function py(){mn(Or,function(){An()&&Ln()})}function An(){var a=cl;return cl=!1,Va=!1,a}function Ln(){var a,s,l;do for(;Po.length>0;)for(a=Po,Po=[],l=a.length,s=0;s<l;++s){var d=a[s];d[0].apply(null,d[1])}while(Po.length>0);cl=!0,Va=!0}function hl(){var a=dn;dn=[],a.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)});for(var s=za.slice(0),l=s.length;l;)s[--l]()}function fy(a){function s(){a(),za.splice(za.indexOf(s),1)}za.push(s),++un,Mo(function(){--un===0&&hl()},[])}function gy(a){dn.some(function(s){return s._value===a._value})||dn.push(a)}function _y(a){for(var s=dn.length;s;)if(dn[--s]._value===a._value){dn.splice(s,1);return}}function ja(a){return new Z(Ro,!1,a)}function ot(a,s){var l=se;return function(){var d=An(),m=se;try{return Lr(l,!0),a.apply(this,arguments)}catch(p){s&&s(p)}finally{Lr(m,!1),d&&Ln()}}}var Nt={awaits:0,echoes:0,id:0},vy=0,Ha=[],Ua=0,Wa=0,yy=0;function Tr(a,s,l,d){var m=se,p=Object.create(m);p.parent=m,p.ref=0,p.global=!1,p.id=++yy,Or.env,p.env=sl?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},s&&u(p,s),++m.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var f=mn(p,a,l,d);return p.ref===0&&p.finalize(),f}function Nn(){return Nt.id||(Nt.id=++vy),++Nt.awaits,Nt.echoes+=rm,Nt.id}function Ar(){return Nt.awaits?(--Nt.awaits===0&&(Nt.id=0),Nt.echoes=Nt.awaits*rm,!0):!1}(""+uy).indexOf("[native code]")===-1&&(Nn=Ar=Ye);function Ka(a){return Nt.echoes&&a&&a.constructor===ln?(Nn(),a.then(function(s){return Ar(),s},function(s){return Ar(),wt(s)})):a}function by(a){++Wa,(!Nt.echoes||--Nt.echoes===0)&&(Nt.echoes=Nt.awaits=Nt.id=0),Ha.push(se),Lr(a,!0)}function xy(){var a=Ha[Ha.length-1];Ha.pop(),Lr(a,!1)}function Lr(a,s){var l=se;if((s?Nt.echoes&&(!Ua++||a!==se):Ua&&(!--Ua||a!==se))&&queueMicrotask(s?by.bind(null,a):xy),a!==se&&(se=a,l===Or&&(Or.env=lm()),sl)){var d=Or.env.Promise,m=a.env;(l.global||a.global)&&(Object.defineProperty(n,"Promise",m.PromiseProp),d.all=m.all,d.race=m.race,d.resolve=m.resolve,d.reject=m.reject,m.allSettled&&(d.allSettled=m.allSettled),m.any&&(d.any=m.any))}}function lm(){var a=n.Promise;return sl?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function mn(a,s,l,d,m){var p=se;try{return Lr(a,!0),s(l,d,m)}finally{Lr(p,!1)}}function dm(a,s,l,d){return typeof a!="function"?a:function(){var m=se;l&&Nn(),Lr(s,!0);try{return a.apply(this,arguments)}finally{Lr(m,!1),d&&queueMicrotask(Ar)}}}function pl(a){Promise===ln&&Nt.echoes===0?Ua===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var wt=Z.reject;function fl(a,s,l,d){if(!a.idbdb||!a._state.openComplete&&!se.letThrough&&!a._vip){if(a._state.openComplete)return wt(new le.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return wt(new le.DatabaseClosed);a.open().catch(Ye)}return a._state.dbReadyPromise.then(function(){return fl(a,s,l,d)})}else{var m=a._createTransaction(s,l,a._dbSchema);try{m.create(),a._state.PR1398_maxLoop=3}catch(p){return p.name===nl.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),a.close({disableAutoOpen:!1}),a.open().then(function(){return fl(a,s,l,d)})):wt(p)}return m._promise(s,function(p,f){return Tr(function(){return se.trans=m,d(p,f,m)})}).then(function(p){if(s==="readwrite")try{m.idbtrans.commit()}catch{}return s==="readonly"?p:m._completion.then(function(){return p})})}}var um="4.0.10",hn="\uFFFF",gl=-1/0,hr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mm="String expected.",Fn=[],qa="__dbnames",_l="readonly",vl="readwrite";function pn(a,s){return a?s?function(){return a.apply(this,arguments)&&s.apply(this,arguments)}:a:s}var hm={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qa(a){return typeof a=="string"&&!/\./.test(a)?function(s){return s[a]===void 0&&a in s&&(s=xt(s),delete s[a]),s}:function(s){return s}}function pm(){throw le.Type()}function Pe(a,s){try{var l=fm(a),d=fm(s);if(l!==d)return l==="Array"?1:d==="Array"?-1:l==="binary"?1:d==="binary"?-1:l==="string"?1:d==="string"?-1:l==="Date"?1:d!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return a>s?1:a<s?-1:0;case"binary":return Cy(gm(a),gm(s));case"Array":return wy(a,s)}}catch{}return NaN}function wy(a,s){for(var l=a.length,d=s.length,m=l<d?l:d,p=0;p<m;++p){var f=Pe(a[p],s[p]);if(f!==0)return f}return l===d?0:l<d?-1:1}function Cy(a,s){for(var l=a.length,d=s.length,m=l<d?l:d,p=0;p<m;++p)if(a[p]!==s[p])return a[p]<s[p]?-1:1;return l===d?0:l<d?-1:1}function fm(a){var s=typeof a;if(s!=="object")return s;if(ArrayBuffer.isView(a))return"binary";var l=rt(a);return l==="ArrayBuffer"?"binary":l}function gm(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var _m=(function(){function a(){}return a.prototype._trans=function(s,l,d){var m=this._tx||se.trans,p=this.name,f=Gi&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function v(I,w,A){if(!A.schema[p])throw new le.NotFound("Table "+p+" not part of transaction");return l(A.idbtrans,A)}var y=An();try{var x=m&&m.db._novip===this.db._novip?m===se.trans?m._promise(s,v,d):Tr(function(){return m._promise(s,v,d)},{trans:m,transless:se.transless||se}):fl(this.db,s,[this.name],v);return f&&(x._consoleTask=f,x=x.catch(function(I){return console.trace(I),wt(I)})),x}finally{y&&Ln()}},a.prototype.get=function(s,l){var d=this;return s&&s.constructor===Object?this.where(s).first(l):s==null?wt(new le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return d.core.get({trans:m,key:s}).then(function(p){return d.hook.reading.fire(p)})}).then(l)},a.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(c(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var l=o(s);if(l.length===1)return this.where(l[0]).equals(s[l[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&l.every(function(A){return I.keyPath.indexOf(A)>=0})){for(var w=0;w<l.length;++w)if(l.indexOf(I.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(I,w){return I.keyPath.length-w.keyPath.length})[0];if(d&&this.db._maxKey!==hn){var m=d.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(I){return s[I]}))}!d&&Gi&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var p=this.schema.idxByName;function f(I,w){return Pe(I,w)===0}var v=l.reduce(function(I,w){var A=I[0],U=I[1],k=p[w],M=s[w];return[A||k,A||!k?pn(U,k&&k.multi?function(O){var z=oe(O,w);return c(z)&&z.some(function(V){return f(M,V)})}:function(O){return f(M,oe(O,w))}):U]},[null,null]),y=v[0],x=v[1];return y?this.where(y.name).equals(s[y.keyPath]).filter(x):d?this.filter(x):this.where(l).equals("")},a.prototype.filter=function(s){return this.toCollection().and(s)},a.prototype.count=function(s){return this.toCollection().count(s)},a.prototype.offset=function(s){return this.toCollection().offset(s)},a.prototype.limit=function(s){return this.toCollection().limit(s)},a.prototype.each=function(s){return this.toCollection().each(s)},a.prototype.toArray=function(s){return this.toCollection().toArray(s)},a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},a.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,c(s)?"[".concat(s.join("+"),"]"):s))},a.prototype.reverse=function(){return this.toCollection().reverse()},a.prototype.mapToClass=function(s){var l=this,d=l.db,m=l.name;this.schema.mappedClass=s,s.prototype instanceof pm&&(s=(function(y){i(x,y);function x(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(x.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),x.prototype.table=function(){return m},x})(s));for(var p=new Set,f=s.prototype;f;f=h(f))Object.getOwnPropertyNames(f).forEach(function(y){return p.add(y)});var v=function(y){if(!y)return y;var x=Object.create(s.prototype);for(var I in y)if(!p.has(I))try{x[I]=y[I]}catch{}return x};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),s},a.prototype.defineClass=function(){function s(l){u(this,l)}return this.mapToClass(s)},a.prototype.add=function(s,l){var d=this,m=this.schema.primKey,p=m.auto,f=m.keyPath,v=s;return f&&p&&(v=Qa(f)(s)),this._trans("readwrite",function(y){return d.core.mutate({trans:y,type:"add",keys:l!=null?[l]:null,values:[v]})}).then(function(y){return y.numFailures?Z.reject(y.failures[0]):y.lastResult}).then(function(y){if(f)try{ve(s,f,y)}catch{}return y})},a.prototype.update=function(s,l){if(typeof s=="object"&&!c(s)){var d=oe(s,this.schema.primKey.keyPath);return d===void 0?wt(new le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(l)}else return this.where(":id").equals(s).modify(l)},a.prototype.put=function(s,l){var d=this,m=this.schema.primKey,p=m.auto,f=m.keyPath,v=s;return f&&p&&(v=Qa(f)(s)),this._trans("readwrite",function(y){return d.core.mutate({trans:y,type:"put",values:[v],keys:l!=null?[l]:null})}).then(function(y){return y.numFailures?Z.reject(y.failures[0]):y.lastResult}).then(function(y){if(f)try{ve(s,f,y)}catch{}return y})},a.prototype.delete=function(s){var l=this;return this._trans("readwrite",function(d){return l.core.mutate({trans:d,type:"delete",keys:[s]})}).then(function(d){return d.numFailures?Z.reject(d.failures[0]):void 0})},a.prototype.clear=function(){var s=this;return this._trans("readwrite",function(l){return s.core.mutate({trans:l,type:"deleteRange",range:hm})}).then(function(l){return l.numFailures?Z.reject(l.failures[0]):void 0})},a.prototype.bulkGet=function(s){var l=this;return this._trans("readonly",function(d){return l.core.getMany({keys:s,trans:d}).then(function(m){return m.map(function(p){return l.hook.reading.fire(p)})})})},a.prototype.bulkAdd=function(s,l,d){var m=this,p=Array.isArray(l)?l:void 0;d=d||(p?void 0:l);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(v){var y=m.schema.primKey,x=y.auto,I=y.keyPath;if(I&&p)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var w=s.length,A=I&&x?s.map(Qa(I)):s;return m.core.mutate({trans:v,type:"add",keys:p,values:A,wantResults:f}).then(function(U){var k=U.numFailures,M=U.results,O=U.lastResult,z=U.failures,V=f?M:O;if(k===0)return V;throw new Tn("".concat(m.name,".bulkAdd(): ").concat(k," of ").concat(w," operations failed"),z)})})},a.prototype.bulkPut=function(s,l,d){var m=this,p=Array.isArray(l)?l:void 0;d=d||(p?void 0:l);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(v){var y=m.schema.primKey,x=y.auto,I=y.keyPath;if(I&&p)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var w=s.length,A=I&&x?s.map(Qa(I)):s;return m.core.mutate({trans:v,type:"put",keys:p,values:A,wantResults:f}).then(function(U){var k=U.numFailures,M=U.results,O=U.lastResult,z=U.failures,V=f?M:O;if(k===0)return V;throw new Tn("".concat(m.name,".bulkPut(): ").concat(k," of ").concat(w," operations failed"),z)})})},a.prototype.bulkUpdate=function(s){var l=this,d=this.core,m=s.map(function(v){return v.key}),p=s.map(function(v){return v.changes}),f=[];return this._trans("readwrite",function(v){return d.getMany({trans:v,keys:m,cache:"clone"}).then(function(y){var x=[],I=[];s.forEach(function(A,U){var k=A.key,M=A.changes,O=y[U];if(O){for(var z=0,V=Object.keys(M);z<V.length;z++){var $=V[z],j=M[$];if($===l.schema.primKey.keyPath){if(Pe(j,k)!==0)throw new le.Constraint("Cannot update primary key in bulkUpdate()")}else ve(O,$,j)}f.push(U),x.push(k),I.push(O)}});var w=x.length;return d.mutate({trans:v,type:"put",keys:x,values:I,updates:{keys:m,changeSpecs:p}}).then(function(A){var U=A.numFailures,k=A.failures;if(U===0)return w;for(var M=0,O=Object.keys(k);M<O.length;M++){var z=O[M],V=f[Number(z)];if(V!=null){var $=k[z];delete k[z],k[V]=$}}throw new Tn("".concat(l.name,".bulkUpdate(): ").concat(U," of ").concat(w," operations failed"),k)})})})},a.prototype.bulkDelete=function(s){var l=this,d=s.length;return this._trans("readwrite",function(m){return l.core.mutate({trans:m,type:"delete",keys:s})}).then(function(m){var p=m.numFailures,f=m.lastResult,v=m.failures;if(p===0)return f;throw new Tn("".concat(l.name,".bulkDelete(): ").concat(p," of ").concat(d," operations failed"),v)})},a})();function Oo(a){var s={},l=function(v,y){if(y){for(var x=arguments.length,I=new Array(x-1);--x;)I[x-1]=arguments[x];return s[v].subscribe.apply(null,I),a}else if(typeof v=="string")return s[v]};l.addEventType=p;for(var d=1,m=arguments.length;d<m;++d)p(arguments[d]);return l;function p(v,y,x){if(typeof v=="object")return f(v);y||(y=ly),x||(x=Ye);var I={subscribers:[],fire:x,subscribe:function(w){I.subscribers.indexOf(w)===-1&&(I.subscribers.push(w),I.fire=y(I.fire,w))},unsubscribe:function(w){I.subscribers=I.subscribers.filter(function(A){return A!==w}),I.fire=I.subscribers.reduce(y,x)}};return s[v]=l[v]=I,I}function f(v){o(v).forEach(function(y){var x=v[y];if(c(x))p(y,v[y][0],v[y][1]);else if(x==="asap")var I=p(y,Do,function(){for(var A=arguments.length,U=new Array(A);A--;)U[A]=arguments[A];I.subscribers.forEach(function(k){xe(function(){k.apply(null,U)})})});else throw new le.InvalidArgument("Invalid event config")})}}function To(a,s){return S(s).from({prototype:a}),s}function Sy(a){return To(_m.prototype,function(l,d,m){this.db=a,this._tx=m,this.name=l,this.schema=d,this.hook=a._allTables[l]?a._allTables[l].hook:Oo(null,{creating:[ay,Ye],reading:[oy,Do],updating:[cy,Ye],deleting:[sy,Ye]})})}function Bn(a,s){return!(a.filter||a.algorithm||a.or)&&(s?a.justLimit:!a.replayFilter)}function yl(a,s){a.filter=pn(a.filter,s)}function bl(a,s,l){var d=a.replayFilter;a.replayFilter=d?function(){return pn(d(),s())}:s,a.justLimit=l&&!d}function ky(a,s){a.isMatch=pn(a.isMatch,s)}function Xa(a,s){if(a.isPrimKey)return s.primaryKey;var l=s.getIndexByKeyPath(a.index);if(!l)throw new le.Schema("KeyPath "+a.index+" on object store "+s.name+" is not indexed");return l}function vm(a,s,l){var d=Xa(a,s.schema);return s.openCursor({trans:l,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function Ya(a,s,l,d){var m=a.replayFilter?pn(a.filter,a.replayFilter()):a.filter;if(a.or){var p={},f=function(v,y,x){if(!m||m(y,x,function(A){return y.stop(A)},function(A){return y.fail(A)})){var I=y.primaryKey,w=""+I;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(I)),g(p,w)||(p[w]=!0,s(v,y,x))}};return Promise.all([a.or._iterate(f,l),ym(vm(a,d,l),a.algorithm,f,!a.keysOnly&&a.valueMapper)])}else return ym(vm(a,d,l),pn(a.algorithm,m),s,!a.keysOnly&&a.valueMapper)}function ym(a,s,l,d){var m=d?function(f,v,y){return l(d(f),v,y)}:l,p=ot(m);return a.then(function(f){if(f)return f.start(function(){var v=function(){return f.continue()};(!s||s(f,function(y){return v=y},function(y){f.stop(y),v=Ye},function(y){f.fail(y),v=Ye}))&&p(f.value,f,function(y){return v=y}),v()})})}var Ey=Symbol(),Ao=(function(){function a(s){Object.assign(this,s)}return a.prototype.execute=function(s){var l;if(this.add!==void 0){var d=this.add;if(c(d))return r(r([],c(s)?s:[],!0),d,!0).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var m=this.remove;if(c(m))return c(s)?s.filter(function(f){return!m.includes(f)}).sort():[];if(typeof m=="number")return Number(s)-m;if(typeof m=="bigint")try{return BigInt(s)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}var p=(l=this.replacePrefix)===null||l===void 0?void 0:l[0];return p&&typeof s=="string"&&s.startsWith(p)?this.replacePrefix[1]+s.substring(p.length):s},a})(),Iy=(function(){function a(){}return a.prototype._read=function(s,l){var d=this._ctx;return d.error?d.table._trans(null,wt.bind(null,d.error)):d.table._trans("readonly",s).then(l)},a.prototype._write=function(s){var l=this._ctx;return l.error?l.table._trans(null,wt.bind(null,l.error)):l.table._trans("readwrite",s,"locked")},a.prototype._addAlgorithm=function(s){var l=this._ctx;l.algorithm=pn(l.algorithm,s)},a.prototype._iterate=function(s,l){return Ya(this._ctx,s,l,this._ctx.table.core)},a.prototype.clone=function(s){var l=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return s&&u(d,s),l._ctx=d,l},a.prototype.raw=function(){return this._ctx.valueMapper=null,this},a.prototype.each=function(s){var l=this._ctx;return this._read(function(d){return Ya(l,s,d,l.table.core)})},a.prototype.count=function(s){var l=this;return this._read(function(d){var m=l._ctx,p=m.table.core;if(Bn(m,!0))return p.count({trans:d,query:{index:Xa(m,p.schema),range:m.range}}).then(function(v){return Math.min(v,m.limit)});var f=0;return Ya(m,function(){return++f,!1},d,p).then(function(){return f})}).then(s)},a.prototype.sortBy=function(s,l){var d=s.split(".").reverse(),m=d[0],p=d.length-1;function f(x,I){return I?f(x[d[I]],I-1):x[m]}var v=this._ctx.dir==="next"?1:-1;function y(x,I){var w=f(x,p),A=f(I,p);return Pe(w,A)*v}return this.toArray(function(x){return x.sort(y)}).then(l)},a.prototype.toArray=function(s){var l=this;return this._read(function(d){var m=l._ctx;if(m.dir==="next"&&Bn(m,!0)&&m.limit>0){var p=m.valueMapper,f=Xa(m,m.table.core.schema);return m.table.core.query({trans:d,limit:m.limit,values:!0,query:{index:f,range:m.range}}).then(function(y){var x=y.result;return p?x.map(p):x})}else{var v=[];return Ya(m,function(y){return v.push(y)},d,m.table.core).then(function(){return v})}},s)},a.prototype.offset=function(s){var l=this._ctx;return s<=0?this:(l.offset+=s,Bn(l)?bl(l,function(){var d=s;return function(m,p){return d===0?!0:d===1?(--d,!1):(p(function(){m.advance(d),d=0}),!1)}}):bl(l,function(){var d=s;return function(){return--d<0}}),this)},a.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),bl(this._ctx,function(){var l=s;return function(d,m,p){return--l<=0&&m(p),l>=0}},!0),this},a.prototype.until=function(s,l){return yl(this._ctx,function(d,m,p){return s(d.value)?(m(p),l):!0}),this},a.prototype.first=function(s){return this.limit(1).toArray(function(l){return l[0]}).then(s)},a.prototype.last=function(s){return this.reverse().first(s)},a.prototype.filter=function(s){return yl(this._ctx,function(l){return s(l.value)}),ky(this._ctx,s),this},a.prototype.and=function(s){return this.filter(s)},a.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},a.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},a.prototype.desc=function(){return this.reverse()},a.prototype.eachKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,m){s(m.key,m)})},a.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},a.prototype.eachPrimaryKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,m){s(m.primaryKey,m)})},a.prototype.keys=function(s){var l=this._ctx;l.keysOnly=!l.isMatch;var d=[];return this.each(function(m,p){d.push(p.key)}).then(function(){return d}).then(s)},a.prototype.primaryKeys=function(s){var l=this._ctx;if(l.dir==="next"&&Bn(l,!0)&&l.limit>0)return this._read(function(m){var p=Xa(l,l.table.core.schema);return l.table.core.query({trans:m,values:!1,limit:l.limit,query:{index:p,range:l.range}})}).then(function(m){var p=m.result;return p}).then(s);l.keysOnly=!l.isMatch;var d=[];return this.each(function(m,p){d.push(p.primaryKey)}).then(function(){return d}).then(s)},a.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},a.prototype.firstKey=function(s){return this.limit(1).keys(function(l){return l[0]}).then(s)},a.prototype.lastKey=function(s){return this.reverse().firstKey(s)},a.prototype.distinct=function(){var s=this._ctx,l=s.index&&s.table.schema.idxByName[s.index];if(!l||!l.multi)return this;var d={};return yl(this._ctx,function(m){var p=m.primaryKey.toString(),f=g(d,p);return d[p]=!0,!f}),this},a.prototype.modify=function(s){var l=this,d=this._ctx;return this._write(function(m){var p;if(typeof s=="function")p=s;else{var f=o(s),v=f.length;p=function(V){for(var $=!1,j=0;j<v;++j){var L=f[j],q=s[L],J=oe(V,L);q instanceof Ao?(ve(V,L,q.execute(J)),$=!0):J!==q&&(ve(V,L,q),$=!0)}return $}}var y=d.table.core,x=y.schema.primaryKey,I=x.outbound,w=x.extractKey,A=200,U=l.db._options.modifyChunkSize;U&&(typeof U=="object"?A=U[y.name]||U["*"]||200:A=U);var k=[],M=0,O=[],z=function(V,$){var j=$.failures,L=$.numFailures;M+=V-L;for(var q=0,J=o(j);q<J.length;q++){var G=J[q];k.push(j[G])}};return l.clone().primaryKeys().then(function(V){var $=Bn(d)&&d.limit===1/0&&(typeof s!="function"||s===xl)&&{index:d.index,range:d.range},j=function(L){var q=Math.min(A,V.length-L);return y.getMany({trans:m,keys:V.slice(L,L+q),cache:"immutable"}).then(function(J){for(var G=[],de=[],Se=I?[]:null,re=[],we=0;we<q;++we){var me=J[we],Le={value:xt(me),primKey:V[L+we]};p.call(Le,Le.value,Le)!==!1&&(Le.value==null?re.push(V[L+we]):!I&&Pe(w(me),w(Le.value))!==0?(re.push(V[L+we]),G.push(Le.value)):(de.push(Le.value),I&&Se.push(V[L+we])))}return Promise.resolve(G.length>0&&y.mutate({trans:m,type:"add",values:G}).then(function(ce){for(var ht in ce.failures)re.splice(parseInt(ht),1);z(G.length,ce)})).then(function(){return(de.length>0||$&&typeof s=="object")&&y.mutate({trans:m,type:"put",keys:Se,values:de,criteria:$,changeSpec:typeof s!="function"&&s,isAdditionalChunk:L>0}).then(function(ce){return z(de.length,ce)})}).then(function(){return(re.length>0||$&&s===xl)&&y.mutate({trans:m,type:"delete",keys:re,criteria:$,isAdditionalChunk:L>0}).then(function(ce){return z(re.length,ce)})}).then(function(){return V.length>L+q&&j(L+A)})})};return j(0).then(function(){if(k.length>0)throw new Fa("Error modifying one or more objects",k,M,O);return V.length})})})},a.prototype.delete=function(){var s=this._ctx,l=s.range;return Bn(s)&&(s.isPrimKey||l.type===3)?this._write(function(d){var m=s.table.core.schema.primaryKey,p=l;return s.table.core.count({trans:d,query:{index:m,range:p}}).then(function(f){return s.table.core.mutate({trans:d,type:"deleteRange",range:p}).then(function(v){var y=v.failures;v.lastResult,v.results;var x=v.numFailures;if(x)throw new Fa("Could not delete some values",Object.keys(y).map(function(I){return y[I]}),f-x);return f-x})})}):this.modify(xl)},a})(),xl=function(a,s){return s.value=null};function Dy(a){return To(Iy.prototype,function(l,d){this.db=a;var m=hm,p=null;if(d)try{m=d()}catch(x){p=x}var f=l._ctx,v=f.table,y=v.hook.reading.fire;this._ctx={table:v,index:f.index,isPrimKey:!f.index||v.schema.primKey.keyPath&&f.index===v.schema.primKey.name,range:m,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:f.or,valueMapper:y!==Do?y:null}})}function Ry(a,s){return a<s?-1:a===s?0:1}function My(a,s){return a>s?-1:a===s?0:1}function vi(a,s,l){var d=a instanceof xm?new a.Collection(a):a;return d._ctx.error=l?new l(s):new TypeError(s),d}function Vn(a){return new a.Collection(a,function(){return bm("")}).limit(0)}function Py(a){return a==="next"?function(s){return s.toUpperCase()}:function(s){return s.toLowerCase()}}function Oy(a){return a==="next"?function(s){return s.toLowerCase()}:function(s){return s.toUpperCase()}}function Ty(a,s,l,d,m,p){for(var f=Math.min(a.length,d.length),v=-1,y=0;y<f;++y){var x=s[y];if(x!==d[y])return m(a[y],l[y])<0?a.substr(0,y)+l[y]+l.substr(y+1):m(a[y],d[y])<0?a.substr(0,y)+d[y]+l.substr(y+1):v>=0?a.substr(0,v)+s[v]+l.substr(v+1):null;m(a[y],x)<0&&(v=y)}return f<d.length&&p==="next"?a+l.substr(a.length):f<a.length&&p==="prev"?a.substr(0,l.length):v<0?null:a.substr(0,v)+d[v]+l.substr(v+1)}function Ga(a,s,l,d){var m,p,f,v,y,x,I,w=l.length;if(!l.every(function(M){return typeof M=="string"}))return vi(a,mm);function A(M){m=Py(M),p=Oy(M),f=M==="next"?Ry:My;var O=l.map(function(z){return{lower:p(z),upper:m(z)}}).sort(function(z,V){return f(z.lower,V.lower)});v=O.map(function(z){return z.upper}),y=O.map(function(z){return z.lower}),x=M,I=M==="next"?"":d}A("next");var U=new a.Collection(a,function(){return Nr(v[0],y[w-1]+d)});U._ondirectionchange=function(M){A(M)};var k=0;return U._addAlgorithm(function(M,O,z){var V=M.key;if(typeof V!="string")return!1;var $=p(V);if(s($,y,k))return!0;for(var j=null,L=k;L<w;++L){var q=Ty(V,$,v[L],y[L],f,x);q===null&&j===null?k=L+1:(j===null||f(j,q)>0)&&(j=q)}return O(j!==null?function(){M.continue(j+I)}:z),!1}),U}function Nr(a,s,l,d){return{type:2,lower:a,upper:s,lowerOpen:l,upperOpen:d}}function bm(a){return{type:1,lower:a,upper:a}}var xm=(function(){function a(){}return Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),a.prototype.between=function(s,l,d,m){d=d!==!1,m=m===!0;try{return this._cmp(s,l)>0||this._cmp(s,l)===0&&(d||m)&&!(d&&m)?Vn(this):new this.Collection(this,function(){return Nr(s,l,!d,!m)})}catch{return vi(this,hr)}},a.prototype.equals=function(s){return s==null?vi(this,hr):new this.Collection(this,function(){return bm(s)})},a.prototype.above=function(s){return s==null?vi(this,hr):new this.Collection(this,function(){return Nr(s,void 0,!0)})},a.prototype.aboveOrEqual=function(s){return s==null?vi(this,hr):new this.Collection(this,function(){return Nr(s,void 0,!1)})},a.prototype.below=function(s){return s==null?vi(this,hr):new this.Collection(this,function(){return Nr(void 0,s,!1,!0)})},a.prototype.belowOrEqual=function(s){return s==null?vi(this,hr):new this.Collection(this,function(){return Nr(void 0,s)})},a.prototype.startsWith=function(s){return typeof s!="string"?vi(this,mm):this.between(s,s+hn,!0,!0)},a.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Ga(this,function(l,d){return l.indexOf(d[0])===0},[s],hn)},a.prototype.equalsIgnoreCase=function(s){return Ga(this,function(l,d){return l===d[0]},[s],"")},a.prototype.anyOfIgnoreCase=function(){var s=ji.apply(ai,arguments);return s.length===0?Vn(this):Ga(this,function(l,d){return d.indexOf(l)!==-1},s,"")},a.prototype.startsWithAnyOfIgnoreCase=function(){var s=ji.apply(ai,arguments);return s.length===0?Vn(this):Ga(this,function(l,d){return d.some(function(m){return l.indexOf(m)===0})},s,hn)},a.prototype.anyOf=function(){var s=this,l=ji.apply(ai,arguments),d=this._cmp;try{l.sort(d)}catch{return vi(this,hr)}if(l.length===0)return Vn(this);var m=new this.Collection(this,function(){return Nr(l[0],l[l.length-1])});m._ondirectionchange=function(f){d=f==="next"?s._ascending:s._descending,l.sort(d)};var p=0;return m._addAlgorithm(function(f,v,y){for(var x=f.key;d(x,l[p])>0;)if(++p,p===l.length)return v(y),!1;return d(x,l[p])===0?!0:(v(function(){f.continue(l[p])}),!1)}),m},a.prototype.notEqual=function(s){return this.inAnyRange([[gl,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},a.prototype.noneOf=function(){var s=ji.apply(ai,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return vi(this,hr)}var l=s.reduce(function(d,m){return d?d.concat([[d[d.length-1][1],m]]):[[gl,m]]},null);return l.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},a.prototype.inAnyRange=function(s,l){var d=this,m=this._cmp,p=this._ascending,f=this._descending,v=this._min,y=this._max;if(s.length===0)return Vn(this);if(!s.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&p(L[0],L[1])<=0}))return vi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);var x=!l||l.includeLowers!==!1,I=l&&l.includeUppers===!0;function w(L,q){for(var J=0,G=L.length;J<G;++J){var de=L[J];if(m(q[0],de[1])<0&&m(q[1],de[0])>0){de[0]=v(de[0],q[0]),de[1]=y(de[1],q[1]);break}}return J===G&&L.push(q),L}var A=p;function U(L,q){return A(L[0],q[0])}var k;try{k=s.reduce(w,[]),k.sort(U)}catch{return vi(this,hr)}var M=0,O=I?function(L){return p(L,k[M][1])>0}:function(L){return p(L,k[M][1])>=0},z=x?function(L){return f(L,k[M][0])>0}:function(L){return f(L,k[M][0])>=0};function V(L){return!O(L)&&!z(L)}var $=O,j=new this.Collection(this,function(){return Nr(k[0][0],k[k.length-1][1],!x,!I)});return j._ondirectionchange=function(L){L==="next"?($=O,A=p):($=z,A=f),k.sort(U)},j._addAlgorithm(function(L,q,J){for(var G=L.key;$(G);)if(++M,M===k.length)return q(J),!1;return V(G)?!0:(d._cmp(G,k[M][1])===0||d._cmp(G,k[M][0])===0||q(function(){A===p?L.continue(k[M][0]):L.continue(k[M][1])}),!1)}),j},a.prototype.startsWithAnyOf=function(){var s=ji.apply(ai,arguments);return s.every(function(l){return typeof l=="string"})?s.length===0?Vn(this):this.inAnyRange(s.map(function(l){return[l,l+hn]})):vi(this,"startsWithAnyOf() only works with strings")},a})();function Ay(a){return To(xm.prototype,function(l,d,m){if(this.db=a,this._ctx={table:l,index:d===":id"?null:d,or:m},this._cmp=this._ascending=Pe,this._descending=function(p,f){return Pe(f,p)},this._max=function(p,f){return Pe(p,f)>0?p:f},this._min=function(p,f){return Pe(p,f)<0?p:f},this._IDBKeyRange=a._deps.IDBKeyRange,!this._IDBKeyRange)throw new le.MissingAPI})}function Zi(a){return ot(function(s){return Lo(s),a(s.target.error),!1})}function Lo(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var No="storagemutated",wl="x-storagemutated-1",Fr=Oo(null,No),Ly=(function(){function a(){}return a.prototype._lock=function(){return Ce(!se.global),++this._reculock,this._reculock===1&&!se.global&&(se.lockOwnerFor=this),this},a.prototype._unlock=function(){if(Ce(!se.global),--this._reculock===0)for(se.global||(se.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var s=this._blockedFuncs.shift();try{mn(s[1],s[0])}catch{}}return this},a.prototype._locked=function(){return this._reculock&&se.lockOwnerFor!==this},a.prototype.create=function(s){var l=this;if(!this.mode)return this;var d=this.db.idbdb,m=this.db._state.dbOpenError;if(Ce(!this.idbtrans),!s&&!d)switch(m&&m.name){case"DatabaseClosedError":throw new le.DatabaseClosed(m);case"MissingAPIError":throw new le.MissingAPI(m.message,m);default:throw new le.OpenFailed(m)}if(!this.active)throw new le.TransactionInactive;return Ce(this._completion._state===null),s=this.idbtrans=s||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):d.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),s.onerror=ot(function(p){Lo(p),l._reject(s.error)}),s.onabort=ot(function(p){Lo(p),l.active&&l._reject(new le.Abort(s.error)),l.active=!1,l.on("abort").fire(p)}),s.oncomplete=ot(function(){l.active=!1,l._resolve(),"mutatedParts"in s&&Fr.storagemutated.fire(s.mutatedParts)}),this},a.prototype._promise=function(s,l,d){var m=this;if(s==="readwrite"&&this.mode!=="readwrite")return wt(new le.ReadOnly("Transaction is readonly"));if(!this.active)return wt(new le.TransactionInactive);if(this._locked())return new Z(function(f,v){m._blockedFuncs.push([function(){m._promise(s,l,d).then(f,v)},se])});if(d)return Tr(function(){var f=new Z(function(v,y){m._lock();var x=l(v,y,m);x&&x.then&&x.then(v,y)});return f.finally(function(){return m._unlock()}),f._lib=!0,f});var p=new Z(function(f,v){var y=l(f,v,m);y&&y.then&&y.then(f,v)});return p._lib=!0,p},a.prototype._root=function(){return this.parent?this.parent._root():this},a.prototype.waitFor=function(s){var l=this._root(),d=Z.resolve(s);if(l._waitingFor)l._waitingFor=l._waitingFor.then(function(){return d});else{l._waitingFor=d,l._waitingQueue=[];var m=l.idbtrans.objectStore(l.storeNames[0]);(function f(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(m.get(-1/0).onsuccess=f)})()}var p=l._waitingFor;return new Z(function(f,v){d.then(function(y){return l._waitingQueue.push(ot(f.bind(null,y)))},function(y){return l._waitingQueue.push(ot(v.bind(null,y)))}).finally(function(){l._waitingFor===p&&(l._waitingFor=null)})})},a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new le.Abort))},a.prototype.table=function(s){var l=this._memoizedTables||(this._memoizedTables={});if(g(l,s))return l[s];var d=this.schema[s];if(!d)throw new le.NotFound("Table "+s+" not part of transaction");var m=new this.db.Table(s,d,this);return m.core=this.db.core.table(s),l[s]=m,m},a})();function Ny(a){return To(Ly.prototype,function(l,d,m,p,f){var v=this;this.db=a,this.mode=l,this.storeNames=d,this.schema=m,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=Oo(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(y,x){v._resolve=y,v._reject=x}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(y){var x=v.active;return v.active=!1,v.on.error.fire(y),v.parent?v.parent._reject(y):x&&v.idbtrans&&v.idbtrans.abort(),wt(y)})})}function Cl(a,s,l,d,m,p,f){return{name:a,keyPath:s,unique:l,multi:d,auto:m,compound:p,src:(l&&!f?"&":"")+(d?"*":"")+(m?"++":"")+wm(s)}}function wm(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Sl(a,s,l){return{name:a,primKey:s,indexes:l,mappedClass:null,idxByName:Be(l,function(d){return[d.name,d]})}}function Fy(a){return a.length===1?a[0]:a}var Fo=function(a){try{return a.only([[]]),Fo=function(){return[[]]},[[]]}catch{return Fo=function(){return hn},hn}};function kl(a){return a==null?function(){}:typeof a=="string"?By(a):function(s){return oe(s,a)}}function By(a){var s=a.split(".");return s.length===1?function(l){return l[a]}:function(l){return oe(l,a)}}function Cm(a){return[].slice.call(a)}var Vy=0;function Bo(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function $y(a,s,l){function d(w,A){var U=Cm(w.objectStoreNames);return{schema:{name:w.name,tables:U.map(function(k){return A.objectStore(k)}).map(function(k){var M=k.keyPath,O=k.autoIncrement,z=c(M),V=M==null,$={},j={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:V,compound:z,keyPath:M,autoIncrement:O,unique:!0,extractKey:kl(M)},indexes:Cm(k.indexNames).map(function(L){return k.index(L)}).map(function(L){var q=L.name,J=L.unique,G=L.multiEntry,de=L.keyPath,Se=c(de),re={name:q,compound:Se,keyPath:de,unique:J,multiEntry:G,extractKey:kl(de)};return $[Bo(de)]=re,re}),getIndexByKeyPath:function(L){return $[Bo(L)]}};return $[":id"]=j.primaryKey,M!=null&&($[Bo(M)]=j.primaryKey),j})},hasGetAll:U.length>0&&"getAll"in A.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function m(w){if(w.type===3)return null;if(w.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=w.lower,U=w.upper,k=w.lowerOpen,M=w.upperOpen,O=A===void 0?U===void 0?null:s.upperBound(U,!!M):U===void 0?s.lowerBound(A,!!k):s.bound(A,U,!!k,!!M);return O}function p(w){var A=w.name;function U(O){var z=O.trans,V=O.type,$=O.keys,j=O.values,L=O.range;return new Promise(function(q,J){q=ot(q);var G=z.objectStore(A),de=G.keyPath==null,Se=V==="put"||V==="add";if(!Se&&V!=="delete"&&V!=="deleteRange")throw new Error("Invalid operation type: "+V);var re=($||j||{length:1}).length;if($&&j&&$.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(re===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});var we,me=[],Le=[],ce=0,ht=function(er){++ce,Lo(er)};if(V==="deleteRange"){if(L.type===4)return q({numFailures:ce,failures:Le,results:[],lastResult:void 0});L.type===3?me.push(we=G.clear()):me.push(we=G.delete(m(L)))}else{var Xt=Se?de?[j,$]:[j,null]:[$,null],Ji=Xt[0],si=Xt[1];if(Se)for(var Mi=0;Mi<re;++Mi)me.push(we=si&&si[Mi]!==void 0?G[V](Ji[Mi],si[Mi]):G[V](Ji[Mi])),we.onerror=ht;else for(var Mi=0;Mi<re;++Mi)me.push(we=G[V](Ji[Mi])),we.onerror=ht}var $r=function(er){var zo=er.target.result;me.forEach(function(Hi,ls){return Hi.error!=null&&(Le[ls]=Hi.error)}),q({numFailures:ce,failures:Le,results:V==="delete"?$:me.map(function(Hi){return Hi.result}),lastResult:zo})};we.onerror=function(er){ht(er),$r(er)},we.onsuccess=$r})}function k(O){var z=O.trans,V=O.values,$=O.query,j=O.reverse,L=O.unique;return new Promise(function(q,J){q=ot(q);var G=$.index,de=$.range,Se=z.objectStore(A),re=G.isPrimaryKey?Se:Se.index(G.name),we=j?L?"prevunique":"prev":L?"nextunique":"next",me=V||!("openKeyCursor"in re)?re.openCursor(m(de),we):re.openKeyCursor(m(de),we);me.onerror=Zi(J),me.onsuccess=ot(function(Le){var ce=me.result;if(!ce){q(null);return}ce.___id=++Vy,ce.done=!1;var ht=ce.continue.bind(ce),Xt=ce.continuePrimaryKey;Xt&&(Xt=Xt.bind(ce));var Ji=ce.advance.bind(ce),si=function(){throw new Error("Cursor not started")},Mi=function(){throw new Error("Cursor not stopped")};ce.trans=z,ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=si,ce.fail=ot(J),ce.next=function(){var $r=this,er=1;return this.start(function(){return er--?$r.continue():$r.stop()}).then(function(){return $r})},ce.start=function($r){var er=new Promise(function(Hi,ls){Hi=ot(Hi),me.onerror=Zi(ls),ce.fail=ls,ce.stop=function(Ib){ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=Mi,Hi(Ib)}}),zo=function(){if(me.result)try{$r()}catch(Hi){ce.fail(Hi)}else ce.done=!0,ce.start=function(){throw new Error("Cursor behind last entry")},ce.stop()};return me.onsuccess=ot(function(Hi){me.onsuccess=zo,zo()}),ce.continue=ht,ce.continuePrimaryKey=Xt,ce.advance=Ji,zo(),er},q(ce)},J)})}function M(O){return function(z){return new Promise(function(V,$){V=ot(V);var j=z.trans,L=z.values,q=z.limit,J=z.query,G=q===1/0?void 0:q,de=J.index,Se=J.range,re=j.objectStore(A),we=de.isPrimaryKey?re:re.index(de.name),me=m(Se);if(q===0)return V({result:[]});if(O){var Le=L?we.getAll(me,G):we.getAllKeys(me,G);Le.onsuccess=function(Ji){return V({result:Ji.target.result})},Le.onerror=Zi($)}else{var ce=0,ht=L||!("openKeyCursor"in we)?we.openCursor(me):we.openKeyCursor(me),Xt=[];ht.onsuccess=function(Ji){var si=ht.result;if(!si)return V({result:Xt});if(Xt.push(L?si.value:si.primaryKey),++ce===q)return V({result:Xt});si.continue()},ht.onerror=Zi($)}})}}return{name:A,schema:w,mutate:U,getMany:function(O){var z=O.trans,V=O.keys;return new Promise(function($,j){$=ot($);for(var L=z.objectStore(A),q=V.length,J=new Array(q),G=0,de=0,Se,re=function(ce){var ht=ce.target;(J[ht._pos]=ht.result)!=null,++de===G&&$(J)},we=Zi(j),me=0;me<q;++me){var Le=V[me];Le!=null&&(Se=L.get(V[me]),Se._pos=me,Se.onsuccess=re,Se.onerror=we,++G)}G===0&&$(J)})},get:function(O){var z=O.trans,V=O.key;return new Promise(function($,j){$=ot($);var L=z.objectStore(A),q=L.get(V);q.onsuccess=function(J){return $(J.target.result)},q.onerror=Zi(j)})},query:M(y),openCursor:k,count:function(O){var z=O.query,V=O.trans,$=z.index,j=z.range;return new Promise(function(L,q){var J=V.objectStore(A),G=$.isPrimaryKey?J:J.index($.name),de=m(j),Se=de?G.count(de):G.count();Se.onsuccess=ot(function(re){return L(re.target.result)}),Se.onerror=Zi(q)})}}}var f=d(a,l),v=f.schema,y=f.hasGetAll,x=v.tables.map(function(w){return p(w)}),I={};return x.forEach(function(w){return I[w.name]=w}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(w){var A=I[w];if(!A)throw new Error("Table '".concat(w,"' not found"));return I[w]},MIN_KEY:-1/0,MAX_KEY:Fo(s),schema:v}}function zy(a,s){return s.reduce(function(l,d){var m=d.create;return e(e({},l),m(l))},a)}function jy(a,s,l,d){var m=l.IDBKeyRange;l.indexedDB;var p=zy($y(s,m,d),a.dbcore);return{dbcore:p}}function Za(a,s){var l=s.db,d=jy(a._middlewares,l,a._deps,s);a.core=d.dbcore,a.tables.forEach(function(m){var p=m.name;a.core.schema.tables.some(function(f){return f.name===p})&&(m.core=a.core.table(p),a[p]instanceof a.Table&&(a[p].core=m.core))})}function Ja(a,s,l,d){l.forEach(function(m){var p=d[m];s.forEach(function(f){var v=T(f,m);(!v||"value"in v&&v.value===void 0)&&(f===a.Transaction.prototype||f instanceof a.Transaction?C(f,m,{get:function(){return this.table(m)},set:function(y){D(this,m,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):f[m]=new a.Table(m,p))})})}function El(a,s){s.forEach(function(l){for(var d in l)l[d]instanceof a.Table&&delete l[d]})}function Hy(a,s){return a._cfg.version-s._cfg.version}function Uy(a,s,l,d){var m=a._dbSchema;l.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=Sl("$meta",km("")[0],[]),a._storeNames.push("$meta"));var p=a._createTransaction("readwrite",a._storeNames,m);p.create(l),p._completion.catch(d);var f=p._reject.bind(p),v=se.transless||se;Tr(function(){if(se.trans=p,se.transless=v,s===0)o(m).forEach(function(y){Dl(l,y,m[y].primKey,m[y].indexes)}),Za(a,l),Z.follow(function(){return a.on.populate.fire(p)}).catch(f);else return Za(a,l),Ky(a,p,s).then(function(y){return qy(a,y,p,l)}).catch(f)})}function Wy(a,s){Sm(a._dbSchema,s),s.db.version%10===0&&!s.objectStoreNames.contains("$meta")&&s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var l=ts(a,a.idbdb,s);is(a,a._dbSchema,s);for(var d=Il(l,a._dbSchema),m=function(x){if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var I=s.objectStore(x.name);x.add.forEach(function(w){Gi&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(w.src)),es(I,w)})},p=0,f=d.change;p<f.length;p++){var v=f[p],y=m(v);if(typeof y=="object")return y.value}}function Ky(a,s,l){return s.storeNames.includes("$meta")?s.table("$meta").get("version").then(function(d){return d??l}):Z.resolve(l)}function qy(a,s,l,d){var m=[],p=a._versions,f=a._dbSchema=ts(a,a.idbdb,d),v=p.filter(function(x){return x._cfg.version>=s});if(v.length===0)return Z.resolve();v.forEach(function(x){m.push(function(){var I=f,w=x._cfg.dbschema;is(a,I,d),is(a,w,d),f=a._dbSchema=w;var A=Il(I,w);A.add.forEach(function(V){Dl(d,V[0],V[1].primKey,V[1].indexes)}),A.change.forEach(function(V){if(V.recreate)throw new le.Upgrade("Not yet support for changing primary key");var $=d.objectStore(V.name);V.add.forEach(function(j){return es($,j)}),V.change.forEach(function(j){$.deleteIndex(j.name),es($,j)}),V.del.forEach(function(j){return $.deleteIndex(j)})});var U=x._cfg.contentUpgrade;if(U&&x._cfg.version>s){Za(a,d),l._memoizedTables={};var k=Et(w);A.del.forEach(function(V){k[V]=I[V]}),El(a,[a.Transaction.prototype]),Ja(a,[a.Transaction.prototype],o(k),k),l.schema=k;var M=il(U);M&&Nn();var O,z=Z.follow(function(){if(O=U(l),O&&M){var V=Ar.bind(null,null);O.then(V,V)}});return O&&typeof O.then=="function"?Z.resolve(O):z.then(function(){return O})}}),m.push(function(I){var w=x._cfg.dbschema;Qy(w,I),El(a,[a.Transaction.prototype]),Ja(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),l.schema=a._dbSchema}),m.push(function(I){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===x._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(w){return w!=="$meta"})):I.objectStore("$meta").put(x._cfg.version,"version"))})});function y(){return m.length?Z.resolve(m.shift()(l.idbtrans)).then(y):Z.resolve()}return y().then(function(){Sm(f,d)})}function Il(a,s){var l={del:[],add:[],change:[]},d;for(d in a)s[d]||l.del.push(d);for(d in s){var m=a[d],p=s[d];if(!m)l.add.push([d,p]);else{var f={name:d,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||m.primKey.auto!==p.primKey.auto)f.recreate=!0,l.change.push(f);else{var v=m.idxByName,y=p.idxByName,x=void 0;for(x in v)y[x]||f.del.push(x);for(x in y){var I=v[x],w=y[x];I?I.src!==w.src&&f.change.push(w):f.add.push(w)}(f.del.length>0||f.add.length>0||f.change.length>0)&&l.change.push(f)}}}return l}function Dl(a,s,l,d){var m=a.db.createObjectStore(s,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return d.forEach(function(p){return es(m,p)}),m}function Sm(a,s){o(a).forEach(function(l){s.db.objectStoreNames.contains(l)||(Gi&&console.debug("Dexie: Creating missing table",l),Dl(s,l,a[l].primKey,a[l].indexes))})}function Qy(a,s){[].slice.call(s.db.objectStoreNames).forEach(function(l){return a[l]==null&&s.db.deleteObjectStore(l)})}function es(a,s){a.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function ts(a,s,l){var d={},m=te(s.objectStoreNames,0);return m.forEach(function(p){for(var f=l.objectStore(p),v=f.keyPath,y=Cl(wm(v),v||"",!0,!1,!!f.autoIncrement,v&&typeof v!="string",!0),x=[],I=0;I<f.indexNames.length;++I){var w=f.index(f.indexNames[I]);v=w.keyPath;var A=Cl(w.name,v,!!w.unique,!!w.multiEntry,!1,v&&typeof v!="string",!1);x.push(A)}d[p]=Sl(p,y,x)}),d}function Xy(a,s,l){a.verno=s.version/10;var d=a._dbSchema=ts(a,s,l);a._storeNames=te(s.objectStoreNames,0),Ja(a,[a._allTables],o(d),d)}function Yy(a,s){var l=ts(a,a.idbdb,s),d=Il(l,a._dbSchema);return!(d.add.length||d.change.some(function(m){return m.add.length||m.change.length}))}function is(a,s,l){for(var d=l.db.objectStoreNames,m=0;m<d.length;++m){var p=d[m],f=l.objectStore(p);a._hasGetAll="getAll"in f;for(var v=0;v<f.indexNames.length;++v){var y=f.indexNames[v],x=f.index(y).keyPath,I=typeof x=="string"?x:"["+te(x).join("+")+"]";if(s[p]){var w=s[p].idxByName[I];w&&(w.name=y,delete s[p].idxByName[I],s[p].idxByName[y]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function km(a){return a.split(",").map(function(s,l){s=s.trim();var d=s.replace(/([&*]|\+\+)/g,""),m=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return Cl(d,m||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),c(m),l===0)})}var Gy=(function(){function a(){}return a.prototype._parseStoresSpec=function(s,l){o(s).forEach(function(d){if(s[d]!==null){var m=km(s[d]),p=m.shift();if(p.unique=!0,p.multi)throw new le.Schema("Primary key cannot be multi-valued");m.forEach(function(f){if(f.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")}),l[d]=Sl(d,p,m)}})},a.prototype.stores=function(s){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,s):s;var d=l._versions,m={},p={};return d.forEach(function(f){u(m,f._cfg.storesSource),p=f._cfg.dbschema={},f._parseStoresSpec(m,p)}),l._dbSchema=p,El(l,[l._allTables,l,l.Transaction.prototype]),Ja(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],o(p),p),l._storeNames=o(p),this},a.prototype.upgrade=function(s){return this._cfg.contentUpgrade=ol(this._cfg.contentUpgrade||Ye,s),this},a})();function Zy(a){return To(Gy.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Rl(a,s){var l=a._dbNamesDB;return l||(l=a._dbNamesDB=new pr(qa,{addons:[],indexedDB:a,IDBKeyRange:s}),l.version(1).stores({dbnames:"name"})),l.table("dbnames")}function Ml(a){return a&&typeof a.databases=="function"}function Jy(a){var s=a.indexedDB,l=a.IDBKeyRange;return Ml(s)?Promise.resolve(s.databases()).then(function(d){return d.map(function(m){return m.name}).filter(function(m){return m!==qa})}):Rl(s,l).toCollection().primaryKeys()}function eb(a,s){var l=a.indexedDB,d=a.IDBKeyRange;!Ml(l)&&s!==qa&&Rl(l,d).put({name:s}).catch(Ye)}function tb(a,s){var l=a.indexedDB,d=a.IDBKeyRange;!Ml(l)&&s!==qa&&Rl(l,d).delete(s).catch(Ye)}function Pl(a){return Tr(function(){return se.letThrough=!0,a()})}function ib(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var s;return new Promise(function(l){var d=function(){return indexedDB.databases().finally(l)};s=setInterval(d,100),d()}).finally(function(){return clearInterval(s)})}var Ol;function Tl(a){return!("from"in a)}var Qt=function(a,s){if(this)u(this,arguments.length?{d:1,from:a,to:arguments.length>1?s:a}:{d:0});else{var l=new Qt;return a&&"d"in a&&u(l,a),l}};b(Qt.prototype,(Ol={add:function(a){return $o(this,a),this},addKey:function(a){return Vo(this,a,a),this},addKeys:function(a){var s=this;return a.forEach(function(l){return Vo(s,l,l)}),this},hasKey:function(a){var s=rs(this).next(a).value;return s&&Pe(s.from,a)<=0&&Pe(s.to,a)>=0}},Ol[Ot]=function(){return rs(this)},Ol));function Vo(a,s,l){var d=Pe(s,l);if(!isNaN(d)){if(d>0)throw RangeError();if(Tl(a))return u(a,{from:s,to:l,d:1});var m=a.l,p=a.r;if(Pe(l,a.from)<0)return m?Vo(m,s,l):a.l={from:s,to:l,d:1,l:null,r:null},Im(a);if(Pe(s,a.to)>0)return p?Vo(p,s,l):a.r={from:s,to:l,d:1,l:null,r:null},Im(a);Pe(s,a.from)<0&&(a.from=s,a.l=null,a.d=p?p.d+1:1),Pe(l,a.to)>0&&(a.to=l,a.r=null,a.d=a.l?a.l.d+1:1);var f=!a.r;m&&!a.l&&$o(a,m),p&&f&&$o(a,p)}}function $o(a,s){function l(d,m){var p=m.from,f=m.to,v=m.l,y=m.r;Vo(d,p,f),v&&l(d,v),y&&l(d,y)}Tl(s)||l(a,s)}function Em(a,s){var l=rs(s),d=l.next();if(d.done)return!1;for(var m=d.value,p=rs(a),f=p.next(m.from),v=f.value;!d.done&&!f.done;){if(Pe(v.from,m.to)<=0&&Pe(v.to,m.from)>=0)return!0;Pe(m.from,v.from)<0?m=(d=l.next(v.from)).value:v=(f=p.next(m.from)).value}return!1}function rs(a){var s=Tl(a)?null:{s:0,n:a};return{next:function(l){for(var d=arguments.length>0;s;)switch(s.s){case 0:if(s.s=1,d)for(;s.n.l&&Pe(l,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!d||Pe(l,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function Im(a){var s,l,d=(((s=a.r)===null||s===void 0?void 0:s.d)||0)-(((l=a.l)===null||l===void 0?void 0:l.d)||0),m=d>1?"r":d<-1?"l":"";if(m){var p=m==="r"?"l":"r",f=e({},a),v=a[m];a.from=v.from,a.to=v.to,a[m]=v[m],f[m]=v[p],a[p]=f,f.d=Dm(f)}a.d=Dm(a)}function Dm(a){var s=a.r,l=a.l;return(s?l?Math.max(s.d,l.d):s.d:l?l.d:0)+1}function ns(a,s){return o(s).forEach(function(l){a[l]?$o(a[l],s[l]):a[l]=bt(s[l])}),a}function Al(a,s){return a.all||s.all||Object.keys(a).some(function(l){return s[l]&&Em(s[l],a[l])})}var fn={},Ll={},Nl=!1;function os(a,s){ns(Ll,a),Nl||(Nl=!0,setTimeout(function(){Nl=!1;var l=Ll;Ll={},Fl(l,!1)},0))}function Fl(a,s){s===void 0&&(s=!1);var l=new Set;if(a.all)for(var d=0,m=Object.values(fn);d<m.length;d++){var p=m[d];Rm(p,a,l,s)}else for(var f in a){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(f);if(v){var y=v[1],x=v[2],p=fn["idb://".concat(y,"/").concat(x)];p&&Rm(p,a,l,s)}}l.forEach(function(I){return I()})}function Rm(a,s,l,d){for(var m=[],p=0,f=Object.entries(a.queries.query);p<f.length;p++){for(var v=f[p],y=v[0],x=v[1],I=[],w=0,A=x;w<A.length;w++){var U=A[w];Al(s,U.obsSet)?U.subscribers.forEach(function(z){return l.add(z)}):d&&I.push(U)}d&&m.push([y,I])}if(d)for(var k=0,M=m;k<M.length;k++){var O=M[k],y=O[0],I=O[1];a.queries.query[y]=I}}function rb(a){var s=a._state,l=a._deps.indexedDB;if(s.isBeingOpened||a.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?wt(s.dbOpenError):a});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var d=s.openCanceller,m=Math.round(a.verno*10),p=!1;function f(){if(s.openCanceller!==d)throw new le.DatabaseClosed("db.open() was cancelled")}var v=s.dbReadyResolve,y=null,x=!1,I=function(){return new Z(function(w,A){if(f(),!l)throw new le.MissingAPI;var U=a.name,k=s.autoSchema||!m?l.open(U):l.open(U,m);if(!k)throw new le.MissingAPI;k.onerror=Zi(A),k.onblocked=ot(a._fireOnBlocked),k.onupgradeneeded=ot(function(M){if(y=k.transaction,s.autoSchema&&!a._options.allowEmptyDB){k.onerror=Lo,y.abort(),k.result.close();var O=l.deleteDatabase(U);O.onsuccess=O.onerror=ot(function(){A(new le.NoSuchDatabase("Database ".concat(U," doesnt exist")))})}else{y.onerror=Zi(A);var z=M.oldVersion>Math.pow(2,62)?0:M.oldVersion;x=z<1,a.idbdb=k.result,p&&Wy(a,y),Uy(a,z/10,y,A)}},A),k.onsuccess=ot(function(){y=null;var M=a.idbdb=k.result,O=te(M.objectStoreNames);if(O.length>0)try{var z=M.transaction(Fy(O),"readonly");if(s.autoSchema)Xy(a,M,z);else if(is(a,a._dbSchema,z),!Yy(a,z)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),M.close(),m=M.version+1,p=!0,w(I());Za(a,z)}catch{}Fn.push(a),M.onversionchange=ot(function(V){s.vcFired=!0,a.on("versionchange").fire(V)}),M.onclose=ot(function(V){a.on("close").fire(V)}),x&&eb(a._deps,U),w()},A)}).catch(function(w){switch(w?.name){case"UnknownError":if(s.PR1398_maxLoop>0)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),I();break;case"VersionError":if(m>0)return m=0,I();break}return Z.reject(w)})};return Z.race([d,(typeof navigator>"u"?Z.resolve():ib()).then(I)]).then(function(){return f(),s.onReadyBeingFired=[],Z.resolve(Pl(function(){return a.on.ready.fire(a.vip)})).then(function w(){if(s.onReadyBeingFired.length>0){var A=s.onReadyBeingFired.reduce(ol,Ye);return s.onReadyBeingFired=[],Z.resolve(Pl(function(){return A(a.vip)})).then(w)}})}).finally(function(){s.openCanceller===d&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(w){s.dbOpenError=w;try{y&&y.abort()}catch{}return d===s.openCanceller&&a._close(),wt(w)}).finally(function(){s.openComplete=!0,v()}).then(function(){if(x){var w={};a.tables.forEach(function(A){A.schema.indexes.forEach(function(U){U.name&&(w["idb://".concat(a.name,"/").concat(A.name,"/").concat(U.name)]=new Qt(-1/0,[[[]]]))}),w["idb://".concat(a.name,"/").concat(A.name,"/")]=w["idb://".concat(a.name,"/").concat(A.name,"/:dels")]=new Qt(-1/0,[[[]]])}),Fr(No).fire(w),Fl(w,!0)}return a})}function Bl(a){var s=function(f){return a.next(f)},l=function(f){return a.throw(f)},d=p(s),m=p(l);function p(f){return function(v){var y=f(v),x=y.value;return y.done?x:!x||typeof x.then!="function"?c(x)?Promise.all(x).then(d,m):d(x):x.then(d,m)}}return p(s)()}function nb(a,s,l){var d=arguments.length;if(d<2)throw new le.InvalidArgument("Too few arguments");for(var m=new Array(d-1);--d;)m[d-1]=arguments[d];l=m.pop();var p=Ae(m);return[a,p,l]}function Mm(a,s,l,d,m){return Z.resolve().then(function(){var p=se.transless||se,f=a._createTransaction(s,l,a._dbSchema,d);f.explicit=!0;var v={trans:f,transless:p};if(d)f.idbtrans=d.idbtrans;else try{f.create(),f.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(w){return w.name===nl.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),a.close({disableAutoOpen:!1}),a.open().then(function(){return Mm(a,s,l,null,m)})):wt(w)}var y=il(m);y&&Nn();var x,I=Z.follow(function(){if(x=m.call(f,f),x)if(y){var w=Ar.bind(null,null);x.then(w,w)}else typeof x.next=="function"&&typeof x.throw=="function"&&(x=Bl(x))},v);return(x&&typeof x.then=="function"?Z.resolve(x).then(function(w){return f.active?w:wt(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return x})).then(function(w){return d&&f._resolve(),f._completion.then(function(){return w})}).catch(function(w){return f._reject(w),wt(w)})})}function as(a,s,l){for(var d=c(a)?a.slice():[a],m=0;m<l;++m)d.push(s);return d}function ob(a){return e(e({},a),{table:function(s){var l=a.table(s),d=l.schema,m={},p=[];function f(M,O,z){var V=Bo(M),$=m[V]=m[V]||[],j=M==null?0:typeof M=="string"?1:M.length,L=O>0,q=e(e({},z),{name:L?"".concat(V,"(virtual-from:").concat(z.name,")"):z.name,lowLevelIndex:z,isVirtual:L,keyTail:O,keyLength:j,extractKey:kl(M),unique:!L&&z.unique});if($.push(q),q.isPrimaryKey||p.push(q),j>1){var J=j===2?M[0]:M.slice(0,j-1);f(J,O+1,z)}return $.sort(function(G,de){return G.keyTail-de.keyTail}),q}var v=f(d.primaryKey.keyPath,0,d.primaryKey);m[":id"]=[v];for(var y=0,x=d.indexes;y<x.length;y++){var I=x[y];f(I.keyPath,0,I)}function w(M){var O=m[Bo(M)];return O&&O[0]}function A(M,O){return{type:M.type===1?2:M.type,lower:as(M.lower,M.lowerOpen?a.MAX_KEY:a.MIN_KEY,O),lowerOpen:!0,upper:as(M.upper,M.upperOpen?a.MIN_KEY:a.MAX_KEY,O),upperOpen:!0}}function U(M){var O=M.query.index;return O.isVirtual?e(e({},M),{query:{index:O.lowLevelIndex,range:A(M.query.range,O.keyTail)}}):M}var k=e(e({},l),{schema:e(e({},d),{primaryKey:v,indexes:p,getIndexByKeyPath:w}),count:function(M){return l.count(U(M))},query:function(M){return l.query(U(M))},openCursor:function(M){var O=M.query.index,z=O.keyTail,V=O.isVirtual,$=O.keyLength;if(!V)return l.openCursor(M);function j(L){function q(G){G!=null?L.continue(as(G,M.reverse?a.MAX_KEY:a.MIN_KEY,z)):M.unique?L.continue(L.key.slice(0,$).concat(M.reverse?a.MIN_KEY:a.MAX_KEY,z)):L.continue()}var J=Object.create(L,{continue:{value:q},continuePrimaryKey:{value:function(G,de){L.continuePrimaryKey(as(G,a.MAX_KEY,z),de)}},primaryKey:{get:function(){return L.primaryKey}},key:{get:function(){var G=L.key;return $===1?G[0]:G.slice(0,$)}},value:{get:function(){return L.value}}});return J}return l.openCursor(U(M)).then(function(L){return L&&j(L)})}});return k}})}var ab={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ob};function Vl(a,s,l,d){return l=l||{},d=d||"",o(a).forEach(function(m){if(!g(s,m))l[d+m]=void 0;else{var p=a[m],f=s[m];if(typeof p=="object"&&typeof f=="object"&&p&&f){var v=rt(p),y=rt(f);v!==y?l[d+m]=s[m]:v==="Object"?Vl(p,f,l,d+m+"."):p!==f&&(l[d+m]=s[m])}else p!==f&&(l[d+m]=s[m])}}),o(s).forEach(function(m){g(a,m)||(l[d+m]=s[m])}),l}function $l(a,s){return s.type==="delete"?s.keys:s.keys||s.values.map(a.extractKey)}var sb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return e(e({},a),{table:function(s){var l=a.table(s),d=l.schema.primaryKey,m=e(e({},l),{mutate:function(p){var f=se.trans,v=f.table(s).hook,y=v.deleting,x=v.creating,I=v.updating;switch(p.type){case"add":if(x.fire===Ye)break;return f._promise("readwrite",function(){return w(p)},!0);case"put":if(x.fire===Ye&&I.fire===Ye)break;return f._promise("readwrite",function(){return w(p)},!0);case"delete":if(y.fire===Ye)break;return f._promise("readwrite",function(){return w(p)},!0);case"deleteRange":if(y.fire===Ye)break;return f._promise("readwrite",function(){return A(p)},!0)}return l.mutate(p);function w(k){var M=se.trans,O=k.keys||$l(d,k);if(!O)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?e(e({},k),{keys:O}):e({},k),k.type!=="delete"&&(k.values=r([],k.values,!0)),k.keys&&(k.keys=r([],k.keys,!0)),cb(l,k,O).then(function(z){var V=O.map(function($,j){var L=z[j],q={onerror:null,onsuccess:null};if(k.type==="delete")y.fire.call(q,$,L,M);else if(k.type==="add"||L===void 0){var J=x.fire.call(q,$,k.values[j],M);$==null&&J!=null&&($=J,k.keys[j]=$,d.outbound||ve(k.values[j],d.keyPath,$))}else{var G=Vl(L,k.values[j]),de=I.fire.call(q,G,$,L,M);if(de){var Se=k.values[j];Object.keys(de).forEach(function(re){g(Se,re)?Se[re]=de[re]:ve(Se,re,de[re])})}}return q});return l.mutate(k).then(function($){for(var j=$.failures,L=$.results,q=$.numFailures,J=$.lastResult,G=0;G<O.length;++G){var de=L?L[G]:O[G],Se=V[G];de==null?Se.onerror&&Se.onerror(j[G]):Se.onsuccess&&Se.onsuccess(k.type==="put"&&z[G]?k.values[G]:de)}return{failures:j,results:L,numFailures:q,lastResult:J}}).catch(function($){return V.forEach(function(j){return j.onerror&&j.onerror($)}),Promise.reject($)})})}function A(k){return U(k.trans,k.range,1e4)}function U(k,M,O){return l.query({trans:k,values:!1,query:{index:d,range:M},limit:O}).then(function(z){var V=z.result;return w({type:"delete",keys:V,trans:k}).then(function($){return $.numFailures>0?Promise.reject($.failures[0]):V.length<O?{failures:[],numFailures:0,lastResult:void 0}:U(k,e(e({},M),{lower:V[V.length-1],lowerOpen:!0}),O)})})}}});return m}})}};function cb(a,s,l){return s.type==="add"?Promise.resolve([]):a.getMany({trans:s.trans,keys:l,cache:"immutable"})}function Pm(a,s,l){try{if(!s||s.keys.length<a.length)return null;for(var d=[],m=0,p=0;m<s.keys.length&&p<a.length;++m)Pe(s.keys[m],a[p])===0&&(d.push(l?xt(s.values[m]):s.values[m]),++p);return d.length===a.length?d:null}catch{return null}}var lb={stack:"dbcore",level:-1,create:function(a){return{table:function(s){var l=a.table(s);return e(e({},l),{getMany:function(d){if(!d.cache)return l.getMany(d);var m=Pm(d.keys,d.trans._cache,d.cache==="clone");return m?Z.resolve(m):l.getMany(d).then(function(p){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?xt(p):p},p})},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),l.mutate(d)}})}}}};function Om(a,s){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function Tm(a,s){switch(a){case"query":return s.values&&!s.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var db={stack:"dbcore",level:0,name:"Observability",create:function(a){var s=a.schema.name,l=new Qt(a.MIN_KEY,a.MAX_KEY);return e(e({},a),{transaction:function(d,m,p){if(se.subscr&&m!=="readonly")throw new le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(se.querier));return a.transaction(d,m,p)},table:function(d){var m=a.table(d),p=m.schema,f=p.primaryKey,v=p.indexes,y=f.extractKey,x=f.outbound,I=f.autoIncrement&&v.filter(function(k){return k.compound&&k.keyPath.includes(f.keyPath)}),w=e(e({},m),{mutate:function(k){var M,O,z=k.trans,V=k.mutatedParts||(k.mutatedParts={}),$=function(me){var Le="idb://".concat(s,"/").concat(d,"/").concat(me);return V[Le]||(V[Le]=new Qt)},j=$(""),L=$(":dels"),q=k.type,J=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[$l(f,k).filter(function(me){return me}),k.values]:[],G=J[0],de=J[1],Se=k.trans._cache;if(c(G)){j.addKeys(G);var re=q==="delete"||G.length===de.length?Pm(G,Se):null;re||L.addKeys(G),(re||de)&&ub($,p,re,de)}else if(G){var we={from:(M=G.lower)!==null&&M!==void 0?M:a.MIN_KEY,to:(O=G.upper)!==null&&O!==void 0?O:a.MAX_KEY};L.add(we),j.add(we)}else j.add(l),L.add(l),p.indexes.forEach(function(me){return $(me.name).add(l)});return m.mutate(k).then(function(me){return G&&(k.type==="add"||k.type==="put")&&(j.addKeys(me.results),I&&I.forEach(function(Le){for(var ce=k.values.map(function(si){return Le.extractKey(si)}),ht=Le.keyPath.findIndex(function(si){return si===f.keyPath}),Xt=0,Ji=me.results.length;Xt<Ji;++Xt)ce[Xt][ht]=me.results[Xt];$(Le.name).addKeys(ce)})),z.mutatedParts=ns(z.mutatedParts||{},V),me})}}),A=function(k){var M,O,z=k.query,V=z.index,$=z.range;return[V,new Qt((M=$.lower)!==null&&M!==void 0?M:a.MIN_KEY,(O=$.upper)!==null&&O!==void 0?O:a.MAX_KEY)]},U={get:function(k){return[f,new Qt(k.key)]},getMany:function(k){return[f,new Qt().addKeys(k.keys)]},count:A,query:A,openCursor:A};return o(U).forEach(function(k){w[k]=function(M){var O=se.subscr,z=!!O,V=Om(se,m)&&Tm(k,M),$=V?M.obsSet={}:O;if(z){var j=function(re){var we="idb://".concat(s,"/").concat(d,"/").concat(re);return $[we]||($[we]=new Qt)},L=j(""),q=j(":dels"),J=U[k](M),G=J[0],de=J[1];if(k==="query"&&G.isPrimaryKey&&!M.values?q.add(de):j(G.name||"").add(de),!G.isPrimaryKey)if(k==="count")q.add(l);else{var Se=k==="query"&&x&&M.values&&m.query(e(e({},M),{values:!1}));return m[k].apply(this,arguments).then(function(re){if(k==="query"){if(x&&M.values)return Se.then(function(ce){var ht=ce.result;return L.addKeys(ht),re});var we=M.values?re.result.map(y):re.result;M.values?L.addKeys(we):q.addKeys(we)}else if(k==="openCursor"){var me=re,Le=M.values;return me&&Object.create(me,{key:{get:function(){return q.addKey(me.primaryKey),me.key}},primaryKey:{get:function(){var ce=me.primaryKey;return q.addKey(ce),ce}},value:{get:function(){return Le&&L.addKey(me.primaryKey),me.value}}})}return re})}}return m[k].apply(this,arguments)}}),w}})}};function ub(a,s,l,d){function m(p){var f=a(p.name||"");function v(x){return x!=null?p.extractKey(x):null}var y=function(x){return p.multiEntry&&c(x)?x.forEach(function(I){return f.addKey(I)}):f.addKey(x)};(l||d).forEach(function(x,I){var w=l&&v(l[I]),A=d&&v(d[I]);Pe(w,A)!==0&&(w!=null&&y(w),A!=null&&y(A))})}s.indexes.forEach(m)}function Am(a,s,l){if(l.numFailures===0)return s;if(s.type==="deleteRange")return null;var d=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1;if(l.numFailures===d)return null;var m=e({},s);return c(m.keys)&&(m.keys=m.keys.filter(function(p,f){return!(f in l.failures)})),"values"in m&&c(m.values)&&(m.values=m.values.filter(function(p,f){return!(f in l.failures)})),m}function mb(a,s){return s.lower===void 0?!0:s.lowerOpen?Pe(a,s.lower)>0:Pe(a,s.lower)>=0}function hb(a,s){return s.upper===void 0?!0:s.upperOpen?Pe(a,s.upper)<0:Pe(a,s.upper)<=0}function zl(a,s){return mb(a,s)&&hb(a,s)}function Lm(a,s,l,d,m,p){if(!l||l.length===0)return a;var f=s.query.index,v=f.multiEntry,y=s.query.range,x=d.schema.primaryKey,I=x.extractKey,w=f.extractKey,A=(f.lowLevelIndex||f).extractKey,U=l.reduce(function(k,M){var O=k,z=[];if(M.type==="add"||M.type==="put")for(var V=new Qt,$=M.values.length-1;$>=0;--$){var j=M.values[$],L=I(j);if(!V.hasKey(L)){var q=w(j);(v&&c(q)?q.some(function(re){return zl(re,y)}):zl(q,y))&&(V.addKey(L),z.push(j))}}switch(M.type){case"add":{var J=new Qt().addKeys(s.values?k.map(function(re){return I(re)}):k);O=k.concat(s.values?z.filter(function(re){var we=I(re);return J.hasKey(we)?!1:(J.addKey(we),!0)}):z.map(function(re){return I(re)}).filter(function(re){return J.hasKey(re)?!1:(J.addKey(re),!0)}));break}case"put":{var G=new Qt().addKeys(M.values.map(function(re){return I(re)}));O=k.filter(function(re){return!G.hasKey(s.values?I(re):re)}).concat(s.values?z:z.map(function(re){return I(re)}));break}case"delete":var de=new Qt().addKeys(M.keys);O=k.filter(function(re){return!de.hasKey(s.values?I(re):re)});break;case"deleteRange":var Se=M.range;O=k.filter(function(re){return!zl(I(re),Se)});break}return O},a);return U===a?a:(U.sort(function(k,M){return Pe(A(k),A(M))||Pe(I(k),I(M))}),s.limit&&s.limit<1/0&&(U.length>s.limit?U.length=s.limit:a.length===s.limit&&U.length<s.limit&&(m.dirty=!0)),p?Object.freeze(U):U)}function Nm(a,s){return Pe(a.lower,s.lower)===0&&Pe(a.upper,s.upper)===0&&!!a.lowerOpen==!!s.lowerOpen&&!!a.upperOpen==!!s.upperOpen}function pb(a,s,l,d){if(a===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;var m=Pe(a,s);if(m===0){if(l&&d)return 0;if(l)return 1;if(d)return-1}return m}function fb(a,s,l,d){if(a===void 0)return s!==void 0?1:0;if(s===void 0)return-1;var m=Pe(a,s);if(m===0){if(l&&d)return 0;if(l)return-1;if(d)return 1}return m}function gb(a,s){return pb(a.lower,s.lower,a.lowerOpen,s.lowerOpen)<=0&&fb(a.upper,s.upper,a.upperOpen,s.upperOpen)>=0}function _b(a,s,l,d){var m=fn["idb://".concat(a,"/").concat(s)];if(!m)return[];var p=m.queries[l];if(!p)return[null,!1,m,null];var f=d.query?d.query.index.name:null,v=p[f||""];if(!v)return[null,!1,m,null];switch(l){case"query":var y=v.find(function(w){return w.req.limit===d.limit&&w.req.values===d.values&&Nm(w.req.query.range,d.query.range)});if(y)return[y,!0,m,v];var x=v.find(function(w){var A="limit"in w.req?w.req.limit:1/0;return A>=d.limit&&(d.values?w.req.values:!0)&&gb(w.req.query.range,d.query.range)});return[x,!1,m,v];case"count":var I=v.find(function(w){return Nm(w.req.query.range,d.query.range)});return[I,!!I,m,v]}}function vb(a,s,l,d){a.subscribers.add(l),d.addEventListener("abort",function(){a.subscribers.delete(l),a.subscribers.size===0&&yb(a,s)})}function yb(a,s){setTimeout(function(){a.subscribers.size===0&&nt(s,a)},3e3)}var bb={stack:"dbcore",level:0,name:"Cache",create:function(a){var s=a.schema.name,l=e(e({},a),{transaction:function(d,m,p){var f=a.transaction(d,m,p);if(m==="readwrite"){var v=new AbortController,y=v.signal,x=function(I){return function(){if(v.abort(),m==="readwrite"){for(var w=new Set,A=0,U=d;A<U.length;A++){var k=U[A],M=fn["idb://".concat(s,"/").concat(k)];if(M){var O=a.table(k),z=M.optimisticOps.filter(function(Le){return Le.trans===f});if(f._explicit&&I&&f.mutatedParts)for(var V=0,$=Object.values(M.queries.query);V<$.length;V++)for(var j=$[V],L=0,q=j.slice();L<q.length;L++){var J=q[L];Al(J.obsSet,f.mutatedParts)&&(nt(j,J),J.subscribers.forEach(function(Le){return w.add(Le)}))}else if(z.length>0){M.optimisticOps=M.optimisticOps.filter(function(Le){return Le.trans!==f});for(var G=0,de=Object.values(M.queries.query);G<de.length;G++)for(var j=de[G],Se=0,re=j.slice();Se<re.length;Se++){var J=re[Se];if(J.res!=null&&f.mutatedParts)if(I&&!J.dirty){var we=Object.isFrozen(J.res),me=Lm(J.res,J.req,z,O,J,we);J.dirty?(nt(j,J),J.subscribers.forEach(function(ht){return w.add(ht)})):me!==J.res&&(J.res=me,J.promise=Z.resolve({result:me}))}else J.dirty&&nt(j,J),J.subscribers.forEach(function(ht){return w.add(ht)})}}}}w.forEach(function(Le){return Le()})}}};f.addEventListener("abort",x(!1),{signal:y}),f.addEventListener("error",x(!1),{signal:y}),f.addEventListener("complete",x(!0),{signal:y})}return f},table:function(d){var m=a.table(d),p=m.schema.primaryKey,f=e(e({},m),{mutate:function(v){var y=se.trans;if(p.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return m.mutate(v);var x=fn["idb://".concat(s,"/").concat(d)];if(!x)return m.mutate(v);var I=m.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||$l(p,v).some(function(w){return w==null}))?I.then(function(w){var A=e(e({},v),{values:v.values.map(function(k,M){var O;if(w.failures[M])return k;var z=!((O=p.keyPath)===null||O===void 0)&&O.includes(".")?xt(k):e({},k);return ve(z,p.keyPath,w.results[M]),z})}),U=Am(x,A,w);x.optimisticOps.push(U),queueMicrotask(function(){return v.mutatedParts&&os(v.mutatedParts)})}):(x.optimisticOps.push(v),v.mutatedParts&&os(v.mutatedParts),I.then(function(w){if(w.numFailures>0){nt(x.optimisticOps,v);var A=Am(x,v,w);A&&x.optimisticOps.push(A),v.mutatedParts&&os(v.mutatedParts)}}),I.catch(function(){nt(x.optimisticOps,v),v.mutatedParts&&os(v.mutatedParts)})),I},query:function(v){var y;if(!Om(se,m)||!Tm("query",v))return m.query(v);var x=((y=se.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",I=se,w=I.requery,A=I.signal,U=_b(s,d,"query",v),k=U[0],M=U[1],O=U[2],z=U[3];if(k&&M)k.obsSet=v.obsSet;else{var V=m.query(v).then(function($){var j=$.result;if(k&&(k.res=j),x){for(var L=0,q=j.length;L<q;++L)Object.freeze(j[L]);Object.freeze(j)}else $.result=xt(j);return $}).catch(function($){return z&&k&&nt(z,k),Promise.reject($)});k={obsSet:v.obsSet,promise:V,subscribers:new Set,type:"query",req:v,dirty:!1},z?z.push(k):(z=[k],O||(O=fn["idb://".concat(s,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),O.queries.query[v.query.index.name||""]=z)}return vb(k,z,w,A),k.promise.then(function($){return{result:Lm($.result,v,O?.optimisticOps,m,k,x)}})}});return f}});return l}};function ss(a,s){return new Proxy(a,{get:function(l,d,m){return d==="db"?s:Reflect.get(l,d,m)}})}var pr=(function(){function a(s,l){var d=this;this._middlewares={},this.verno=0;var m=a.dependencies;this._options=l=e({addons:a.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange};var p=l.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ye,dbReadyPromise:null,cancelOpen:Ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};f.dbReadyPromise=new Z(function(y){f.dbReadyResolve=y}),f.openCanceller=new Z(function(y,x){f.cancelOpen=x}),this._state=f,this.name=s,this.on=Oo(this,"populate","blocked","versionchange","close",{ready:[ol,Ye]}),this.on.ready.subscribe=ie(this.on.ready.subscribe,function(y){return function(x,I){a.vip(function(){var w=d._state;if(w.openComplete)w.dbOpenError||Z.resolve().then(x),I&&y(x);else if(w.onReadyBeingFired)w.onReadyBeingFired.push(x),I&&y(x);else{y(x);var A=d;I||y(function U(){A.on.ready.unsubscribe(x),A.on.ready.unsubscribe(U)})}})}}),this.Collection=Dy(this),this.Table=Sy(this),this.Transaction=Ny(this),this.Version=Zy(this),this.WhereClause=Ay(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Fo(l.IDBKeyRange),this._createTransaction=function(y,x,I,w){return new d.Transaction(y,x,I,d._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(y){d.on("blocked").fire(y),Fn.filter(function(x){return x.name===d.name&&x!==d&&!x._state.vcFired}).map(function(x){return x.on("versionchange").fire(y)})},this.use(lb),this.use(bb),this.use(db),this.use(ab),this.use(sb);var v=new Proxy(this,{get:function(y,x,I){if(x==="_vip")return!0;if(x==="table")return function(A){return ss(d.table(A),v)};var w=Reflect.get(y,x,I);return w instanceof _m?ss(w,v):x==="tables"?w.map(function(A){return ss(A,v)}):x==="_createTransaction"?function(){var A=w.apply(this,arguments);return ss(A,v)}:w}});this.vip=v,p.forEach(function(y){return y(d)})}return a.prototype.version=function(s){if(isNaN(s)||s<.1)throw new le.Type("Given version is not a positive number");if(s=Math.round(s*10)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var l=this._versions,d=l.filter(function(m){return m._cfg.version===s})[0];return d||(d=new this.Version(s),l.push(d),l.sort(Hy),d.stores({}),this._state.autoSchema=!1,d)},a.prototype._whenReady=function(s){var l=this;return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?s():new Z(function(d,m){if(l._state.openComplete)return m(new le.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen){m(new le.DatabaseClosed);return}l.open().catch(Ye)}l._state.dbReadyPromise.then(d,m)}).then(s)},a.prototype.use=function(s){var l=s.stack,d=s.create,m=s.level,p=s.name;p&&this.unuse({stack:l,name:p});var f=this._middlewares[l]||(this._middlewares[l]=[]);return f.push({stack:l,create:d,level:m??10,name:p}),f.sort(function(v,y){return v.level-y.level}),this},a.prototype.unuse=function(s){var l=s.stack,d=s.name,m=s.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(p){return m?p.create!==m:d?p.name!==d:!1})),this},a.prototype.open=function(){var s=this;return mn(Or,function(){return rb(s)})},a.prototype._close=function(){var s=this._state,l=Fn.indexOf(this);if(l>=0&&Fn.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new Z(function(d){s.dbReadyResolve=d}),s.openCanceller=new Z(function(d,m){s.cancelOpen=m}))},a.prototype.close=function(s){var l=s===void 0?{disableAutoOpen:!0}:s,d=l.disableAutoOpen,m=this._state;d?(m.isBeingOpened&&m.cancelOpen(new le.DatabaseClosed),this._close(),m.autoOpen=!1,m.dbOpenError=new le.DatabaseClosed):(this._close(),m.autoOpen=this._options.autoOpen||m.isBeingOpened,m.openComplete=!1,m.dbOpenError=null)},a.prototype.delete=function(s){var l=this;s===void 0&&(s={disableAutoOpen:!0});var d=arguments.length>0&&typeof arguments[0]!="object",m=this._state;return new Z(function(p,f){var v=function(){l.close(s);var y=l._deps.indexedDB.deleteDatabase(l.name);y.onsuccess=ot(function(){tb(l._deps,l.name),p()}),y.onerror=Zi(f),y.onblocked=l._fireOnBlocked};if(d)throw new le.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(v):v()})},a.prototype.backendDB=function(){return this.idbdb},a.prototype.isOpen=function(){return this.idbdb!==null},a.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},a.prototype.hasFailed=function(){return this._state.dbOpenError!==null},a.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(a.prototype,"tables",{get:function(){var s=this;return o(this._allTables).map(function(l){return s._allTables[l]})},enumerable:!1,configurable:!0}),a.prototype.transaction=function(){var s=nb.apply(this,arguments);return this._transaction.apply(this,s)},a.prototype._transaction=function(s,l,d){var m=this,p=se.trans;(!p||p.db!==this||s.indexOf("!")!==-1)&&(p=null);var f=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");var v,y;try{if(y=l.map(function(I){var w=I instanceof m.Table?I.name:I;if(typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),s=="r"||s===_l)v=_l;else if(s=="rw"||s==vl)v=vl;else throw new le.InvalidArgument("Invalid transaction mode: "+s);if(p){if(p.mode===_l&&v===vl)if(f)p=null;else throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&y.forEach(function(I){if(p&&p.storeNames.indexOf(I)===-1)if(f)p=null;else throw new le.SubTransaction("Table "+I+" not included in parent transaction.")}),f&&p&&!p.active&&(p=null)}}catch(I){return p?p._promise(null,function(w,A){A(I)}):wt(I)}var x=Mm.bind(null,this,v,y,p,d);return p?p._promise(v,x,"lock"):se.trans?mn(se.transless,function(){return m._whenReady(x)}):this._whenReady(x)},a.prototype.table=function(s){if(!g(this._allTables,s))throw new le.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},a})(),xb=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wb=(function(){function a(s){this._subscribe=s}return a.prototype.subscribe=function(s,l,d){return this._subscribe(!s||typeof s=="function"?{next:s,error:l,complete:d}:s)},a.prototype[xb]=function(){return this},a})(),cs;try{cs={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{cs={indexedDB:null,IDBKeyRange:null}}function Fm(a){var s=!1,l,d=new wb(function(m){var p=il(a);function f(z){var V=An();try{p&&Nn();var $=Tr(a,z);return p&&($=$.finally(Ar)),$}finally{V&&Ln()}}var v=!1,y,x={},I={},w={get closed(){return v},unsubscribe:function(){v||(v=!0,y&&y.abort(),A&&Fr.storagemutated.unsubscribe(M))}};m.start&&m.start(w);var A=!1,U=function(){return pl(O)};function k(){return Al(I,x)}var M=function(z){ns(x,z),k()&&U()},O=function(){if(!(v||!cs.indexedDB)){x={};var z={};y&&y.abort(),y=new AbortController;var V={subscr:z,signal:y.signal,requery:U,querier:a,trans:null},$=f(V);Promise.resolve($).then(function(j){s=!0,l=j,!(v||V.signal.aborted)&&(x={},I=z,!zi(I)&&!A&&(Fr(No,M),A=!0),pl(function(){return!v&&m.next&&m.next(j)}))},function(j){s=!1,["DatabaseClosedError","AbortError"].includes(j?.name)||v||pl(function(){v||m.error&&m.error(j)})})}};return setTimeout(U,0),w});return d.hasValue=function(){return s},d.getValue=function(){return l},d}var gn=pr;b(gn,e(e({},Ba),{delete:function(a){var s=new gn(a,{addons:[]});return s.delete()},exists:function(a){return new gn(a,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return Jy(gn.dependencies).then(a)}catch{return wt(new le.MissingAPI)}},defineClass:function(){function a(s){u(this,s)}return a},ignoreTransaction:function(a){return se.trans?mn(se.transless,a):a()},vip:Pl,async:function(a){return function(){try{var s=Bl(a.apply(this,arguments));return!s||typeof s.then!="function"?Z.resolve(s):s}catch(l){return wt(l)}}},spawn:function(a,s,l){try{var d=Bl(a.apply(l,s||[]));return!d||typeof d.then!="function"?Z.resolve(d):d}catch(m){return wt(m)}},currentTransaction:{get:function(){return se.trans||null}},waitFor:function(a,s){var l=Z.resolve(typeof a=="function"?gn.ignoreTransaction(a):a).timeout(s||6e4);return se.trans?se.trans.waitFor(l):l},Promise:Z,debug:{get:function(){return Gi},set:function(a){im(a)}},derive:S,extend:u,props:b,override:ie,Events:Oo,on:Fr,liveQuery:Fm,extendObservabilitySet:ns,getByKeyPath:oe,setByKeyPath:ve,delByKeyPath:Ze,shallowClone:Et,deepClone:xt,getObjectDiff:Vl,cmp:Pe,asap:xe,minKey:gl,addons:[],connections:Fn,errnames:nl,dependencies:cs,cache:fn,semVer:um,version:um.split(".").map(function(a){return parseInt(a)}).reduce(function(a,s,l){return a+s/Math.pow(10,l*2)})})),gn.maxKey=Fo(gn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fr(No,function(a){if(!Br){var s;s=new CustomEvent(wl,{detail:a}),Br=!0,dispatchEvent(s),Br=!1}}),addEventListener(wl,function(a){var s=a.detail;Br||jl(s)}));function jl(a){var s=Br;try{Br=!0,Fr.storagemutated.fire(a),Fl(a,!0)}finally{Br=s}}var Br=!1,Vr,Hl=function(){};typeof BroadcastChannel<"u"&&(Hl=function(){Vr=new BroadcastChannel(wl),Vr.onmessage=function(a){return a.data&&jl(a.data)}},Hl(),typeof Vr.unref=="function"&&Vr.unref(),Fr(No,function(a){Br||Vr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!pr.disableBfCache&&a.persisted){Gi&&console.debug("Dexie: handling persisted pagehide"),Vr?.close();for(var s=0,l=Fn;s<l.length;s++){var d=l[s];d.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!pr.disableBfCache&&a.persisted&&(Gi&&console.debug("Dexie: handling persisted pageshow"),Hl(),jl({all:new Qt(-1/0,[[]])}))}));function Cb(a){return new Ao({add:a})}function Sb(a){return new Ao({remove:a})}function kb(a,s){return new Ao({replacePrefix:[a,s]})}Z.rejectionMapper=ny,im(Gi);var Eb=Object.freeze({__proto__:null,Dexie:pr,liveQuery:Fm,Entity:pm,cmp:Pe,PropModSymbol:Ey,PropModification:Ao,replacePrefix:kb,add:Cb,remove:Sb,default:pr,RangeSet:Qt,mergeRanges:$o,rangesOverlap:Em});return e(pr,Eb,{default:pr}),pr})});var Xo=class{_attachedHost;attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;i!=null&&(this._attachedHost=null,i.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},Gn=class extends Xo{component;viewContainerRef;injector;projectableNodes;constructor(i,e,r,n){super(),this.component=i,this.viewContainerRef=e,this.injector=r,this.projectableNodes=n}},Yr=class extends Xo{templateRef;viewContainerRef;context;injector;constructor(i,e,r,n){super(),this.templateRef=i,this.viewContainerRef=e,this.context=r,this.injector=n}get origin(){return this.templateRef.elementRef}attach(i,e=this.context){return this.context=e,super.attach(i)}detach(){return this.context=void 0,super.detach()}},td=class extends Xo{element;constructor(i){super(),this.element=i instanceof We?i.nativeElement:i}},Zn=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(i){if(i instanceof Gn)return this._attachedPortal=i,this.attachComponentPortal(i);if(i instanceof Yr)return this._attachedPortal=i,this.attachTemplatePortal(i);if(this.attachDomPortal&&i instanceof td)return this._attachedPortal=i,this.attachDomPortal(i)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Ds=class extends Zn{outletElement;_appRef;_defaultInjector;constructor(i,e,r){super(),this.outletElement=i,this._appRef=e,this._defaultInjector=r}attachComponentPortal(i){let e;if(i.viewContainerRef){let r=i.injector||i.viewContainerRef.injector,n=r.get(ql,null,{optional:!0})||void 0;e=i.viewContainerRef.createComponent(i.component,{index:i.viewContainerRef.length,injector:r,ngModuleRef:n,projectableNodes:i.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let r=this._appRef,n=i.injector||this._defaultInjector||It.NULL,o=n.get(us,r.injector);e=ih(i.component,{elementInjector:n,environmentInjector:o,projectableNodes:i.projectableNodes||void 0}),r.attachView(e.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=i,e}attachTemplatePortal(i){let e=i.viewContainerRef,r=e.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return r.rootNodes.forEach(n=>this.outletElement.appendChild(n)),r.detectChanges(),this.setDisposeFn(()=>{let n=e.indexOf(r);n!==-1&&e.remove(n)}),this._attachedPortal=i,r}attachDomPortal=i=>{let e=i.element;e.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(r,e),this.outletElement.appendChild(e),this._attachedPortal=i,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(e,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(i){return i.hostView.rootNodes[0]}};var Yo=(()=>{class t extends Zn{_moduleRef=E(ql,{optional:!0});_document=E(st);_viewContainerRef=E(zr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new Ve;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let r=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,n=r.createComponent(e.component,{index:r.length,injector:e.injector||r.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=e=>{let r=e.element;r.parentNode;let n=this._document.createComment("dom-portal");e.setAttachedHost(this),r.parentNode.insertBefore(n,r),this._getRootNode().appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Jt]})}return t})();var Jn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({})}return t})();var Pb=20,Go=(()=>{class t{_ngZone=E(Je);_platform=E(ei);_renderer=E(ir).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ne;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Pb){return this._platform.isBrowser?new _n(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=e>0?this._scrolled.pipe(Wl(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):tr()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){let n=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Me(o=>!o||n.indexOf(o)>-1))}getAncestorScrollContainers(e){let r=[];return this.scrollContainers.forEach((n,o)=>{this._scrollableContainsElement(o,e)&&r.push(o)}),r}_scrollableContainsElement(e,r){let n=qi(r),o=e.getElementRef().nativeElement;do if(n==o)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ob=20,yn=(()=>{class t{_platform=E(ei);_listeners;_viewportSize;_change=new ne;_document=E(st);constructor(){let e=E(Je),r=E(ir).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=o=>this._change.next(o);this._listeners=[r.listen("window","resize",n),r.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:r,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+r,height:n,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,r=this._getWindow(),n=e.documentElement,o=n.getBoundingClientRect(),c=-o.top||e.body.scrollTop||r.scrollY||n.scrollTop||0,u=-o.left||e.body.scrollLeft||r.scrollX||n.scrollLeft||0;return{top:c,left:u}}change(e=Ob){return e>0?this._change.pipe(Wl(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Rs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({})}return t})(),id=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[Qo,Rs,Qo,Rs]})}return t})();var Ph=Ch();function Bh(t){return new Ms(t.get(yn),t.get(st))}var Ms=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(i,e){this._viewportRuler=i,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=St(-this._previousScrollPosition.left),i.style.top=St(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let i=this._document.documentElement,e=this._document.body,r=i.style,n=e.style,o=r.scrollBehavior||"",c=n.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),Ph&&(r.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ph&&(r.scrollBehavior=o,n.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}};function Vh(t,i){return new Ps(t.get(Go),t.get(Je),t.get(yn),i)}var Ps=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(i,e,r,n){this._scrollDispatcher=i,this._ngZone=e,this._viewportRuler=r,this._config=n}attach(i){this._overlayRef,this._overlayRef=i}enable(){if(this._scrollSubscription)return;let i=this._scrollDispatcher.scrolled(0).pipe(Me(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Zo=class{enable(){}disable(){}attach(){}};function rd(t,i){return i.some(e=>{let r=t.bottom<e.top,n=t.top>e.bottom,o=t.right<e.left,c=t.left>e.right;return r||n||o||c})}function Oh(t,i){return i.some(e=>{let r=t.top<e.top,n=t.bottom>e.bottom,o=t.left<e.left,c=t.right>e.right;return r||n||o||c})}function Fs(t,i){return new Os(t.get(Go),t.get(yn),t.get(Je),i)}var Os=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(i,e,r,n){this._scrollDispatcher=i,this._viewportRuler=e,this._ngZone=r,this._config=n}attach(i){this._overlayRef,this._overlayRef=i}enable(){if(!this._scrollSubscription){let i=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(i).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:n}=this._viewportRuler.getViewportSize();rd(e,[{width:r,height:n,bottom:n,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},$h=(()=>{class t{_injector=E(It);constructor(){}noop=()=>new Zo;close=e=>Vh(this._injector,e);block=()=>Bh(this._injector);reposition=e=>Fs(this._injector,e);static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eo=class{positionStrategy;scrollStrategy=new Zo;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(i){if(i){let e=Object.keys(i);for(let r of e)i[r]!==void 0&&(this[r]=i[r])}}};var Ts=class{connectionPair;scrollableViewProperties;constructor(i,e){this.connectionPair=i,this.scrollableViewProperties=e}};var zh=(()=>{class t{_attachedOverlays=[];_document=E(st);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jh=(()=>{class t extends zh{_ngZone=E(Je);_renderer=E(ir).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let r=this._attachedOverlays;for(let n=r.length-1;n>-1;n--)if(r[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[n]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hh=(()=>{class t extends zh{_platform=E(ei);_ngZone=E(Je);_renderer=E(ir).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let r=this._document.body,n={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,n),o.listen(r,"click",this._clickListener,n),o.listen(r,"auxclick",this._clickListener,n),o.listen(r,"contextmenu",this._clickListener,n)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=Wr(e)};_clickListener=e=>{let r=Wr(e),n=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let c=o.length-1;c>-1;c--){let u=o[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(Th(u.overlayElement,r)||Th(u.overlayElement,n))break;let h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(e)):h.next(e)}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Th(t,i){let e=typeof ShadowRoot<"u"&&ShadowRoot,r=i;for(;r;){if(r===t)return!0;r=e&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var Uh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,n){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),Wh=(()=>{class t{_platform=E(ei);_containerElement;_document=E(st);_styleLoader=E(ui);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Zl()){let n=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}let r=this._document.createElement("div");r.classList.add(e),Zl()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(Uh)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nd=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(i,e,r,n){this._renderer=e,this._ngZone=r,this.element=i.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let i=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(i,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),i.style.pointerEvents="none",i.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},As=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ne;_attachments=new ne;_detachments=new ne;_positionStrategy;_scrollStrategy;_locationChanges=Ft.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new ne;_outsidePointerEvents=new ne;_afterNextRenderRef;constructor(i,e,r,n,o,c,u,h,_,g=!1,b,D){this._portalOutlet=i,this._host=e,this._pane=r,this._config=n,this._ngZone=o,this._keyboardDispatcher=c,this._document=u,this._location=h,this._outsideClickDispatcher=_,this._animationsDisabled=g,this._injector=b,this._renderer=D,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(i){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(i);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=rr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let i=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){let i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,i&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config=fe(fe({},this._config),i),this._updateElementSize()}setDirection(i){this._config=Ue(fe({},this._config),{direction:i}),this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){let i=this._config.direction;return i?typeof i=="string"?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let i=this._pane.style;i.width=St(this._config.width),i.height=St(this._config.height),i.minWidth=St(this._config.minWidth),i.minHeight=St(this._config.minHeight),i.maxWidth=St(this._config.maxWidth),i.maxHeight=St(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){let i="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new nd(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(i))}):this._backdropRef.element.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(i,e,r){let n=qo(e||[]).filter(o=>!!o);n.length&&(r?i.classList.add(...n):i.classList.remove(...n))}_detachContentWhenEmpty(){let i=!1;try{this._detachContentAfterRenderRef=rr(()=>{i=!0,this._detachContent()},{injector:this._injector})}catch(e){if(i)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let i=this._scrollStrategy;i?.disable(),i?.detach?.()}},Ah="cdk-overlay-connected-position-bounding-box",Tb=/([A-Za-z%]+)$/;function Kh(t,i){return new Ls(i,t.get(yn),t.get(st),t.get(ei),t.get(Wh))}var Ls=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ne;_resizeSubscription=Ft.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(i,e,r,n,o){this._viewportRuler=e,this._document=r,this._platform=n,this._overlayContainer=o,this.setOrigin(i)}attach(i){this._overlayRef&&this._overlayRef,this._validatePositions(),i.hostElement.classList.add(Ah),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._originRect,e=this._overlayRect,r=this._viewportRect,n=this._containerRect,o=[],c;for(let u of this._preferredPositions){let h=this._getOriginPoint(i,n,u),_=this._getOverlayPoint(h,e,u),g=this._getOverlayFit(_,e,r,u);if(g.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(u,h);return}if(this._canFitWithFlexibleDimensions(g,_,r)){o.push({position:u,origin:h,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(h,u)});continue}(!c||c.overlayFit.visibleArea<g.visibleArea)&&(c={overlayFit:g,overlayPoint:_,originPoint:h,position:u,overlayRect:e})}if(o.length){let u=null,h=-1;for(let _ of o){let g=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);g>h&&(h=g,u=_)}this._isPushed=!1,this._applyPosition(u.position,u.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(c.position,c.originPoint);return}this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&bn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ah),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let i=this._lastPosition;if(i){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,i);this._applyPosition(i,e)}else this.apply()}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,i.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,e,r){let n;if(r.originX=="center")n=i.left+i.width/2;else{let c=this._isRtl()?i.right:i.left,u=this._isRtl()?i.left:i.right;n=r.originX=="start"?c:u}e.left<0&&(n-=e.left);let o;return r.originY=="center"?o=i.top+i.height/2:o=r.originY=="top"?i.top:i.bottom,e.top<0&&(o-=e.top),{x:n,y:o}}_getOverlayPoint(i,e,r){let n;r.overlayX=="center"?n=-e.width/2:r.overlayX==="start"?n=this._isRtl()?-e.width:0:n=this._isRtl()?0:-e.width;let o;return r.overlayY=="center"?o=-e.height/2:o=r.overlayY=="top"?0:-e.height,{x:i.x+n,y:i.y+o}}_getOverlayFit(i,e,r,n){let o=Nh(e),{x:c,y:u}=i,h=this._getOffset(n,"x"),_=this._getOffset(n,"y");h&&(c+=h),_&&(u+=_);let g=0-c,b=c+o.width-r.width,D=0-u,C=u+o.height-r.height,S=this._subtractOverflows(o.width,g,b),P=this._subtractOverflows(o.height,D,C),T=S*P;return{visibleArea:T,isCompletelyWithinViewport:o.width*o.height===T,fitsInViewportVertically:P===o.height,fitsInViewportHorizontally:S==o.width}}_canFitWithFlexibleDimensions(i,e,r){if(this._hasFlexibleDimensions){let n=r.bottom-e.y,o=r.right-e.x,c=Lh(this._overlayRef.getConfig().minHeight),u=Lh(this._overlayRef.getConfig().minWidth),h=i.fitsInViewportVertically||c!=null&&c<=n,_=i.fitsInViewportHorizontally||u!=null&&u<=o;return h&&_}return!1}_pushOverlayOnScreen(i,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};let n=Nh(e),o=this._viewportRect,c=Math.max(i.x+n.width-o.width,0),u=Math.max(i.y+n.height-o.height,0),h=Math.max(o.top-r.top-i.y,0),_=Math.max(o.left-r.left-i.x,0),g=0,b=0;return n.width<=o.width?g=_||-c:g=i.x<this._viewportMargin?o.left-r.left-i.x:0,n.height<=o.height?b=h||-u:b=i.y<this._viewportMargin?o.top-r.top-i.y:0,this._previousPushAmount={x:g,y:b},{x:i.x+g,y:i.y+b}}_applyPosition(i,e){if(this._setTransformOrigin(i),this._setOverlayElementStyles(e,i),this._setBoundingBoxStyles(e,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(i!==this._lastPosition||!this._lastScrollVisibility||!Ab(this._lastScrollVisibility,r)){let n=new Ts(i,r);this._positionChanges.next(n)}this._lastScrollVisibility=r}this._lastPosition=i,this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,n=i.overlayY;i.overlayX==="center"?r="center":this._isRtl()?r=i.overlayX==="start"?"right":"left":r=i.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${r} ${n}`}_calculateBoundingBoxRect(i,e){let r=this._viewportRect,n=this._isRtl(),o,c,u;if(e.overlayY==="top")c=i.y,o=r.height-c+this._viewportMargin;else if(e.overlayY==="bottom")u=r.height-i.y+this._viewportMargin*2,o=r.height-u+this._viewportMargin;else{let C=Math.min(r.bottom-i.y+r.top,i.y),S=this._lastBoundingBoxSize.height;o=C*2,c=i.y-C,o>S&&!this._isInitialRender&&!this._growAfterOpen&&(c=i.y-S/2)}let h=e.overlayX==="start"&&!n||e.overlayX==="end"&&n,_=e.overlayX==="end"&&!n||e.overlayX==="start"&&n,g,b,D;if(_)D=r.width-i.x+this._viewportMargin*2,g=i.x-this._viewportMargin;else if(h)b=i.x,g=r.right-i.x;else{let C=Math.min(r.right-i.x+r.left,i.x),S=this._lastBoundingBoxSize.width;g=C*2,b=i.x-C,g>S&&!this._isInitialRender&&!this._growAfterOpen&&(b=i.x-S/2)}return{top:c,left:b,bottom:u,right:D,width:g,height:o}}_setBoundingBoxStyles(i,e){let r=this._calculateBoundingBoxRect(i,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;n.height=St(r.height),n.top=St(r.top),n.bottom=St(r.bottom),n.width=St(r.width),n.left=St(r.left),n.right=St(r.right),e.overlayX==="center"?n.alignItems="center":n.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?n.justifyContent="center":n.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(n.maxHeight=St(o)),c&&(n.maxWidth=St(c))}this._lastBoundingBoxSize=r,bn(this._boundingBox.style,n)}_resetBoundingBoxStyles(){bn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){bn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,e){let r={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(n){let g=this._viewportRuler.getViewportScrollPosition();bn(r,this._getExactOverlayY(e,i,g)),bn(r,this._getExactOverlayX(e,i,g))}else r.position="static";let u="",h=this._getOffset(e,"x"),_=this._getOffset(e,"y");h&&(u+=`translateX(${h}px) `),_&&(u+=`translateY(${_}px)`),r.transform=u.trim(),c.maxHeight&&(n?r.maxHeight=St(c.maxHeight):o&&(r.maxHeight="")),c.maxWidth&&(n?r.maxWidth=St(c.maxWidth):o&&(r.maxWidth="")),bn(this._pane.style,r)}_getExactOverlayY(i,e,r){let n={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,i);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),i.overlayY==="bottom"){let c=this._document.documentElement.clientHeight;n.bottom=`${c-(o.y+this._overlayRect.height)}px`}else n.top=St(o.y);return n}_getExactOverlayX(i,e,r){let n={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,i);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let c;if(this._isRtl()?c=i.overlayX==="end"?"left":"right":c=i.overlayX==="end"?"right":"left",c==="right"){let u=this._document.documentElement.clientWidth;n.right=`${u-(o.x+this._overlayRect.width)}px`}else n.left=St(o.x);return n}_getScrollVisibility(){let i=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Oh(i,r),isOriginOutsideView:rd(i,r),isOverlayClipped:Oh(e,r),isOverlayOutsideView:rd(e,r)}}_subtractOverflows(i,...e){return e.reduce((r,n)=>r-Math.max(n,0),i)}_getNarrowedViewportRect(){let i=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+i-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:i-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,e){return e==="x"?i.offsetX==null?this._offsetX:i.offsetX:i.offsetY==null?this._offsetY:i.offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&qo(i).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){let i=this._origin;if(i instanceof We)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();let e=i.width||0,r=i.height||0;return{top:i.y,bottom:i.y+r,left:i.x,right:i.x+e,height:r,width:e}}};function bn(t,i){for(let e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function Lh(t){if(typeof t!="number"&&t!=null){let[i,e]=t.split(Tb);return!e||e==="px"?parseFloat(i):null}return t||null}function Nh(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function Ab(t,i){return t===i?!0:t.isOriginClipped===i.isOriginClipped&&t.isOriginOutsideView===i.isOriginOutsideView&&t.isOverlayClipped===i.isOverlayClipped&&t.isOverlayOutsideView===i.isOverlayOutsideView}var Fh="cdk-global-overlay-wrapper";function Bs(t){return new Ns}var Ns=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(i){let e=i.getConfig();this._overlayRef=i,this._width&&!e.width&&i.updateSize({width:this._width}),this._height&&!e.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(Fh),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._xOffset=i,this._xPosition="left",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._xOffset=i,this._xPosition="right",this}start(i=""){return this._xOffset=i,this._xPosition="start",this}end(i=""){return this._xOffset=i,this._xPosition="end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._xPosition="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:c,maxHeight:u}=r,h=(n==="100%"||n==="100vw")&&(!c||c==="100%"||c==="100vw"),_=(o==="100%"||o==="100vh")&&(!u||u==="100%"||u==="100vh"),g=this._xPosition,b=this._xOffset,D=this._overlayRef.getConfig().direction==="rtl",C="",S="",P="";h?P="flex-start":g==="center"?(P="center",D?S=b:C=b):D?g==="left"||g==="end"?(P="flex-end",C=b):(g==="right"||g==="start")&&(P="flex-start",S=b):g==="left"||g==="start"?(P="flex-start",C=b):(g==="right"||g==="end")&&(P="flex-end",S=b),i.position=this._cssPosition,i.marginLeft=h?"0":C,i.marginTop=_?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=h?"0":S,e.justifyContent=P,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(Fh),r.justifyContent=r.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}},qh=(()=>{class t{_injector=E(It);constructor(){}global(){return Bs()}flexibleConnectedTo(e){return Kh(this._injector,e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vs(t,i){t.get(ui).load(Uh);let e=t.get(Wh),r=t.get(st),n=t.get(Oi),o=t.get(Ql),c=t.get(vr),u=r.createElement("div"),h=r.createElement("div");h.id=n.getId("cdk-overlay-"),h.classList.add("cdk-overlay-pane"),u.appendChild(h),e.getContainerElement().appendChild(u);let _=new Ds(h,o,t),g=new eo(i),b=t.get(Wi,null,{optional:!0})||t.get(ir).createRenderer(null,null);return g.direction=g.direction||c.value,new As(_,u,h,g,t.get(Je),t.get(jh),r,t.get(rh),t.get(Hh),i?.disableAnimations??t.get(qm,null,{optional:!0})==="NoopAnimations",t.get(us),b)}var Qh=(()=>{class t{scrollStrategies=E($h);_positionBuilder=E(qh);_injector=E(It);constructor(){}create(e){return Vs(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Lb=new Ie("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(It);return()=>Fs(t)}});function Nb(t){let i=E(It);return()=>Fs(i)}var Fb={provide:Lb,useFactory:Nb},od=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({providers:[Qh,Fb],imports:[Qo,Jn,id,id]})}return t})();function Bb(t,i){if(t&1){let e=Tt();N(0,"div",1)(1,"button",2),he("click",function(){ge(e);let n=ue();return _e(n.action())}),W(2),B()()}if(t&2){let e=ue();K(2),xi(" ",e.data.action," ")}}var Vb=["label"];function $b(t,i){}var zb=Math.pow(2,31)-1,Jo=class{_overlayRef;instance;containerInstance;_afterDismissed=new ne;_afterOpened=new ne;_onAction=new ne;_durationTimeoutId;_dismissedByAction=!1;constructor(i,e){this._overlayRef=e,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,zb))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Xh=new Ie("MatSnackBarData"),to=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},jb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),Hb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),Ub=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),Yh=(()=>{class t{snackBarRef=E(Jo);data=E(Xh);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(r,n){r&1&&(N(0,"div",0),W(1),B(),Wt(2,Bb,3,1,"div",1)),r&2&&(K(),xi(" ",n.data.message,`
`),K(),Kt(n.hasAction?2:-1))},dependencies:[Ti,jb,Hb,Ub],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),ad="_mat-snack-bar-enter",sd="_mat-snack-bar-exit",Wb=(()=>{class t extends Zn{_ngZone=E(Je);_elementRef=E(We);_changeDetectorRef=E(Mt);_platform=E(ei);_animationsDisabled=Qi();snackBarConfig=E(to);_document=E(st);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=E(It);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new ne;_onExit=new ne;_onEnter=new ne;_animationState="void";_live;_label;_role;_liveElementId=E(Oi).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),r}attachTemplatePortal(e){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),r}attachDomPortal=e=>{this._assertNotAttached();let r=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),r};onAnimationEnd(e){e===sd?this._completeExit():e===ad&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?rr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(ad)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(ad)},200)))}exit(){return this._destroyed?tr(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?rr(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(sd)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(sd),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>e.classList.add(c)):e.classList.add(r)),this._exposeToModals();let n=this._label.nativeElement,o="mdc-snackbar__label";n.classList.toggle(o,!n.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let n=0;n<r.length;n++){let o=r[n],c=o.getAttribute("aria-owns");this._trackedModals.add(o),c?c.indexOf(e)===-1&&o.setAttribute("aria-owns",c+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let r=e.getAttribute("aria-owns");if(r){let n=r.replace(this._liveElementId,"").trim();n.length>0?e.setAttribute("aria-owns",n):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,r=e.querySelector("[aria-hidden]"),n=e.querySelector("[aria-live]");if(r&&n){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&r.contains(document.activeElement)&&(o=document.activeElement),r.removeAttribute("aria-hidden"),n.appendChild(r),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,n){if(r&1&&(Vt(Yo,7),Vt(Vb,7)),r&2){let o;Oe(o=Te())&&(n._portalOutlet=o.first),Oe(o=Te())&&(n._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(r,n){r&1&&he("animationend",function(c){return n.onAnimationEnd(c.animationName)})("animationcancel",function(c){return n.onAnimationEnd(c.animationName)}),r&2&&it("mat-snack-bar-container-enter",n._animationState==="visible")("mat-snack-bar-container-exit",n._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!n._animationsDisabled)},features:[Jt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,n){r&1&&(N(0,"div",1)(1,"div",2,0)(3,"div",3),Dt(4,$b,0,0,"ng-template",4),B(),ft(5,"div"),B()()),r&2&&(K(5),Ke("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[Yo],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function Kb(){return new to}var qb=new Ie("mat-snack-bar-default-options",{providedIn:"root",factory:Kb}),xn=(()=>{class t{_live=E(xh);_injector=E(It);_breakpointObserver=E(vh);_parentSnackBar=E(t,{optional:!0,skipSelf:!0});_defaultConfig=E(qb);_animationsDisabled=Qi();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Yh;snackBarContainerComponent=Wb;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,r){return this._attach(e,r)}openFromTemplate(e,r){return this._attach(e,r)}open(e,r="",n){let o=fe(fe({},this._defaultConfig),n);return o.data={message:e,action:r},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,r){let n=r&&r.viewContainerRef&&r.viewContainerRef.injector,o=It.create({parent:n||this._injector,providers:[{provide:to,useValue:r}]}),c=new Gn(this.snackBarContainerComponent,r.viewContainerRef,o),u=e.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(e,r){let n=fe(fe(fe({},new to),this._defaultConfig),r),o=this._createOverlay(n),c=this._attachSnackBarContainer(o,n),u=new Jo(c,o);if(e instanceof gr){let h=new Yr(e,null,{$implicit:n.data,snackBarRef:u});u.instance=c.attachTemplatePortal(h)}else{let h=this._createInjector(n,u),_=new Gn(e,void 0,h),g=c.attachComponentPortal(_);u.instance=g.instance}return this._breakpointObserver.observe(Sh.HandsetPortrait).pipe(bi(o.detachments())).subscribe(h=>{o.overlayElement.classList.toggle(this.handsetCssClass,h.matches)}),n.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(n.announcementMessage,n.politeness)}),this._animateSnackBar(u,n),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(e,r){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),r.duration&&r.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(r.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let r=new eo;r.direction=e.direction;let n=Bs(this._injector),o=e.direction==="rtl",c=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,u=!c&&e.horizontalPosition!=="center";return c?n.left("0"):u?n.right("0"):n.centerHorizontally(),e.verticalPosition==="top"?n.top("0"):n.bottom("0"),r.positionStrategy=n,r.disableAnimations=this._animationsDisabled,Vs(this._injector,r)}_createInjector(e,r){let n=e&&e.viewContainerRef&&e.viewContainerRef.injector;return It.create({parent:n||this._injector,providers:[{provide:Jo,useValue:r},{provide:Xh,useValue:e.data}]})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $s=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({providers:[xn],imports:[od,Jn,mi,gt,Yh,gt]})}return t})();function dd(t){let i=t.cloneNode(!0),e=i.querySelectorAll("[id]"),r=t.nodeName.toLowerCase();i.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return r==="canvas"?ep(t,i):(r==="input"||r==="select"||r==="textarea")&&Jh(t,i),Zh("canvas",t,i,ep),Zh("input, textarea, select",t,i,Jh),i}function Zh(t,i,e,r){let n=i.querySelectorAll(t);if(n.length){let o=e.querySelectorAll(t);for(let c=0;c<n.length;c++)r(n[c],o[c])}}var Qb=0;function Jh(t,i){i.type!=="file"&&(i.value=t.value),i.type==="radio"&&i.name&&(i.name=`mat-clone-${i.name}-${Qb++}`)}function ep(t,i){let e=i.getContext("2d");if(e)try{e.drawImage(t,0,0)}catch{}}function gd(t){let i=t.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function ud(t,i,e){let{top:r,bottom:n,left:o,right:c}=t;return e>=r&&e<=n&&i>=o&&i<=c}function Xb(t,i){let e=i.left<t.left,r=i.left+i.width>t.right,n=i.top<t.top,o=i.top+i.height>t.bottom;return e||r||n||o}function ia(t,i,e){t.top+=i,t.bottom=t.top+t.height,t.left+=e,t.right=t.left+t.width}function tp(t,i,e,r){let{top:n,right:o,bottom:c,left:u,width:h,height:_}=t,g=h*i,b=_*i;return r>n-b&&r<c+b&&e>u-g&&e<o+g}var zs=class{_document;positions=new Map;constructor(i){this._document=i}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:gd(e)})})}handleScroll(i){let e=Wr(i),r=this.positions.get(e);if(!r)return null;let n=r.scrollPosition,o,c;if(e===this._document){let _=this.getViewportScrollPosition();o=_.top,c=_.left}else o=e.scrollTop,c=e.scrollLeft;let u=n.top-o,h=n.left-c;return this.positions.forEach((_,g)=>{_.clientRect&&e!==g&&e.contains(g)&&ia(_.clientRect,u,h)}),n.top=o,n.left=c,{top:u,left:h}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function mp(t,i){let e=t.rootNodes;if(e.length===1&&e[0].nodeType===i.ELEMENT_NODE)return e[0];let r=i.createElement("div");return e.forEach(n=>r.appendChild(n)),r}function _d(t,i,e){for(let r in i)if(i.hasOwnProperty(r)){let n=i[r];n?t.setProperty(r,n,e?.has(r)?"important":""):t.removeProperty(r)}return t}function io(t,i){let e=i?"":"none";_d(t.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function ip(t,i,e){_d(t.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function js(t,i){return i&&i!="none"?t+" "+i:t}function rp(t,i){t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,t.style.transform=ra(i.left,i.top)}function ra(t,i){return`translate3d(${Math.round(t)}px, ${Math.round(i)}px, 0)`}function np(t){let i=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*i}function Yb(t){let i=getComputedStyle(t),e=cd(i,"transition-property"),r=e.find(u=>u==="transform"||u==="all");if(!r)return 0;let n=e.indexOf(r),o=cd(i,"transition-duration"),c=cd(i,"transition-delay");return np(o[n])+np(c[n])}function cd(t,i){return t.getPropertyValue(i).split(",").map(r=>r.trim())}var Gb=new Set(["position"]),md=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(i,e,r,n,o,c,u,h,_,g){this._document=i,this._rootElement=e,this._direction=r,this._initialDomRect=n,this._previewTemplate=o,this._previewClass=c,this._pickupPositionOnPage=u,this._initialTransform=h,this._zIndex=_,this._renderer=g}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),op(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return Yb(this._preview)}addEventListener(i,e){return this._renderer.listen(this._preview,i,e)}_createPreview(){let i=this._previewTemplate,e=this._previewClass,r=i?i.template:null,n;if(r&&i){let o=i.matchSize?this._initialDomRect:null,c=i.viewContainer.createEmbeddedView(r,i.context);c.detectChanges(),n=mp(c,this._document),this._previewEmbeddedView=c,i.matchSize?rp(n,o):n.style.transform=ra(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=dd(this._rootElement),rp(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return _d(n.style,{"pointer-events":"none",margin:op(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Gb),io(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>n.classList.add(o)):n.classList.add(e)),n}};function op(t){return"showPopover"in t}var Zb={passive:!0},ap={passive:!1},Jb={passive:!1,capture:!0},e0=800,sp="cdk-drag-placeholder",cp=new Set(["position"]),hd=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=ct(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ne;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Ft.EMPTY;_pointerUpSubscription=Ft.EMPTY;_scrollSubscription=Ft.EMPTY;_resizeSubscription=Ft.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(e=>io(e,i)))}_disabled=!1;beforeStarted=new ne;started=new ne;released=new ne;ended=new ne;entered=new ne;exited=new ne;dropped=new ne;moved=this._moveEvents;data;constrainPosition;constructor(i,e,r,n,o,c,u){this._config=e,this._document=r,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=c,this._renderer=u,this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new zs(r),c.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(r=>qi(r)),this._handles.forEach(r=>io(r,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&e.add(r)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){let e=qi(i);if(e!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(e,"mousedown",this._pointerDown,ap),r.listen(e,"touchstart",this._pointerDown,Zb),r.listen(e,"dragstart",this._nativeDragStart,ap)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?qi(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Xb(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let i=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),r=0,n=0;e.left<i.left?r=i.left-e.left:e.right>i.right&&(r=i.right-e.right),e.top<i.top?n=i.top-e.top:e.bottom>i.bottom&&(n=i.bottom-e.bottom);let o=this._activeTransform.x,c=this._activeTransform.y,u=o+r,h=c+n;this._rootElement.style.transform=ra(u,h),this._activeTransform={x:u,y:h},this._passiveTransform={x:u,y:h}}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),io(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),io(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){let i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){let i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=i=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,i)}else this.disabled||this._initializeDragSequence(this._rootElement,i)};_pointerMove=i=>{let e=this._getPointerPositionOnPage(i);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+o>=this._config.dragStartThreshold){let u=Date.now()>=this._dragStartTime+this._getDragStartDelay(i),h=this._dropContainer;if(!u){this._endDragSequence(i);return}(!h||!h.isDragging()&&!h.isReceiving())&&(i.cancelable&&i.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(i)))}return}i.cancelable&&i.preventDefault();let r=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-n.x+this._passiveTransform.x,o.y=r.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:i,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=i=>{this._endDragSequence(i)};_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){ea(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),r=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",t0,Jb)}),r){let n=this._rootElement,o=n.parentNode,c=this._placeholder=this._createPlaceholderElement(),u=this._marker=this._marker||this._document.createComment("");o.insertBefore(u,n),this._initialTransform=n.style.transform||"",this._preview=new md(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),ip(n,!1,cp),this._document.body.appendChild(o.replaceChild(c,n)),this.started.next({source:this,event:i}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();let r=this.isDragging(),n=ea(e),o=!n&&e.button!==0,c=this._rootElement,u=Wr(e),h=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+e0>Date.now(),_=n?gh(e):fh(e);if(u&&u.draggable&&e.type==="mousedown"&&e.preventDefault(),r||o||h||_)return;if(this._handles.length){let D=c.style;this._rootElementTapHighlight=D.webkitTapHighlightColor||"",D.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>this._updateOnScroll(D)),this._boundaryElement&&(this._boundaryRect=gd(this._boundaryElement));let g=this._previewTemplate;this._pickupPositionInElement=g&&g.template&&!g.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,e);let b=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:b.x,y:b.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){ip(this._rootElement,!0,cp),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,r=e.getItemIndex(this),n=this._getPointerPositionOnPage(i),o=this._getDragDistance(n),c=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:i}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:o,dropPoint:n,event:i}),e.drop(this,r,this._initialIndex,this._initialContainer,c,o,n,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:r,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let c=this._dropContainer.getItemIndex(this),u=this._dropContainer.getItemAtIndex(c+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,u),this._dropContainer=o,this._dropContainer.enter(this,i,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,n),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,e):this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let n=u=>{(!u||this._preview&&Wr(u)===this._preview.element&&u.propertyName==="transform")&&(c(),r(),clearTimeout(o))},o=setTimeout(n,e*1.5),c=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let i=this._placeholderTemplate,e=i?i.template:null,r;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),r=mp(this._placeholderRef,this._document)):r=dd(this._rootElement),r.style.pointerEvents="none",r.classList.add(sp),r}_getPointerPositionInElement(i,e,r){let n=e===this._rootElement?null:e,o=n?n.getBoundingClientRect():i,c=ea(r)?r.targetTouches[0]:r,u=this._getViewportScrollPosition(),h=c.pageX-o.left-u.left,_=c.pageY-o.top-u.top;return{x:o.left-i.left+h,y:o.top-i.top+_}}_getPointerPositionOnPage(i){let e=this._getViewportScrollPosition(),r=ea(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,n=r.pageX-e.left,o=r.pageY-e.top;if(this._ownerSVGElement){let c=this._ownerSVGElement.getScreenCTM();if(c){let u=this._ownerSVGElement.createSVGPoint();return u.x=n,u.y=o,u.matrixTransform(c.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(i){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:n}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:c}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,u=this._boundaryRect,{width:h,height:_}=this._getPreviewRect(),g=u.top+c,b=u.bottom-(_-c),D=u.left+o,C=u.right-(h-o);r=lp(r,D,C),n=lp(n,g,b)}return{x:r,y:n}}_updatePointerDirectionDelta(i){let{x:e,y:r}=i,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,c=Math.abs(e-o.x),u=Math.abs(r-o.y);return c>this._config.pointerDirectionChangeThreshold&&(n.x=e>o.x?1:-1,o.x=e),u>this._config.pointerDirectionChangeThreshold&&(n.y=r>o.y?1:-1,o.y=r),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,io(this._rootElement,i))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(i=>i()),this._rootElementCleanups=void 0}_applyRootElementTransform(i,e){let r=1/this.scale,n=ra(i*r,e*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=js(n,this._initialTransform)}_applyPreviewTransform(i,e){let r=this._previewTemplate?.template?void 0:this._initialTransform,n=ra(i,e);this._preview.setTransform(js(n,r))}_getDragDistance(i){let e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(i===0&&e===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||r.width===0&&r.height===0)return;let o=n.left-r.left,c=r.right-n.right,u=n.top-r.top,h=r.bottom-n.bottom;n.width>r.width?(o>0&&(i+=o),c>0&&(i-=c)):i=0,n.height>r.height?(u>0&&(e+=u),h>0&&(e-=h)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){let e=this.dragStartDelay;return typeof e=="number"?e:ea(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){let e=this._parentPositions.handleScroll(i);if(e){let r=Wr(i);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&ia(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=bs(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){let r=this._previewContainer||"global";if(r==="parent")return i;if(r==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return qi(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=i=>{if(this._handles.length){let e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&i.preventDefault()}else this.disabled||i.preventDefault()};_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}_conditionallyInsertAnchor(i,e,r){if(i===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let n=this._anchor??=dd(this._placeholder);n.classList.remove(sp),n.classList.add("cdk-drag-anchor"),n.style.transform="",r?r.before(n):qi(e.element).appendChild(n)}}};function lp(t,i,e){return Math.max(i,Math.min(e,t))}function ea(t){return t.type[0]==="t"}function t0(t){t.preventDefault()}function Ks(t,i,e){let r=Hs(i,t.length-1),n=Hs(e,t.length-1);if(r===n)return;let o=t[r],c=n<r?-1:1;for(let u=r;u!==n;u+=c)t[u]=t[u+c];t[n]=o}function hp(t,i,e,r){let n=Hs(e,t.length-1),o=Hs(r,i.length);t.length&&i.splice(o,0,t.splice(n,1)[0])}function Hs(t,i){return Math.max(0,Math.min(i,t))}var Us=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(i){this._dragDropRegistry=i}_previousSwap={drag:null,delta:0,overlaps:!1};start(i){this.withItems(i)}sort(i,e,r,n){let o=this._itemPositions,c=this._getItemIndexFromPointerPosition(i,e,r,n);if(c===-1&&o.length>0)return null;let u=this.orientation==="horizontal",h=o.findIndex(T=>T.drag===i),_=o[c],g=o[h].clientRect,b=_.clientRect,D=h>c?1:-1,C=this._getItemOffsetPx(g,b,D),S=this._getSiblingOffsetPx(h,o,D),P=o.slice();return Ks(o,h,c),o.forEach((T,ee)=>{if(P[ee]===T)return;let te=T.drag===i,ie=te?C:S,Ce=te?i.getPlaceholderElement():T.drag.getRootElement();T.offset+=ie;let xe=Math.round(T.offset*(1/T.drag.scale));u?(Ce.style.transform=js(`translate3d(${xe}px, 0, 0)`,T.initialTransform),ia(T.clientRect,0,ie)):(Ce.style.transform=js(`translate3d(0, ${xe}px, 0)`,T.initialTransform),ia(T.clientRect,ie,0))}),this._previousSwap.overlaps=ud(b,e,r),this._previousSwap.drag=_.drag,this._previousSwap.delta=u?n.x:n.y,{previousIndex:h,currentIndex:c}}enter(i,e,r,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(i,e,r):n,c=this._activeDraggables,u=c.indexOf(i),h=i.getPlaceholderElement(),_=c[o];if(_===i&&(_=c[o+1]),!_&&(o==null||o===-1||o<c.length-1)&&this._shouldEnterAsFirstChild(e,r)&&(_=c[0]),u>-1&&c.splice(u,1),_&&!this._dragDropRegistry.isDragging(_)){let g=_.getRootElement();g.parentElement.insertBefore(h,g),c.splice(o,0,i)}else this._element.appendChild(h),c.push(i);h.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{let e=i.getRootElement();if(e){let r=this._itemPositions.find(n=>n.drag===i)?.initialTransform;e.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return this._getVisualItemPositions().findIndex(e=>e.drag===i)}getItemAtIndex(i){return this._getVisualItemPositions()[i]?.drag||null}updateOnScroll(i,e){this._itemPositions.forEach(({clientRect:r})=>{ia(r,i,e)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){let i=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let r=e.getVisibleElement();return{drag:e,offset:0,initialTransform:r.style.transform||"",clientRect:gd(r)}}).sort((e,r)=>i?e.clientRect.left-r.clientRect.left:e.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(i,e,r){let n=this.orientation==="horizontal",o=n?e.left-i.left:e.top-i.top;return r===-1&&(o+=n?e.width-i.width:e.height-i.height),o}_getSiblingOffsetPx(i,e,r){let n=this.orientation==="horizontal",o=e[i].clientRect,c=e[i+r*-1],u=o[n?"width":"height"]*r;if(c){let h=n?"left":"top",_=n?"right":"bottom";r===-1?u-=c.clientRect[h]-o[_]:u+=o[h]-c.clientRect[_]}return u}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,n=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let c=r[r.length-1].clientRect;return n?i>=c.right:e>=c.bottom}else{let c=r[0].clientRect;return n?i<=c.left:e<=c.top}}_getItemIndexFromPointerPosition(i,e,r,n){let o=this.orientation==="horizontal",c=this._itemPositions.findIndex(({drag:u,clientRect:h})=>{if(u===i)return!1;if(n){let _=o?n.x:n.y;if(u===this._previousSwap.drag&&this._previousSwap.overlaps&&_===this._previousSwap.delta)return!1}return o?e>=Math.floor(h.left)&&e<Math.floor(h.right):r>=Math.floor(h.top)&&r<Math.floor(h.bottom)});return c===-1||!this._sortPredicate(c,i)?-1:c}},pd=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(i,e){this._document=i,this._dragDropRegistry=e}start(i){let e=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<e.length;r++){let n=e[r];this._relatedNodes.push([n,n.nextSibling])}this.withItems(i)}sort(i,e,r,n){let o=this._getItemIndexFromPointerPosition(i,e,r),c=this._previousSwap;if(o===-1||this._activeItems[o]===i)return null;let u=this._activeItems[o];if(c.drag===u&&c.overlaps&&c.deltaX===n.x&&c.deltaY===n.y)return null;let h=this.getItemIndex(i),_=i.getPlaceholderElement(),g=u.getRootElement();o>h?g.after(_):g.before(_),Ks(this._activeItems,h,o);let b=this._getRootNode().elementFromPoint(e,r);return c.deltaX=n.x,c.deltaY=n.y,c.drag=u,c.overlaps=g===b||g.contains(b),{previousIndex:h,currentIndex:o}}enter(i,e,r,n){let o=this._activeItems.indexOf(i);o>-1&&this._activeItems.splice(o,1);let c=n==null||n<0?this._getItemIndexFromPointerPosition(i,e,r):n;c===-1&&(c=this._getClosestItemIndexToPointer(i,e,r));let u=this._activeItems[c];u&&!this._dragDropRegistry.isDragging(u)?(this._activeItems.splice(c,0,i),u.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){let i=this._element,e=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[n,o]=this._relatedNodes[r];n.parentNode===i&&n.nextSibling!==o&&(o===null?i.appendChild(n):o.parentNode===i&&i.insertBefore(n,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}getItemAtIndex(i){return this._activeItems[i]||null}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,e,r){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(r)),o=n?this._activeItems.findIndex(c=>{let u=c.getRootElement();return n===u||u.contains(n)}):-1;return o===-1||!this._sortPredicate(o,i)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=bs(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,e,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,o=-1;for(let c=0;c<this._activeItems.length;c++){let u=this._activeItems[c];if(u!==i){let{x:h,y:_}=u.getRootElement().getBoundingClientRect(),g=Math.hypot(e-h,r-_);g<n&&(n=g,o=c)}}return o}},dp=.05,pp=.05,Ai=(function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t})(Ai||{}),ti=(function(t){return t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t})(ti||{}),fd=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ne;entered=new ne;exited=new ne;dropped=new ne;sorted=new ne;receivingStarted=new ne;receivingStopped=new ne;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Ft.EMPTY;_verticalScrollDirection=Ai.NONE;_horizontalScrollDirection=ti.NONE;_scrollNode;_stopScrollTimers=new ne;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(i,e,r,n,o){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=o;let c=this.element=qi(i);this._document=r,this.withOrientation("vertical").withElementContainer(c),e.registerDropContainer(this),this._parentPositions=new zs(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,r,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(i)),this._sortStrategy.enter(i,e,r,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,r,n,o,c,u,h={}){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:r,container:this,previousContainer:n,isPointerOverContainer:o,distance:c,dropPoint:u,event:h})}withItems(i){let e=this._draggables;return this._draggables=i,i.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>i.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof Us&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if(i==="mixed")this._sortStrategy=new pd(this._document,this._dragDropRegistry);else{let e=new Us(this._dragDropRegistry);e.direction=this._direction,e.orientation=i,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,r)=>this.sortPredicate(e,r,this)),this}withScrollableParents(i){let e=this._container;return this._scrollableElements=i.indexOf(e)===-1?[e,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;let e=qi(this.element),r=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(i);return r>-1&&this._scrollableElements.splice(r,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}getItemAtIndex(i){return this._isDragging?this._sortStrategy.getItemAtIndex(i):this._draggables[i]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,r,n){if(this.sortingDisabled||!this._domRect||!tp(this._domRect,dp,e,r))return;let o=this._sortStrategy.sort(i,e,r,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let r,n=Ai.NONE,o=ti.NONE;if(this._parentPositions.positions.forEach((c,u)=>{u===this._document||!c.clientRect||r||tp(c.clientRect,dp,i,e)&&([n,o]=i0(u,c.clientRect,this._direction,i,e),(n||o)&&(r=u))}),!n&&!o){let{width:c,height:u}=this._viewportRuler.getViewportSize(),h={width:c,height:u,top:0,right:c,bottom:u,left:0};n=fp(h,e),o=gp(h,i),r=window}r&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=r,(n||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),zm(0,Ul).pipe(bi(this._stopScrollTimers)).subscribe(()=>{let i=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Ai.UP?i.scrollBy(0,-e):this._verticalScrollDirection===Ai.DOWN&&i.scrollBy(0,e),this._horizontalScrollDirection===ti.LEFT?i.scrollBy(-e,0):this._horizontalScrollDirection===ti.RIGHT&&i.scrollBy(e,0)})};_isOverContainer(i,e){return this._domRect!=null&&ud(this._domRect,i,e)}_getSiblingContainerFromPosition(i,e,r){return this._siblings.find(n=>n._canReceive(i,e,r))}_canReceive(i,e,r){if(!this._domRect||!ud(this._domRect,e,r)||!this.enterPredicate(i,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,r);return n?n===this._container||this._container.contains(n):!1}_startReceiving(i,e){let r=this._activeSiblings;!r.has(i)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(r.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:e}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(i);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let i=bs(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let i=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}};function fp(t,i){let{top:e,bottom:r,height:n}=t,o=n*pp;return i>=e-o&&i<=e+o?Ai.UP:i>=r-o&&i<=r+o?Ai.DOWN:Ai.NONE}function gp(t,i){let{left:e,right:r,width:n}=t,o=n*pp;return i>=e-o&&i<=e+o?ti.LEFT:i>=r-o&&i<=r+o?ti.RIGHT:ti.NONE}function i0(t,i,e,r,n){let o=fp(i,n),c=gp(i,r),u=Ai.NONE,h=ti.NONE;if(o){let _=t.scrollTop;o===Ai.UP?_>0&&(u=Ai.UP):t.scrollHeight-_>t.clientHeight&&(u=Ai.DOWN)}if(c){let _=t.scrollLeft;e==="rtl"?c===ti.RIGHT?_<0&&(h=ti.RIGHT):t.scrollWidth+_>t.clientWidth&&(h=ti.LEFT):c===ti.LEFT?_>0&&(h=ti.LEFT):t.scrollWidth-_>t.clientWidth&&(h=ti.RIGHT)}return[u,h]}var ta={capture:!0},ld={passive:!1,capture:!0},r0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return t})(),vd=(()=>{class t{_ngZone=E(Je);_document=E(st);_styleLoader=E(ui);_renderer=E(ir).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new ne;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=ct([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new ne;pointerUp=new ne;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,ld)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,r){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(r0),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=r.type.startsWith("touch"),o=u=>this.pointerUp.next(u),c=[["scroll",u=>this._scroll.next(u),ta],["selectstart",this._preventDefaultWhileDragging,ld]];n?c.push(["touchend",o,ta],["touchcancel",o,ta]):c.push(["mouseup",o,ta]),n||c.push(["mousemove",u=>this.pointerMove.next(u),ld]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=c.map(([u,h,_])=>this._renderer.listen(this._document,u,h,_))})}}stopDragging(e){this._activeDragInstances.update(r=>{let n=r.indexOf(e);return n>-1?(r.splice(n,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let r=[this._scroll];return e&&e!==this._document&&r.push(new _n(n=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(e,"scroll",c=>{this._activeDragInstances().length&&n.next(c)},ta);return()=>{o()}}))),yi(...r)}registerDirectiveNode(e,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,r)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),n0={dragStartThreshold:5,pointerDirectionChangeThreshold:5},yd=(()=>{class t{_document=E(st);_ngZone=E(Je);_viewportRuler=E(yn);_dragDropRegistry=E(vd);_renderer=E(ir).createRenderer(null,null);constructor(){}createDrag(e,r=n0){return new hd(e,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new fd(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ws=new Ie("CDK_DRAG_PARENT");var _p=new Ie("CdkDragHandle"),vp=(()=>{class t{element=E(We);_parentDrag=E(Ws,{optional:!0,skipSelf:!0});_dragDropRegistry=E(vd);_stateChanges=new ne;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let r=this._dragDropRegistry.getDragDirectiveForNode(e);if(r){this._parentDrag=r,r._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Xe]},features:[Rt([{provide:_p,useExisting:t}])]})}return t})(),yp=new Ie("CDK_DRAG_CONFIG"),bp=new Ie("CdkDropList"),xp=(()=>{class t{element=E(We);dropContainer=E(bp,{optional:!0,skipSelf:!0});_ngZone=E(Je);_viewContainerRef=E(zr);_dir=E(vr,{optional:!0});_changeDetectorRef=E(Mt);_selfHandle=E(_p,{optional:!0,self:!0});_parentDrag=E(Ws,{optional:!0,skipSelf:!0});_dragDropRegistry=E(vd);_destroyed=new ne;_handles=new Bt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Ve;released=new Ve;ended=new Ve;entered=new Ve;exited=new Ve;dropped=new Ve;moved=new _n(e=>{let r=this._dragRef.moved.pipe(pt(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{r.unsubscribe()}});_injector=E(It);constructor(){let e=this.dropContainer,r=E(yp,{optional:!0}),n=E(yd);this._dragRef=n.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(bi(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){rr(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let r=e.rootElementSelector,n=e.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let r=this._handles.getValue();r.push(e),this._handles.next(r)}_removeHandle(e){let r=this._handles.getValue(),n=r.indexOf(e);n>-1&&(r.splice(n,1),this._handles.next(r))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,r=e;this.rootElementSelector&&(r=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):qi(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let r=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:qn(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),r&&e.withDirection(r.value)}}),e.beforeStarted.pipe($n(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let n=this._dragDropRegistry.getDragDirectiveForNode(r);if(n){e.withParent(n._dragRef);break}r=r.parentElement}})}_handleEvents(e){e.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),e.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),e.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),e.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(e){let{lockAxis:r,dragStartDelay:n,constrainPosition:o,previewClass:c,boundaryElement:u,draggingDisabled:h,rootElementSelector:_,previewContainer:g}=e;this.disabled=h??!1,this.dragStartDelay=n||0,this.lockAxis=r||null,o&&(this.constrainPosition=o),c&&(this.previewClass=c),u&&(this.boundaryElement=u),_&&(this.rootElementSelector=_),g&&(this.previewContainer=g)}_setupHandlesListener(){this._handles.pipe(jn(e=>{let r=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Ho(e=>yi(...e.map(r=>r._stateChanges.pipe(ci(r))))),bi(this._destroyed)).subscribe(e=>{let r=this._dragRef,n=e.element.nativeElement;e.disabled?r.disableHandle(n):r.enableHandle(n)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,n){r&2&&it("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Xe],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",At]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Rt([{provide:Ws,useExisting:t}]),fr]})}return t})(),up=new Ie("CdkDropListGroup");var wp=(()=>{class t{element=E(We);_changeDetectorRef=E(Mt);_scrollDispatcher=E(Go);_dir=E(vr,{optional:!0});_group=E(up,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ne;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=E(Oi).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new Ve;entered=new Ve;exited=new Ve;sorted=new Ve;_unsortedItems=new Set;constructor(){let e=E(yd),r=E(yp,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(n,o)=>this.enterPredicate(n.data,o.data),this._dropListRef.sortPredicate=(n,o,c)=>this.sortPredicate(n,o.data,c.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(e._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,r)=>e._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(ci(this._dir.value),bi(this._destroyed)).subscribe(r=>e.withDirection(r)),e.beforeStarted.subscribe(()=>{let r=qo(this.connectedTo).map(n=>{if(typeof n=="string"){let o=t._dropLists.find(c=>c.id===n);return o}return n});if(this._group&&this._group._items.forEach(n=>{r.indexOf(n)===-1&&r.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(n)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=qn(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(r.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),e.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),e.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),yi(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:r,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:c,listOrientation:u}=e;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=c??!1,this.orientation=u||"vertical",this.lockAxis=r||null}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,n){r&2&&(Ke("id",n.id),it("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Xe],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Xe],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Xe],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",Xe]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Rt([{provide:up,useValue:void 0},{provide:bp,useExisting:t}])]})}return t})();var o0=new Ie("CdkDragPlaceholder"),Cp=(()=>{class t{templateRef=E(gr);_drag=E(Ws,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[Rt([{provide:o0,useExisting:t}])]})}return t})();var Sp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({providers:[yd],imports:[Rs]})}return t})();var s0=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],c0=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function l0(t,i){t&1&&(N(0,"span",3),tt(1,1),B())}function d0(t,i){t&1&&(N(0,"span",6),tt(1,2),B())}var u0=["*"];var m0=new Ie("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),kp=new Ie("MatChipAvatar"),Ep=new Ie("MatChipTrailingIcon"),Ip=new Ie("MatChipEdit"),bd=new Ie("MatChipRemove"),Dp=new Ie("MatChip"),xd=(()=>{class t{_elementRef=E(We);_parentChip=E(Dp);isInteractive=!0;_isPrimary=!0;_isLeading=!1;get disabled(){return this._disabled||this._parentChip?.disabled||!1}set disabled(e){this._disabled=e}_disabled=!1;tabIndex=-1;_allowFocusWhenDisabled=!1;_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(){E(ui).load(br),this._elementRef.nativeElement.nodeName==="BUTTON"&&this._elementRef.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:11,hostBindings:function(r,n){r&1&&he("click",function(c){return n._handleClick(c)})("keydown",function(c){return n._handleKeydown(c)}),r&2&&(Ke("tabindex",n._getTabindex())("disabled",n._getDisabledAttribute())("aria-disabled",n.disabled),it("mdc-evolution-chip__action--primary",n._isPrimary)("mdc-evolution-chip__action--presentational",!n.isInteractive)("mdc-evolution-chip__action--secondary",!n._isPrimary)("mdc-evolution-chip__action--trailing",!n._isPrimary&&!n._isLeading))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",Xe],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?-1:At(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"}})}return t})();var Rp=(()=>{class t extends xd{_isPrimary=!1;_handleClick(e){this.disabled||(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275dir=Ne({type:t,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(r,n){r&2&&Ke("aria-hidden",null)},features:[Rt([{provide:bd,useExisting:t}]),Jt]})}return t})(),Cd=(()=>{class t{_changeDetectorRef=E(Mt);_elementRef=E(We);_tagName=E(th);_ngZone=E(Je);_focusMonitor=E(xs);_globalRippleOptions=E(Xn,{optional:!0});_document=E(st);_onFocus=new ne;_onBlur=new ne;_isBasicChip;role=null;_hasFocusInternal=!1;_pendingFocus;_actionChanges;_animationsDisabled=Qi();_allLeadingIcons;_allTrailingIcons;_allEditIcons;_allRemoveIcons;_hasFocus(){return this._hasFocusInternal}id=E(Oi).getId("mat-mdc-chip-");ariaLabel=null;ariaDescription=null;_chipListDisabled=!1;_hadFocusOnRemove=!1;_textElement;get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}_value;color;removable=!0;highlighted=!1;disableRipple=!1;get disabled(){return this._disabled||this._chipListDisabled}set disabled(e){this._disabled=e}_disabled=!1;removed=new Ve;destroyed=new Ve;basicChipAttrName="mat-basic-chip";leadingIcon;editIcon;trailingIcon;removeIcon;primaryAction;_rippleLoader=E(Mh);_injector=E(It);constructor(){let e=E(ui);e.load(br),e.load(_h),this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){this._isBasicChip=this._elementRef.nativeElement.hasAttribute(this.basicChipAttrName)||this._tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=yi(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allEditIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&(this._hadFocusOnRemove=this._hasFocus(),this.removed.emit({chip:this}))}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!this._hasInteractiveActions()||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(e){(e.keyCode===8&&!e.repeat||e.keyCode===46)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(r=>{let n=r._elementRef.nativeElement;return n===e||n.contains(e)})}_getActions(){let e=[];return this.editIcon&&e.push(this.editIcon),this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_hasInteractiveActions(){return this._getActions().some(e=>e.isInteractive)}_edit(e){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let r=e!==null;r!==this._hasFocusInternal&&(this._hasFocusInternal=r,r?this._onFocus.next({chip:this}):(this._changeDetectorRef.markForCheck(),setTimeout(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})))))})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(r,n,o){if(r&1&&(Ct(o,kp,5),Ct(o,Ip,5),Ct(o,Ep,5),Ct(o,bd,5),Ct(o,kp,5),Ct(o,Ep,5),Ct(o,Ip,5),Ct(o,bd,5)),r&2){let c;Oe(c=Te())&&(n.leadingIcon=c.first),Oe(c=Te())&&(n.editIcon=c.first),Oe(c=Te())&&(n.trailingIcon=c.first),Oe(c=Te())&&(n.removeIcon=c.first),Oe(c=Te())&&(n._allLeadingIcons=c),Oe(c=Te())&&(n._allTrailingIcons=c),Oe(c=Te())&&(n._allEditIcons=c),Oe(c=Te())&&(n._allRemoveIcons=c)}},viewQuery:function(r,n){if(r&1&&Vt(xd,5),r&2){let o;Oe(o=Te())&&(n.primaryAction=o.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(r,n){r&1&&he("keydown",function(c){return n._handleKeydown(c)}),r&2&&(Zm("id",n.id),Ke("role",n.role)("aria-label",n.ariaLabel),_r("mat-"+(n.color||"primary")),it("mdc-evolution-chip",!n._isBasicChip)("mdc-evolution-chip--disabled",n.disabled)("mdc-evolution-chip--with-trailing-action",n._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",n.leadingIcon)("mdc-evolution-chip--with-primary-icon",n.leadingIcon)("mdc-evolution-chip--with-avatar",n.leadingIcon)("mat-mdc-chip-with-avatar",n.leadingIcon)("mat-mdc-chip-highlighted",n.highlighted)("mat-mdc-chip-disabled",n.disabled)("mat-mdc-basic-chip",n._isBasicChip)("mat-mdc-standard-chip",!n._isBasicChip)("mat-mdc-chip-with-trailing-icon",n._hasTrailingIcon())("_mat-animation-noopable",n._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",Xe],highlighted:[2,"highlighted","highlighted",Xe],disableRipple:[2,"disableRipple","disableRipple",Xe],disabled:[2,"disabled","disabled",Xe]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[Rt([{provide:Dp,useExisting:t}])],ngContentSelectors:c0,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(r,n){r&1&&(li(s0),ft(0,"span",0),N(1,"span",1)(2,"span",2),Wt(3,l0,2,0,"span",3),N(4,"span",4),tt(5),ft(6,"span",5),B()()(),Wt(7,d0,2,0,"span",6)),r&2&&(K(2),pe("isInteractive",!1),K(),Kt(n.leadingIcon?3:-1),K(4),Kt(n._hasTrailingIcon()?7:-1))},dependencies:[xd],styles:[`.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}@media(forced-colors: active){.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{forced-color-adjust:none}}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mat-chip-outline-width, 1px);border-radius:var(--mat-chip-container-shape-radius, 8px);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mat-chip-outline-color, var(--mat-sys-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mat-chip-focus-outline-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mat-chip-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mat-chip-flat-selected-outline-width, 0)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--secondary{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--secondary{color:var(--mat-chip-with-trailing-icon-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--secondary{color:var(--mat-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mat-chip-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-chip-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-chip-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mat-chip-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-chip-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mat-chip-label-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mat-chip-selected-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mat-chip-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mat-chip-with-avatar-avatar-size, 24px);height:var(--mat-chip-with-avatar-avatar-size, 24px);font-size:var(--mat-chip-with-avatar-avatar-size, 24px)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__graphic{padding-left:0}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mat-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mat-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@media(forced-colors: active){.mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity, 1)*var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity, 1)*var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mat-mdc-standard-chip{border-radius:var(--mat-chip-container-shape-radius, 8px);height:var(--mat-chip-container-height, 32px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mat-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mat-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mat-chip-elevated-selected-container-color, var(--mat-sys-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mat-chip-flat-disabled-selected-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}@media(forced-colors: active){.mat-mdc-standard-chip{outline:solid 1px}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mat-chip-with-avatar-avatar-shape-radius, 24px);width:var(--mat-chip-with-icon-icon-size, 18px);height:var(--mat-chip-with-icon-icon-size, 18px);font-size:var(--mat-chip-with-icon-icon-size, 18px)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mat-chip-with-icon-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mat-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-highlighted{--mat-chip-with-icon-icon-color: var(--mat-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container));--mat-chip-elevated-container-color: var(--mat-chip-elevated-selected-container-color, var(--mat-sys-secondary-container));--mat-chip-label-text-color: var(--mat-chip-selected-label-text-color, var(--mat-sys-on-secondary-container));--mat-chip-outline-width: var(--mat-chip-flat-selected-outline-width, 0)}.mat-mdc-chip-focus-overlay{background:var(--mat-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mat-chip-hover-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mat-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-hover-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mat-chip-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mat-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mat-chip-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mat-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mat-chip-with-avatar-disabled-avatar-opacity, 0.38)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mat-chip-with-icon-disabled-icon-opacity, 0.38)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity, 1)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-edit,.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity, 1)}.mat-mdc-chip-edit:focus,.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity, 1)}.mat-mdc-chip-edit::after,.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-edit:hover::after,.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-edit:focus::after,.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mat-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-edit::before,.mat-mdc-chip-remove::before{margin:calc(var(--mat-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-edit::after,.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-edit .mat-icon,.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}@media(forced-colors: active){.mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}}.mat-mdc-chip-action:focus .mat-focus-indicator::before{content:""}.mdc-evolution-chip__icon,.mat-mdc-chip-edit .mat-icon,.mat-mdc-chip-remove .mat-icon{min-height:fit-content}
`],encapsulation:2,changeDetection:0})}return t})();var Mp=(()=>{class t{_elementRef=E(We);_changeDetectorRef=E(Mt);_dir=E(vr,{optional:!0});_lastDestroyedFocusedChipIndex=null;_keyManager;_destroyed=new ne;_defaultRole="presentation";get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}_disabled=!1;get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}tabIndex=0;set role(e){this._explicitRole=e}_explicitRole=null;get focused(){return this._hasFocusedChip()}_chips;_chipActions=new Kl;constructor(){}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips?.forEach(e=>{e._chipListDisabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){let e=this._elementRef.nativeElement.tabIndex;e!==-1&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=e))}_getChipStream(e){return this._chips.changes.pipe(ci(null),Ho(()=>yi(...this._chips.map(e))))}_originatesFromChip(e){let r=e.target;for(;r&&r!==this._elementRef.nativeElement;){if(r.classList.contains("mat-mdc-chip"))return!0;r=r.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(ci(this._chips)).subscribe(e=>{let r=[];e.forEach(n=>n._getActions().forEach(o=>r.push(o))),this._chipActions.reset(r),this._chipActions.notifyOnChanges()}),this._keyManager=new Gl(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(bi(this._destroyed)).subscribe(({chip:e})=>{let r=e._getSourceAction(document.activeElement);r&&this._keyManager.updateActiveItem(r)}),this._dir?.change.pipe(bi(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(ci(null),bi(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(bi(this._destroyed)).subscribe(e=>{let n=this._chips.toArray().indexOf(e.chip),o=e.chip._hasFocus(),c=e.chip._hadFocusOnRemove&&this._keyManager.activeItem&&e.chip._getActions().includes(this._keyManager.activeItem),u=o||c;this._isValidIndex(n)&&u&&(this._lastDestroyedFocusedChipIndex=n)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),r=this._chips.toArray()[e];r.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():r.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-chip-set"]],contentQueries:function(r,n,o){if(r&1&&Ct(o,Cd,5),r&2){let c;Oe(c=Te())&&(n._chips=c)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(r,n){r&1&&he("keydown",function(c){return n._handleKeydown(c)}),r&2&&Ke("role",n.role)},inputs:{disabled:[2,"disabled","disabled",Xe],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:At(e)]},ngContentSelectors:u0,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(r,n){r&1&&(li(),Ki(0,"div",0),tt(1),nr())},styles:[`.mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input::placeholder{opacity:1}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input::-moz-placeholder{opacity:1}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input::-webkit-input-placeholder{opacity:1}.mat-mdc-form-field:not(.mat-form-field-hide-placeholder) input.mat-mdc-chip-input:-ms-input-placeholder{opacity:1}.mat-mdc-chip-set+input.mat-mdc-chip-input{margin-left:0;margin-right:0}
`],encapsulation:2,changeDetection:0})}return t})();var Pp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({providers:[Dh,{provide:m0,useValue:{separatorKeyCodes:[13]}}],imports:[gt,Yn,gt]})}return t})();var qs;function p0(){if(qs===void 0&&(qs=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(qs=t.trustedTypes.createPolicy("angular#components",{createHTML:i=>i}))}return qs}function oa(t){return p0()?.createHTML(t)||t}function Op(t){return Error(`Unable to find icon with the name "${t}"`)}function f0(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function Tp(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function Ap(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var xr=class{url;svgText;options;svgElement;constructor(i,e,r){this.url=i,this.svgText=e,this.options=r}},Np=(()=>{class t{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,r,n,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._document=n}addSvgIcon(e,r,n){return this.addSvgIconInNamespace("",e,r,n)}addSvgIconLiteral(e,r,n){return this.addSvgIconLiteralInNamespace("",e,r,n)}addSvgIconInNamespace(e,r,n,o){return this._addSvgIconConfig(e,r,new xr(n,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,n,o){let c=this._sanitizer.sanitize(Hn.HTML,n);if(!c)throw Ap(n);let u=oa(c);return this._addSvgIconConfig(e,r,new xr("",u,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,n){return this._addSvgIconSetConfig(e,new xr(r,null,n))}addSvgIconSetLiteralInNamespace(e,r,n){let o=this._sanitizer.sanitize(Hn.HTML,r);if(!o)throw Ap(r);let c=oa(o);return this._addSvgIconSetConfig(e,new xr("",c,n))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let r=this._sanitizer.sanitize(Hn.RESOURCE_URL,e);if(!r)throw Tp(e);let n=this._cachedIconsByUrl.get(r);return n?tr(Qs(n)):this._loadSvgIconFromConfig(new xr(e,null)).pipe(jn(o=>this._cachedIconsByUrl.set(r,o)),pt(o=>Qs(o)))}getNamedSvgIcon(e,r=""){let n=Lp(r,e),o=this._svgIconConfigs.get(n);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(n,o),this._getSvgFromConfig(o);let c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(e,c):Vm(Op(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?tr(Qs(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(pt(r=>Qs(r)))}_getSvgFromIconSetConfigs(e,r){let n=this._extractIconWithNameFromAnySet(e,r);if(n)return tr(n);let o=r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(jm(u=>{let _=`Loading icon set URL: ${this._sanitizer.sanitize(Hn.RESOURCE_URL,c.url)} failed: ${u.message}`;return this._errorHandler.handleError(new Error(_)),tr(null)})));return $m(o).pipe(pt(()=>{let c=this._extractIconWithNameFromAnySet(e,r);if(!c)throw Op(e);return c}))}_extractIconWithNameFromAnySet(e,r){for(let n=r.length-1;n>=0;n--){let o=r[n];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let c=this._svgElementFromConfig(o),u=this._extractSvgIconFromSet(c,e,o.options);if(u)return u}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(jn(r=>e.svgText=r),pt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?tr(null):this._fetchIcon(e).pipe(jn(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,n){let o=e.querySelector(`[id="${r}"]`);if(!o)return null;let c=o.cloneNode(!0);if(c.removeAttribute("id"),c.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(c,n);if(c.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(c),n);let u=this._svgElementFromString(oa("<svg></svg>"));return u.appendChild(c),this._setSvgAttributes(u,n)}_svgElementFromString(e){let r=this._document.createElement("DIV");r.innerHTML=e;let n=r.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){let r=this._svgElementFromString(oa("<svg></svg>")),n=e.attributes;for(let o=0;o<n.length;o++){let{name:c,value:u}=n[o];c!=="id"&&r.setAttribute(c,u)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){let{url:r,options:n}=e,o=n?.withCredentials??!1;if(!this._httpClient)throw f0();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let c=this._sanitizer.sanitize(Hn.RESOURCE_URL,r);if(!c)throw Tp(r);let u=this._inProgressUrlFetches.get(c);if(u)return u;let h=this._httpClient.get(c,{responseType:"text",withCredentials:o}).pipe(pt(_=>oa(_)),Hm(()=>this._inProgressUrlFetches.delete(c)),Wm());return this._inProgressUrlFetches.set(c,h),h}_addSvgIconConfig(e,r,n){return this._svgIconConfigs.set(Lp(e,r),n),this}_addSvgIconSetConfig(e,r){let n=this._iconSetConfigs.get(e);return n?n.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){let r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let n=0;n<this._resolvers.length;n++){let o=this._resolvers[n](r,e);if(o)return g0(o)?new xr(o.url,null,o.options):new xr(o,null)}}static \u0275fac=function(r){return new(r||t)(Wo(sh,8),Wo(ch),Wo(st,8),Wo(Ko))};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qs(t){return t.cloneNode(!0)}function Lp(t,i){return t+":"+i}function g0(t){return!!(t.url&&t.options)}var _0=["*"],v0=new Ie("MAT_ICON_DEFAULT_OPTIONS"),y0=new Ie("mat-icon-location",{providedIn:"root",factory:b0});function b0(){let t=E(st),i=t?t.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}var Fp=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],x0=Fp.map(t=>`[${t}]`).join(", "),w0=/^url\(['"]?#(.*?)['"]?\)$/,Li=(()=>{class t{_elementRef=E(We);_iconRegistry=E(Np);_location=E(y0);_errorHandler=E(Ko);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Ft.EMPTY;constructor(){let e=E(new ps("aria-hidden"),{optional:!0}),r=E(v0,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let n=e.childNodes[r];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>e.classList.remove(n)),r.forEach(n=>e.classList.add(n)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let r=this._elementsWithExternalReferences;r&&r.forEach((n,o)=>{n.forEach(c=>{o.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){let r=e.querySelectorAll(x0),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)Fp.forEach(c=>{let u=r[o],h=u.getAttribute(c),_=h?h.match(w0):null;if(_){let g=n.get(u);g||(g=[],n.set(u,g)),g.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[r,n]=this._splitIconName(e);r&&(this._svgNamespace=r),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,r).pipe($n(1)).subscribe(o=>this._setSvgElement(o),o=>{let c=`Error retrieving icon ${r}:${n}! ${o.message}`;this._errorHandler.handleError(new Error(c))})}}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,n){r&2&&(Ke("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),_r(n.color?"mat-"+n.color:""),it("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Xe],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:_0,decls:1,vars:0,template:function(r,n){r&1&&(li(),tt(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return t})(),Ni=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[gt,gt]})}return t})();function E0(t,i){if(t&1){let e=Tt();N(0,"mat-chip",17),he("removed",function(){let n=ge(e).$implicit,o=ue(2);return _e(o.onRemoveItem(n))}),W(1),N(2,"button",18)(3,"mat-icon"),W(4,"cancel"),B()()()}if(t&2){let e=i.$implicit;pe("removable",!0),K(),xi(" ",e," ")}}function I0(t,i){if(t&1&&(N(0,"div",15)(1,"h3"),W(2),B(),N(3,"mat-chip-set"),Dt(4,E0,5,2,"mat-chip",16),B()()),t&2){let e=ue();K(2),xi("Items (",e.items().length,")"),K(2),pe("ngForOf",e.items())}}var Xs=class t{constructor(i){this.snackBar=i}listName=lt.required();items=lt.required();currentItem=lt.required();pastedText=lt.required();isDisabled=lt(!1);canAddItem=lt(!1);canStartSort=lt(!1);currentListId=lt(void 0);listNameChange=je();currentItemChange=je();pastedTextChange=je();addItem=je();removeItem=je();startSort=je();clearList=je();fileSelected=je();addPastedItems=je();onListNameChange(i){this.listNameChange.emit(i)}onCurrentItemChange(i){this.currentItemChange.emit(i)}onPastedTextChange(i){this.pastedTextChange.emit(i)}onAddItem(){this.addItem.emit()}onRemoveItem(i){this.removeItem.emit(i)}onStartSort(){this.startSort.emit()}onClearList(){this.clearList.emit()}onKeyPress(i){i.key==="Enter"&&this.onAddItem()}onFileSelected(i){let e=i.target;if(!e.files||e.files.length===0)return;let r=e.files[0];this.fileSelected.emit(r),e.value=""}onAddPastedItems(){this.addPastedItems.emit()}static \u0275fac=function(e){return new(e||t)(Un(xn))};static \u0275cmp=ke({type:t,selectors:[["app-list-input"]],inputs:{listName:[1,"listName"],items:[1,"items"],currentItem:[1,"currentItem"],pastedText:[1,"pastedText"],isDisabled:[1,"isDisabled"],canAddItem:[1,"canAddItem"],canStartSort:[1,"canStartSort"],currentListId:[1,"currentListId"]},outputs:{listNameChange:"listNameChange",currentItemChange:"currentItemChange",pastedTextChange:"pastedTextChange",addItem:"addItem",removeItem:"removeItem",startSort:"startSort",clearList:"clearList",fileSelected:"fileSelected",addPastedItems:"addPastedItems"},decls:51,vars:15,consts:[["fileInput",""],[1,"input-card"],["appearance","outline",1,"full-width"],["matInput","","placeholder","e.g., Favorite Movies",3,"ngModelChange","ngModel","disabled"],["matPrefix",""],["matInput","","placeholder","Enter an item",3,"ngModelChange","keypress","ngModel","disabled"],["mat-icon-button","","matSuffix","",3,"click","disabled"],[1,"file-upload-section"],["type","file","accept",".txt,.csv",2,"display","none",3,"change"],["mat-stroked-button","",3,"click","disabled"],[1,"paste-section"],["matInput","","placeholder","Paste items here (one per line or comma-separated)","rows","5",3,"ngModelChange","ngModel","disabled"],["class","items-list",4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click","disabled"],[1,"items-list"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removed","removable"],["matChipRemove",""]],template:function(e,r){if(e&1){let n=Tt();N(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),W(3),B(),N(4,"mat-card-subtitle"),W(5),B()(),N(6,"mat-card-content")(7,"mat-form-field",2)(8,"mat-label"),W(9,"List Name"),B(),N(10,"input",3),he("ngModelChange",function(c){return ge(n),_e(r.onListNameChange(c))}),B(),N(11,"mat-icon",4),W(12,"label"),B()(),N(13,"mat-form-field",2)(14,"mat-label"),W(15,"Add Item"),B(),N(16,"input",5),he("ngModelChange",function(c){return ge(n),_e(r.onCurrentItemChange(c))})("keypress",function(c){return ge(n),_e(r.onKeyPress(c))}),B(),N(17,"mat-icon",4),W(18,"add"),B(),N(19,"button",6),he("click",function(){return ge(n),_e(r.onAddItem())}),N(20,"mat-icon"),W(21,"add_circle"),B()()(),N(22,"div",7)(23,"input",8,0),he("change",function(c){return ge(n),_e(r.onFileSelected(c))}),B(),N(25,"button",9),he("click",function(){ge(n);let c=Xl(24);return _e(c.click())}),N(26,"mat-icon"),W(27,"upload_file"),B(),W(28," Import from File (TXT/CSV) "),B()(),N(29,"div",10)(30,"mat-form-field",2)(31,"mat-label"),W(32,"Or Paste Your List"),B(),N(33,"textarea",11),he("ngModelChange",function(c){return ge(n),_e(r.onPastedTextChange(c))}),W(34,"        "),B(),N(35,"mat-icon",4),W(36,"content_paste"),B()(),N(37,"button",9),he("click",function(){return ge(n),_e(r.onAddPastedItems())}),N(38,"mat-icon"),W(39,"add_box"),B(),W(40," Add Pasted Items "),B()(),Dt(41,I0,5,2,"div",12),B(),N(42,"mat-card-actions")(43,"button",13),he("click",function(){return ge(n),_e(r.onStartSort())}),N(44,"mat-icon"),W(45,"sort"),B(),W(46),B(),N(47,"button",14),he("click",function(){return ge(n),_e(r.onClearList())}),N(48,"mat-icon"),W(49,"clear"),B(),W(50," Clear List "),B()()()}e&2&&(K(3),$t(r.currentListId()?"Edit Your List":"Create Your List"),K(2),$t(r.currentListId()?"Add more items and re-sort":"Add items to sort based on your preferences"),K(5),pe("ngModel",r.listName())("disabled",r.isDisabled()),K(6),pe("ngModel",r.currentItem())("disabled",r.isDisabled()),K(3),pe("disabled",!r.canAddItem()),K(6),pe("disabled",r.isDisabled()),K(8),pe("ngModel",r.pastedText())("disabled",r.isDisabled()),K(4),pe("disabled",!r.pastedText()||r.pastedText().trim().length===0||r.isDisabled()),K(4),pe("ngIf",r.items().length>0),K(2),pe("disabled",!r.canStartSort()),K(3),xi(" ",r.currentListId()?"Re-Sort List":"Start Sorting"," "),K(),pe("disabled",r.items().length===0))},dependencies:[di,Ur,Kn,ys,gs,_s,vs,ar,or,Qn,qr,Xr,Qr,Kr,mi,Ti,Is,Es,ks,Cs,Eh,Ih,ws,Ss,Pp,Cd,Rp,Mp,Ni,Li,$s],styles:[".input-card[_ngcontent-%COMP%]   .file-upload-section[_ngcontent-%COMP%], .input-card[_ngcontent-%COMP%]   .paste-section[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#677eea0d;border-radius:8px;border:2px dashed rgba(103,126,234,.3)}.input-card[_ngcontent-%COMP%]   .file-upload-section[_ngcontent-%COMP%]{text-align:center}.input-card[_ngcontent-%COMP%]   .paste-section[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.input-card[_ngcontent-%COMP%]   .paste-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]{margin-top:1.5rem}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.75rem;color:#000000de}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.full-width[_ngcontent-%COMP%]{width:100%}"]})};function D0(t,i){t&1&&jr(0,"div",2)}var R0=new Ie("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Vp=(()=>{class t{_elementRef=E(We);_ngZone=E(Je);_changeDetectorRef=E(Mt);_renderer=E(Wi);_cleanupTransitionEnd;constructor(){let e=kh(),r=E(R0,{optional:!0});this._isNoopAnimation=e==="di-disabled",e==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),r&&(r.color&&(this.color=this._defaultColor=r.color),this.mode=r.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=Bp(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=Bp(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new Ve;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,n){r&2&&(Ke("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),_r("mat-"+n.color),it("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",At],bufferValue:[2,"bufferValue","bufferValue",At],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,n){r&1&&(Ki(0,"div",0),jr(1,"div",1),Wt(2,D0,1,0,"div",2),nr(),Ki(3,"div",3),jr(4,"span",4),nr(),Ki(5,"div",5),jr(6,"span",4),nr()),r&2&&(K(),Hr("flex-basis",n._getBufferBarFlexBasis()),K(),Kt(n.mode==="buffer"?2:-1),K(),Hr("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return t})();function Bp(t,i=0,e=100){return Math.max(i,Math.min(e,t))}var $p=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[gt]})}return t})();var zp=(()=>{class t{get vertical(){return this._vertical}set vertical(e){this._vertical=yr(e)}_vertical=!1;get inset(){return this._inset}set inset(e){this._inset=yr(e)}_inset=!1;static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,n){r&2&&(Ke("aria-orientation",n.vertical?"vertical":"horizontal"),it("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,n){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return t})(),Gs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[gt,gt]})}return t})();var Zs=class t{sortState=lt.required();selectOption=je();cancelSort=je();onSelectOption(i){this.selectOption.emit(i)}onCancelSort(){this.cancelSort.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ke({type:t,selectors:[["app-sorting-comparison"]],inputs:{sortState:[1,"sortState"]},outputs:{selectOption:"selectOption",cancelSort:"cancelSort"},decls:35,vars:5,consts:[[1,"sorting-card"],["mode","determinate",1,"progress-bar",3,"value"],[1,"comparison-container"],["mat-raised-button","","color","primary",1,"comparison-button",3,"click"],[1,"comparison-content"],[1,"or-divider"],["mat-stroked-button","",1,"equal-button",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(e,r){if(e&1&&(N(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),W(3,"Which do you prefer?"),B(),N(4,"mat-card-subtitle"),W(5),B()(),N(6,"mat-card-content"),ft(7,"mat-progress-bar",1),N(8,"div",2)(9,"button",3),he("click",function(){return r.onSelectOption("A")}),N(10,"div",4)(11,"mat-icon"),W(12,"thumb_up"),B(),N(13,"span"),W(14),B()()(),N(15,"div",5),ft(16,"mat-divider"),N(17,"span"),W(18,"OR"),B(),ft(19,"mat-divider"),B(),N(20,"button",3),he("click",function(){return r.onSelectOption("B")}),N(21,"div",4)(22,"mat-icon"),W(23,"thumb_up"),B(),N(24,"span"),W(25),B()()()(),N(26,"button",6),he("click",function(){return r.onSelectOption("Equal")}),N(27,"mat-icon"),W(28,"balance"),B(),W(29," They're Equal "),B()(),N(30,"mat-card-actions")(31,"button",7),he("click",function(){return r.onCancelSort()}),N(32,"mat-icon"),W(33,"cancel"),B(),W(34," Cancel Sort "),B()()()),e&2){let n,o;K(5),Wn(" Comparison ",r.sortState().completedComparisons+1," of ~",r.sortState().totalComparisons," "),K(2),pe("value",r.sortState().progress),K(7),$t((n=r.sortState().currentPair)==null?null:n.itemA),K(11),$t((o=r.sortState().currentPair)==null?null:o.itemB)}},dependencies:[di,ar,or,Qn,qr,Xr,Qr,Kr,mi,Ti,Ni,Li,$p,Vp,Gs,zp],styles:[".sorting-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{margin-bottom:2rem;height:8px;border-radius:4px}.sorting-card[_ngcontent-%COMP%]   .comparison-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]{width:100%;min-height:80px;font-size:1.1rem;padding:1rem;transition:all .3s ease}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]   .comparison-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:center}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]   .comparison-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]   .comparison-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.sorting-card[_ngcontent-%COMP%]   .or-divider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:.5rem 0}.sorting-card[_ngcontent-%COMP%]   .or-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#0000008a;white-space:nowrap}.sorting-card[_ngcontent-%COMP%]   .or-divider[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{flex:1}.sorting-card[_ngcontent-%COMP%]   .equal-button[_ngcontent-%COMP%]{width:100%;margin-top:1rem;padding:.75rem}.sorting-card[_ngcontent-%COMP%]   .equal-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}"]})};var ca=(()=>{class t{_listeners=[];notify(e,r){for(let n of this._listeners)n(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var jp=new Ie("CdkAccordion");var Hp=(()=>{class t{accordion=E(jp,{optional:!0,skipSelf:!0});_changeDetectorRef=E(Mt);_expansionDispatcher=E(ca);_openCloseAllSubscription=Ft.EMPTY;closed=new Ve;opened=new Ve;destroyed=new Ve;expandedChange=new Ve;id=E(Oi).getId("cdk-accordion-child-");get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let r=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,r)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}_expanded=!1;get disabled(){return this._disabled()}set disabled(e){this._disabled.set(e)}_disabled=ct(!1);_removeUniqueSelectionListener=()=>{};constructor(){}ngOnInit(){this._removeUniqueSelectionListener=this._expansionDispatcher.listen((e,r)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===r&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",Xe],disabled:[2,"disabled","disabled",Xe]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Rt([{provide:jp,useValue:void 0}])]})}return t})(),Up=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({})}return t})();var O0=["body"],T0=["bodyWrapper"],A0=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],L0=["mat-expansion-panel-header","*","mat-action-row"];function N0(t,i){}var F0=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],B0=["mat-panel-title","mat-panel-description","*"];function V0(t,i){t&1&&(Ki(0,"span",1),ms(),Ki(1,"svg",2),jr(2,"path",3),nr()())}var Wp=new Ie("MAT_ACCORDION"),Kp=new Ie("MAT_EXPANSION_PANEL"),$0=(()=>{class t{_template=E(gr);_expansionPanel=E(Kp,{optional:!0});constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]})}return t})(),qp=new Ie("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),Sd=(()=>{class t extends Hp{_viewContainerRef=E(zr);_animationsDisabled=Qi();_document=E(st);_ngZone=E(Je);_elementRef=E(We);_renderer=E(Wi);_cleanupTransitionEnd;get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}_hideToggle=!1;get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_togglePosition;afterExpand=new Ve;afterCollapse=new Ve;_inputChanges=new ne;accordion=E(Wp,{optional:!0,skipSelf:!0});_lazyContent;_body;_bodyWrapper;_portal;_headerId=E(Oi).getId("mat-expansion-panel-header-");constructor(){super();let e=E(qp,{optional:!0});this._expansionDispatcher=E(ca),e&&(this.hideToggle=e.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(ci(null),Me(()=>this.expanded&&!this._portal),$n(1)).subscribe(()=>{this._portal=new Yr(this._lazyContent._template,this._viewContainerRef)}),this._setupAnimationEvents()}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransitionEnd?.(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,r=this._body.nativeElement;return e===r||r.contains(e)}return!1}_transitionEndListener=({target:e,propertyName:r})=>{e===this._bodyWrapper?.nativeElement&&r==="grid-template-rows"&&this._ngZone.run(()=>{this.expanded?this.afterExpand.emit():this.afterCollapse.emit()})};_setupAnimationEvents(){this._ngZone.runOutsideAngular(()=>{this._animationsDisabled?(this.opened.subscribe(()=>this._ngZone.run(()=>this.afterExpand.emit())),this.closed.subscribe(()=>this._ngZone.run(()=>this.afterCollapse.emit()))):setTimeout(()=>{let e=this._elementRef.nativeElement;this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this._transitionEndListener),e.classList.add("mat-expansion-panel-animations-enabled")},200)})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(r,n,o){if(r&1&&Ct(o,$0,5),r&2){let c;Oe(c=Te())&&(n._lazyContent=c.first)}},viewQuery:function(r,n){if(r&1&&(Vt(O0,5),Vt(T0,5)),r&2){let o;Oe(o=Te())&&(n._body=o.first),Oe(o=Te())&&(n._bodyWrapper=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:4,hostBindings:function(r,n){r&2&&it("mat-expanded",n.expanded)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",Xe],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Rt([{provide:Wp,useValue:void 0},{provide:Kp,useExisting:t}]),Jt,fr],ngContentSelectors:L0,decls:9,vars:4,consts:[["bodyWrapper",""],["body",""],[1,"mat-expansion-panel-content-wrapper"],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(r,n){r&1&&(li(A0),tt(0),N(1,"div",2,0)(3,"div",3,1)(5,"div",4),tt(6,1),Dt(7,N0,0,0,"ng-template",5),B(),tt(8,2),B()()),r&2&&(K(),Ke("inert",n.expanded?null:""),K(2),pe("id",n.id),Ke("aria-labelledby",n._headerId),K(4),pe("cdkPortalOutlet",n._portal))},dependencies:[Yo],styles:[`.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;position:relative;background:var(--mat-expansion-container-background-color, var(--mat-sys-surface));color:var(--mat-expansion-container-text-color, var(--mat-sys-on-surface));border-radius:var(--mat-expansion-container-shape, 12px)}.mat-expansion-panel.mat-expansion-panel-animations-enabled{transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:var(--mat-expansion-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape, 12px);border-top-left-radius:var(--mat-expansion-container-shape, 12px)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape, 12px);border-bottom-left-radius:var(--mat-expansion-container-shape, 12px)}@media(forced-colors: active){.mat-expansion-panel{outline:solid 1px}}.mat-expansion-panel-content-wrapper{display:grid;grid-template-rows:0fr;grid-template-columns:100%}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content-wrapper{transition:grid-template-rows 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{grid-template-rows:1fr}@supports not (grid-template-rows: 0fr){.mat-expansion-panel-content-wrapper{height:0}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{height:auto}}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;min-height:0;visibility:hidden;font-family:var(--mat-expansion-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-sys-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-sys-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-sys-body-large-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content{transition:visibility 190ms linear}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper>.mat-expansion-panel-content{visibility:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-sys-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}
`],encapsulation:2,changeDetection:0})}return t})();var Qp=(()=>{class t{panel=E(Sd,{host:!0});_element=E(We);_focusMonitor=E(xs);_changeDetectorRef=E(Mt);_parentChangeSubscription=Ft.EMPTY;constructor(){E(ui).load(br);let e=this.panel,r=E(qp,{optional:!0}),n=E(new ps("tabindex"),{optional:!0}),o=e.accordion?e.accordion._stateChanges.pipe(Me(c=>!!(c.hideToggle||c.togglePosition))):Bm;this.tabIndex=parseInt(n||"")||0,this._parentChangeSubscription=yi(e.opened,e.closed,o,e._inputChanges.pipe(Me(c=>!!(c.hideToggle||c.disabled||c.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Me(()=>e._containsFocus())).subscribe(()=>this._focusMonitor.focusVia(this._element,"program")),r&&(this.expandedHeight=r.expandedHeight,this.collapsedHeight=r.collapsedHeight)}expandedHeight;collapsedHeight;tabIndex=0;get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:wh(e)||(e.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e);return}}focus(e,r){e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:13,hostBindings:function(r,n){r&1&&he("click",function(){return n._toggle()})("keydown",function(c){return n._keydown(c)}),r&2&&(Ke("id",n.panel._headerId)("tabindex",n.disabled?-1:n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),Hr("height",n._getHeaderHeight()),it("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after",n._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",n._getTogglePosition()==="before"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:At(e)]},ngContentSelectors:B0,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(r,n){r&1&&(li(F0),Ki(0,"span",0),tt(1),tt(2,1),tt(3,2),nr(),Wt(4,V0,3,0,"span",1)),r&2&&(it("mat-content-hide-toggle",!n._showToggle()),K(4),Kt(n._showToggle()?4:-1))},styles:[`.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;height:var(--mat-expansion-header-collapsed-state-height, 48px);font-family:var(--mat-expansion-header-text-font, var(--mat-sys-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-sys-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-sys-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-sys-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-sys-title-medium-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-header{transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header::before{border-radius:inherit}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height, 64px)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-sys-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-sys-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-sys-on-surface-variant))}.mat-expansion-panel-animations-enabled .mat-expansion-indicator{transition:transform 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header.mat-expanded .mat-expansion-indicator{transform:rotate(180deg)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-sys-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, none)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-sys-on-surface-variant));display:var(--mat-expansion-header-indicator-display, inline-block)}@media(forced-colors: active){.mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}}
`],encapsulation:2,changeDetection:0})}return t})(),Xp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]})}return t})(),Yp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]})}return t})();var Gp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[gt,Up,Jn]})}return t})();var j0=["knob"],H0=["valueIndicatorContainer"];function U0(t,i){if(t&1&&(N(0,"div",2,1)(2,"div",5)(3,"span",6),W(4),B()()()),t&2){let e=ue();K(4),$t(e.valueIndicatorText)}}var W0=["trackActive"],K0=["*"];function q0(t,i){if(t&1&&ft(0,"div"),t&2){let e=i.$implicit,r=i.$index,n=ue(3);_r(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Hr("transform",n._calcTickMarkTransform(r))}}function Q0(t,i){if(t&1&&Ym(0,q0,1,4,"div",8,Xm),t&2){let e=ue(2);Gm(e._tickMarks)}}function X0(t,i){if(t&1&&(N(0,"div",6,1),Wt(2,Q0,2,0),B()),t&2){let e=ue();K(2),Kt(e._cachedWidth?2:-1)}}function Y0(t,i){if(t&1&&ft(0,"mat-slider-visual-thumb",7),t&2){let e=ue();pe("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var ye=(function(t){return t[t.START=1]="START",t[t.END=2]="END",t})(ye||{}),oo=(function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t})(oo||{}),kd=new Ie("_MatSlider"),Zp=new Ie("_MatSliderThumb"),G0=new Ie("_MatSliderRangeThumb"),Jp=new Ie("_MatSliderVisualThumb");var Z0=(()=>{class t{_cdr=E(Mt);_ngZone=E(Je);_slider=E(kd);_renderer=E(Wi);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=E(We).nativeElement;_platform=E(ei);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let r=this._sliderInputEl,n=this._renderer;this._listenerCleanups=[n.listen(r,"pointermove",this._onPointerMove),n.listen(r,"pointerdown",this._onDragStart),n.listen(r,"pointerup",this._onDragEnd),n.listen(r,"pointerleave",this._onMouseLeave),n.listen(r,"focus",this._onFocus),n.listen(r,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let r=this._hostElement.getBoundingClientRect(),n=this._slider._isCursorOnSliderThumb(e,r);this._isHovered=n,n?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===Jl.FADING_IN||e?.state===Jl.VISIBLE}_showRipple(e,r){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===ye.START?ye.END:ye.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!r)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let r=this._getSibling();r._isShowingAnyRipple()||(this._hideValueIndicator(),r._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===ye.START?ye.END:ye.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(r,n){if(r&1&&(Vt(ed,5),Vt(j0,5),Vt(H0,5)),r&2){let o;Oe(o=Te())&&(n._ripple=o.first),Oe(o=Te())&&(n._knob=o.first),Oe(o=Te())&&(n._valueIndicatorContainer=o.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[Rt([{provide:Jp,useExisting:t}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(r,n){r&1&&(Wt(0,U0,5,1,"div",2),ft(1,"div",3,0)(3,"div",4)),r&2&&(Kt(n.discrete?0:-1),K(3),pe("matRippleDisabled",!0))},dependencies:[ed],styles:[`.mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}
`],encapsulation:2,changeDetection:0})}return t})(),ef=(()=>{class t{_ngZone=E(Je);_cdr=E(Mt);_elementRef=E(We);_dir=E(vr,{optional:!0});_globalRippleOptions=E(Xn,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let r=this._getInput(ye.END),n=this._getInput(ye.START);r&&(r.disabled=this._disabled),n&&(n.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;get showTickMarks(){return this._showTickMarks}set showTickMarks(e){this._showTickMarks=e,this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI())}_showTickMarks=!1;get min(){return this._min}set min(e){let r=e==null||isNaN(e)?this._min:e;this._min!==r&&this._updateMin(r)}_min=0;color;disableRipple=!1;_updateMin(e){let r=this._min;this._min=e,this._isRange?this._updateMinRange({old:r,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let r=this._getInput(ye.END),n=this._getInput(ye.START),o=r.value,c=n.value;n.min=e.new,r.min=Math.max(e.new,n.value),n.max=Math.min(r.max,r.value),n._updateWidthInactive(),r._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(r,n):this._onTranslateXChangeBySideEffect(n,r),o!==r.value&&this._onValueChange(r),c!==n.value&&this._onValueChange(n)}_updateMinNonRange(e){let r=this._getInput(ye.END);if(r){let n=r.value;r.min=e,r._updateThumbUIByValue(),this._updateTrackUI(r),n!==r.value&&this._onValueChange(r)}}get max(){return this._max}set max(e){let r=e==null||isNaN(e)?this._max:e;this._max!==r&&this._updateMax(r)}_max=100;_updateMax(e){let r=this._max;this._max=e,this._isRange?this._updateMaxRange({old:r,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let r=this._getInput(ye.END),n=this._getInput(ye.START),o=r.value,c=n.value;r.max=e.new,n.max=Math.min(e.new,r.value),r.min=n.value,r._updateWidthInactive(),n._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(n,r):this._onTranslateXChangeBySideEffect(r,n),o!==r.value&&this._onValueChange(r),c!==n.value&&this._onValueChange(n)}_updateMaxNonRange(e){let r=this._getInput(ye.END);if(r){let n=r.value;r.max=e,r._updateThumbUIByValue(),this._updateTrackUI(r),n!==r.value&&this._onValueChange(r)}}get step(){return this._step}set step(e){let r=isNaN(e)?this._step:e;this._step!==r&&this._updateStep(r)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(ye.END),r=this._getInput(ye.START),n=e.value,o=r.value,c=r.value;e.min=this._min,r.max=this._max,e.step=this._step,r.step=this._step,this._platform.SAFARI&&(e.value=e.value,r.value=r.value),e.min=Math.max(this._min,r.value),r.max=Math.min(this._max,e.value),r._updateWidthInactive(),e._updateWidthInactive(),e.value<c?this._onTranslateXChangeBySideEffect(r,e):this._onTranslateXChangeBySideEffect(e,r),n!==e.value&&this._onValueChange(e),o!==r.value&&this._onValueChange(r)}_updateStepNonRange(){let e=this._getInput(ye.END);if(e){let r=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),r!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations=Qi();_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=E(ei);constructor(){E(ui).load(br),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(ye.END),r=this._getInput(ye.START);this._isRange=!!e&&!!r,this._cdr.detectChanges();let n=this._getThumb(ye.END);this._rippleRadius=n._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,r):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,r){e.initProps(),e.initUI(),r.initProps(),r.initUI(),e._updateMinMax(),r._updateMinMax(),e._updateStaticStyles(),r._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),r._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(ye.END),r=this._getInput(ye.START);e._setIsLeftThumb(),r._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),r.translateX=r._calcTranslateXByValue(),e._updateStaticStyles(),r._updateStaticStyles(),e._updateWidthInactive(),r._updateWidthInactive(),e._updateThumbUIByValue(),r._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(ye.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(ye.START)._isActive||this._getThumb(ye.END)._isActive}_getValue(e=ye.END){let r=this._getInput(e);return r?r.value:this.min}_skipUpdate(){return!!(this._getInput(ye.START)?._skipUIUpdate||this._getInput(ye.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let r=this._trackActive.nativeElement.style;r.left=e.left,r.right=e.right,r.transformOrigin=e.transformOrigin,r.transform=e.transform}_calcTickMarkTransform(e){let r=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-r:r}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,r){this._hasViewInitialized&&(e._updateThumbUIByValue(),r._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(ye.END),r=this._getInput(ye.START);e._updateThumbUIByValue(),r._updateThumbUIByValue(),e._updateStaticStyles(),r._updateStaticStyles(),e._updateMinMax(),r._updateMinMax(),e._updateWidthInactive(),r._updateWidthInactive()}else{let e=this._getInput(ye.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(ye.START),r=this._getInput(ye.END);return!e||!r?!1:r.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let r=e.getSibling(),n=this._getThumb(e.thumbPosition);this._getThumb(r.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),n._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let r=this._getThumb(e.thumbPosition===ye.END?ye.END:ye.START);r._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let r=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(r):e._hostElement.setAttribute("aria-valuetext",r),this.discrete){e.thumbPosition===ye.START?this.startValueIndicatorText=r:this.endValueIndicatorText=r;let n=this._getThumb(e.thumbPosition);r.length<3?n._hostElement.classList.add("mdc-slider__thumb--short-value"):n._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(ye.END),r=this._getInput(ye.START);e&&this._updateValueIndicatorUI(e),r&&this._updateValueIndicatorUI(r)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,n=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*n}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let r=e.getSibling();if(!r||!this._cachedWidth)return;let n=Math.abs(r.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-r.translateX}px`,transformOrigin:"right",transform:`scaleX(${n})`}):this._setTrackActiveStyles({left:`${r.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${n})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let r=this._getValue(),n=Math.max(Math.round((r-this.min)/e),0)+1,o=Math.max(Math.round((this.max-r)/e),0)-1;this._isRtl?n++:o++,this._tickMarks=Array(n).fill(oo.ACTIVE).concat(Array(o).fill(oo.INACTIVE))}_updateTickMarkUIRange(e){let r=this._getValue(),n=this._getValue(ye.START),o=Math.max(Math.round((n-this.min)/e),0),c=Math.max(Math.round((r-n)/e)+1,0),u=Math.max(Math.round((this.max-r)/e),0);this._tickMarks=Array(o).fill(oo.INACTIVE).concat(Array(c).fill(oo.ACTIVE),Array(u).fill(oo.INACTIVE))}_getInput(e){if(e===ye.END&&this._input)return this._input;if(this._inputs?.length)return e===ye.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===ye.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,r){let n=r.width/2,o=r.x+n,c=r.y+n,u=e.clientX-o,h=e.clientY-c;return Math.pow(u,2)+Math.pow(h,2)<Math.pow(n,2)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ke({type:t,selectors:[["mat-slider"]],contentQueries:function(r,n,o){if(r&1&&(Ct(o,Zp,5),Ct(o,G0,4)),r&2){let c;Oe(c=Te())&&(n._input=c.first),Oe(c=Te())&&(n._inputs=c)}},viewQuery:function(r,n){if(r&1&&(Vt(W0,5),Vt(Jp,5)),r&2){let o;Oe(o=Te())&&(n._trackActive=o.first),Oe(o=Te())&&(n._thumbs=o)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(r,n){r&2&&(_r("mat-"+(n.color||"primary")),it("mdc-slider--range",n._isRange)("mdc-slider--disabled",n.disabled)("mdc-slider--discrete",n.discrete)("mdc-slider--tick-marks",n.showTickMarks)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Xe],discrete:[2,"discrete","discrete",Xe],showTickMarks:[2,"showTickMarks","showTickMarks",Xe],min:[2,"min","min",At],color:"color",disableRipple:[2,"disableRipple","disableRipple",Xe],max:[2,"max","max",At],step:[2,"step","step",At],displayWith:"displayWith"},exportAs:["matSlider"],features:[Rt([{provide:kd,useExisting:t}])],ngContentSelectors:K0,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(r,n){r&1&&(li(),tt(0),N(1,"div",2),ft(2,"div",3),N(3,"div",4),ft(4,"div",5,0),B(),Wt(6,X0,3,1,"div",6),B(),Wt(7,Y0,1,3,"mat-slider-visual-thumb",7),ft(8,"mat-slider-visual-thumb",7)),r&2&&(K(6),Kt(n.showTickMarks?6:-1),K(),Kt(n._isRange?7:-1),K(),pe("discrete",n.discrete)("thumbPosition",2)("valueIndicatorText",n.endValueIndicatorText))},dependencies:[Z0],styles:[`.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mat-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mat-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mat-slider-active-track-height, 4px);top:calc((var(--mat-slider-inactive-track-height, 4px) - var(--mat-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mat-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mat-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mat-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mat-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mat-slider-inactive-track-height, 4px);border-radius:var(--mat-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mat-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;transform:scale(0);transform-origin:var(--mat-slider-value-indicator-transform-origin, 0 28px);transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mat-slider-label-container-color, var(--mat-sys-primary));color:var(--mat-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mat-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mat-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mat-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mat-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mat-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mat-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mat-slider-handle-width, 20px);height:var(--mat-slider-handle-height, 20px);border-width:calc(var(--mat-slider-handle-height, 20px)/2) calc(var(--mat-slider-handle-width, 20px)/2);box-shadow:var(--mat-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mat-slider-handle-color, var(--mat-sys-primary));border-color:var(--mat-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mat-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mat-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mat-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mat-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mat-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mat-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mat-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mat-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mat-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mat-slider-with-tick-marks-container-size, 2px);height:var(--mat-slider-with-tick-marks-container-size, 2px);border-radius:var(--mat-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mat-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mat-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mat-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mat-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mat-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mat-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__input{cursor:auto}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();var J0={provide:uh,useExisting:Uo(()=>Ed),multi:!0};var Ed=(()=>{class t{_ngZone=E(Je);_elementRef=E(We);_cdr=E(Mt);_slider=E(kd);_platform=E(ei);_listenerCleanups;get value(){return At(this._hostElement.value,0)}set value(e){e===null&&(e=this._getDefaultValue()),e=isNaN(e)?0:e;let r=e+"";if(!this._hasSetInitialValue){this._initialValue=r;return}this._isActive||this._setValue(r)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new Ve;dragStart=new Ve;dragEnd=new Ve;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=ye.END;get min(){return At(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return At(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return At(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return Xe(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=ct("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new ne;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=E(Wi);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let r=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=r,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let r=e.clientX-this._slider._cachedLeft,n=this._slider._cachedWidth,o=this._slider.step===0?1:this._slider.step,c=Math.floor((this._slider.max-this._slider.min)/o),u=this._slider._isRtl?1-r/n:r/n,_=Math.round(u*c)/c*(this._slider.max-this._slider.min)+this._slider.min,g=Math.round(_/o)*o,b=this.value;if(g===b){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=g,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let r=this._tickMarkOffset,n=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,n),r)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,r){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(r)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(r,n){r&1&&he("change",function(){return n._onChange()})("input",function(){return n._onInput()})("blur",function(){return n._onBlur()})("focus",function(){return n._onFocus()}),r&2&&Ke("aria-valuetext",n._valuetext())},inputs:{value:[2,"value","value",At]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[Rt([J0,{provide:Zp,useExisting:t}])]})}return t})();var tf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[gt,Yn]})}return t})();function tx(t,i){if(t&1){let e=Tt();N(0,"div",8)(1,"label",9)(2,"span",10),W(3),B()(),N(4,"div",11)(5,"mat-slider",12)(6,"input",13),he("ngModelChange",function(n){let o=ge(e).index,c=ue();return _e(c.onUpdateTierPercentage(o,n))}),B()(),N(7,"mat-form-field",14)(8,"input",15),he("ngModelChange",function(n){let o=ge(e).index,c=ue();return _e(c.onUpdateTierPercentage(o,n))})("blur",function(){let n=ge(e).index,o=ue();return _e(o.onValidateTierPercentage(n))}),B(),N(9,"span",16),W(10,"%"),B()()()()}if(t&2){let e=i.$implicit,r=i.index,n=ue();K(),Ke("data-tier",e),K(2),$t(e),K(),Ke("data-tier",e),K(),pe("displayWith",n.formatLabel),K(),pe("ngModel",n.getTierPercentage(r)),K(2),pe("ngModel",n.getTierPercentage(r))}}var Js=class t{tierPercentages=lt.required();tierNames=lt.required();showAdvancedSettings=lt.required();showAdvancedSettingsChange=je();updateTierPercentage=je();validateTierPercentage=je();recalculateTiers=je();resetTierPercentages=je();onShowAdvancedSettingsChange(i){this.showAdvancedSettingsChange.emit(i)}onUpdateTierPercentage(i,e){this.updateTierPercentage.emit({index:i,value:e})}onValidateTierPercentage(i){this.validateTierPercentage.emit(i)}onRecalculateTiers(){this.recalculateTiers.emit()}onResetTierPercentages(){this.resetTierPercentages.emit()}getTierPercentage(i){return this.tierPercentages()[i]}getTotalPercentage(){return this.tierPercentages().reduce((i,e)=>i+e,0)}formatLabel(i){return`${i}%`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ke({type:t,selectors:[["app-tier-settings"]],inputs:{tierPercentages:[1,"tierPercentages"],tierNames:[1,"tierNames"],showAdvancedSettings:[1,"showAdvancedSettings"]},outputs:{showAdvancedSettingsChange:"showAdvancedSettingsChange",updateTierPercentage:"updateTierPercentage",validateTierPercentage:"validateTierPercentage",recalculateTiers:"recalculateTiers",resetTierPercentages:"resetTierPercentages"},decls:24,vars:3,consts:[[1,"settings-panel",3,"expandedChange","expanded"],[1,"settings-content"],[1,"settings-info"],[1,"tier-sliders"],["class","tier-slider",4,"ngFor","ngForOf"],[1,"settings-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"tier-slider"],[1,"slider-label"],[1,"tier-badge"],[1,"slider-input-container"],["min","0","max","100","step","1","showTickMarks","","discrete","",1,"tier-slider-control",3,"displayWith"],["matSliderThumb","",3,"ngModelChange","ngModel"],["appearance","outline",1,"percentage-input"],["matInput","","type","number","min","0","max","100",3,"ngModelChange","blur","ngModel"],["matTextSuffix",""]],template:function(e,r){e&1&&(N(0,"mat-expansion-panel",0),he("expandedChange",function(o){return r.onShowAdvancedSettingsChange(o)}),N(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),W(4,"settings"),B(),W(5," Advanced Settings "),B(),N(6,"mat-panel-description"),W(7," Adjust tier percentages "),B()(),N(8,"div",1)(9,"p",2)(10,"mat-icon"),W(11,"info"),B(),W(12),B(),N(13,"div",3),Dt(14,tx,11,6,"div",4),B(),N(15,"div",5)(16,"button",6),he("click",function(){return r.onRecalculateTiers()}),N(17,"mat-icon"),W(18,"refresh"),B(),W(19," Apply & Recalculate "),B(),N(20,"button",7),he("click",function(){return r.onResetTierPercentages()}),N(21,"mat-icon"),W(22,"restore"),B(),W(23," Reset to Defaults "),B()()()()),e&2&&(pe("expanded",r.showAdvancedSettings()),K(12),xi(" Customize the percentage of items in each tier. Total: ",r.getTotalPercentage(),"% "),K(2),pe("ngForOf",r.tierNames()))},dependencies:[di,Ur,ys,gs,mh,_s,ph,hh,vs,Gp,Sd,Qp,Yp,Xp,tf,ef,Ed,Ss,Cs,ws,Es,ks,mi,Ti,Ni,Li],styles:[".settings-panel[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.settings-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.settings-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.settings-content[_ngcontent-%COMP%]{padding:1rem 0}.settings-content[_ngcontent-%COMP%]   .settings-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;padding:.75rem;background-color:#677eea1a;border-radius:6px;color:#000000de;font-size:.9rem}.settings-content[_ngcontent-%COMP%]   .settings-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem;color:#667eea}.settings-content[_ngcontent-%COMP%]   .tier-sliders[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:1.5rem}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:1rem}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:4px;color:#fff;font-weight:900;font-size:1rem;letter-spacing:1px}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]   .tier-value[_ngcontent-%COMP%]{font-size:1.1rem;color:#667eea}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=S][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f)}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=A][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#feca57,#f39c12)}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=B][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48dbfb,#0abde3)}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=C][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1dd1a1,#10ac84)}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=D][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a29bfe,#6c5ce7)}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=F][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#636e72,#2d3436)}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .tier-slider-control[_ngcontent-%COMP%]{flex:1;min-width:0}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]{width:80px;flex-shrink:0}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-top:4px;padding-bottom:4px;min-height:auto}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding-bottom:0}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{text-align:right;font-weight:600}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=S][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#ee5a6f}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=A][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#f39c12}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=B][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#0abde3}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=C][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#10ac84}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=D][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#6c5ce7}.settings-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=F][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#2d3436}.settings-content[_ngcontent-%COMP%]   .settings-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}"]})};function ix(t,i){t&1&&ft(0,"div",15)}function rx(t,i){if(t&1&&(N(0,"div",11)(1,"mat-icon",12),W(2,"drag_indicator"),B(),N(3,"span",13),W(4),B(),Dt(5,ix,1,0,"div",14),B()),t&2){let e=i.$implicit;K(4),$t(e)}}function nx(t,i){if(t&1){let e=Tt();N(0,"div",5)(1,"div",6)(2,"span",7),W(3),B(),N(4,"span",8),W(5),B()(),N(6,"div",9),he("cdkDropListDropped",function(n){ge(e);let o=ue();return _e(o.onItemDrop(n))}),Dt(7,rx,6,1,"div",10),B()()}if(t&2){let e=i.$implicit,r=i.index,n=ue();K(),Ke("data-tier",e.tier),K(2),$t(e.tier),K(2),Wn("",e.items.length," item",e.items.length!==1?"s":""),K(),pe("id","tier-"+r)("cdkDropListData",e.items)("cdkDropListConnectedTo",n.getConnectedLists(r)),K(),pe("ngForOf",e.items)}}var ec=class t{snackBar=E(xn);listName=lt.required();tieredItems=lt.required();tierPercentages=lt.required();tierNames=lt.required();showAdvancedSettings=lt.required();showAdvancedSettingsChange=je();updateTierPercentage=je();validateTierPercentage=je();recalculateTiers=je();resetTierPercentages=je();itemDrop=je();hideResults=je();createNewList=je();onShowAdvancedSettingsChange(i){this.showAdvancedSettingsChange.emit(i)}onUpdateTierPercentage(i){this.updateTierPercentage.emit(i)}onValidateTierPercentage(i){this.validateTierPercentage.emit(i)}onRecalculateTiers(){this.recalculateTiers.emit()}onResetTierPercentages(){this.resetTierPercentages.emit()}onItemDrop(i){this.itemDrop.emit(i)}onHideResults(){this.hideResults.emit()}onCreateNewList(){this.createNewList.emit()}getConnectedLists(i){return this.tieredItems().map((e,r)=>`tier-${r}`).filter((e,r)=>r!==i)}copyToClipboard(){return R(this,null,function*(){let i=this.formatTierListAsText();try{yield navigator.clipboard.writeText(i),this.snackBar.open("Tier list copied to clipboard!","Close",{duration:3e3})}catch{this.fallbackCopyToClipboard(i)}})}formatTierListAsText(){let i=[];i.push(`${this.listName()} - Tier List`),i.push("=".repeat(this.listName().length+13)),i.push("");for(let e of this.tieredItems()){i.push(`[${e.tier}]`);for(let r of e.items)i.push(`  \u2022 ${r}`);i.push("")}return i.join(`
`)}fallbackCopyToClipboard(i){let e=document.createElement("textarea");e.value=i,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),this.snackBar.open("Tier list copied to clipboard!","Close",{duration:3e3})}catch{this.snackBar.open("Failed to copy to clipboard","Close",{duration:3e3})}finally{document.body.removeChild(e)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ke({type:t,selectors:[["app-tier-results"]],inputs:{listName:[1,"listName"],tieredItems:[1,"tieredItems"],tierPercentages:[1,"tierPercentages"],tierNames:[1,"tierNames"],showAdvancedSettings:[1,"showAdvancedSettings"]},outputs:{showAdvancedSettingsChange:"showAdvancedSettingsChange",updateTierPercentage:"updateTierPercentage",validateTierPercentage:"validateTierPercentage",recalculateTiers:"recalculateTiers",resetTierPercentages:"resetTierPercentages",itemDrop:"itemDrop",hideResults:"hideResults",createNewList:"createNewList"},decls:22,vars:5,consts:[[1,"results-card"],[3,"showAdvancedSettingsChange","updateTierPercentage","validateTierPercentage","recalculateTiers","resetTierPercentages","tierPercentages","tierNames","showAdvancedSettings"],["class","tier-container",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"tier-container"],[1,"tier-header"],[1,"tier-label"],[1,"tier-count"],["cdkDropList","",1,"tier-items",3,"cdkDropListDropped","id","cdkDropListData","cdkDropListConnectedTo"],["class","tier-item","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"tier-item"],["cdkDragHandle","",1,"drag-handle"],[1,"item-text"],["class","drag-placeholder",4,"cdkDragPlaceholder"],[1,"drag-placeholder"]],template:function(e,r){e&1&&(N(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),W(3),B(),N(4,"mat-card-subtitle"),W(5,"Your personalized ranking organized by tiers (drag items to reorder)"),B()(),N(6,"mat-card-content")(7,"app-tier-settings",1),he("showAdvancedSettingsChange",function(o){return r.onShowAdvancedSettingsChange(o)})("updateTierPercentage",function(o){return r.onUpdateTierPercentage(o)})("validateTierPercentage",function(o){return r.onValidateTierPercentage(o)})("recalculateTiers",function(){return r.onRecalculateTiers()})("resetTierPercentages",function(){return r.onResetTierPercentages()}),B(),Dt(8,nx,8,8,"div",2),B(),N(9,"mat-card-actions")(10,"button",3),he("click",function(){return r.copyToClipboard()}),N(11,"mat-icon"),W(12,"content_copy"),B(),W(13," Copy to Clipboard "),B(),N(14,"button",4),he("click",function(){return r.onHideResults()}),N(15,"mat-icon"),W(16,"edit"),B(),W(17," Add More Items "),B(),N(18,"button",3),he("click",function(){return r.onCreateNewList()}),N(19,"mat-icon"),W(20,"add"),B(),W(21," Create New List "),B()()()),e&2&&(K(3),xi("",r.listName()," - Tier List"),K(4),pe("tierPercentages",r.tierPercentages())("tierNames",r.tierNames())("showAdvancedSettings",r.showAdvancedSettings()),K(),pe("ngForOf",r.tieredItems()))},dependencies:[di,Ur,ar,or,Qn,qr,Xr,Qr,Kr,mi,Ti,Ni,Li,Sp,wp,xp,vp,Cp,Js],styles:[".results-card[_ngcontent-%COMP%]   .tier-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.results-card[_ngcontent-%COMP%]   .tier-container[_ngcontent-%COMP%]:last-child{margin-bottom:0}.results-card[_ngcontent-%COMP%]   .tier-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;font-weight:700;font-size:1.1rem;color:#fff}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=S][_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=A][_ngcontent-%COMP%]{background:linear-gradient(135deg,#feca57,#f39c12)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=B][_ngcontent-%COMP%]{background:linear-gradient(135deg,#48dbfb,#0abde3)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=C][_ngcontent-%COMP%]{background:linear-gradient(135deg,#1dd1a1,#10ac84)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=D][_ngcontent-%COMP%]{background:linear-gradient(135deg,#a29bfe,#6c5ce7)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=F][_ngcontent-%COMP%]{background:linear-gradient(135deg,#636e72,#2d3436)}.results-card[_ngcontent-%COMP%]   .tier-header[_ngcontent-%COMP%]   .tier-label[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:900;letter-spacing:2px}.results-card[_ngcontent-%COMP%]   .tier-header[_ngcontent-%COMP%]   .tier-count[_ngcontent-%COMP%]{font-size:.85rem;opacity:.9;font-weight:500}.results-card[_ngcontent-%COMP%]   .tier-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding:1rem;background-color:#00000005;min-height:60px;transition:background-color .2s ease}.results-card[_ngcontent-%COMP%]   .tier-items.cdk-drop-list-dragging[_ngcontent-%COMP%]{background-color:#677eea1a}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#fff;padding:.5rem 1rem;border-radius:6px;border:2px solid rgba(0,0,0,.1);font-weight:500;transition:all .2s ease;box-shadow:0 1px 3px #0000001a;cursor:move}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026;border-color:#667eea}.results-card[_ngcontent-%COMP%]   .tier-item.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0003;border-color:#667eea;opacity:.9;cursor:grabbing}.results-card[_ngcontent-%COMP%]   .tier-item.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:grab;color:#0006;font-size:1.25rem;width:1.25rem;height:1.25rem;transition:color .2s ease}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:hover{color:#667eea}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{flex:1}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-placeholder[_ngcontent-%COMP%]{background:#677eea33;border:2px dashed #667eea;border-radius:6px;min-height:40px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};var rf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[gt]})}return t})();var ox=["*"],ax=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,sx=["unscopedContent"],cx=["text"],lx=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],dx=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var ux=new Ie("ListOption"),Dd=(()=>{class t{_elementRef=E(We);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return t})(),Rd=(()=>{class t{_elementRef=E(We);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return t})(),Md=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return t})(),nf=(()=>{class t{_listOption=E(ux,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,hostVars:4,hostBindings:function(r,n){r&2&&it("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}})}return t})(),mx=(()=>{class t extends nf{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275dir=Ne({type:t,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Jt]})}return t})(),hx=(()=>{class t extends nf{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275dir=Ne({type:t,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Jt]})}return t})(),px=new Ie("MAT_LIST_CONFIG"),Id=(()=>{class t{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=yr(e)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(e){this._disabled.set(yr(e))}_disabled=ct(!1);_defaultOptions=E(px,{optional:!0});static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,hostVars:1,hostBindings:function(r,n){r&2&&Ke("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),fx=(()=>{class t{_elementRef=E(We);_ngZone=E(Je);_listBase=E(Id,{optional:!0});_platform=E(ei);_hostElement;_isButtonElement;_noopAnimations=Qi();_avatars;_icons;set lines(e){this._explicitLines=qn(e,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=yr(e)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(e){this._disabled.set(yr(e))}_disabled=ct(!1);_subscriptions=new Ft;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){E(ui).load(br);let e=E(Xn,{optional:!0});this.rippleConfig=e||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Rh(this,this._ngZone,this._hostElement,this._platform,E(It)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(yi(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),n=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&r===1;n.classList.toggle("mdc-list-item__primary-text",o),n.classList.toggle("mdc-list-item__secondary-text",!o)}else n.classList.remove("mdc-list-item__primary-text"),n.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,contentQueries:function(r,n,o){if(r&1&&(Ct(o,mx,4),Ct(o,hx,4)),r&2){let c;Oe(c=Te())&&(n._avatars=c),Oe(c=Te())&&(n._icons=c)}},hostVars:4,hostBindings:function(r,n){r&2&&(Ke("aria-disabled",n.disabled)("disabled",n._isButtonElement&&n.disabled||null),it("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return t})();var of=(()=>{class t extends Id{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275cmp=ke({type:t,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[Rt([{provide:Id,useExisting:t}]),Jt],ngContentSelectors:ox,decls:1,vars:0,template:function(r,n){r&1&&(li(),tt(0))},styles:[ax],encapsulation:2,changeDetection:0})}return t})(),af=(()=>{class t extends fx{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(e){this._activated=yr(e)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Pi(t)))(n||t)}})();static \u0275cmp=ke({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,n,o){if(r&1&&(Ct(o,Rd,5),Ct(o,Dd,5),Ct(o,Md,5)),r&2){let c;Oe(c=Te())&&(n._lines=c),Oe(c=Te())&&(n._titles=c),Oe(c=Te())&&(n._meta=c)}},viewQuery:function(r,n){if(r&1&&(Vt(sx,5),Vt(cx,5)),r&2){let o;Oe(o=Te())&&(n._unscopedContent=o.first),Oe(o=Te())&&(n._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(r,n){r&2&&(Ke("aria-current",n._getAriaCurrent()),it("mdc-list-item--activated",n.activated)("mdc-list-item--with-leading-avatar",n._avatars.length!==0)("mdc-list-item--with-leading-icon",n._icons.length!==0)("mdc-list-item--with-trailing-meta",n._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",n._hasBothLeadingAndTrailing())("_mat-animation-noopable",n._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Jt],ngContentSelectors:dx,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(r,n){if(r&1){let o=Tt();li(lx),tt(0),N(1,"span",1),tt(2,1),tt(3,2),N(4,"span",2,0),he("cdkObserveContent",function(){return ge(o),_e(n._updateItemLines(!0))}),tt(6,3),B()(),tt(7,4),tt(8,5),ft(9,"div",3)}},dependencies:[yh],encapsulation:2,changeDetection:0})}return t})();var sf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Qe({type:t});static \u0275inj=qe({imports:[bh,gt,Yn,rf,Gs]})}return t})();function _x(t,i){if(t&1&&(N(0,"mat-card-subtitle"),W(1),B()),t&2){let e=ue();K(),Wn("",e.lists().length," saved list",e.lists().length!==1?"s":"")}}function vx(t,i){if(t&1){let e=Tt();N(0,"mat-list-item")(1,"span",4),W(2),B(),N(3,"span",5),W(4),B(),N(5,"span",6),W(6),hs(7,"date"),B(),N(8,"button",7),he("click",function(){let n=ge(e).$implicit,o=ue(2);return _e(o.onLoadList(n))}),N(9,"mat-icon"),W(10,"open_in_new"),B()(),N(11,"button",8),he("click",function(){let n=ge(e).$implicit,o=ue(2);return _e(o.onDeleteList(n))}),N(12,"mat-icon"),W(13,"delete"),B()()()}if(t&2){let e=i.$implicit,r=ue(2);K(2),$t(e.listName),K(2),xi("",e.items.length," items"),K(2),$t(eh(7,5,e.createdAt,"short")),K(2),pe("disabled",r.isDisabled()),K(3),pe("disabled",r.isDisabled())}}function yx(t,i){if(t&1&&(N(0,"mat-list"),Dt(1,vx,14,8,"mat-list-item",3),B()),t&2){let e=ue();K(),pe("ngForOf",e.lists())}}function bx(t,i){t&1&&(N(0,"div",9)(1,"mat-icon"),W(2,"inbox"),B(),N(3,"p"),W(4,"No saved lists yet"),B(),N(5,"p"),W(6,"Complete a sort to save a list locally"),B(),N(7,"p",10),W(8,"\u{1F4A1} Sign in to sync across devices"),B()())}var tc=class t{lists=lt.required();isDisabled=lt(!1);loadList=je();deleteList=je();onLoadList(i){this.loadList.emit(i)}onDeleteList(i){this.deleteList.emit(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ke({type:t,selectors:[["app-saved-lists-sidebar"]],inputs:{lists:[1,"lists"],isDisabled:[1,"isDisabled"]},outputs:{loadList:"loadList",deleteList:"deleteList"},decls:8,vars:3,consts:[[1,"lists-card"],[4,"ngIf"],["class","no-lists",4,"ngIf"],[4,"ngFor","ngForOf"],["matListItemTitle",""],["matListItemLine",""],["matListItemLine","",1,"date"],["mat-icon-button","","matListItemMeta","",3,"click","disabled"],["mat-icon-button","","matListItemMeta","","color","warn",3,"click","disabled"],[1,"no-lists"],[1,"hint"]],template:function(e,r){e&1&&(N(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),W(3,"Saved Lists"),B(),Dt(4,_x,2,2,"mat-card-subtitle",1),B(),N(5,"mat-card-content"),Dt(6,yx,2,1,"mat-list",1)(7,bx,9,0,"div",2),B()()),e&2&&(K(4),pe("ngIf",r.lists().length>0),K(2),pe("ngIf",r.lists().length>0),K(),pe("ngIf",r.lists().length===0))},dependencies:[di,Ur,Kn,ar,or,qr,Xr,Qr,Kr,sf,of,af,Rd,Dd,Md,mi,Is,Ni,Li,oh],styles:[".lists-card[_ngcontent-%COMP%]{position:sticky;top:2rem}.lists-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{cursor:pointer;border-bottom:1px solid rgba(0,0,0,.12)}.lists-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.lists-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.75rem;color:#0000008a}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;text-align:center;color:#0000008a}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;margin-bottom:1rem;opacity:.4;color:#677eea99}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:.85rem;opacity:.7}"]})};function xx(t,i){if(t&1){let e=Tt();N(0,"div",1)(1,"div",3)(2,"mat-icon",4),W(3,"account_circle"),B(),N(4,"div",5)(5,"span",6),W(6),B(),N(7,"span",7)(8,"mat-icon",8),W(9,"cloud_done"),B(),W(10," Syncing "),B()()(),N(11,"button",9),he("click",function(){ge(e);let n=ue();return _e(n.logout())}),N(12,"mat-icon"),W(13,"logout"),B(),W(14," Logout "),B()()}if(t&2){let e=i;K(6),$t(e.name||e.email)}}function wx(t,i){t&1&&(N(0,"div",2)(1,"div",10)(2,"mat-icon",11),W(3,"cloud_off"),B(),N(4,"p",12),W(5,"Sign in to sync your lists across devices"),B()(),N(6,"div",13)(7,"button",14),W(8," Login "),B(),N(9,"button",15),W(10," Register "),B()()())}var ic=class t{authService=E(fs);logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ke({type:t,selectors:[["app-auth-widget"]],decls:4,vars:3,consts:[[1,"auth-widget"],[1,"auth-content","logged-in"],[1,"auth-content","logged-out"],[1,"user-info"],[1,"user-icon"],[1,"user-details"],[1,"username"],[1,"sync-status"],[1,"sync-icon"],["mat-button","",1,"logout-btn",3,"click"],[1,"auth-message"],[1,"cloud-icon"],[1,"message-text"],[1,"auth-buttons"],["mat-raised-button","","color","primary","routerLink","/login"],["mat-stroked-button","","routerLink","/register"]],template:function(e,r){if(e&1&&(N(0,"mat-card",0),Wt(1,xx,15,1,"div",1),hs(2,"async"),Qm(3,wx,11,0,"div",2),B()),e&2){let n;K(),Kt((n=Jm(2,1,r.authService.currentUser$))?1:3,n)}},dependencies:[di,dh,lh,ar,or,mi,Ti,Ni,Li,nh],styles:[".auth-widget[_ngcontent-%COMP%]{margin-bottom:16px;background:linear-gradient(135deg,#667eea15,#764ba215);border:1px solid rgba(102,126,234,.2)}.auth-content[_ngcontent-%COMP%]{padding:12px}.auth-content.logged-in[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}.auth-content.logged-out[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:1;min-width:0}.user-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#667eea}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;min-width:0;flex:1}.username[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#000000de;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sync-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#0009}.sync-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:#4caf50}.logout-btn[_ngcontent-%COMP%]{min-width:auto;padding:0 12px}.logout-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:4px}.auth-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center}.cloud-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;color:#0000004d}.message-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#0009;line-height:1.4}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;max-width:120px}@media (max-width: 600px){.auth-content.logged-in[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.logout-btn[_ngcontent-%COMP%]{width:100%}}"]})};function wn(t){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},wn(t)}function cf(t,i){if(wn(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,i||"default");if(wn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function lf(t){var i=cf(t,"string");return wn(i)=="symbol"?i:i+""}function df(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lf(r.key),r)}}function ii(t,i,e){return i&&df(t.prototype,i),e&&df(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uf(t){return t[t.length-1]}function Gr(t){return Array.isArray(t)?t.slice(0):[t]}function mf(t,i){t=t.slice(0);for(var e=[];t.length;){var r=t.splice(0,i);e.push(r)}return e}function Cn(t){return Array.isArray(t)}function hf(t){return t!=null}function rc(t,i){var e=0,r=-1;for(var n of t){r=r+1;var o=i(n,r);if(o)e=e+1;else break}return e}function hi(t,i){var e=i.length;if(e!==0){var r=t.length;t.length=r+i.length;for(var n=0;n<e;++n)t[r+n]=i[n]}}function pf(t){return t.filter(function(i,e,r){return r.indexOf(i)===e})}function Fi(t){for(var i="",e=0;e<t.length;e++){var r=t[e];if(r==="-")return parseInt(i,10);i+=r}throw new Error("malformatted revision: "+t)}function ri(t,i){var e=i?Fi(i._rev)+1:1;return e+"-"+t}function ff(t){var i=t.split("."),e=i.length;return e===1?r=>r[t]:r=>{for(var n=r,o=0;o<e;++o){var c=i[o];if(n=n[c],typeof n>"u")return n}return n}}function Ee(t){return Object.assign({},t)}function gf(t){return Object.keys(t)[0]}function ao(t,i=!1){if(!t)return t;if(!i&&Array.isArray(t))return t.sort((r,n)=>typeof r=="string"&&typeof n=="string"?r.localeCompare(n):typeof r=="object"?1:-1).map(r=>ao(r,i));if(typeof t=="object"&&!Array.isArray(t)){var e={};return Object.keys(t).sort((r,n)=>r.localeCompare(n)).forEach(r=>{e[r]=ao(t[r],i)}),e}return t}function Pd(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var i=new Array(t.length),e=i.length;e--;)i[e]=Pd(t[e]);return i}var r={};for(var n in t)r[n]=Pd(t[n]);return r}var qt=Pd;function wi(t,i,e){return Object.defineProperty(t,i,{get:function(){return e}}),e}var la=1;function Zr(){return{lwt:la}}function Yt(){return""}function _f(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function vf(t,i,e){if(i.length!==e.length)return!1;for(var r=0,n=i.length;r<n;){var o=i[r],c=e[r];if(r++,o[t]!==c[t]||o._rev!==c._rev||o._meta.lwt!==c._meta.lwt)return!1}return!0}function Jr(t,i){return Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Jr(t,i)}function Od(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,Jr(t,i)}function nc(t){return nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},nc(t)}function yf(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Td(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Td=function(){return!!t})()}function bf(t,i,e){if(Td())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,i);var n=new(t.bind.apply(t,r));return e&&Jr(n,e.prototype),n}function da(t){var i=typeof Map=="function"?new Map:void 0;return da=function(r){if(r===null||!yf(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(r))return i.get(r);i.set(r,n)}function n(){return bf(r,arguments,nc(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Jr(n,r)},da(t)}var He={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return`
        RxDB Error-Code: `+t+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function Cx(t){var i="";return Object.keys(t).length===0||(i+="-".repeat(20)+`
`,i+=`Parameters:
`,i+=Object.keys(t).map(e=>{var r="[object Object]";try{e==="errors"?r=t[e].map(n=>JSON.stringify(n,Object.getOwnPropertyNames(n))):r=JSON.stringify(t[e],function(n,o){return o===void 0?null:o},2)}catch{}return e+": "+r}).join(`
`),i+=`
`),i}function xf(t,i,e){return`
`+t+`
`+Cx(e)}var Sx=(function(t){function i(r,n,o={}){var c,u=xf(n,r,o);return c=t.call(this,u)||this,c.code=r,c.message=u,c.url=Ad(r),c.parameters=o,c.rxdb=!0,c}Od(i,t);var e=i.prototype;return e.toString=function(){return this.message},ii(i,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])})(da(Error)),kx=(function(t){function i(r,n,o={}){var c,u=xf(n,r,o);return c=t.call(this,u)||this,c.code=r,c.message=u,c.url=Ad(r),c.parameters=o,c.rxdb=!0,c}Od(i,t);var e=i.prototype;return e.toString=function(){return this.message},ii(i,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])})(da(TypeError));function Ad(t){return"https://rxdb.info/errors.html?console=errors#"+t}function wf(t){return`
Find out more about this error here: `+Ad(t)+` 
`}function X(t,i){return new Sx(t,He.tunnelErrorMessage(t)+wf(t),i)}function ua(t,i){return new kx(t,He.tunnelErrorMessage(t)+wf(t),i)}function so(t){return t&&t.status===409?t:!1}var Ex={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function oc(t){return X("COL20",{name:Ex[t.status],document:t.documentId,writeError:t})}var ac;function Ix(){if(ac)return ac;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw X("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof crypto?.subtle,typeof_crypto_subtle_digest:typeof crypto?.subtle?.digest}});return ac=crypto.subtle.digest.bind(crypto.subtle),ac}function Dx(t){return R(this,null,function*(){var i=new TextEncoder().encode(t),e=yield Ix()("SHA-256",i),r=Array.prototype.map.call(new Uint8Array(e),n=>("00"+n.toString(16)).slice(-2)).join("");return r})}var sc=Dx;function Cf(){return new Promise(t=>setTimeout(t,0))}function Sf(t=0){return new Promise(i=>setTimeout(i,t))}function kf(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var ma=Promise.resolve(!0),pi=Promise.resolve(!1),Ef=Promise.resolve(null),Gt=Promise.resolve();function co(t=1e4){return typeof requestIdleCallback=="function"?new Promise(i=>{requestIdleCallback(()=>i(),{timeout:t})}):Sf(0)}var Ld=Gt;function If(t=void 0){return Ld=Ld.then(()=>co(t)),Ld}function Df(t,i){return t.reduce((e,r)=>e.then(r),Promise.resolve(i))}var Rf=/\./g;var Mf="abcdefghijklmnopqrstuvwxyz";function Sn(t=10){for(var i="",e=0;e<t;e++)i+=Mf.charAt(Math.floor(Math.random()*Mf.length));return i}function cc(t){t+="";var i=t.charAt(0).toUpperCase();return i+t.substr(1)}function kn(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function lo(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;var e,r;if(Array.isArray(t)){if(e=t.length,e!==i.length)return!1;for(r=e;r--!==0;)if(!lo(t[r],i[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();var n=Object.keys(t);if(e=n.length,e!==Object.keys(i).length)return!1;for(r=e;r--!==0;)if(!Object.prototype.hasOwnProperty.call(i,n[r]))return!1;for(r=e;r--!==0;){var o=n[r];if(!lo(t[o],i[o]))return!1}return!0}return t!==t&&i!==i}var Fd=t=>{var i=typeof t;return t!==null&&(i==="object"||i==="function")},Nd=new Set(["__proto__","prototype","constructor"]),Rx=new Set("0123456789");function Pf(t){var i=[],e="",r="start",n=!1;for(var o of t)switch(o){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");n&&(e+=o),r="property",n=!n;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(n){n=!1,e+=o;break}if(Nd.has(e))return[];i.push(e),e="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(n){n=!1,e+=o;break}if(r==="property"){if(Nd.has(e))return[];i.push(e),e=""}r="index";break}case"]":{if(r==="index"){i.push(Number.parseInt(e,10)),e="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!Rx.has(o))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),n&&(n=!1,e+="\\"),e+=o}}switch(n&&(e+="\\"),r){case"property":{if(Nd.has(e))return[];i.push(e);break}case"index":throw new Error("Index was not closed");case"start":{i.push("");break}}return i}function Of(t,i){if(typeof i!="number"&&Array.isArray(t)){var e=Number.parseInt(i,10);return Number.isInteger(e)&&t[e]===t[i]}return!1}function Mx(t,i){if(Of(t,i))throw new Error("Cannot use string index")}function wr(t,i,e){if(Array.isArray(i)&&(i=i.join(".")),!i.includes(".")&&!i.includes("["))return t[i];if(!Fd(t)||typeof i!="string")return e===void 0?t:e;var r=Pf(i);if(r.length===0)return e;for(var n=0;n<r.length;n++){var o=r[n];if(Of(t,o)?t=n===r.length-1?void 0:null:t=t[o],t==null){if(n!==r.length-1)return e;break}}return t===void 0?e:t}function Bd(t,i,e){if(Array.isArray(i)&&(i=i.join(".")),!Fd(t)||typeof i!="string")return t;for(var r=t,n=Pf(i),o=0;o<n.length;o++){var c=n[o];Mx(t,c),o===n.length-1?t[c]=e:Fd(t[c])||(t[c]=typeof n[o+1]=="number"?[]:{}),t=t[c]}return r}function En(t,i){var e=t.get(i);if(typeof e>"u")throw new Error("missing value from map "+i);return e}function kt(t,i,e,r){var n=t.get(i);return typeof n>"u"?(n=e(),t.set(i,n)):r&&r(n),n}function $e(t){var i=t.split("-"),e="RxDB";return i.forEach(r=>{e+=cc(r)}),e+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+e+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+e+`);
        `)}function Vd(t){var i={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,extensions:t.extensions,code:t.code,url:t.url,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return i}var $d=0;function mt(){var t=Date.now();t=t+.01,t<=$d&&(t=$d+.01);var i=parseFloat(t.toFixed(2));return $d=i,i}function ae(t,i){if(!t)throw i||(i=""),new Error("ensureNotFalsy() is falsy: "+i);return t}var lc={bufferSize:1,refCount:!0};var ha="16.19.1";var dc={};var Px="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",jd=16,zd=pi,Tf=!1;function uc(){return R(this,null,function*(){return Tf||(Tf=!0,zd=R(null,null,function*(){return!!(dc.premium&&typeof dc.premium=="string"&&(yield sc(dc.premium))===Px)})),zd})}var uo={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function _t(t,i){uo[t].length>0&&uo[t].forEach(e=>e(i))}function Xi(t,i){return R(this,null,function*(){for(var e of uo[t])yield e(i)})}function sr(t,i){var e=i;e=e.replace(Rf,".properties."),e="properties."+e,e=kn(e);var r=wr(t,e);return r}function Af(t,i,e){if(typeof i.primaryKey=="string")return e;var r=Ci(i,e),n=e[t];if(n&&n!==r)throw X("DOC19",{args:{documentData:e,existingPrimary:n,newPrimary:r},schema:i});return e[t]=r,e}function zt(t){return typeof t=="string"?t:t.key}function Lf(t){var i=zt(t.primaryKey),e=sr(t,i);return ae(e.maxLength)}function Ci(t,i){if(typeof t.primaryKey=="string")return i[t.primaryKey];var e=t.primaryKey;return e.fields.map(r=>{var n=wr(i,r);if(typeof n>"u")throw X("DOC18",{args:{field:r,documentData:i}});return n}).join(e.separator)}function Nf(t){var i=ao(t,!0);return i}function Ox(t){return["_deleted",t]}function mo(t){t=Ee(t);var i=zt(t.primaryKey);t.properties=Ee(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=Ax,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var e=Hd(t);hi(t.required,e),t.required=t.required.filter(o=>!o.includes(".")).filter((o,c,u)=>u.indexOf(o)===c),t.version=t.version||0;var r=t.indexes.map(o=>{var c=Cn(o)?o.slice(0):[o];return c.includes(i)||c.push(i),c[0]!=="_deleted"&&c.unshift("_deleted"),c});r.length===0&&r.push(Ox(i)),r.push(["_meta.lwt",i]),t.internalIndexes&&t.internalIndexes.map(o=>{r.push(o)});var n=new Set;return r.filter(o=>{var c=o.join(",");return n.has(c)?!1:(n.add(c),!0)}),t.indexes=r,t}var Tx=1e15,Ax={type:"object",properties:{lwt:{type:"number",minimum:la,maximum:Tx,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Hd(t){var i=Object.keys(t.properties).filter(r=>t.properties[r].final),e=zt(t.primaryKey);return i.push(e),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(r=>i.push(r)),i}function Ff(t,i){for(var e=Object.keys(t.defaultValues),r=0;r<e.length;++r){var n=e[r];(!Object.prototype.hasOwnProperty.call(i,n)||typeof i[n]>"u")&&(i[n]=t.defaultValues[n])}return i}var Ud=(function(){function t(e,r){if(this.jsonSchema=e,this.hashFunction=r,this.indexes=Lx(this.jsonSchema),this.primaryPath=zt(this.jsonSchema.primaryKey),!e.properties[this.primaryPath].maxLength)throw X("SC39",{schema:e});this.finalFields=Hd(this.jsonSchema)}var i=t.prototype;return i.validateChange=function(r,n){this.finalFields.forEach(o=>{if(!lo(r[o],n[o]))throw X("DOC9",{dataBefore:r,dataAfter:n,fieldName:o,schema:this.jsonSchema})})},i.getDocumentPrototype=function(){var r={},n=sr(this.jsonSchema,"");return Object.keys(n).forEach(o=>{var c=o;r.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var u=this.get(c);return u}}),Object.defineProperty(r,o+"$",{get:function(){return this.get$(c)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"$$",{get:function(){return this.get$$(c)},enumerable:!1,configurable:!1}),Object.defineProperty(r,o+"_",{get:function(){return this.populate(c)},enumerable:!1,configurable:!1})}),wi(this,"getDocumentPrototype",()=>r),r},i.getPrimaryOfDocumentData=function(r){return Ci(this.jsonSchema,r)},ii(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,n])=>e[r]=n.default),wi(this,"defaultValues",e)}},{key:"hash",get:function(){return wi(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])})();function Lx(t){return(t.indexes||[]).map(i=>Cn(i)?i:[i])}function Bf(t,i,e=!0){e&&_t("preCreateRxSchema",t);var r=mo(t);r=Nf(r),He.deepFreezeWhenDevMode(r);var n=new Ud(r,i);return _t("createRxSchema",n),n}function Vf(t){return t.documentData?t.documentData:t.previousDocumentData}function $f(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:He.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}var Nx=new Map;function mc(t){return kt(Nx,t,()=>{for(var i=new Array(t.events.length),e=t.events,r=t.collectionName,n=t.isLocal,o=He.deepFreezeWhenDevMode,c=0;c<e.length;c++){var u=e[c];i[c]={documentId:u.documentId,collectionName:r,isLocal:n,operation:u.operation,documentData:o(u.documentData),previousDocumentData:o(u.previousDocumentData)}}return i})}var In="\uFFFF",Dn=Number.MIN_SAFE_INTEGER;function zf(t,i){var e=i.selector,r=t.indexes?t.indexes.slice(0):[];i.index&&(r=[i.index]);var n=!!i.sort.find(g=>Object.values(g)[0]==="desc"),o=new Set;Object.keys(e).forEach(g=>{var b=sr(t,g);b&&b.type==="boolean"&&Object.prototype.hasOwnProperty.call(e[g],"$eq")&&o.add(g)});var c=i.sort.map(g=>Object.keys(g)[0]),u=c.filter(g=>!o.has(g)).join(","),h=-1,_;if(r.forEach(g=>{var b=!0,D=!0,C=g.map(te=>{var ie=e[te],Ce=ie?Object.keys(ie):[],xe={};if(!ie||!Ce.length){var Be=D?Dn:In;xe={startKey:Be,endKey:b?In:Dn,inclusiveStart:!0,inclusiveEnd:!0}}else Ce.forEach(oe=>{if(hc.has(oe)){var ve=ie[oe],Ze=$x(oe,ve);xe=Object.assign(xe,Ze)}});return typeof xe.startKey>"u"&&(xe.startKey=Dn),typeof xe.endKey>"u"&&(xe.endKey=In),typeof xe.inclusiveStart>"u"&&(xe.inclusiveStart=!0),typeof xe.inclusiveEnd>"u"&&(xe.inclusiveEnd=!0),D&&!xe.inclusiveStart&&(D=!1),b&&!xe.inclusiveEnd&&(b=!1),xe}),S=C.map(te=>te.startKey),P=C.map(te=>te.endKey),T={index:g,startKeys:S,endKeys:P,inclusiveEnd:b,inclusiveStart:D,sortSatisfiedByIndex:!n&&u===g.filter(te=>!o.has(te)).join(","),selectorSatisfiedByIndex:Vx(g,i.selector,S,P)},ee=zx(t,i,T);(ee>=h||i.index)&&(h=ee,_=T)}),!_)throw X("SNH",{query:i});return _}var hc=new Set(["$eq","$gt","$gte","$lt","$lte"]),Fx=new Set(["$eq","$gt","$gte"]),Bx=new Set(["$eq","$lt","$lte"]);function Vx(t,i,e,r){var n=Object.entries(i),o=n.find(([oe,ve])=>{if(!t.includes(oe))return!0;var Ze=Object.entries(ve).find(([Et,vt])=>!hc.has(Et));return Ze});if(o||i.$and||i.$or)return!1;var c=[],u=new Set;for(var[h,_]of Object.entries(i)){if(!t.includes(h))return!1;var g=Object.keys(_).filter(oe=>Fx.has(oe));if(g.length>1)return!1;var b=g[0];if(b&&u.add(h),b!=="$eq"){if(c.length>0)return!1;c.push(b)}}var D=[],C=new Set;for(var[S,P]of Object.entries(i)){if(!t.includes(S))return!1;var T=Object.keys(P).filter(oe=>Bx.has(oe));if(T.length>1)return!1;var ee=T[0];if(ee&&C.add(S),ee!=="$eq"){if(D.length>0)return!1;D.push(ee)}}var te=0;for(var ie of t){for(var Ce of[u,C]){if(!Ce.has(ie)&&Ce.size>0)return!1;Ce.delete(ie)}var xe=e[te],Be=r[te];if(xe!==Be&&u.size>0&&C.size>0)return!1;te++}return!0}function $x(t,i){switch(t){case"$eq":return{startKey:i,endKey:i,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:i,inclusiveEnd:!0};case"$gte":return{startKey:i,inclusiveStart:!0};case"$lt":return{endKey:i,inclusiveEnd:!1};case"$gt":return{startKey:i,inclusiveStart:!1};default:throw new Error("SNH")}}function zx(t,i,e){var r=0,n=g=>{g>0&&(r=r+g)},o=10,c=rc(e.startKeys,g=>g!==Dn&&g!==In);n(c*o);var u=rc(e.startKeys,g=>g!==In&&g!==Dn);n(u*o);var h=rc(e.startKeys,(g,b)=>g===e.endKeys[b]);n(h*o*1.5);var _=e.sortSatisfiedByIndex?5:0;return n(_),r}var fi=class extends Error{},pa=Symbol("missing"),Uf=Object.freeze(new Error("mingo: cycle detected while processing object/array")),_c=t=>{let i=pc(t),e=0,r=i.length;for(;r;)e=(e<<5)-e^i.charCodeAt(--r);return e>>>0},en=t=>typeof t!="object"&&typeof t!="function"||t===null,Wf=t=>en(t)||oi(t)||cr(t),Kf={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},Lt=(t,i)=>{t===pa&&(t=void 0),i===pa&&(i=void 0);let[e,r]=[t,i].map(n=>Kf[Sr(n)]||0);return e!==r?e-r:ni(t,i)?0:t<i?-1:t>i?1:0},Yi=class t extends Map{#e=_c;#i=new Map;#t=i=>{let e=this.#e(i);return[(this.#i.get(e)||[]).find(r=>ni(r,i)),e]};constructor(){super()}static init(i){let e=new t;return i&&(e.#e=i),e}clear(){super.clear(),this.#i.clear()}delete(i){if(en(i))return super.delete(i);let[e,r]=this.#t(i);return super.delete(e)?(this.#i.set(r,this.#i.get(r).filter(n=>!ni(n,e))),!0):!1}get(i){if(en(i))return super.get(i);let[e,r]=this.#t(i);return super.get(e)}has(i){if(en(i))return super.has(i);let[e,r]=this.#t(i);return super.has(e)}set(i,e){if(en(i))return super.set(i,e);let[r,n]=this.#t(i);if(super.has(r))super.set(r,e);else{super.set(i,e);let o=this.#i.get(n)||[];o.push(i),this.#i.set(n,o)}return this}get size(){return super.size}};function H(t,i){if(!t)throw new fi(i)}var jx=Object.keys(Kf).reduce((t,i)=>(t["[object "+i[0].toUpperCase()+i.substring(1)+"]"]=i,t),{});function Sr(t){let i=Object.prototype.toString.call(t);return i==="[object Object]"?t?.constructor?.name?.toLowerCase()||"object":jx[i]||i.substring(8,i.length-1).toLowerCase()}var kr=t=>typeof t=="boolean",Re=t=>typeof t=="string",Hx=t=>typeof t=="symbol",be=t=>!isNaN(t)&&typeof t=="number";var Y=Array.isArray;function Fe(t){if(!t)return!1;let i=Object.getPrototypeOf(t);return(i===Object.prototype||i===null)&&Sr(t)==="object"}var qf=t=>!en(t),oi=t=>t instanceof Date,cr=t=>t instanceof RegExp,fa=t=>typeof t=="function",Q=t=>t==null,lr=(t,i=!0)=>!!t||i&&t==="",Si=t=>Q(t)||Re(t)&&!t||Y(t)&&t.length===0||Fe(t)&&Object.keys(t).length===0,dr=t=>Y(t)?t:[t],Bi=(t,i)=>!!t&&Object.prototype.hasOwnProperty.call(t,i),Ux=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),Cr=(t,i)=>{if(Q(t)||kr(t)||be(t)||Re(t))return t;if(oi(t))return new Date(t);if(cr(t))return new RegExp(t);if(Ux(t)){let e=t.constructor;return new e(t)}if(i instanceof Set||(i=new Set),i.has(t))throw Uf;i.add(t);try{if(Y(t)){let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=Cr(t[r],i);return e}if(Fe(t)){let e={};for(let r of Object.keys(t))e[r]=Cr(t[r],i);return e}}finally{i.delete(t)}return t},jf=t=>t===pa;function vc(t,i){if(jf(t)||Q(t))return i;if(jf(i)||Q(i))return t;if(en(t)||en(i))return i;Y(t)&&Y(i)&&H(t.length===i.length,"arrays must be of equal length to merge.");for(let e of Object.keys(i))t[e]=vc(t[e],i[e]);return t}function Kd(t,i=_c){let e=[Yi.init(i),Yi.init(i)];if(t.length===0)return[];if(t.some(r=>r.length===0))return[];if(t.length===1)return[...t];t[t.length-1].forEach(r=>e[0].set(r,!0));for(let r=t.length-2;r>-1;r--){if(t[r].forEach(n=>{e[0].has(n)&&e[1].set(n,!0)}),e[1].size===0)return[];e.reverse(),e[1].clear()}return Array.from(e[0].keys())}function rn(t,i=1){let e=new Array;function r(n,o){for(let c=0,u=n.length;c<u;c++)Y(n[c])&&(o>0||o<0)?r(n[c],Math.max(-1,o-1)):e.push(n[c])}return r(t,i),e}function Wx(t){let i={};for(;t;){for(let e of Object.getOwnPropertyNames(t))e in i||(i[e]=t[e]);t=Object.getPrototypeOf(t)}return i}function Qf(t){for(;t;){if(Object.getOwnPropertyNames(t).includes("toString"))return t.toString!==Object.prototype.toString;t=Object.getPrototypeOf(t)}return!1}function ni(t,i){if(t===i||Object.is(t,i))return!0;if(t===null||i===null||typeof t!=typeof i||typeof t!="object"||t.constructor!==i.constructor)return!1;if(t instanceof Date)return+t==+i;if(t instanceof RegExp)return t.toString()===i.toString();let e=t.constructor;if(e===Array||e===Object){let r=Object.keys(t).sort(),n=Object.keys(i).sort();if(r.length!==n.length)return!1;for(let o=0,c=r[o];o<r.length;c=r[++o])if(c!==n[o]||!ni(t[c],i[c]))return!1;return!0}return Qf(t)&&t.toString()===i.toString()}var pc=(t,i)=>{if(t===null)return"null";if(t===void 0)return"undefined";if(Re(t)||be(t)||kr(t))return JSON.stringify(t);if(oi(t))return t.toISOString();if(cr(t)||Hx(t)||fa(t))return t.toString();if(i instanceof Set||(i=new Set),i.has(t))throw Uf;try{if(i.add(t),Y(t))return"["+t.map(r=>pc(r,i)).join(",")+"]";if(Fe(t))return"{"+Object.keys(t).sort().map(n=>`${n}:${pc(t[n],i)}`).join()+"}";let e=Qf(t)?t.toString():pc(Wx(t),i);return Sr(t)+"("+e+")"}finally{i.delete(t)}};function Xf(t,i){return Q(t)?null:(i=i||_c,i(t))}function yc(t,i,e=_c){if(t.length<1)return new Map;let r=new Map,n=new Map;for(let o=0;o<t.length;o++){let c=t[o],u=i(c,o),h=Xf(u,e);if(h===null)n.has(null)?n.get(null).push(c):n.set(null,[c]);else{let _=r.has(h)?r.get(h).find(g=>ni(g,u)):null;Q(_)?(n.set(u,[c]),r.has(h)?r.get(h).push(u):r.set(h,[u])):n.get(_).push(c)}}return n}function Wd(t,i){return qf(t)?t[i]:void 0}function Kx(t,i){if(i<1)return t;for(;i--&&t.length===1;)t=t[0];return t}function Zt(t,i,e){let r=0;function n(c,u){let h=c;for(let _=0;_<u.length;_++){let g=u[_];if(/^\d+$/.exec(g)===null&&Y(h)){if(_===0&&r>0)break;r+=1;let D=u.slice(_);h=h.reduce((C,S)=>{let P=n(S,D);return P!==void 0&&C.push(P),C},[]);break}else h=Wd(h,g);if(h===void 0)break}return h}let o=Wf(t)?t:n(t,i.split("."));return Y(o)&&e?.unwrapArray?Kx(o,r):o}function tn(t,i,e){let r=i.indexOf("."),n=r==-1?i:i.substring(0,r),o=i.substring(r+1),c=r!=-1;if(Y(t)){let _=/^\d+$/.test(n),g=_&&e?.preserveIndex?[...t]:[];if(_){let b=parseInt(n),D=Wd(t,b);c&&(D=tn(D,o,e)),e?.preserveIndex?g[b]=D:g.push(D)}else for(let b of t){let D=tn(b,i,e);e?.preserveMissing?g.push(D??pa):(D!=null||e?.preserveIndex)&&g.push(D)}return g}let u=e?.preserveKeys?fe({},t):{},h=Wd(t,n);if(c&&(h=tn(h,o,e)),h!==void 0)return u[n]=h,u}function fc(t){if(Y(t))for(let i=t.length-1;i>=0;i--)t[i]===pa?t.splice(i,1):fc(t[i]);else if(Fe(t))for(let i in t)Bi(t,i)&&fc(t[i])}var Hf=/^\d+$/;function gc(t,i,e,r){let n=i.split("."),o=n[0],c=n.slice(1).join(".");if(n.length===1)(Fe(t)||Y(t)&&Hf.test(o))&&e(t,o);else{r?.buildGraph&&Q(t[o])&&(t[o]={});let u=t[o];if(!u)return;let h=!!(n.length>1&&Hf.test(n[1]));Y(u)&&r?.descendArray&&!h?u.forEach(_=>gc(_,c,e,r)):gc(u,c,e,r)}}function ga(t,i,e){gc(t,i,(r,n)=>{r[n]=fa(e)?e(r[n]):e},{buildGraph:!0})}function _a(t,i,e){gc(t,i,(r,n)=>{if(Y(r)){if(/^\d+$/.test(n))r.splice(parseInt(n),1);else if(e&&e.descendArray)for(let o of r)Fe(o)&&delete o[n]}else Fe(r)&&delete r[n]},e)}var qx=/^\$[a-zA-Z0-9_]+$/;function Vi(t){return qx.test(t)}function bc(t){if(Wf(t))return cr(t)?{$regex:t}:{$eq:t};if(qf(t)){if(!Object.keys(t).some(Vi))return{$eq:t};if(Bi(t,"$regex")){let i=fe({},t);return i.$regex=new RegExp(t.$regex,t.$options),delete i.$options,i}}return t}var po=(t=>(t[t.CLONE_OFF=0]="CLONE_OFF",t[t.CLONE_INPUT=1]="CLONE_INPUT",t[t.CLONE_OUTPUT=2]="CLONE_OUTPUT",t[t.CLONE_ALL=3]="CLONE_ALL",t))(po||{}),ut=class t{#e;#i;#t;constructor(i,e,r){this.#e=i,this.update(e,r)}static init(i,e,r){return i instanceof t?new t(i.#e,i.root??e,Ue(fe(fe({},i.#t),r),{variables:Object.assign({},i.#t?.variables,r?.variables)})):new t(i,e,r)}update(i,e){this.#i=i;let r=Object.assign({},this.#t?.variables,e?.variables);return Object.keys(r).length?this.#t=Ue(fe({},e),{variables:r}):this.#t=e??{},this}getOptions(){return Object.freeze(Ue(fe({},this.#e),{context:ho.from(this.#e.context)}))}get root(){return this.#i}get local(){return this.#t}get idKey(){return this.#e.idKey}get collation(){return this.#e?.collation}get processingMode(){return this.#e?.processingMode||0}get useStrictMode(){return this.#e?.useStrictMode}get scriptEnabled(){return this.#e?.scriptEnabled}get useGlobalContext(){return this.#e?.useGlobalContext}get hashFunction(){return this.#e?.hashFunction}get collectionResolver(){return this.#e?.collectionResolver}get jsonSchemaValidator(){return this.#e?.jsonSchemaValidator}get variables(){return this.#e?.variables}get context(){return this.#e?.context}};function va(t){return t instanceof ut?t.getOptions():Object.freeze(Ue(fe({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0},t),{context:t?.context?ho.from(t?.context):ho.init()}))}var ho=class t{#e=new Map;constructor(){}static init(){return new t}static from(i){let e=t.init();return Q(i)||i.#e.forEach((r,n)=>e.addOperators(n,r)),e}addOperators(i,e){this.#e.has(i)||this.#e.set(i,{});for(let[r,n]of Object.entries(e))this.getOperator(i,r)||(this.#e.get(i)[r]=n);return this}getOperator(i,e){return(this.#e.get(i)??{})[e]??null}addAccumulatorOps(i){return this.addOperators("accumulator",i)}addExpressionOps(i){return this.addOperators("expression",i)}addQueryOps(i){return this.addOperators("query",i)}addPipelineOps(i){return this.addOperators("pipeline",i)}addProjectionOps(i){return this.addOperators("projection",i)}addWindowOps(i){return this.addOperators("window",i)}},Rn=ho.init();function qd(t,i){for(let[e,r]of Object.entries(i)){H(fa(r)&&Vi(e),`'${e}' is not a valid operator`);let n=Er(t,e,null);H(!n||r===n,`${e} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":Rn.addAccumulatorOps(i);break;case"expression":Rn.addExpressionOps(i);break;case"pipeline":Rn.addPipelineOps(i);break;case"projection":Rn.addProjectionOps(i);break;case"query":Rn.addQueryOps(i);break;case"window":Rn.addWindowOps(i);break}}function Er(t,i,e){let{context:r,useGlobalContext:n}=e||{},o=r?r.getOperator(t,i):null;return!o&&n?Rn.getOperator(t,i):o}function F(t,i,e,r){let n=ut.init(r,t);return e&&Vi(e)?Yf(t,i,e,n):xc(t,i,n)}var Qx=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function xc(t,i,e){if(Re(i)&&i.length>0&&i[0]==="$"){if(Xx.includes(i))return i;let r=e.root,n=i.split(".");if(Qx.includes(n[0])){switch(n[0]){case"$$ROOT":break;case"$$CURRENT":r=t;break;case"$$REMOVE":r=void 0;break;case"$$NOW":r=new Date;break}i=i.slice(n[0].length+1)}else if(n[0].slice(0,2)==="$$"){r=Object.assign({},e.variables,{this:t},e?.local?.variables);let o=n[0].slice(2);H(Bi(r,o),`Use of undefined variable: ${o}`),i=i.slice(2)}else i=i.slice(1);return i===""?r:Zt(r,i)}if(Y(i))return i.map(r=>xc(t,r,e));if(Fe(i)){let r={},n=Object.entries(i);for(let[o,c]of n){if(Vi(o))return H(n.length==1,"expression must have single operator."),Yf(t,c,o,e);r[o]=xc(t,c,e)}return r}return i}function Yf(t,i,e,r){let n=Er("expression",e,r);if(n)return n(t,i,r);let o=Er("accumulator",e,r);return H(!!o,`accumulator '${e}' is not registered.`),Y(t)||(t=xc(t,i,r),i=null),H(Y(t),`arguments must resolve to array for ${e}.`),o(t,i,r)}var Xx=["$$KEEP","$$PRUNE","$$DESCEND"];function jt(t){return t instanceof ya?t:new ya(t)}function ba(...t){let i=0;return jt(()=>{for(;i<t.length;){let e=t[i].next();if(!e.done)return e;i++}return{done:!0}})}function Yx(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function Gx(t,i){let e=t.slice(i+1);t.splice(i),Array.prototype.push.apply(t,e)}var Qd=new Error;function Zx(t,i,e){let r=!1,n=-1,o=0;return function(c){try{e:for(;!r;){let u=t();n++;let h=-1,_=i.length,g=!1;for(;++h<_;){let b=i[h];switch(b.action){case 0:u=b.func(u,n);break;case 1:if(!b.func(u,n))continue e;break;case 2:--b.count,b.count||(g=!0);break;case 3:--b.count,b.count||Gx(i,h);continue e;default:break e}}if(r=g,c)e[o++]=u;else return{value:u,done:!1}}}catch(u){if(u!==Qd)throw u}return r=!0,{done:r}}}var ya=class{constructor(i){this.#e=[],this.#i=[],this.isDone=!1;let e;if(i instanceof Function&&(i={next:i}),Yx(i)){let r=i;e=()=>{let n=r.next();if(n.done)throw Qd;return n.value}}else if(Y(i)){let r=i,n=r.length,o=0;e=()=>{if(o<n)return r[o++];throw Qd}}else if(!(i instanceof Function))throw new fi("Lazy must be initialized with an array, generator, or function.");this.#t=Zx(e,this.#e,this.#i)}#e;#i;#t;push(i,e){return typeof e=="function"?this.#e.push({action:i,func:e}):typeof e=="number"&&this.#e.push({action:i,count:e}),this}next(){return this.#t()}map(i){return this.push(0,i)}filter(i){return this.push(1,i)}take(i){return i>0?this.push(2,i):this}drop(i){return i>0?this.push(3,i):this}transform(i){let e=this,r;return jt(()=>(r||(r=jt(i(e.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.#t(!0).done),this.#i}each(i){for(;;){let e=this.next();if(e.done)break;if(i(e.value)===!1)return!1}return!0}reduce(i,e){let r=this.next();for(e===void 0&&!r.done&&(e=r.value,r=this.next());!r.done;)e=i(e,r.value),r=this.next();return e}size(){return this.reduce((i,e)=>++i,0)}[Symbol.iterator](){return this}};var Gf=(t,i,e)=>t.take(i);var xa=(t,i,e)=>Si(i)?t:(Jf(i,e),t.map(Zf(i,ut.init(e))));function Zf(t,i,e=!0){let r=i.idKey,n=Object.keys(t),o=new Array,c=new Array,u={};for(let C of n){let S=t[C];if(be(S)||kr(S))S?c.push(C):o.push(C);else if(Y(S))u[C]=P=>S.map(T=>F(P,T,null,i.update(P))??null);else if(Fe(S)){let P=Object.keys(S),T=P.length==1?P[0]:"",ee=Er("projection",T,i);ee?T==="$slice"&&!dr(S[T]).every(be)?u[C]=ie=>F(ie,S,C,i.update(ie)):u[C]=ie=>ee(ie,S[T],C,i.update(ie)):Vi(T)?u[C]=te=>F(te,S[T],T,i):(Jf(S,i),u[C]=te=>{if(!Bi(te,C))return F(te,S,null,i);e&&i.update(te);let ie=Zt(te,C),Ce=Zf(S,i,!1);return Y(ie)?ie.map(Ce):Fe(ie)?Ce(ie):Ce(te)})}else u[C]=Re(S)&&S[0]==="$"?P=>F(P,S,C,i):P=>S}let h=Object.keys(u),_=o.includes(r);if(e&&_&&o.length===1&&!c.length&&!h.length)return C=>{let S=fe({},C);return delete S[r],S};let b=e&&!_&&!c.includes(r),D={preserveMissing:!0};return C=>{let S={};if(o.length&&!c.length){vc(S,C);for(let P of o)_a(S,P,{descendArray:!0})}for(let P of c){let T=tn(C,P,D)??{};vc(S,T)}c.length&&fc(S);for(let P of h){let T=u[P](C);T===void 0?_a(S,P,{descendArray:!0}):ga(S,P,T)}return b&&Bi(C,r)&&(S[r]=Zt(C,r)),S}}function Jf(t,i){let e=!1,r=!1;for(let[n,o]of Object.entries(t))H(!n.startsWith("$"),"Field names may not start with '$'."),H(!n.endsWith(".$"),"Positional projection operator '$' is not supported."),n!==i?.idKey&&(o===0||o===!1?e=!0:(o===1||o===!0)&&(r=!0),H(!(e&&r),"Projection cannot have a mix of inclusion and exclusion."))}var eg=(t,i,e)=>t.drop(i);var ur=(t,i,e)=>{if(Si(i)||!Fe(i))return t;let r=Lt,n=e.collation;return Fe(n)&&Re(n.locale)&&(r=ew(n)),t.transform(o=>{let c=Object.keys(i);for(let u of c.reverse()){let h=yc(o,b=>Zt(b,u),e.hashFunction),_=Array.from(h.keys()).sort(r);i[u]===-1&&_.reverse();let g=0;for(let b of _)for(let D of h.get(b))o[g++]=D;H(g==o.length,"bug: counter must match collection size.")}return o})},Jx={1:"base",2:"accent",3:"variant"};function ew(t){let i={sensitivity:Jx[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(i.sensitivity==="base"&&(i.sensitivity="case"),i.sensitivity==="accent"&&(i.sensitivity="variant"));let e=new Intl.Collator(t.locale,i);return(r,n)=>{if(!Re(r)||!Re(n))return Lt(r,n);let o=e.compare(r,n);return o<0?-1:o>0?1:0}}var tw={$sort:ur,$skip:eg,$limit:Gf},wc=class{#e;#i;#t;#n;#a={};#r=null;#o=[];constructor(i,e,r,n){this.#e=i,this.#i=e,this.#t=r,this.#n=n}fetch(){if(this.#r)return this.#r;this.#r=jt(this.#e).filter(this.#i);let i=this.#n.processingMode;i&po.CLONE_INPUT&&this.#r.map(Cr);for(let e of["$sort","$skip","$limit"])Bi(this.#a,e)&&(this.#r=tw[e](this.#r,this.#a[e],this.#n));return Object.keys(this.#t).length&&(this.#r=xa(this.#r,this.#t,this.#n)),i&po.CLONE_OUTPUT&&this.#r.map(Cr),this.#r}fetchAll(){let i=jt([...this.#o]);return this.#o=[],ba(i,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(i){return this.#a.$skip=i,this}limit(i){return this.#a.$limit=i,this}sort(i){return this.#a.$sort=i,this}collation(i){return this.#n=Ue(fe({},this.#n),{collation:i}),this}next(){if(this.#o.length>0)return this.#o.pop();let i=this.fetch().next();if(!i.done)return i.value}hasNext(){if(this.#o.length>0)return!0;let i=this.fetch().next();return i.done?!1:(this.#o.push(i.value),!0)}map(i){return this.all().map(i)}forEach(i){this.all().forEach(i)}[Symbol.iterator](){return this.fetchAll()}};var iw=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"])),ki=class{#e;#i;#t;constructor(i,e){this.#t=Cr(i),this.#i=va(e),this.#e=[],this.compile()}compile(){H(Fe(this.#t),`query criteria must be an object: ${JSON.stringify(this.#t)}`);let i={};for(let[e,r]of Object.entries(this.#t)){if(e==="$where")H(this.#i.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(i,{field:e,expr:r});else if(iw.has(e))this.processOperator(e,e,r);else{H(!Vi(e),`unknown top level operator: ${e}`);for(let[n,o]of Object.entries(bc(r)))this.processOperator(e,n,o)}i.field&&this.processOperator(i.field,i.field,i.expr)}}processOperator(i,e,r){let n=Er("query",e,this.#i);H(!!n,`unknown query operator ${e}`),this.#e.push(n(i,r,this.#i))}test(i){return this.#e.every(e=>e(i))}find(i,e){return new wc(i,r=>this.test(r),e||{},this.#i)}remove(i){return i.reduce((e,r)=>(this.test(r)||e.push(r),e),[])}};var VP=Object.freeze({R5:[10,16,25,40,63],R10:[100,125,160,200,250,315,400,500,630,800],R20:[100,112,125,140,160,180,200,224,250,280,315,355,400,450,500,560,630,710,800,900],R40:[100,106,112,118,125,132,140,150,160,170,180,190,200,212,224,236,250,265,280,300,315,355,375,400,425,450,475,500,530,560,600,630,670,710,750,800,850,900,950],R80:[103,109,115,122,128,136,145,155,165,175,185,195,206,218,230,243,258,272,290,307,325,345,365,387,412,437,462,487,515,545,575,615,650,690,730,775,825,875,925,975],"1-2-5":[10,20,50],E6:[10,15,22,33,47,68],E12:[10,12,15,18,22,27,33,39,47,56,68,82],E24:[10,11,12,13,15,16,18,20,22,24,27,30,33,36,39,43,47,51,56,62,68,75,82,91],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,255,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,665,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]});var ig=7;var fo=1e3*60*60*24,rg={week:fo*ig,day:fo,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1},rw=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"],nw=new Set(rw),QP=Object.freeze({mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:7});var ng=Object.freeze({"%Y":{name:"year",padding:4,re:/([0-9]{4})/},"%G":{name:"year",padding:4,re:/([0-9]{4})/},"%m":{name:"month",padding:2,re:/(0[1-9]|1[012])/},"%d":{name:"day",padding:2,re:/(0[1-9]|[12][0-9]|3[01])/},"%H":{name:"hour",padding:2,re:/([01][0-9]|2[0-3])/},"%M":{name:"minute",padding:2,re:/([0-5][0-9])/},"%S":{name:"second",padding:2,re:/([0-5][0-9]|60)/},"%L":{name:"millisecond",padding:3,re:/([0-9]{3})/},"%u":{name:"weekday",padding:1,re:/([1-7])/},"%U":{name:"week",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%V":{name:"isoWeek",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%z":{name:"timezone",padding:2,re:/(([+-][01][0-9]|2[0-3]):?([0-5][0-9])?)/},"%Z":{name:"minuteOffset",padding:3,re:/([+-][0-9]{3})/}});var oO=Object.freeze({});var EA={week:fo*7,day:fo,hour:fo/24,minute:6e4,second:1e3,millisecond:1};function Ge(t){return(e,r,n)=>{let o={unwrapArray:!0},c=Math.max(1,e.split(".").length-1);return u=>{let h=Zt(u,e,o);return t(h,r,Ue(fe({},n),{depth:c}))}}}function gi(t){return(i,e,r)=>{let n=F(i,e,null,r);return t(...n)}}function wa(t,i,e){return ni(t,i)||Q(t)&&Q(i)?!0:Y(t)?t.some(r=>ni(r,i))||rn(t,e?.depth).some(r=>ni(r,i)):!1}function Cc(t,i,e){return!wa(t,i,e)}function Yd(t,i,e){return Q(t)?i.some(r=>r===null):Kd([dr(t),i],e?.hashFunction).length>0}function Sc(t,i,e){return!Yd(t,i,e)}function kc(t,i,e){return Rc(t,i,(r,n)=>Lt(r,n)<0)}function Ec(t,i,e){return Rc(t,i,(r,n)=>Lt(r,n)<=0)}function Ic(t,i,e){return Rc(t,i,(r,n)=>Lt(r,n)>0)}function Dc(t,i,e){return Rc(t,i,(r,n)=>Lt(r,n)>=0)}function lg(t,i,e){return dr(t).some(r=>i.length===2&&r%i[0]===i[1])}function dg(t,i,e){let r=dr(t),n=o=>Re(o)&&lr(i.exec(o),e?.useStrictMode);return r.some(n)||rn(r,1).some(n)}function ug(t,i,e){if(!Y(t)||!Y(i)||!t.length||!i.length)return!1;let r=!0;for(let n of i){if(!r)break;Fe(n)&&Object.keys(n).includes("$elemMatch")?r=Gd(t,n.$elemMatch,e):cr(n)?r=t.some(o=>typeof o=="string"&&n.test(o)):r=t.some(o=>ni(n,o))}return r}function mg(t,i,e){return Array.isArray(t)&&t.length===i}function gw(t){return Vi(t)&&["$and","$or","$nor"].indexOf(t)===-1}function Gd(t,i,e){if(Y(t)&&!Si(t)){let r=c=>c,n=i;Object.keys(i).every(gw)&&(n={temp:i},r=c=>({temp:c}));let o=new ki(n,e);for(let c=0,u=t.length;c<u;c++)if(o.test(r(t[c])))return!0}return!1}var sg=t=>t===null,_w={array:Y,boolean:kr,bool:kr,date:oi,number:be,int:be,long:be,double:be,decimal:be,null:sg,object:Fe,regexp:cr,regex:cr,string:Re,undefined:Q,function:t=>{throw new fi("unsupported type key `function`.")},1:be,2:Re,3:Fe,4:Y,6:Q,8:kr,9:oi,10:sg,11:cr,16:be,18:be,19:be};function cg(t,i,e){let r=_w[i];return r?r(t):!1}function hg(t,i,e){return Y(i)?i.findIndex(r=>cg(t,r,e))>=0:cg(t,i,e)}function Rc(t,i,e){return dr(t).some(r=>Sr(r)===Sr(i)&&e(r,i))}var jF=gi(Sc);var go=(t,i)=>(e,r,n)=>{H(Y(r),`${t}: expression must be an array.`);let o=F(e,r,null,n);return o.some(Q)?null:(H(o.every(be),`${t}: expression must evalue to array of numbers.`),i(o))};var V2=go("$bitAnd",t=>t.reduce((i,e)=>i&e,-1));var W2=go("$bitOr",t=>t.reduce((i,e)=>i|e,0));var Q2=go("$bitXor",t=>t.reduce((i,e)=>i^e,0));var vB=gi(wa);var xB=gi(Ic);var SB=gi(Dc);var IB=gi(kc);var MB=gi(Ec);var TB=gi(Cc);var pg=(t,i)=>{let e={};return t.split("").forEach((r,n)=>e[r]=i*(n+1)),e},hV=Ue(fe(fe({},pg("ABCDEFGHIKLM",1)),pg("NOPQRSTUVWXY",-1)),{Z:0});var vg={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function et(t,i=vg){let e=Object.assign({},vg,i),r=new Set(Object.keys(e));return(n,o,c)=>{let u=F(n,o,null,c);if(r.has(`${u}`)){let h=e[`${u}`];if(h instanceof Error)throw new fi(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return h}return t(u)}}var D4=et(Math.acos,{Infinity:1/0,0:new Error});var P4=et(Math.acosh,{Infinity:1/0,0:new Error});var A4=et(Math.asin);var F4=et(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var $4=et(Math.atan);var K4=et(Math.atanh,{1:1/0,"-1":-1/0});var X4=et(Math.cos);var Z4=et(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var Ew=Math.PI/180,t5=et(t=>t*Ew,{Infinity:1/0,"-Infinity":1/0});var Iw=180/Math.PI,n5=et(t=>t*Iw,{Infinity:1/0,"-Infinity":-1/0});var s5=et(Math.sin);var d5=et(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var h5=et(Math.tan);var Dw=Number.MAX_SAFE_INTEGER,Rw=Number.MIN_SAFE_INTEGER;var bg=(t,i,e)=>{H(Y(i),"Invalid expression: $and expects value to be an Array.");let r=i.map(n=>new ki(n,e));return n=>r.every(o=>o.test(n))};var Pc=(t,i,e)=>{H(Y(i),"Invalid expression. $or expects value to be an Array");let r=i.map(n=>new ki(n,e));return n=>r.some(o=>o.test(n))};var xg=(t,i,e)=>{H(Y(i),"Invalid expression. $nor expects value to be an array.");let r=Pc("$or",i,e);return n=>!r(n)};var wg=(t,i,e)=>{let r={};r[t]=bc(i);let n=new ki(r,e);return o=>!n.test(o)};var Zd=Ge(wa);var Jd=Ge(Ic);var eu=Ge(Dc);var tu=Ge(Yd);var iu=Ge(kc);var ru=Ge(Ec);var nu=Ge(Cc);var ou=Ge(Sc);var Cg=Ge(lg);var Sg=Ge(dg);var fU=Ge(ug);var kg=Ge(Gd);var Eg=Ge(mg);var Ig=(t,i,e)=>{let r=t.includes("."),n=!!i;return!r||t.match(/\.\d+$/)?o=>Zt(o,t)!==void 0===n:o=>{let c=tn(o,t,{preserveIndex:!0}),u=Zt(c,t.substring(0,t.lastIndexOf(".")));return Y(u)?u.some(h=>h!==void 0)===n:u!==void 0===n}};var Dg=Ge(hg);var Rg=!1;function Mg(t){return Rg||(qd("pipeline",{$sort:ur,$project:xa}),qd("query",{$and:bg,$eq:Zd,$elemMatch:kg,$exists:Ig,$gt:Jd,$gte:eu,$in:tu,$lt:iu,$lte:ru,$ne:nu,$nin:ou,$mod:Cg,$nor:xg,$not:wg,$or:Pc,$regex:Sg,$size:Eg,$type:Dg}),Rg=!0),new ki(t)}function nn(t,i){var e=zt(t.primaryKey);i=Ee(i);var r=qt(i);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([b,D])=>{(typeof D!="object"||D===null)&&(r.selector[b]={$eq:D})})):r.selector={},r.index){var n=Gr(r.index);n.includes(e)||n.push(e),r.index=n}if(r.sort){var g=r.sort.find(b=>gf(b)===e);g||(r.sort=r.sort.slice(0),r.sort.push({[e]:"asc"}))}else if(r.index)r.sort=r.index.map(b=>({[b]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(r.selector).forEach(([b,D])=>{var C=!1;typeof D=="object"&&D!==null?C=!!Object.keys(D).find(S=>hc.has(S)):C=!0,C&&o.add(b)});var c=-1,u;t.indexes.forEach(b=>{var D=Cn(b)?b:[b],C=D.findIndex(S=>!o.has(S));C>0&&C>c&&(c=C,u=D)}),u&&(r.sort=u.map(b=>({[b]:"asc"})))}if(!r.sort)if(t.indexes&&t.indexes.length>0){var h=t.indexes[0],_=Cn(h)?h:[h];r.sort=_.map(b=>({[b]:"asc"}))}else r.sort=[{[e]:"asc"}]}return r}function Oc(t,i){if(!i.sort)throw X("SNH",{query:i});var e=[];i.sort.forEach(n=>{var o=Object.keys(n)[0],c=Object.values(n)[0];e.push({key:o,direction:c,getValueFn:ff(o)})});var r=(n,o)=>{for(var c=0;c<e.length;++c){var u=e[c],h=u.getValueFn(n),_=u.getValueFn(o);if(h!==_){var g=u.direction==="asc"?Lt(h,_):Lt(_,h);return g}}};return r}function _o(t,i){if(!i.sort)throw X("SNH",{query:i});var e=Mg(i.selector),r=n=>e.test(n);return r}function vo(t,i){return R(this,null,function*(){var e=yield t.exec();if(!e)return null;if(Array.isArray(e))return Promise.all(e.map(n=>i(n)));if(e instanceof Map)return Promise.all([...e.values()].map(n=>i(n)));var r=yield i(e);return r})}function yo(t,i){if(!i.sort)throw X("SNH",{query:i});var e=zf(t,i);return{query:i,queryPlan:e}}var Pg="_rxdb_internal";function Sa(t,i){return R(this,null,function*(){var e=yield t.findDocumentsById([i],!1),r=e[0];if(r)return r})}function su(t,i,e){return R(this,null,function*(){var r=yield t.bulkWrite([i],e);if(r.error.length>0){var n=r.error[0];throw n}else{var o=zt(t.schema.primaryKey),c=Ut(o,[i],r),u=c[0];return u}})}function on(t){return Object.assign({},...t.filter(i=>!!i))}function bo(t,i,e,r){if(r)throw r.status===409?X("CONFLICT",{collection:t.name,id:i,writeError:r,data:e}):r.status===422?X("VD2",{collection:t.name,id:i,writeError:r,data:e}):r}function Og(t,i,e,r,n,o,c){for(var u=!!t.schema.attachments,h=[],_=[],g=[],b=Sn(10),D={id:b,events:[],checkpoint:null,context:n},C=D.events,S=[],P=[],T=[],ee=e.size>0,te,ie=r.length,Ce=function(){var Be=r[xe],oe=Be.document,ve=Be.previous,Ze=oe[i],Et=oe._deleted,vt=ve&&ve._deleted,Ae=void 0;ee&&(Ae=e.get(Ze));var Pt;if(Ae){var zi=Ae._rev;if(!ve||ve&&zi!==ve._rev){var _i={isError:!0,status:409,documentId:Ze,writeRow:Be,documentInDb:Ae};return g.push(_i),1}var xt=u?au(Be):Be;u&&(Et?ve&&Object.keys(ve._attachments).forEach(ze=>{P.push({documentId:Ze,attachmentId:ze,digest:ae(ve)._attachments[ze].digest})}):(Object.entries(oe._attachments).find(([ze,nt])=>{var ai=ve?ve._attachments[ze]:void 0;return!ai&&!nt.data&&(Pt={documentId:Ze,documentInDb:Ae,isError:!0,status:510,writeRow:Be,attachmentId:ze}),!0}),Pt||Object.entries(oe._attachments).forEach(([ze,nt])=>{var ai=ve?ve._attachments[ze]:void 0;if(!ai)S.push({documentId:Ze,attachmentId:ze,attachmentData:nt,digest:nt.digest});else{var ji=xt.document._attachments[ze].digest;nt.data&&ai.digest!==ji&&T.push({documentId:Ze,attachmentId:ze,attachmentData:nt,digest:nt.digest})}}))),Pt?g.push(Pt):(u?(_.push(au(xt)),c&&c(oe)):(_.push(xt),c&&c(oe)),te=xt);var Ri=null,De=null,rt=null;if(vt&&!Et)rt="INSERT",Ri=u?$i(oe):oe;else if(ve&&!vt&&!Et)rt="UPDATE",Ri=u?$i(oe):oe,De=ve;else if(Et)rt="DELETE",Ri=ae(oe),De=ve;else throw X("SNH",{args:{writeRow:Be}});var Ot={documentId:Ze,documentData:Ri,previousDocumentData:De,operation:rt};C.push(Ot)}else{var yt=!!Et;if(u&&Object.entries(oe._attachments).forEach(([ze,nt])=>{nt.data?S.push({documentId:Ze,attachmentId:ze,attachmentData:nt,digest:nt.digest}):(Pt={documentId:Ze,isError:!0,status:510,writeRow:Be,attachmentId:ze},g.push(Pt))}),Pt||(u?(h.push(au(Be)),o&&o(oe)):(h.push(Be),o&&o(oe)),te=Be),!yt){var bt={documentId:Ze,operation:"INSERT",documentData:u?$i(oe):oe,previousDocumentData:u&&ve?$i(ve):ve};C.push(bt)}}},xe=0;xe<ie;xe++)Ce();return{bulkInsertDocs:h,bulkUpdateDocs:_,newestRow:te,errors:g,eventBulk:D,attachmentsAdd:S,attachmentsRemove:P,attachmentsUpdate:T}}function au(t){return{previous:t.previous,document:$i(t.document)}}function Aw(t){return atob(t).length}function Lw(t){var i=t.data;if(!i)return t;var e={length:Aw(i),digest:t.digest,type:t.type};return e}function $i(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var i=Ee(t);return i._attachments={},Object.entries(t._attachments).forEach(([e,r])=>{i._attachments[e]=Lw(r)}),i}function Ir(t){return Object.assign({},t,{_meta:Ee(t._meta)})}function Tc(t,i,e){He.deepFreezeWhenDevMode(e);var r=zt(i.schema.primaryKey),n={originalStorageInstance:i,schema:i.schema,internals:i.internals,collectionName:i.collectionName,databaseName:i.databaseName,options:i.options,bulkWrite(c,u){return R(this,null,function*(){for(var h=t.token,_=new Array(c.length),g=mt(),b=0;b<c.length;b++){var D=c[b],C=Ir(D.document);C._meta.lwt=g;var S=D.previous;C._rev=ri(h,S),_[b]={document:C,previous:S}}_t("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:_});var P=yield t.lockedRun(()=>i.bulkWrite(_,u)),T={error:[]};Lg.set(T,_);var ee=P.error.length===0?[]:P.error.filter(oe=>oe.status===409&&!oe.writeRow.previous&&!oe.writeRow.document._deleted&&ae(oe.documentInDb)._deleted?!0:(T.error.push(oe),!1));if(ee.length>0){var te=new Set,ie=ee.map(oe=>(te.add(oe.documentId),{previous:oe.documentInDb,document:Object.assign({},oe.writeRow.document,{_rev:ri(t.token,oe.documentInDb)})})),Ce=yield t.lockedRun(()=>i.bulkWrite(ie,u));hi(T.error,Ce.error);var xe=Ut(r,_,T,te),Be=Ut(r,ie,Ce);return hi(xe,Be),T}return T})},query(c){return t.lockedRun(()=>i.query(c))},count(c){return t.lockedRun(()=>i.count(c))},findDocumentsById(c,u){return t.lockedRun(()=>i.findDocumentsById(c,u))},getAttachmentData(c,u,h){return t.lockedRun(()=>i.getAttachmentData(c,u,h))},getChangedDocumentsSince:i.getChangedDocumentsSince?(c,u)=>t.lockedRun(()=>i.getChangedDocumentsSince(ae(c),u)):void 0,cleanup(c){return t.lockedRun(()=>i.cleanup(c))},remove(){return t.storageInstances.delete(n),t.lockedRun(()=>i.remove())},close(){return t.storageInstances.delete(n),t.lockedRun(()=>i.close())},changeStream(){return i.changeStream()}};return t.storageInstances.add(n),n}function Tg(t){if(t.schema.keyCompression)throw X("UT5",{args:{params:t}});if(cu(t.schema))throw X("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw X("UT7",{args:{params:t}})}function cu(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function Nw(t,i,e){var r=zt(t.schema.primaryKey),n=e?e.lwt:la,o=e?e.id:"";return nn(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:n}},{"_meta.lwt":{$eq:n},[r]:{$gt:e?o:""}}],"_meta.lwt":{$gte:n}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:i})}function Ag(t,i,e){return R(this,null,function*(){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(i,e);var r=zt(t.schema.primaryKey),n=yo(t.schema,Nw(t,i,e)),o=yield t.query(n),c=o.documents,u=uf(c);return{documents:c,checkpoint:u?{id:u[r],lwt:u._meta.lwt}:e||{id:"",lwt:0}}})}var Lg=new WeakMap,Fw=new WeakMap;function Ut(t,i,e,r){return kt(Fw,e,()=>{var n=[],o=Lg.get(e);if(o||(o=i),e.error.length>0||r){for(var c=r||new Set,u=0;u<e.error.length;u++){var h=e.error[u];c.add(h.documentId)}for(var _=0;_<o.length;_++){var g=o[_].document;c.has(g[t])||n.push($i(g))}}else{n.length=i.length-e.error.length;for(var b=0;b<o.length;b++){var D=o[b].document;n[b]=$i(D)}}return n})}var Ng=(function(){function t(e,r,n,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=r,this.preWrite=n,this.postWrite=o}var i=t.prototype;return i.addWrite=function(r,n){var o=r[this.primaryPath],c=kt(this.queueByDocId,o,()=>[]),u=new Promise((h,_)=>{var g={lastKnownDocumentState:r,modifier:n,resolve:h,reject:_};ae(c).push(g),this.triggerRun()});return u},i.triggerRun=function(){return R(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],n=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(n.entries()).map(h=>R(this,[h],function*([c,u]){var _=Bw(u.map(D=>D.lastKnownDocumentState)),g=_;for(var b of u)try{g=yield b.modifier(qt(g))}catch(D){b.reject(D),b.reject=()=>{},b.resolve=()=>{}}try{yield this.preWrite(g,_)}catch(D){u.forEach(C=>C.reject(D));return}r.push({previous:_,document:g})})));var o=r.length>0?yield this.storageInstance.bulkWrite(r,"incremental-write"):{error:[]};return yield Promise.all(Ut(this.primaryPath,r,o).map(c=>{var u=c[this.primaryPath];this.postWrite(c);var h=En(n,u);h.forEach(_=>_.resolve(c))})),o.error.forEach(c=>{var u=c.documentId,h=En(n,u),_=so(c);if(_){var g=kt(this.queueByDocId,u,()=>[]);h.reverse().forEach(D=>{D.lastKnownDocumentState=ae(_.documentInDb),ae(g).unshift(D)})}else{var b=oc(c);h.forEach(D=>D.reject(b))}}),this.isRunning=!1,this.triggerRun()}})},t})();function lu(t){var i=e=>R(null,null,function*(){var r=_f(e);r._deleted=e._deleted;var n=yield t(r),o=Object.assign({},n,{_meta:e._meta,_attachments:e._attachments,_rev:e._rev,_deleted:typeof n._deleted<"u"?n._deleted:e._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return i}function Bw(t){var i=t[0],e=Fi(i._rev);return t.forEach(r=>{var n=Fi(r._rev);n>e&&(i=r,e=n)}),i}var ka={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(pt(i=>i._data._deleted))},get deleted$$(){var t=this,i=t.collection.database.getReactivityFactory();return i.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this,i=this.primary;return t.collection.eventBulks$.pipe(Me(e=>!e.isLocal),pt(e=>e.events.find(r=>r.documentId===i)),Me(e=>!!e),pt(e=>Vf(ae(e))),ci(t.collection._docCache.getLatestDocumentData(i)),zn((e,r)=>e._rev===r._rev),pt(e=>this.collection._docCache.getCachedRxDocument(e)),jo(lc))},get $$(){var t=this,i=t.collection.database.getReactivityFactory();return i.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(He.isDevMode()){if(t.includes(".item."))throw X("DOC1",{path:t});if(t===this.primaryPath)throw X("DOC2");if(this.collection.schema.finalFields.includes(t))throw X("DOC3",{path:t});var i=sr(this.collection.schema.jsonSchema,t);if(!i)throw X("DOC4",{path:t})}return this.$.pipe(pt(e=>wr(e,t)),zn())},get$$(t){var i=this.get$(t),e=this.collection.database.getReactivityFactory();return e.fromObservable(i,this.getLatest().get(t),this.collection.database)},populate(t){var i=sr(this.collection.schema.jsonSchema,t),e=this.get(t);if(!e)return Ef;if(!i)throw X("DOC5",{path:t});if(!i.ref)throw X("DOC6",{path:t,schemaObj:i});var r=this.collection.database.collections[i.ref];if(!r)throw X("DOC7",{ref:i.ref,path:t,schemaObj:i});return i.type==="array"?r.findByIds(e).exec().then(n=>{var o=n.values();return Array.from(o)}):r.findOne(e).exec()},get(t){return Vg(this,t)},toJSON(t=!1){if(t)return He.deepFreezeWhenDevMode(this._data);var i=Ee(this._data);return delete i._rev,delete i._attachments,delete i._deleted,delete i._meta,He.deepFreezeWhenDevMode(i)},toMutableJSON(t=!1){return qt(this.toJSON(t))},update(t){throw $e("update")},incrementalUpdate(t){throw $e("update")},updateCRDT(t){throw $e("crdt")},putAttachment(){throw $e("attachments")},putAttachmentBase64(){throw $e("attachments")},getAttachment(){throw $e("attachments")},allAttachments(){throw $e("attachments")},get allAttachments$(){throw $e("attachments")},modify(t,i){return R(this,null,function*(){var e=this._data,r=yield lu(t)(e);return this._saveData(r,e)})},incrementalModify(t,i){return this.collection.incrementalWriteQueue.addWrite(this._data,lu(t)).then(e=>this.collection._docCache.getCachedRxDocument(e))},patch(t){var i=this._data,e=qt(i);return Object.entries(t).forEach(([r,n])=>{e[r]=n}),this._saveData(e,i)},incrementalPatch(t){return this.incrementalModify(i=>(Object.entries(t).forEach(([e,r])=>{i[e]=r}),i))},_saveData(t,i){return R(this,null,function*(){if(t=Ee(t),this._data._deleted)throw X("DOC11",{id:this.primary,document:this});yield du(this.collection,t,i);var e=[{previous:i,document:t}],r=yield this.collection.storageInstance.bulkWrite(e,"rx-document-save-data"),n=r.error[0];return bo(this.collection,this.primary,t,n),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(Ut(this.collection.schema.primaryPath,e,r)[0])})},remove(){return R(this,null,function*(){if(this.deleted)return Promise.reject(X("DOC13",{document:this,id:this.primary}));var t=yield this.collection.bulkRemove([this]);if(t.error.length>0){var i=t.error[0];bo(this.collection,this.primary,this._data,i)}return t.success[0]})},incrementalRemove(){return this.incrementalModify(t=>R(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>R(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},close(){throw X("DOC14")}};function Fg(t=ka){var i=function(r,n){this.collection=r,this._data=n,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return i.prototype=t,i}function Bg(t,i,e){var r=new t(i,e);return _t("createRxDocument",r),r}function du(t,i,e){return i._meta=Object.assign({},e._meta,i._meta),He.isDevMode()&&t.schema.validateChange(e,i),t._runHooks("pre","save",i,e)}function Vg(t,i){return kt(t._propertyCache,i,()=>{var e=wr(t._data,i);if(typeof e!="object"||e===null||Array.isArray(e))return He.deepFreezeWhenDevMode(e);var r=new Proxy(Ee(e),{get(n,o){if(typeof o!="string")return n[o];var c=o.charAt(o.length-1);if(c==="$")if(o.endsWith("$$")){var u=o.slice(0,-2);return t.get$$(kn(i+"."+u))}else{var h=o.slice(0,-1);return t.get$(kn(i+"."+h))}else if(c==="_"){var _=o.slice(0,-1);return t.populate(kn(i+"."+_))}else{var g=n[o];return typeof g=="number"||typeof g=="string"||typeof g=="boolean"?g:Vg(t,kn(i+"."+o))}}});return r})}function Ac(t){return t[t.length-1]}function Vw(t){let i=typeof t;return t!==null&&(i==="object"||i==="function")}function uu(t,i,e){if(Array.isArray(i)&&(i=i.join(".")),!Vw(t)||typeof i!="string")return e===void 0?t:e;let r=i.split(".");if(r.length===0)return e;for(let n=0;n<r.length;n++){let o=r[n];if($w(t,o)?t=n===r.length-1?void 0:null:t=t[o],t==null){if(n!==r.length-1)return e;break}}return t===void 0?e:t}function $w(t,i){if(typeof i!="number"&&Array.isArray(t)){let e=Number.parseInt(i,10);return Number.isInteger(e)&&t[e]===t[i]}return!1}var mu=t=>!!t.queryParams.limit,$g=t=>t.queryParams.limit===1,zg=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),jg=t=>t.changeEvent.operation==="DELETE",Hg=t=>t.changeEvent.operation==="INSERT",Ug=t=>t.changeEvent.operation==="UPDATE",Wg=t=>mu(t)&&t.previousResults.length>=t.queryParams.limit,Kg=t=>{let i=t.queryParams.sortFields,e=t.changeEvent.previous,r=t.changeEvent.doc;if(!r)return!1;if(!e)return!0;for(let n=0;n<i.length;n++){let o=i[n],c=uu(e,o),u=uu(r,o);if(c!==u)return!0}return!1},qg=t=>{let i=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(i);{let e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===i)return!0;return!1}},Qg=t=>{let i=t.previousResults[0];return!!(i&&i[t.queryParams.primaryKey]===t.changeEvent.id)},Xg=t=>{let i=Ac(t.previousResults);return!!(i&&i[t.queryParams.primaryKey]===t.changeEvent.id)},Yg=t=>{let i=t.changeEvent.previous;if(!i)return!1;let e=t.previousResults[0];return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(i,e)<0:!1},Gg=t=>{let i=t.changeEvent.previous;if(!i)return!1;let e=Ac(t.previousResults);return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(i,e)>0:!1},Zg=t=>{let i=t.changeEvent.doc;if(!i)return!1;let e=t.previousResults[0];return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(i,e)<0:!1},Jg=t=>{let i=t.changeEvent.doc;if(!i)return!1;let e=Ac(t.previousResults);return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(i,e)>0:!1},e_=t=>{let i=t.changeEvent.previous;return i?t.queryParams.queryMatcher(i):!1},t_=t=>{let i=t.changeEvent.doc;return i?t.queryParams.queryMatcher(i):!1},i_=t=>t.previousResults.length===0;var r_={0:Hg,1:Ug,2:jg,3:mu,4:$g,5:zg,6:i_,7:Wg,8:Qg,9:Xg,10:Kg,11:qg,12:Yg,13:Gg,14:Zg,15:Jg,16:e_,17:t_};function n_(t,i,e,r){var n=t.length,o=n-1,c=0;if(n===0)return t.push(i),0;for(var u;r<=o;)c=r+(o-r>>1),u=t[c],e(u,i)<=0?r=c+1:o=c-1;return e(u,i)<=0&&c++,t.splice(c,0,i),c}var o_=t=>{},Lc=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Nc=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Fc=t=>{let i=t.previousResults.shift();t.keyDocumentMap&&i&&t.keyDocumentMap.delete(i[t.queryParams.primaryKey])},Bc=t=>{let i=t.previousResults.pop();t.keyDocumentMap&&i&&t.keyDocumentMap.delete(i[t.queryParams.primaryKey])},a_=t=>{Fc(t),Nc(t)},s_=t=>{Bc(t),Lc(t)},c_=t=>{Fc(t),Lc(t)},l_=t=>{Bc(t),Nc(t)},hu=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let i=t.queryParams.primaryKey,e=t.previousResults;for(let r=0;r<e.length;r++)if(e[r][i]===t.changeEvent.id){e.splice(r,1);break}},d_=t=>{let i=t.changeEvent.doc,e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===t.changeEvent.id){r[n]=i,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,i);break}},u_=t=>{let i={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(i),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(i._id,i))},pu=t=>{let i=t.changeEvent.id,e=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(i))return;t.keyDocumentMap.set(i,e)}else if(t.previousResults.find(n=>n[t.queryParams.primaryKey]===i))return;n_(t.previousResults,e,t.queryParams.sortComparator,0)},m_=t=>{hu(t),pu(t)},h_=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},p_=t=>{throw new Error("Action unknownAction should never be called")};var f_=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],g_={doNothing:o_,insertFirst:Lc,insertLast:Nc,removeFirstItem:Fc,removeLastItem:Bc,removeFirstInsertLast:a_,removeLastInsertFirst:s_,removeFirstInsertFirst:c_,removeLastInsertLast:l_,removeExisting:hu,replaceExisting:d_,alwaysWrong:u_,insertAtSortPosition:pu,removeExistingAndInsertAtSortPosition:m_,runFullQueryAgain:h_,unknownAction:p_};function Vc(t){return t.charCodeAt(0)-40}function __(t){return t?"1":"0"}function zw(t=6){let i="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=e.length;for(let n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*r));return i}var O8=zw(4);function fu(t,i){let e=[];for(let r=0,n=t.length;r<n;r+=i)e.push(t.substring(r,r+i));return e}function v_(t){let i=new Map,r=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,n=t.substring(2,r),o=fu(n,2);for(let P=0;P<o.length;P++){let T=o[P],ee=T.charAt(0),te=Vc(T.charAt(1));i.set(ee,te)}let c=t.substring(r,t.length-3),u=fu(c,4);for(let P=0;P<u.length;P++){let T=u[P],ee=T.charAt(0),te=T.charAt(1),ie=T.charAt(2),Ce=Vc(T.charAt(3));if(!i.has(te))throw new Error("missing node with id "+te);if(!i.has(ie))throw new Error("missing node with id "+ie);let xe=i.get(te),Be=i.get(ie),oe={l:Ce,0:xe,1:Be};i.set(ee,oe)}let h=t.slice(-3),_=h.charAt(0),g=h.charAt(1),b=Vc(h.charAt(2)),D=i.get(_),C=i.get(g);return{l:b,0:D,1:C}}function y_(t,i,e){let r=t,n=t.l;for(;;){let o=i[n](e),c=__(o);if(r=r[c],typeof r=="number"||typeof r=="string")return r;n=r.l}}var jw="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",gu;function Hw(){return gu||(gu=v_(jw)),gu}var b_=t=>y_(Hw(),r_,t);function x_(t){let i=b_(t);return f_[i]}function w_(t,i,e,r,n){let o=g_[t];return o({queryParams:i,changeEvent:e,previousResults:r,keyDocumentMap:n}),r}function Uw(t,i){return!i.sort||i.sort.length===0?[t]:i.sort.map(e=>Object.keys(e)[0])}var Ww=new WeakMap;function Kw(t){return kt(Ww,t,()=>{var i=t.collection,e=nn(i.storageInstance.schema,qt(t.mangoQuery)),r=i.schema.primaryPath,n=Oc(i.schema.jsonSchema,e),o=(_,g)=>{var b={docA:_,docB:g,rxQuery:t};return n(b.docA,b.docB)},c=_o(i.schema.jsonSchema,e),u=_=>{var g={doc:_,rxQuery:t};return c(g.doc)},h={primaryKey:t.collection.schema.primaryPath,skip:e.skip,limit:e.limit,sortFields:Uw(r,e),sortComparator:o,queryMatcher:u};return h})}function C_(t,i){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var e=Kw(t),r=ae(t._result).docsData.slice(0),n=ae(t._result).docsDataMap,o=!1,c=[],u=0;u<i.length;u++){var h=i[u],_=$f(h);_&&c.push(_)}var g=c.find(b=>{var D={queryParams:e,changeEvent:b,previousResults:r,keyDocumentMap:n},C=x_(D);if(C==="runFullQueryAgain")return!0;if(C!=="doNothing")return o=!0,w_(C,e,b,r,n),!1});return g?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:r}}var qw=(function(){function t(){this._map=new Map}var i=t.prototype;return i.getByQuery=function(r){var n=r.toString(),o=kt(this._map,n,()=>r);return o},t})();function k_(){return new qw}function S_(t,i){i.uncached=!0;var e=i.toString();t._map.delete(e)}function Qw(t){return t.refCount$.observers.length}var Xw=100,Yw=30*1e3,Gw=(t,i)=>(e,r)=>{if(!(r._map.size<t)){var n=mt()-i,o=[],c=Array.from(r._map.values());for(var u of c)if(!(Qw(u)>0)){if(u._lastEnsureEqual===0&&u._creationTime<n){S_(r,u);continue}o.push(u)}var h=o.length-t;if(!(h<=0)){var _=o.sort((b,D)=>b._lastEnsureEqual-D._lastEnsureEqual),g=_.slice(0,h);g.forEach(b=>S_(r,b))}}},vu=Gw(Xw,Yw),_u=new WeakSet;function E_(t){_u.has(t)||(_u.add(t),Cf().then(()=>If(200)).then(()=>{t.closed||t.cacheReplacementPolicy(t,t._queryCache),_u.delete(t)}))}var D_=(function(){function t(e,r,n){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var c=o.docId,u=this.cacheItemByDocId.get(c);u&&(u[0].delete(o.revisionHeight+o.lwt+""),u[0].size===0&&this.cacheItemByDocId.delete(c))}):void 0,this.primaryPath=e,this.changes$=r,this.documentCreator=n,r.subscribe(o=>{this.tasks.add(()=>{for(var c=this.cacheItemByDocId,u=0;u<o.length;u++){var h=o[u],_=c.get(h.documentId);if(_){var g=h.documentData;g||(g=h.previousDocumentData),_[1]=g}}}),this.tasks.size<=1&&co().then(()=>{this.processTasks()})})}var i=t.prototype;return i.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(n=>n()),this.tasks.clear()}},i.getLatestDocumentData=function(r){this.processTasks();var n=En(this.cacheItemByDocId,r);return n[1]},i.getLatestDocumentDataIfExists=function(r){this.processTasks();var n=this.cacheItemByDocId.get(r);if(n)return n[1]},ii(t,[{key:"getCachedRxDocuments",get:function(){var e=I_(this);return wi(this,"getCachedRxDocuments",e)}},{key:"getCachedRxDocument",get:function(){var e=I_(this);return wi(this,"getCachedRxDocument",r=>e([r])[0])}}])})();function I_(t){var i=t.primaryPath,e=t.cacheItemByDocId,r=t.registry,n=He.deepFreezeWhenDevMode,o=t.documentCreator,c=u=>{for(var h=new Array(u.length),_=[],g=0;g<u.length;g++){var b=u[g],D=b[i],C=Fi(b._rev),S=void 0,P=void 0,T=e.get(D);T?(S=T[0],P=S.get(C+b._meta.lwt+"")):(S=new Map,T=[S,b],e.set(D,T));var ee=P?P.deref():void 0;ee||(b=n(b),ee=o(b),S.set(C+b._meta.lwt+"",Jw(ee)),r&&_.push(ee)),h[g]=ee}return _.length>0&&r&&(t.tasks.add(()=>{for(var te=0;te<_.length;te++){var ie=_[te];r.register(ie,{docId:ie.primary,revisionHeight:Fi(ie.revision),lwt:ie._data._meta.lwt})}}),t.tasks.size<=1&&co().then(()=>{t.processTasks()})),h};return c}function Ea(t,i){var e=t.getCachedRxDocuments;return e(i)}var Zw=typeof WeakRef=="function",Jw=Zw?eC:tC;function eC(t){return new WeakRef(t)}function tC(t){return{deref(){return t}}}var yu=(function(){function t(e,r,n){this.time=mt(),this.query=e,this.count=n,this.documents=Ea(this.query.collection._docCache,r)}var i=t.prototype;return i.getValue=function(r){var n=this.query.op;if(n==="count")return this.count;if(n==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&r)throw X("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:n});return o}else return n==="findByIds"?this.docsMap:this.documents.slice(0)},ii(t,[{key:"docsData",get:function(){return wi(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(r=>{e.set(r.primary,r._data)}),wi(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,r=this.documents,n=0;n<r.length;n++){var o=r[n];e.set(o.primary,o)}return wi(this,"docsMap",e)}}])})();var iC=0,rC=function(){return++iC},bu=(function(){function t(e,r,n,o={}){this.id=rC(),this._execOverDatabaseCount=0,this._creationTime=mt(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Bt(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=pi,this.op=e,this.mangoQuery=r,this.collection=n,this.other=o,r||(this.mangoQuery=Ia()),this.isFindOneByIdQuery=sC(this.collection.schema.primaryPath,r)}var i=t.prototype;return i._setResultData=function(r){if(typeof r>"u")throw X("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof r=="number"){this._result=new yu(this,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var n=new yu(this,r,r.length);this._result=n},i._execOverDatabase=function(){return R(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var r=this.getPreparedQuery(),n=yield this.collection.storageInstance.count(r);if(n.mode==="slow"&&!this.collection.database.allowSlowCount)throw X("QU14",{collection:this.collection,queryObj:this.mangoQuery});return n.count}if(this.op==="findByIds"){var o=ae(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,c=new Map,u=[];if(o.forEach(g=>{var b=this.collection._docCache.getLatestDocumentDataIfExists(g);if(b){if(!b._deleted){var D=this.collection._docCache.getCachedRxDocument(b);c.set(g,D)}}else u.push(g)}),u.length>0){var h=yield this.collection.storageInstance.findDocumentsById(u,!1);h.forEach(g=>{var b=this.collection._docCache.getCachedRxDocument(g);c.set(b.primary,b)})}return c}var _=aC(this);return _.then(g=>g)})},i.exec=function(r){return R(this,null,function*(){if(r&&this.op!=="findOne")throw X("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield R_(this);var n=ae(this._result);return n.getValue(r)})},i.toString=function(){var r=ao({op:this.op,query:nn(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),n=JSON.stringify(r);return this.toString=()=>n,n},i.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:nn(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),_t("prePrepareQuery",r);var n=yo(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>n,n},i.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},i.remove=function(){return R(this,null,function*(){var r=yield this.exec();if(Array.isArray(r)){var n=yield this.collection.bulkRemove(r);if(n.error.length>0)throw oc(n.error[0]);return n.success}else return r.remove()})},i.incrementalRemove=function(){return vo(this.asRxQuery,r=>r.incrementalRemove())},i.update=function(r){throw $e("update")},i.patch=function(r){return vo(this.asRxQuery,n=>n.patch(r))},i.incrementalPatch=function(r){return vo(this.asRxQuery,n=>n.incrementalPatch(r))},i.modify=function(r){return vo(this.asRxQuery,n=>n.modify(r))},i.incrementalModify=function(r){return vo(this.asRxQuery,n=>n.incrementalModify(r))},i.where=function(r){throw $e("query-builder")},i.sort=function(r){throw $e("query-builder")},i.skip=function(r){throw $e("query-builder")},i.limit=function(r){throw $e("query-builder")},ii(t,[{key:"$",get:function(){if(!this._$){var e=this.collection.eventBulks$.pipe(Me(r=>!r.isLocal),ci(null),Ui(()=>R_(this)),pt(()=>this._result),jo(lc),zn((r,n)=>!!(r&&r.time===ae(n).time)),Me(r=>!!r),pt(r=>ae(r).getValue()));this._$=yi(e,this.refCount$.pipe(Me(()=>!1)))}return this._$}},{key:"$$",get:function(){var e=this.collection.database.getReactivityFactory();return e.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var e=this.collection.schema.jsonSchema,r=nn(this.collection.schema.jsonSchema,this.mangoQuery);return wi(this,"queryMatcher",_o(e,r))}},{key:"asRxQuery",get:function(){return this}}])})();function Ia(){return{selector:{}}}function nC(t){return t.collection._queryCache.getByQuery(t)}function xo(t,i,e,r){_t("preCreateRxQuery",{op:t,queryObj:i,collection:e,other:r});var n=new bu(t,i,e,r);return n=nC(n),E_(e),n}function M_(t){var i=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=i}function R_(t){return R(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(i=>i()))),t.collection.database.closed||M_(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>oC(t)),t._ensureEqualQueue)})}function oC(t){if(t._lastEnsureEqual=mt(),t.collection.database.closed||M_(t))return pi;var i=!1,e=!1;if(t._latestChangeEvent===-1&&(e=!0),!e){var r=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(r===null)e=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var n=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(t.op==="count"){var o=ae(t._result).count,c=o;n.forEach(h=>{var _=h.previousDocumentData&&t.doesDocumentDataMatch(h.previousDocumentData),g=t.doesDocumentDataMatch(h.documentData);!_&&g&&c++,_&&!g&&c--}),c!==o&&(i=!0,t._setResultData(c))}else{var u=C_(t,n);u.runFullQueryAgain?e=!0:u.changed&&(i=!0,t._setResultData(u.newResults))}}}return e?t._execOverDatabase().then(h=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof h=="number"?((!t._result||h!==t._result.count)&&(i=!0,t._setResultData(h)),i):((!t._result||!vf(t.collection.schema.primaryPath,h,t._result.docsData))&&(i=!0,t._setResultData(h)),i))):Promise.resolve(i)}function aC(t){return R(this,null,function*(){var i=[],e=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var r=t.isFindOneByIdQuery;if(r=r.filter(g=>{var b=t.collection._docCache.getLatestDocumentDataIfExists(g);return b?(b._deleted||i.push(b),!1):!0}),r.length>0){var n=yield e.storageInstance.findDocumentsById(r,!1);hi(i,n)}}else{var o=t.isFindOneByIdQuery,c=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!c){var u=yield e.storageInstance.findDocumentsById([o],!1);u[0]&&(c=u[0])}c&&!c._deleted&&i.push(c)}else{var h=t.getPreparedQuery(),_=yield e.storageInstance.query(h);i=_.documents}return i})}function sC(t,i){if(!i.skip&&i.selector&&Object.keys(i.selector).length===1&&i.selector[t]){var e=i.selector[t];if(typeof e=="string")return e;if(Object.keys(e).length===1&&typeof e.$eq=="string"||Object.keys(e).length===1&&Array.isArray(e.$eq)&&!e.$eq.find(r=>typeof r!="string"))return e.$eq}return!1}var an="collection",xu="storage-token",cC="rx-migration-status",lC="rx-pipeline-checkpoint",dC="RxInternalDocument",$c=mo({version:0,title:dC,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[an,xu,cC,lC,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function wo(t,i){return Ci($c,{key:t,context:i})}function zc(t){return R(this,null,function*(){var i=yo(t.schema,{selector:{context:an,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),e=yield t.query(i),r=e.documents;return r})}var P_="storageToken",uC=wo(P_,xu);function O_(t){return R(this,null,function*(){var i=Sn(10),e=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,r={id:uC,context:xu,key:P_,data:{rxdbVersion:t.rxdbVersion,token:i,instanceToken:t.token,passwordHash:e},_deleted:!1,_meta:Zr(),_rev:Yt(),_attachments:{}},n=[{document:r}],o=yield t.internalStore.bulkWrite(n,"internal-add-storage-token");if(!o.error[0])return Ut("id",n,o)[0];var c=ae(o.error[0]);if(c.isError&&so(c)){var u=c;if(!mC(u.documentInDb.data.rxdbVersion,t.rxdbVersion))throw X("DM5",{args:{database:t.name,databaseStateVersion:u.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(e&&e!==u.documentInDb.data.passwordHash)throw X("DB1",{passwordHash:e,existingPasswordHash:u.documentInDb.data.passwordHash});var h=u.documentInDb;return ae(h)}throw c})}function mC(t,i){if(!t)return!1;var e=t.split(".")[0],r=i.split(".")[0];return e==="15"&&r==="16"?!0:e===r}function T_(t,i,e){return R(this,null,function*(){if(t.schema.version!==e.version)throw X("SNH",{schema:e,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:i}});for(var r=Da(t.name,t.schema.jsonSchema),n=wo(r,an);;){var o=yield Sa(t.database.internalStore,n),c=qt(ae(o)),u=c.data.connectedStorages.find(h=>h.collectionName===i&&h.schema.version===e.version);if(u)return;c.data.connectedStorages.push({collectionName:i,schema:e});try{yield su(t.database.internalStore,{previous:ae(o),document:c},"add-connected-storage-to-collection")}catch(h){if(!so(h))throw h}}})}function A_(t,i,e){return R(this,null,function*(){if(t.schema.version!==e.version)throw X("SNH",{schema:e,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:i}});for(var r=Da(t.name,t.schema.jsonSchema),n=wo(r,an);;){var o=yield Sa(t.database.internalStore,n),c=qt(ae(o)),u=c.data.connectedStorages.find(h=>h.collectionName===i&&h.schema.version===e.version);if(!u)return;c.data.connectedStorages=c.data.connectedStorages.filter(h=>h.collectionName!==i);try{yield su(t.database.internalStore,{previous:ae(o),document:c},"remove-connected-storage-from-collection")}catch(h){if(!so(h))throw h}}})}function Da(t,i){return t+"-"+i.version}function Ra(t,i){return i=Ee(i),i=Ff(t,i),typeof t.jsonSchema.primaryKey!="string"&&(i=Af(t.primaryPath,t.jsonSchema,i)),i._meta=Zr(),Object.prototype.hasOwnProperty.call(i,"_deleted")||(i._deleted=!1),Object.prototype.hasOwnProperty.call(i,"_attachments")||(i._attachments={}),Object.prototype.hasOwnProperty.call(i,"_rev")||(i._rev=Yt()),i}function L_(t,i){return R(this,null,function*(){i.multiInstance=t.multiInstance;var e=yield t.storage.createStorageInstance(i);return e})}function jc(t,i,e,r,n,o,c,u){return R(this,null,function*(){var h=yield zc(i),_=h.filter(C=>C.data.name===n),g=[];_.forEach(C=>{g.push({collectionName:C.data.name,schema:C.data.schema,isCollection:!0}),C.data.connectedStorages.forEach(S=>g.push({collectionName:S.collectionName,isCollection:!1,schema:S.schema}))});var b=new Set;if(g=g.filter(C=>{var S=C.collectionName+"||"+C.schema.version;return b.has(S)?!1:(b.add(S),!0)}),yield Promise.all(g.map(C=>R(null,null,function*(){var S=yield t.createStorageInstance({collectionName:C.collectionName,databaseInstanceToken:e,databaseName:r,multiInstance:o,options:{},schema:C.schema,password:c,devMode:He.isDevMode()});yield S.remove(),C.isCollection&&(yield Xi("postRemoveRxCollection",{storage:t,databaseName:r,collectionName:n}))}))),u){var D=_.map(C=>{var S=Ir(C);return S._deleted=!0,S._meta.lwt=mt(),S._rev=ri(e,C),{previous:C,document:S}});yield i.bulkWrite(D,"rx-database-remove-collection-all")}})}function Ii(t){if(t.closed)throw X("COL21",{collection:t.name,version:t.schema.version})}var hC=(function(){function t(e){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=e,this.subs.push(this.collection.eventBulks$.pipe(Me(r=>!r.isLocal)).subscribe(r=>{this.tasks.add(()=>this._handleChangeEvents(r.events)),this.tasks.size<=1&&co().then(()=>{this.processTasks()})}))}var i=t.prototype;return i.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(n=>n()),this.tasks.clear()}},i._handleChangeEvents=function(r){var n=this.counter;this.counter=this.counter+r.length,r.length>this.limit?this.buffer=r.slice(r.length*-1):(hi(this.buffer,r),this.buffer=this.buffer.slice(this.limit*-1));for(var o=n+1,c=this.eventCounterMap,u=0;u<r.length;u++){var h=r[u];c.set(h,o+u)}},i.getCounter=function(){return this.processTasks(),this.counter},i.getBuffer=function(){return this.processTasks(),this.buffer},i.getArrayIndexByPointer=function(r){this.processTasks();var n=this.buffer[0],o=this.eventCounterMap.get(n);if(r<o)return null;var c=r-o;return c},i.getFrom=function(r){this.processTasks();var n=[],o=this.getArrayIndexByPointer(r);if(o===null)return null;for(;;){var c=this.buffer[o];if(o++,c)n.push(c);else return n}},i.runFrom=function(r,n){this.processTasks();var o=this.getFrom(r);if(o===null)throw new Error("out of bounds");o.forEach(c=>n(c))},i.reduceByLastOfDoc=function(r){return this.processTasks(),r.slice(0)},i.close=function(){this.tasks.clear(),this.subs.forEach(r=>r.unsubscribe())},t})();function N_(t){return new hC(t)}var pC=new WeakMap;function fC(t){var i=t.schema.getDocumentPrototype(),e=gC(t),r=ka,n={};return[i,e,r].forEach(o=>{var c=Object.getOwnPropertyNames(o);c.forEach(u=>{var h=Object.getOwnPropertyDescriptor(o,u),_=!0;(u.startsWith("_")||u.endsWith("_")||u.startsWith("$")||u.endsWith("$"))&&(_=!1),typeof h.value=="function"?Object.defineProperty(n,u,{get(){return h.value.bind(this)},enumerable:_,configurable:!1}):(h.enumerable=_,h.configurable=!1,h.writable&&(h.writable=!1),Object.defineProperty(n,u,h))})}),n}function F_(t){return kt(pC,t,()=>Fg(fC(t)))}function B_(t,i,e){var r=Bg(i,t,He.deepFreezeWhenDevMode(e));return t._runHooksSync("post","create",e,r),_t("postCreateRxDocument",r),r}function gC(t){var i={};return Object.entries(t.methods).forEach(([e,r])=>{i[e]=r}),i}var wu={isEqual(t,i,e){t=V_(t),i=V_(i);var r=lo($i(t),$i(i));return r},resolve(t){return t.realMasterState}};function V_(t){return t._attachments||(t=Ee(t),t._attachments={}),t}var z_=["pre","post"],j_=["insert","save","remove","create"],$_=!1,Co=new Set,Cu=(function(){function t(e,r,n,o,c={},u={},h={},_={},g={},b=vu,D={},C=wu){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=k_(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=e,this.name=r,this.schema=n,this.internalStorageInstance=o,this.instanceCreationOptions=c,this.migrationStrategies=u,this.methods=h,this.attachments=_,this.options=g,this.cacheReplacementPolicy=b,this.statics=D,this.conflictHandler=C,_C(this.asRxCollection),e&&(this.eventBulks$=e.eventBulks$.pipe(Me(S=>S.collectionName===this.name))),this.database&&Co.add(this)}var i=t.prototype;return i.prepare=function(){return R(this,null,function*(){if(!(yield uc())){for(var r=0;r<10&&Co.size>jd;)r++,yield this.promiseWait(30);if(Co.size>jd)throw X("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(Co.values()).map(h=>({db:h.database?h.database.name:"",c:h.name}))}})}this.storageInstance=Tc(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new Ng(this.storageInstance,this.schema.primaryPath,(h,_)=>du(this,h,_),h=>this._runHooks("post","save",h)),this.$=this.eventBulks$.pipe(Ui(h=>mc(h))),this.checkpoint$=this.eventBulks$.pipe(pt(h=>h.checkpoint)),this._changeEventBuffer=N_(this.asRxCollection);var n;this._docCache=new D_(this.schema.primaryPath,this.eventBulks$.pipe(Me(h=>!h.isLocal),pt(h=>h.events)),h=>(n||(n=F_(this.asRxCollection)),B_(this.asRxCollection,n,h)));var o=this.database.internalStore.changeStream().pipe(Me(h=>{var _=this.name+"-"+this.schema.version,g=h.events.find(b=>b.documentData.context==="collection"&&b.documentData.key===_&&b.operation==="DELETE");return!!g})).subscribe(()=>R(this,null,function*(){yield this.close(),yield Promise.all(this.onRemove.map(h=>h()))}));this._subs.push(o);var c=yield this.database.storageToken,u=this.storageInstance.changeStream().subscribe(h=>{var _={id:h.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:c,events:h.events,databaseToken:this.database.token,checkpoint:h.checkpoint,context:h.context};this.database.$emit(_)});return this._subs.push(u),Gt})},i.cleanup=function(r){throw Ii(this),$e("cleanup")},i.migrationNeeded=function(){throw $e("migration-schema")},i.getMigrationState=function(){throw $e("migration-schema")},i.startMigration=function(r=10){return Ii(this),this.getMigrationState().startMigration(r)},i.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},i.insert=function(r){return R(this,null,function*(){Ii(this);var n=yield this.bulkInsert([r]),o=n.error[0];bo(this,r[this.schema.primaryPath],r,o);var c=ae(n.success[0]);return c})},i.insertIfNotExists=function(r){return R(this,null,function*(){var n=yield this.bulkInsert([r]);if(n.error.length>0){var o=n.error[0];if(o.status===409){var c=o.documentInDb;return Ea(this._docCache,[c])[0]}else throw o}return n.success[0]})},i.bulkInsert=function(r){return R(this,null,function*(){if(Ii(this),r.length===0)return{success:[],error:[]};var n=this.schema.primaryPath,o=new Set,c;if(this.hasHooks("pre","insert"))c=yield Promise.all(r.map(T=>{var ee=Ra(this.schema,T);return this._runHooks("pre","insert",ee).then(()=>(o.add(ee[n]),{document:ee}))}));else{c=new Array(r.length);for(var u=this.schema,h=0;h<r.length;h++){var _=r[h],g=Ra(u,_);o.add(g[n]),c[h]={document:g}}}if(o.size!==r.length)throw X("COL22",{collection:this.name,args:{documents:r}});var b=yield this.storageInstance.bulkWrite(c,"rx-collection-bulk-insert"),D,C=this,S={get success(){if(!D){var T=Ut(C.schema.primaryPath,c,b);D=Ea(C._docCache,T)}return D},error:b.error};if(this.hasHooks("post","insert")){var P=new Map;c.forEach(T=>{var ee=T.document;P.set(ee[n],ee)}),yield Promise.all(S.success.map(T=>this._runHooks("post","insert",P.get(T.primary),T)))}return S})},i.bulkRemove=function(r){return R(this,null,function*(){Ii(this);var n=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var o;typeof r[0]=="string"?o=yield this.findByIds(r).exec():(o=new Map,r.forEach(C=>o.set(C.primary,C)));var c=[],u=new Map;Array.from(o.values()).forEach(C=>{var S=C.toMutableJSON(!0);c.push(S),u.set(C.primary,S)}),yield Promise.all(c.map(C=>{var S=C[this.schema.primaryPath];return this._runHooks("pre","remove",C,o.get(S))}));var h=c.map(C=>{var S=Ee(C);return S._deleted=!0,{previous:C,document:S}}),_=yield this.storageInstance.bulkWrite(h,"rx-collection-bulk-remove"),g=Ut(this.schema.primaryPath,h,_),b=[],D=g.map(C=>{var S=C[n],P=this._docCache.getCachedRxDocument(C);return b.push(P),S});return yield Promise.all(D.map(C=>this._runHooks("post","remove",u.get(C),o.get(C)))),{success:b,error:_.error}})},i.bulkUpsert=function(r){return R(this,null,function*(){Ii(this);var n=[],o=new Map;r.forEach(_=>{var g=Ra(this.schema,_),b=g[this.schema.primaryPath];if(!b)throw X("COL3",{primaryPath:this.schema.primaryPath,data:g,schema:this.schema.jsonSchema});o.set(b,g),n.push(g)});var c=yield this.bulkInsert(n),u=c.success.slice(0),h=[];return yield Promise.all(c.error.map(_=>R(this,null,function*(){if(_.status!==409)h.push(_);else{var g=_.documentId,b=En(o,g),D=ae(_.documentInDb),C=this._docCache.getCachedRxDocuments([D])[0],S=yield C.incrementalModify(()=>b);u.push(S)}}))),{error:h,success:u}})},i.upsert=function(r){return R(this,null,function*(){Ii(this);var n=yield this.bulkUpsert([r]);return bo(this.asRxCollection,r[this.schema.primaryPath],r,n.error[0]),n.success[0]})},i.incrementalUpsert=function(r){Ii(this);var n=Ra(this.schema,r),o=n[this.schema.primaryPath];if(!o)throw X("COL4",{data:r});var c=this._incrementalUpsertQueues.get(o);return c||(c=Gt),c=c.then(()=>yC(this,o,n)).then(u=>u.inserted?u.doc:vC(u.doc,n)),this._incrementalUpsertQueues.set(o,c),c},i.find=function(r){Ii(this),_t("prePrepareRxQuery",{op:"find",queryObj:r,collection:this}),r||(r=Ia());var n=xo("find",r,this);return n},i.findOne=function(r){Ii(this),_t("prePrepareRxQuery",{op:"findOne",queryObj:r,collection:this});var n;if(typeof r=="string")n=xo("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=Ia()),r.limit)throw X("QU6");r=Ee(r),r.limit=1,n=xo("findOne",r,this)}return n},i.count=function(r){Ii(this),r||(r=Ia());var n=xo("count",r,this);return n},i.findByIds=function(r){Ii(this);var n={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},o=xo("findByIds",n,this);return o},i.exportJSON=function(){throw $e("json-dump")},i.importJSON=function(r){throw $e("json-dump")},i.insertCRDT=function(r){throw $e("crdt")},i.addPipeline=function(r){throw $e("pipeline")},i.addHook=function(r,n,o,c=!1){if(typeof o!="function")throw ua("COL7",{key:n,when:r});if(!z_.includes(r))throw ua("COL8",{key:n,when:r});if(!j_.includes(n))throw X("COL9",{key:n});if(r==="post"&&n==="create"&&c===!0)throw X("COL10",{when:r,key:n,parallel:c});var u=o.bind(this),h=c?"parallel":"series";this.hooks[n]=this.hooks[n]||{},this.hooks[n][r]=this.hooks[n][r]||{series:[],parallel:[]},this.hooks[n][r][h].push(u)},i.getHooks=function(r,n){return!this.hooks[n]||!this.hooks[n][r]?{series:[],parallel:[]}:this.hooks[n][r]},i.hasHooks=function(r,n){if(!this.hooks[n]||!this.hooks[n][r])return!1;var o=this.getHooks(r,n);return o?o.series.length>0||o.parallel.length>0:!1},i._runHooks=function(r,n,o,c){var u=this.getHooks(r,n);if(!u)return Gt;var h=u.series.map(_=>()=>_(o,c));return Df(h).then(()=>Promise.all(u.parallel.map(_=>_(o,c))))},i._runHooksSync=function(r,n,o,c){if(this.hasHooks(r,n)){var u=this.getHooks(r,n);u&&u.series.forEach(h=>h(o,c))}},i.promiseWait=function(r){var n=new Promise(o=>{var c=setTimeout(()=>{this.timeouts.delete(c),o()},r);this.timeouts.add(c)});return n},i.close=function(){return R(this,null,function*(){return this.closed?pi:(Co.delete(this),yield Promise.all(this.onClose.map(r=>r())),this.closed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],Xi("postCloseRxCollection",this).then(()=>!0))))})},i.remove=function(){return R(this,null,function*(){yield this.close(),yield Promise.all(this.onRemove.map(r=>r())),yield jc(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)})},ii(t,[{key:"insert$",get:function(){return this.$.pipe(Me(e=>e.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Me(e=>e.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Me(e=>e.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])})();function _C(t){if(!$_){$_=!0;var i=Object.getPrototypeOf(t);j_.forEach(e=>{z_.map(r=>{var n=r+cc(e);i[n]=function(o,c){return this.addHook(r,e,o,c)}})})}}function vC(t,i){return t.incrementalModify(e=>i)}function yC(t,i,e){var r=t._docCache.getLatestDocumentDataIfExists(i);return r?Promise.resolve({doc:t._docCache.getCachedRxDocuments([r])[0],inserted:!1}):t.findOne(i).exec().then(n=>n?{doc:n,inserted:!1}:t.insert(e).then(o=>({doc:o,inserted:!0})))}function H_(C){return R(this,arguments,function*({database:t,name:i,schema:e,instanceCreationOptions:r={},migrationStrategies:n={},autoMigrate:o=!0,statics:c={},methods:u={},attachments:h={},options:_={},localDocuments:g=!1,cacheReplacementPolicy:b=vu,conflictHandler:D=wu}){var S={databaseInstanceToken:t.token,databaseName:t.name,collectionName:i,schema:e.jsonSchema,options:r,multiInstance:t.multiInstance,password:t.password,devMode:He.isDevMode()};_t("preCreateRxStorageInstance",S);var P=yield L_(t,S),T=new Cu(t,i,e,P,r,n,u,h,_,b,c,D);try{yield T.prepare(),Object.entries(c).forEach(([ee,te])=>{Object.defineProperty(T,ee,{get:()=>te.bind(T)})}),_t("createRxCollection",{collection:T,creator:{name:i,schema:e,storageInstance:P,instanceCreationOptions:r,migrationStrategies:n,methods:u,attachments:h,options:_,cacheReplacementPolicy:b,localDocuments:g,statics:c}}),o&&T.schema.version!==0&&(yield T.migratePromise())}catch(ee){throw Co.delete(T),yield P.close(),ee}return T})}var Eu=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=i||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Eu.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,ku(this)},wrapCall:function(i){var e=this;this._qC++;var r;try{r=i()}catch(n){throw this.unlock(),n}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(n){return e.unlock(),n}).catch(function(n){throw e.unlock(),n})},requestIdlePromise:function(i){var e=this;i=i||{};var r,n=new Promise(function(u){return r=u}),o=function(){Su(e,n),r()};if(n._manRes=o,i.timeout){var c=setTimeout(function(){n._manRes()},i.timeout);n._timeoutObj=c}return this._iC.add(n),ku(this),n},cancelIdlePromise:function(i){Su(this,i)},requestIdleCallback:function(i,e){var r=this._lHN++,n=this.requestIdlePromise(e);return this._hPM.set(r,n),this._pHM.set(n,r),n.then(function(){return i()}),r},cancelIdleCallback:function(i){var e=this._hPM.get(i);this.cancelIdlePromise(e)},clear:function(){var i=this;this._iC.forEach(function(e){return Su(i,e)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function bC(t){if(t._iC.size!==0){var i=t._iC.values(),e=i.next().value;e._manRes(),setTimeout(function(){return ku(t)},0)}}function Su(t,i){if(i){if(i._timeoutObj&&clearTimeout(i._timeoutObj),t._pHM.has(i)){var e=t._pHM.get(i);t._hPM.delete(e),t._pHM.delete(i)}t._iC.delete(i)}}function ku(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}bC(t),t._tryIR=!1},0)},0))}var sn=class{ttl;map=new Map;_to=!1;constructor(i){this.ttl=i}has(i){return this.map.has(i)}add(i){this.map.set(i,U_()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,xC(this)},0))}clear(){this.map.clear()}};function xC(t){let i=U_()-t.ttl,e=t.map[Symbol.iterator]();for(;;){let r=e.next().value;if(!r)return;let n=r[0];if(r[1]<i)t.map.delete(n);else return}}function U_(){return Date.now()}var Iu=new Set,W_=new Map,K_=0,Du=(function(){function t(e,r,n,o,c,u,h=!1,_={},g,b,D,C,S,P){this.idleQueue=new Eu,this.rxdbVersion=ha,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new ne,this.closePromise=null,this.observable$=this.eventBulks$.pipe(Ui(T=>mc(T))),this.storageToken=pi,this.storageTokenDocument=pi,this.emittedEventBulkIds=new sn(60*1e3),this.name=e,this.token=r,this.storage=n,this.instanceCreationOptions=o,this.password=c,this.multiInstance=u,this.eventReduce=h,this.options=_,this.internalStore=g,this.hashFunction=b,this.cleanupPolicy=D,this.allowSlowCount=C,this.reactivity=S,this.onClosed=P,K_++,this.name!=="pseudoInstance"&&(this.internalStore=Tc(this.asRxDatabase,g,$c),this.storageTokenDocument=O_(this.asRxDatabase).catch(T=>this.startupErrors.push(T)),this.storageToken=this.storageTokenDocument.then(T=>T.data.token).catch(T=>this.startupErrors.push(T)))}var i=t.prototype;return i.getReactivityFactory=function(){if(!this.reactivity)throw X("DB14",{database:this.name});return this.reactivity},i.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},i.removeCollectionDoc=function(r,n){return R(this,null,function*(){var o=yield Sa(this.internalStore,wo(Da(r,n),an));if(!o)throw X("SNH",{name:r,schema:n});var c=Ir(o);c._deleted=!0,yield this.internalStore.bulkWrite([{document:c,previous:o}],"rx-database-remove-collection")})},i.addCollections=function(r){return R(this,null,function*(){var n={},o={},c=[],u={};yield Promise.all(Object.entries(r).map(D=>R(this,[D],function*([g,b]){var C=g,S=b.schema;n[C]=S;var P=Bf(S,this.hashFunction);if(o[C]=P,this.collections[g])throw X("DB3",{name:g});var T=Da(g,S),ee={id:wo(T,an),key:T,context:an,data:{name:C,schemaHash:yield P.hash,schema:P.jsonSchema,version:P.version,connectedStorages:[]},_deleted:!1,_meta:Zr(),_rev:Yt(),_attachments:{}};c.push({document:ee});var te=Object.assign({},b,{name:C,schema:P,database:this}),ie=Ee(b);ie.database=this,ie.name=g,_t("preCreateRxCollection",ie),te.conflictHandler=ie.conflictHandler,u[C]=te})));var h=yield this.internalStore.bulkWrite(c,"rx-database-add-collection");yield CC(this),yield Promise.all(h.error.map(g=>R(this,null,function*(){if(g.status!==409)throw X("DB12",{database:this.name,writeError:g});var b=ae(g.documentInDb),D=b.data.name,C=o[D];if(b.data.schemaHash!==(yield C.hash))throw X("DB6",{database:this.name,collection:D,previousSchemaHash:b.data.schemaHash,schemaHash:yield C.hash,previousSchema:b.data.schema,schema:ae(n[D])})})));var _={};return yield Promise.all(Object.keys(r).map(g=>R(this,null,function*(){var b=u[g],D=yield H_(b);_[g]=D,this.collections[g]=D,this[g]||Object.defineProperty(this,g,{get:()=>this.collections[g]})}))),_})},i.lockedRun=function(r){return this.idleQueue.wrapCall(r)},i.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},i.exportJSON=function(r){throw $e("json-dump")},i.addState=function(r){throw $e("state")},i.importJSON=function(r){throw $e("json-dump")},i.backup=function(r){throw $e("backup")},i.leaderElector=function(){throw $e("leader-election")},i.isLeader=function(){throw $e("leader-election")},i.waitForLeadership=function(){throw $e("leader-election")},i.migrationStates=function(){throw $e("migration-schema")},i.close=function(){if(this.closePromise)return this.closePromise;var{promise:r,resolve:n}=q_(),o=c=>{this.onClosed&&this.onClosed(),this.closed=!0,n(c)};return this.closePromise=r,R(this,null,function*(){if(yield Xi("preCloseRxDatabase",this),this.eventBulks$.complete(),K_--,this._subs.map(c=>c.unsubscribe()),this.name==="pseudoInstance"){o(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(c=>c()))).then(()=>Promise.all(Object.keys(this.collections).map(c=>this.collections[c]).map(c=>c.close()))).then(()=>this.internalStore.close()).then(()=>o(!0))}),r},i.remove=function(){return this.close().then(()=>Hc(this.name,this.storage,this.multiInstance,this.password))},ii(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])})();function wC(t,i){if(Iu.has(Q_(t,i)))throw X("DB8",{name:t,storage:i.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function q_(){var t,i,e=new Promise((r,n)=>{t=r,i=n});return{promise:e,resolve:t,reject:i}}function Q_(t,i){return i.name+"|"+t}function X_(t,i,e,r,n,o){return R(this,null,function*(){var c=yield i.createStorageInstance({databaseInstanceToken:t,databaseName:e,collectionName:Pg,schema:$c,options:r,multiInstance:n,password:o,devMode:He.isDevMode()});return c})}function Ru({storage:t,instanceCreationOptions:i,name:e,password:r,multiInstance:n=!0,eventReduce:o=!0,ignoreDuplicate:c=!1,options:u={},cleanupPolicy:h,closeDuplicates:_=!1,allowSlowCount:g=!1,localDocuments:b=!1,hashFunction:D=sc,reactivity:C}){_t("preCreateRxDatabase",{storage:t,instanceCreationOptions:i,name:e,password:r,multiInstance:n,eventReduce:o,ignoreDuplicate:c,options:u,localDocuments:b});var S=Q_(e,t),P=W_.get(S)||new Set,T=q_(),ee=Array.from(P),te=()=>{P.delete(T.promise),Iu.delete(S)};return P.add(T.promise),W_.set(S,P),R(null,null,function*(){if(_&&(yield Promise.all(ee.map(Be=>Be.catch(()=>null).then(oe=>oe&&oe.close())))),c){if(!He.isDevMode())throw X("DB9",{database:e})}else wC(e,t);Iu.add(S);var ie=Sn(10),Ce=yield X_(ie,t,e,i,n,r),xe=new Du(e,ie,t,i,r,n,o,u,Ce,D,h,g,C,te);return yield Xi("createRxDatabase",{database:xe,creator:{storage:t,instanceCreationOptions:i,name:e,password:r,multiInstance:n,eventReduce:o,ignoreDuplicate:c,options:u,localDocuments:b}}),xe}).then(ie=>{T.resolve(ie)}).catch(ie=>{T.reject(ie),te()}),T.promise}function Hc(t,i,e=!0,r){return R(this,null,function*(){var n=Sn(10),o=yield X_(n,i,t,{},e,r),c=yield zc(o),u=new Set;c.forEach(_=>u.add(_.data.name));var h=Array.from(u);return yield Promise.all(h.map(_=>jc(i,o,n,t,_,e,r))),yield Xi("postRemoveRxDatabase",{databaseName:t,storage:i}),yield o.remove(),h})}function CC(t){return R(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var SC={RxSchema:Ud.prototype,RxDocument:ka,RxQuery:bu.prototype,RxCollection:Cu.prototype,RxDatabase:Du.prototype},Mu=new Set,Y_=new Set;function G_(t){if(_t("preAddRxPlugin",{plugin:t,plugins:Mu}),!Mu.has(t)){{if(Y_.has(t.name))throw X("PL3",{name:t.name,plugin:t});Mu.add(t),Y_.add(t.name)}if(!t.rxdb)throw ua("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([i,e])=>e(SC[i])),t.overwritable&&Object.assign(He,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([i,e])=>{e.after&&uo[i].push(e.after),e.before&&uo[i].unshift(e.before)})}}function So(t,i){return R(this,null,function*(){var e=Ci(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:i}),r=yield t.input.metaInstance.findDocumentsById([e],!1),n=r[0];if(t.lastCheckpointDoc[i]=n,n)return n.checkpointData})}function ko(t,i,e){return R(this,null,function*(){t.checkpointQueue=t.checkpointQueue.then(()=>R(null,null,function*(){var r=t.lastCheckpointDoc[i];if(e&&!t.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(e))){var n={id:"",isCheckpoint:"1",itemId:i,_deleted:!1,_attachments:{},checkpointData:e,_meta:Zr(),_rev:Yt()};for(n.id=Ci(t.input.metaInstance.schema,n);!t.events.canceled.getValue();){if(r&&(n.checkpointData=on([r.checkpointData,n.checkpointData])),n._meta.lwt=mt(),n._rev=ri(yield t.checkpointKey,r),t.events.canceled.getValue())return;var o=[{previous:r,document:n}],c=yield t.input.metaInstance.bulkWrite(o,"replication-set-checkpoint"),u=Ut(t.primaryPath,o,c)[0];if(u){t.lastCheckpointDoc[i]=u;return}else{var h=c.error[0];if(h.status!==409)throw h;r=ae(h.documentInDb),n._rev=ri(yield t.checkpointKey,r)}}}})),yield t.checkpointQueue})}function Z_(t){return R(this,null,function*(){var i=yield t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+i})}function Ma(t,i,e){var r=Ee(t);return i||delete r._attachments,e||(delete r._meta,delete r._rev),r}function Pa(t,i){return t.hasAttachments?i.map(e=>{var r=qt(e.document);return r.docData=$i(r.docData),{document:r,previous:e.previous}}):i}function Pu(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var kC="RxReplicationProtocolMetaData";function J_(t,i){var e=Lf(t),r={title:kC,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:e+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:e>4?e:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};i&&(r.encrypted=["docData"]);var n=mo(r);return n}function Uc(t,i){return t.input.metaInstance.findDocumentsById(i.map(e=>{var r=Ci(t.input.metaInstance.schema,{itemId:e,isCheckpoint:"0"});return r}),!0).then(e=>{var r={};return Object.values(e).forEach(n=>{r[n.itemId]={docData:n.docData,metaDocument:n}}),r})}function Eo(t,i,e,r){return R(this,null,function*(){var n=i[t.primaryPath],o=e?Ir(e):{id:"",isCheckpoint:"0",itemId:n,docData:i,_attachments:{},_deleted:!1,_rev:Yt(),_meta:{lwt:0}};o.docData=i,r&&(o.isResolvedConflict=r),o._meta.lwt=mt(),o.id=Ci(t.input.metaInstance.schema,o),o._rev=ri(yield t.checkpointKey,e);var c={previous:e,document:o};return c})}function ev(t){return R(this,null,function*(){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var i=yield So(t,"down");i||(yield ko(t,"down",t.input.initialCheckpoint.downstream))}var e=yield t.input.hashFunction(t.input.identifier),r=t.input.replicationHandler,n=0,o=[];function c(S){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var P={time:n++,task:S};o.push(P),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var T=[];o.length>0;){t.events.active.down.next(!0);var ee=ae(o.shift());if(!(ee.time<h)){if(ee.task==="RESYNC")if(T.length===0){T.push(ee.task);break}else break;T.push(ee.task)}}if(T.length!==0)return T[0]==="RESYNC"?_():g(T)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(c("RESYNC"),!t.events.canceled.getValue()){var u=r.masterChangeStream$.pipe(Ui(S=>R(null,null,function*(){return yield vn(t.events.active.up.pipe(Me(P=>!P))),S}))).subscribe(S=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,c(S)});vn(t.events.canceled.pipe(Me(S=>!!S))).then(()=>u.unsubscribe())}var h=-1;function _(){return R(this,null,function*(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>So(t,"down"));for(var S=yield t.checkpointQueue,P=[];!t.events.canceled.getValue();){h=n++;var T=yield r.masterChangesSince(S,t.input.pullBatchSize);if(T.documents.length===0||(S=on([S,T.checkpoint]),P.push(C(T.documents,S)),T.documents.length<t.input.pullBatchSize))break}yield Promise.all(P)}})}function g(S){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var P=[],T=null;return S.forEach(ee=>{if(ee==="RESYNC")throw new Error("SNH");hi(P,ee.documents),T=on([T,ee.checkpoint])}),C(P,ae(T))}var b=Gt,D={docs:{}};function C(S,P){var T=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,S.forEach(ee=>{var te=ee[T];D.docs[te]=ee}),D.checkpoint=P,b=b.then(()=>{var ee=D.docs;D.docs={};var te=D.checkpoint,ie=Object.keys(ee);if(t.events.canceled.getValue()||ie.length===0)return Gt;var Ce=[],xe={},Be={},oe=[];return Promise.all([t.input.forkInstance.findDocumentsById(ie,!0),Uc(t,ie)]).then(([ve,Ze])=>{var Et=new Map;return ve.forEach(vt=>Et.set(vt[T],vt)),Promise.all(ie.map(vt=>R(null,null,function*(){var Ae=Et.get(vt),Pt=Ae?Ma(Ae,t.hasAttachments,!1):void 0,yt=ee[vt],bt=Ze[vt];bt&&Ae&&bt.metaDocument.isResolvedConflict===Ae._rev&&(yield t.streamQueue.up);var zi=!bt||!Pt?!1:t.input.conflictHandler.isEqual(bt.docData,Pt,"downstream-check-if-equal-0");if(!zi&&bt&&bt.docData._rev&&Ae&&Ae._meta[t.input.identifier]&&Fi(Ae._rev)===Ae._meta[t.input.identifier]&&(zi=!0),Ae&&bt&&zi===!1||Ae&&!bt)return Gt;var _i=Pt?t.input.conflictHandler.isEqual(yt,Pt,"downstream-check-if-equal-1"):!1;if(Pt&&_i)return(!bt||zi===!1)&&oe.push(yield Eo(t,Pt,bt?bt.metaDocument:void 0)),Gt;var xt=Object.assign({},yt,Ae?{_meta:Ee(Ae._meta),_attachments:t.hasAttachments&&yt._attachments?yt._attachments:{},_rev:Yt()}:{_meta:{lwt:mt()},_rev:Yt(),_attachments:t.hasAttachments&&yt._attachments?yt._attachments:{}});if(yt._rev){var Ri=Ae?Fi(Ae._rev)+1:1;xt._meta[t.input.identifier]=Ri,t.input.keepMeta&&(xt._rev=yt._rev)}t.input.keepMeta&&yt._meta&&(xt._meta=yt._meta);var De={previous:Ae,document:xt};De.document._rev=De.document._rev?De.document._rev:ri(e,De.previous),Ce.push(De),xe[vt]=De,Be[vt]=yield Eo(t,yt,bt?bt.metaDocument:void 0)})))}).then(()=>R(null,null,function*(){if(Ce.length>0)return t.input.forkInstance.bulkWrite(Ce,yield t.downstreamBulkWriteFlag).then(ve=>{var Ze=Ut(t.primaryPath,Ce,ve);Ze.forEach(vt=>{var Ae=vt[T];t.events.processed.down.next(xe[Ae]),oe.push(Be[Ae])});var Et;if(ve.error.forEach(vt=>{if(vt.status!==409){var Ae=X("RC_PULL",{writeError:vt});t.events.error.next(Ae),Et=Ae}}),Et)throw Et})})).then(()=>{if(oe.length>0)return t.input.metaInstance.bulkWrite(Pa(t,oe),"replication-down-write-meta").then(ve=>{ve.error.forEach(Ze=>{t.events.error.next(X("RC_PULL",{id:Ze.documentId,writeError:Ze}))})})}).then(()=>{ko(t,"down",te)})}).catch(ee=>t.events.error.next(ee)),b}})}function tv(t,i,e){return R(this,null,function*(){var r=t.input.conflictHandler,n=r.isEqual(i.realMasterState,i.newDocumentState,"replication-resolve-conflict");if(!n){var o=yield r.resolve(i,"replication-resolve-conflict"),c=Object.assign({},o,{_meta:Ee(e._meta),_rev:Yt(),_attachments:Ee(e._attachments)});return c._meta.lwt=mt(),c._rev=ri(yield t.checkpointKey,e),c}})}function iv(t,i,e,r){return R(this,null,function*(){if(!e._attachments||r&&!r._attachments)throw new Error("_attachments missing");var n=e[t],o=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return yield Promise.all(Object.entries(e._attachments).map(h=>R(null,[h],function*([c,u]){if((!o.has(c)||r&&ae(r._attachments)[c].digest!==u.digest)&&!u.data){var _=yield i.getAttachmentData(n,c,u.digest);u.data=_}}))),e})}function rv(t){return R(this,null,function*(){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var i=yield So(t,"up");i||(yield ko(t,"up",t.input.initialCheckpoint.upstream))}var e=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>g().then(()=>b()));var r=0,n=-1,o=[],c=pi,u={docs:{}},h=t.input.forkInstance.changeStream().subscribe(C=>{if(!t.events.paused.getValue())return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,o.push({task:C,time:r++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>b()):b()}),_=e.masterChangeStream$.pipe(Me(C=>C==="RESYNC")).subscribe(()=>{o.push({task:"RESYNC",time:r++}),b()});vn(t.events.canceled.pipe(Me(C=>!!C))).then(()=>{h.unsubscribe(),_.unsubscribe()});function g(){return R(this,null,function*(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>So(t,"up"));for(var C=yield t.checkpointQueue,S=new Set,P=function(){return R(this,null,function*(){n=r++,S.size>3&&(yield Promise.race(Array.from(S)));var te=yield Ag(t.input.forkInstance,t.input.pushBatchSize,C);if(te.documents.length===0)return 1;C=on([C,te.checkpoint]);var ie=D(te.documents,ae(C));S.add(ie),ie.catch().then(()=>S.delete(ie))})};!t.events.canceled.getValue()&&!(yield P()););var T=yield Promise.all(S),ee=T.find(te=>!!te);ee?yield g():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}})}function b(){if(t.events.canceled.getValue()||o.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(()=>R(null,null,function*(){for(var C=[],S;o.length>0;){var P=ae(o.shift());if(!(P.time<n)){if(P.task==="RESYNC"){t.events.active.up.next(!1),yield g();return}P.task.context!==(yield t.downstreamBulkWriteFlag)&&hi(C,P.task.events.map(T=>T.documentData)),S=on([S,P.task.checkpoint])}}if(yield D(C,S),o.length===0)t.events.active.up.next(!1);else return b()}))}function D(C,S){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,C.forEach(P=>{var T=P[t.primaryPath];u.docs[T]=P}),u.checkpoint=S,c=c.then(()=>R(null,null,function*(){if(t.events.canceled.getValue())return!1;var P=u.docs;u.docs={};var T=u.checkpoint,ee=Object.keys(P);function te(){return ko(t,"up",T)}if(ee.length===0)return te(),!1;var ie=yield Uc(t,ee),Ce={},xe=[],Be={},oe={};if(yield Promise.all(ee.map(De=>R(null,null,function*(){var rt=P[De];oe[De]=rt;var Ot=Ma(rt,t.hasAttachments,!!t.input.keepMeta),ze=ie[De];ze&&ze.metaDocument.isResolvedConflict!==rt._rev&&t.input.conflictHandler.isEqual(ze.docData,Ot,"upstream-check-if-equal")||ze&&ze.docData._rev&&Fi(rt._rev)===rt._meta[t.input.identifier]||(xe.push(De),Ce[De]={assumedMasterState:ze?ze.docData:void 0,newDocumentState:Ot},Be[De]=yield Eo(t,Ot,ze?ze.metaDocument:void 0))}))),xe.length===0)return te(),!1;var ve=Object.values(Ce),Ze=new Set,Et={},vt=mf(ve,t.input.pushBatchSize);yield Promise.all(vt.map(De=>R(null,null,function*(){t.hasAttachments&&(yield Promise.all(De.map(Ot=>R(null,null,function*(){Ot.newDocumentState=yield iv(t.primaryPath,t.input.forkInstance,qt(Ot.newDocumentState),Ot.assumedMasterState)}))));var rt=yield e.masterWrite(De);rt.forEach(Ot=>{var ze=Ot[t.primaryPath];Ze.add(ze),Et[ze]=Ot})})));var Ae=[];if(xe.forEach(De=>{Ze.has(De)||(t.events.processed.up.next(Ce[De]),Ae.push(Be[De]))}),t.events.canceled.getValue())return!1;Ae.length>0&&(yield t.input.metaInstance.bulkWrite(Pa(t,Ae),"replication-up-write-meta"));var Pt=!1;if(Ze.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var yt=[],bt={};if(yield Promise.all(Object.entries(Et).map(([De,rt])=>{var Ot=Ce[De],ze={newDocumentState:Ot.newDocumentState,assumedMasterState:Ot.assumedMasterState,realMasterState:rt};return tv(t,ze,oe[De]).then(nt=>R(null,null,function*(){if(nt){t.events.resolvedConflicts.next({input:ze,output:nt}),yt.push({previous:oe[De],document:nt});var ai=ie[De];bt[De]=yield Eo(t,ae(rt),ai?ai.metaDocument:void 0,nt._rev)}}))})),yt.length>0){Pt=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var zi=yield t.input.forkInstance.bulkWrite(yt,"replication-up-write-conflict"),_i;if(zi.error.forEach(De=>{if(De.status!==409){var rt=X("RC_PUSH",{writeError:De});t.events.error.next(rt),_i=rt}}),_i)throw _i;var xt=[],Ri=Ut(t.primaryPath,yt,zi);Ri.forEach(De=>{var rt=De[t.primaryPath];xt.push(bt[rt])}),xt.length>0&&(yield t.input.metaInstance.bulkWrite(Pa(t,xt),"replication-up-write-conflict-meta"))}}return te(),Pt})).catch(P=>(t.events.error.next(P),!1)),c}})}function nv(t){t=Ee(t),t.forkInstance=Pu(t.forkInstance),t.metaInstance=Pu(t.metaInstance);var i=Z_(t),e={primaryPath:zt(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:i,downstreamBulkWriteFlag:i.then(r=>"replication-downstream-"+r),events:{canceled:new Bt(!1),paused:new Bt(!1),active:{down:new Bt(!0),up:new Bt(!0)},processed:{down:new ne,up:new ne},resolvedConflicts:new ne,error:new ne},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Bt(!1),up:new Bt(!1)},streamQueue:{down:Gt,up:Gt},checkpointQueue:Gt,lastCheckpointDoc:{}};return ev(e),rv(e),e}function Wc(t){return vn(ds([t.firstSyncDone.down.pipe(Me(i=>!!i)),t.firstSyncDone.up.pipe(Me(i=>!!i))])).then(()=>{})}function Ou(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function ov(t){return R(this,null,function*(){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),yield t.checkpointQueue})}function av(t){return t&&typeof t.then=="function"}var EC=Promise.resolve(!1),sv=Promise.resolve(!0),Di=Promise.resolve();function mr(t,i){return t||(t=0),new Promise(function(e){return setTimeout(function(){return e(i)},t)})}function cv(t,i){return Math.floor(Math.random()*(i-t+1)+t)}function Dr(){return Math.random().toString(36).substring(2)}var Tu=0;function Rr(){var t=Date.now()*1e3;return t<=Tu&&(t=Tu+1),Tu=t,t}function lv(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var IC=Rr,DC="native";function RC(t){var i={time:Rr(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return i.bc.onmessage=function(e){i.messagesCallback&&i.messagesCallback(e.data)},i}function MC(t){t.bc.close(),t.subFns=[]}function PC(t,i){try{return t.bc.postMessage(i,!1),Di}catch(e){return Promise.reject(e)}}function OC(t,i){t.messagesCallback=i}function TC(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function AC(){return 150}var dv={create:RC,close:MC,onMessage:OC,postMessage:PC,canBeUsed:TC,type:DC,averageResponseTime:AC,microSeconds:IC};function Io(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=JSON.parse(JSON.stringify(t));return typeof i.webWorkerSupport>"u"&&(i.webWorkerSupport=!0),i.idb||(i.idb={}),i.idb.ttl||(i.idb.ttl=1e3*45),i.idb.fallbackInterval||(i.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(i.idb.onclose=t.idb.onclose),i.localstorage||(i.localstorage={}),i.localstorage.removeTimeout||(i.localstorage.removeTimeout=1e3*60),t.methods&&(i.methods=t.methods),i.node||(i.node={}),i.node.ttl||(i.node.ttl=1e3*60*2),i.node.maxParallelWrites||(i.node.maxParallelWrites=2048),typeof i.node.useFastPath>"u"&&(i.node.useFastPath=!0),i}var LC=Rr,NC="pubkey.broadcast-channel-0-",Mr="messages",Kc={durability:"relaxed"},FC="idb";function uv(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Au(t){t.commit&&t.commit()}function BC(t){var i=uv(),e=NC+t,r=i.open(e);return r.onupgradeneeded=function(n){var o=n.target.result;o.createObjectStore(Mr,{keyPath:"id",autoIncrement:!0})},new Promise(function(n,o){r.onerror=function(c){return o(c)},r.onsuccess=function(){n(r.result)}})}function VC(t,i,e){var r=Date.now(),n={uuid:i,time:r,data:e},o=t.transaction([Mr],"readwrite",Kc);return new Promise(function(c,u){o.oncomplete=function(){return c()},o.onerror=function(_){return u(_)};var h=o.objectStore(Mr);h.add(n),Au(o)})}function $C(t,i){var e=t.transaction(Mr,"readonly",Kc),r=e.objectStore(Mr),n=[],o=IDBKeyRange.bound(i+1,1/0);if(r.getAll){var c=r.getAll(o);return new Promise(function(h,_){c.onerror=function(g){return _(g)},c.onsuccess=function(g){h(g.target.result)}})}function u(){try{return o=IDBKeyRange.bound(i+1,1/0),r.openCursor(o)}catch{return r.openCursor()}}return new Promise(function(h,_){var g=u();g.onerror=function(b){return _(b)},g.onsuccess=function(b){var D=b.target.result;D?D.value.id<i+1?D.continue(i+1):(n.push(D.value),D.continue()):(Au(e),h(n))}})}function zC(t,i){if(t.closed)return Promise.resolve([]);var e=t.db.transaction(Mr,"readwrite",Kc),r=e.objectStore(Mr);return Promise.all(i.map(function(n){var o=r.delete(n);return new Promise(function(c){o.onsuccess=function(){return c()}})}))}function jC(t,i){var e=Date.now()-i,r=t.transaction(Mr,"readonly",Kc),n=r.objectStore(Mr),o=[];return new Promise(function(c){n.openCursor().onsuccess=function(u){var h=u.target.result;if(h){var _=h.value;_.time<e?(o.push(_),h.continue()):(Au(r),c(o))}else c(o)}})}function HC(t){return jC(t.db,t.options.idb.ttl).then(function(i){return zC(t,i.map(function(e){return e.id}))})}function UC(t,i){return i=Io(i),BC(t).then(function(e){var r={closed:!1,lastCursorId:0,channelName:t,options:i,uuid:Dr(),eMIs:new sn(i.idb.ttl*2),writeBlockPromise:Di,messagesCallback:null,readQueuePromises:[],db:e};return e.onclose=function(){r.closed=!0,i.idb.onclose&&i.idb.onclose()},mv(r),r})}function mv(t){t.closed||hv(t).then(function(){return mr(t.options.idb.fallbackInterval)}).then(function(){return mv(t)})}function WC(t,i){return!(t.uuid===i.uuid||i.eMIs.has(t.id)||t.data.time<i.messagesCallbackTime)}function hv(t){return t.closed?Di:t.messagesCallback?$C(t.db,t.lastCursorId).then(function(i){var e=i.filter(function(r){return!!r}).map(function(r){return r.id>t.lastCursorId&&(t.lastCursorId=r.id),r}).filter(function(r){return WC(r,t)}).sort(function(r,n){return r.time-n.time});return e.forEach(function(r){t.messagesCallback&&(t.eMIs.add(r.id),t.messagesCallback(r.data))}),Di}):Di}function KC(t){t.closed=!0,t.db.close()}function qC(t,i){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return VC(t.db,t.uuid,i)}).then(function(){cv(0,10)===0&&HC(t)}),t.writeBlockPromise}function QC(t,i,e){t.messagesCallbackTime=e,t.messagesCallback=i,hv(t)}function XC(){return!!uv()}function YC(t){return t.idb.fallbackInterval*2}var pv={create:UC,close:KC,onMessage:QC,postMessage:qC,canBeUsed:XC,type:FC,averageResponseTime:YC,microSeconds:LC};var GC=Rr,ZC="pubkey.broadcastChannel-",JC="localstorage";function fv(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function gv(t){return ZC+t}function eS(t,i){return new Promise(function(e){mr().then(function(){var r=gv(t.channelName),n={token:Dr(),time:Date.now(),data:i,uuid:t.uuid},o=JSON.stringify(n);fv().setItem(r,o);var c=document.createEvent("Event");c.initEvent("storage",!0,!0),c.key=r,c.newValue=o,window.dispatchEvent(c),e()})})}function tS(t,i){var e=gv(t),r=function(o){o.key===e&&i(JSON.parse(o.newValue))};return window.addEventListener("storage",r),r}function iS(t){window.removeEventListener("storage",t)}function rS(t,i){if(i=Io(i),!_v())throw new Error("BroadcastChannel: localstorage cannot be used");var e=Dr(),r=new sn(i.localstorage.removeTimeout),n={channelName:t,uuid:e,eMIs:r};return n.listener=tS(t,function(o){n.messagesCallback&&o.uuid!==e&&(!o.token||r.has(o.token)||o.data.time&&o.data.time<n.messagesCallbackTime||(r.add(o.token),n.messagesCallback(o.data)))}),n}function nS(t){iS(t.listener)}function oS(t,i,e){t.messagesCallbackTime=e,t.messagesCallback=i}function _v(){var t=fv();if(!t)return!1;try{var i="__broadcastchannel_check";t.setItem(i,"works"),t.removeItem(i)}catch{return!1}return!0}function aS(){var t=120,i=navigator.userAgent.toLowerCase();return i.includes("safari")&&!i.includes("chrome")?t*2:t}var vv={create:rS,close:nS,onMessage:oS,postMessage:eS,canBeUsed:_v,type:JC,averageResponseTime:aS,microSeconds:GC};var yv=Rr,sS="simulate",Lu=new Set;function cS(t){var i={time:yv(),name:t,messagesCallback:null};return Lu.add(i),i}function lS(t){Lu.delete(t)}var bv=5;function dS(t,i){return new Promise(function(e){return setTimeout(function(){var r=Array.from(Lu);r.forEach(function(n){n.name===t.name&&n!==t&&n.messagesCallback&&n.time<i.time&&n.messagesCallback(i)}),e()},bv)})}function uS(t,i){t.messagesCallback=i}function mS(){return!0}function hS(){return bv}var xv={create:cS,close:lS,onMessage:uS,postMessage:dS,canBeUsed:mS,type:sS,averageResponseTime:hS,microSeconds:yv};var wv=[dv,pv,vv];function Cv(t){var i=[].concat(t.methods,wv).filter(Boolean);if(t.type){if(t.type==="simulate")return xv;var e=i.find(function(n){return n.type===t.type});if(e)return e;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(i=i.filter(function(n){return n.type!=="idb"}));var r=i.find(function(n){return n.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(wv.map(function(n){return n.type})))}var Nu=new Set,pS=0,Oa=function(i,e){this.id=pS++,Nu.add(this),this.name=i,Sv&&(e=Sv),this.options=Io(e),this.method=Cv(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,fS(this)};Oa._pubkey=!0;var Sv;Oa.prototype={postMessage:function(i){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(i));return kv(this,"message",i)},postInternal:function(i){return kv(this,"internal",i)},set onmessage(t){var i=this.method.microSeconds(),e={time:i,fn:t};Iv(this,"message",this._onML),t&&typeof t=="function"?(this._onML=e,Ev(this,"message",e)):this._onML=null},addEventListener:function(i,e){var r=this.method.microSeconds(),n={time:r,fn:e};Ev(this,i,n)},removeEventListener:function(i,e){var r=this._addEL[i].find(function(n){return n.fn===e});Iv(this,i,r)},close:function(){var i=this;if(!this.closed){Nu.delete(this),this.closed=!0;var e=this._prepP?this._prepP:Di;return this._onML=null,this._addEL.message=[],e.then(function(){return Promise.all(Array.from(i._uMP))}).then(function(){return Promise.all(i._befC.map(function(r){return r()}))}).then(function(){return i.method.close(i._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function kv(t,i,e){var r=t.method.microSeconds(),n={time:r,type:i,data:e},o=t._prepP?t._prepP:Di;return o.then(function(){var c=t.method.postMessage(t._state,n);return t._uMP.add(c),c.catch().then(function(){return t._uMP.delete(c)}),c})}function fS(t){var i=t.method.create(t.name,t.options);av(i)?(t._prepP=i,i.then(function(e){t._state=e})):t._state=i}function Dv(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function Ev(t,i,e){t._addEL[i].push(e),gS(t)}function Iv(t,i,e){t._addEL[i]=t._addEL[i].filter(function(r){return r!==e}),_S(t)}function gS(t){if(!t._iL&&Dv(t)){var i=function(n){t._addEL[n.type].forEach(function(o){n.time>=o.time&&o.fn(n.data)})},e=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,i,e)}):(t._iL=!0,t.method.onMessage(t._state,i,e))}}function _S(t){if(t._iL&&!Dv(t)){t._iL=!1;var i=t.method.microSeconds();t.method.onMessage(t._state,null,i)}}function Rv(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var i=self.close.bind(self);self.close=function(){return t(),i()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function Mv(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(i){return t().then(function(){console.trace(i),process.exit(101)})})}var vS=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",yS=vS?Mv:Rv,Ta=new Set,Pv=!1;function bS(){Pv||(Pv=!0,yS(xS))}function Ov(t){if(bS(),typeof t!="function")throw new Error("Listener is no function");Ta.add(t);var i={remove:function(){return Ta.delete(t)},run:function(){return Ta.delete(t),t()}};return i}function xS(){var t=[];return Ta.forEach(function(i){t.push(i()),Ta.delete(i)}),Promise.all(t)}function Pr(t,i){var e={context:"leader",action:i,token:t.token};return t.broadcastChannel.postInternal(e)}function qc(t){t.isLeader=!0,t._hasLeader=!0;var i=Ov(function(){return t.die()});t._unl.push(i);var e=function(n){n.context==="leader"&&n.action==="apply"&&Pr(t,"tell"),n.context==="leader"&&n.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Pr(t,"tell"))};return t.broadcastChannel.addEventListener("internal",e),t._lstns.push(e),Pr(t,"tell")}var Fu=function(i,e){var r=this;this.broadcastChannel=i,i._befC.push(function(){return r.die()}),this._options=e,this.isLeader=!1,this.isDead=!1,this.token=Dr(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+i.method.type+"||"+i.name};Fu.prototype={hasLeader:function(){var i=this;return navigator.locks.query().then(function(e){var r=e.held?e.held.filter(function(n){return n.name===i.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var i=this;if(!this._wLMP){this._wKMC.c=new AbortController;var e=new Promise(function(r,n){i._wKMC.res=r,i._wKMC.rej=n});this._wLMP=new Promise(function(r){navigator.locks.request(i.lN,{signal:i._wKMC.c.signal},function(){return i._wKMC.c=void 0,qc(i),r(),e}).catch(function(){})})}return this._wLMP},set onduplicate(t){},die:function(){var i=this;return this._lstns.forEach(function(e){return i.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Pr(this,"death")}};var Tv=function(i,e){var r=this;this.broadcastChannel=i,this._options=e,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Dr(),this._aplQ=Di,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var n=function(c){c.context==="leader"&&(c.action==="death"&&(r._hasLeader=!1),c.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",n),this._lstns.push(n)};Tv.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(i){var e=this;if(this.isLeader)return mr(0,!0);if(this.isDead)return mr(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(e.isLeader)return sv;var o=!1,c,u=new Promise(function(g){c=function(){o=!0,g()}}),h=function(b){b.context==="leader"&&b.token!=e.token&&(b.action==="apply"&&b.token>e.token&&c(),b.action==="tell"&&(c(),e._hasLeader=!0))};e.broadcastChannel.addEventListener("internal",h);var _=i?e._options.responseTime*4:e._options.responseTime;return Pr(e,"apply").then(function(){return Promise.race([mr(_),u.then(function(){return Promise.reject(new Error)})])}).then(function(){return Pr(e,"apply")}).then(function(){return Promise.race([mr(_),u.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return e.broadcastChannel.removeEventListener("internal",h),o?!1:qc(e).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){e._aplQC=e._aplQC-1}),this._aplQ.then(function(){return e.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=wS(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var i=this;return this._lstns.forEach(function(e){return i.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Pr(this,"death")}};function wS(t){return t.isLeader?Di:new Promise(function(i){var e=!1;function r(){e||(e=!0,t.broadcastChannel.removeEventListener("internal",o),i(!0))}t.applyOnce().then(function(){t.isLeader&&r()});var n=function(){return mr(t._options.fallbackInterval).then(function(){if(!(t.isDead||e))if(t.isLeader)r();else return t.applyOnce(!0).then(function(){t.isLeader?r():n()})})};n();var o=function(u){u.context==="leader"&&u.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&r()}))};t.broadcastChannel.addEventListener("internal",o),t._lstns.push(o)})}function CS(t,i){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=i.method.averageResponseTime(i.options)),t}function Bu(t,i){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");i=CS(i,t);var e=lv()?new Fu(t,i):new Tv(t,i);return t._befC.push(function(){return e.die()}),t._leaderElector=e,e}var Qc=new Map;function Vu(t,i,e,r){var n=Qc.get(i);return n||(n={bc:new Oa(["RxDB:",t,e].join("|")),refs:new Set},Qc.set(i,n)),n.refs.add(r),n.bc}function Xc(t,i){var e=Qc.get(t);if(e&&(e.refs.delete(i),e.refs.size===0))return Qc.delete(t),e.bc.close()}function Av(t,i,e,r){if(i.multiInstance){var n=r||Vu(t,i.databaseInstanceToken,e.databaseName,e),o=new ne,c=D=>{D.storageName===t&&D.databaseName===i.databaseName&&D.collectionName===i.collectionName&&D.version===i.schema.version&&o.next(D.eventBulk)};n.addEventListener("message",c);var u=e.changeStream(),h=!1,_=u.subscribe(D=>{h||n.postMessage({storageName:t,databaseName:i.databaseName,collectionName:i.collectionName,version:i.schema.version,eventBulk:D})});e.changeStream=function(){return o.asObservable().pipe(Um(u))};var g=e.close.bind(e);e.close=function(){return R(this,null,function*(){return h=!0,_.unsubscribe(),n.removeEventListener("message",c),r||(yield Xc(i.databaseInstanceToken,e)),g()})};var b=e.remove.bind(e);e.remove=function(){return R(this,null,function*(){return h=!0,_.unsubscribe(),n.removeEventListener("message",c),r||(yield Xc(i.databaseInstanceToken,e)),b()})}}}var Yc=Rb(Lv(),1),Nv=Symbol.for("Dexie"),Aa=globalThis[Nv]||(globalThis[Nv]=Yc.default);if(Yc.default.semVer!==Aa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Yc.default.semVer} and ${Aa.semVer}`);var{liveQuery:Fq,mergeRanges:Bq,rangesOverlap:Vq,RangeSet:$q,cmp:zq,Entity:jq,PropModSymbol:Hq,PropModification:Uq,replacePrefix:Wq,add:Kq,remove:qq}=Aa;var La="docs",SS="changes",Fv="attachments",Zc="dexie",Bv=new Map,Gc=new Map;function Vv(t,i,e,r){var n="rxdb-dexie-"+t+"--"+r.version+"--"+i,o=kt(Bv,n,()=>{var c=R(null,null,function*(){var u=Ee(e);u.autoOpen=!1;var h=new Aa(n,u);e.onCreate&&(yield e.onCreate(h,n));var _={[La]:kS(r),[SS]:"++sequence, id",[Fv]:"id"};return h.version(1).stores(_),yield h.open(),{dexieDb:h,dexieTable:h[La],dexieAttachmentsTable:h[Fv],booleanIndexes:ES(r)}});return Bv.set(n,o),Gc.set(o,0),c});return o}function $v(t){return R(this,null,function*(){var i=yield t,e=Gc.get(t),r=e-1;r===0?(i.dexieDb.close(),Gc.delete(t)):Gc.set(t,r)})}var ju="__";function Mn(t){var i=t.split(".");if(i.length>1)return i.map(r=>Mn(r)).join(".");if(t.startsWith("|")){var e=t.substring(1);return ju+e}else return t}function zv(t){var i=t.split(".");if(i.length>1)return i.map(r=>zv(r)).join(".");if(t.startsWith(ju)){var e=t.substring(ju.length);return"|"+e}else return t}function jv(t,i){if(!i)return i;var e=Ee(i);return e=Hu(e),t.forEach(r=>{var n=wr(i,r),o=n?"1":"0",c=Mn(r);Bd(e,c,o)}),e}function Wu(t,i){return i&&(i=Ee(i),i=Uu(i),t.forEach(e=>{var r=wr(i,e),n=r==="1";Bd(i,e,n)}),i)}function Hu(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(e=>Hu(e));if(typeof t=="object"){var i={};return Object.entries(t).forEach(([e,r])=>{typeof r=="object"&&(r=Hu(r)),i[Mn(e)]=r}),i}}function Uu(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(e=>Uu(e));if(typeof t=="object"){var i={};return Object.entries(t).forEach(([e,r])=>{(typeof r=="object"||Array.isArray(t))&&(r=Uu(r)),i[zv(e)]=r}),i}}function kS(t){var i=[],e=zt(t.primaryKey);i.push([e]),i.push(["_deleted",e]),t.indexes&&t.indexes.forEach(o=>{var c=Gr(o);i.push(c)}),i.push(["_meta.lwt",e]),i.push(["_meta.lwt"]),i=i.map(o=>o.map(c=>Mn(c)));var r=i.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");r=r.filter((o,c,u)=>u.indexOf(o)===c);var n=r.join(", ");return n}function Ku(t,i){return R(this,null,function*(){var e=yield t,r=yield e.dexieTable.bulkGet(i);return r.map(n=>Wu(e.booleanIndexes,n))})}function Na(t,i){return t+"||"+i}function ES(t){var i=new Set,e=[];return t.indexes?(t.indexes.forEach(r=>{var n=Gr(r);n.forEach(o=>{if(!i.has(o)){i.add(o);var c=sr(t,o);c.type==="boolean"&&e.push(o)}})}),e.push("_deleted"),pf(e)):e}function Hv(t){return t===Dn?-1/0:t}function Uv(t,i,e){if(t.includes(i)){var r=e===In||e===!0?"1":"0";return r}else return e}function Wv(t,i,e){if(!e){if(typeof window>"u")throw new Error("IDBKeyRange missing");e=window.IDBKeyRange}var r=i.startKeys.map((c,u)=>{var h=i.index[u];return Uv(t,h,c)}).map(Hv),n=i.endKeys.map((c,u)=>{var h=i.index[u];return Uv(t,h,c)}).map(Hv),o=e.bound(r,n,!i.inclusiveStart,!i.inclusiveEnd);return o}function qu(t,i){return R(this,null,function*(){var e=yield t.internals,r=i.query,n=r.skip?r.skip:0,o=r.limit?r.limit:1/0,c=n+o,u=i.queryPlan,h=!1;u.selectorSatisfiedByIndex||(h=_o(t.schema,i.query));var _=Wv(e.booleanIndexes,u,e.dexieDb._options.IDBKeyRange),g=u.index,b=[];if(yield e.dexieDb.transaction("r",e.dexieTable,C=>R(null,null,function*(){var S=C.idbtrans,P=S.objectStore(La),T,ee;ee="["+g.map(ie=>Mn(ie)).join("+")+"]",T=P.index(ee);var te=T.openCursor(_);yield new Promise(ie=>{te.onsuccess=function(Ce){var xe=Ce.target.result;if(xe){var Be=Wu(e.booleanIndexes,xe.value);(!h||h(Be))&&b.push(Be),u.sortSatisfiedByIndex&&b.length===c?ie():xe.continue()}else ie()}})})),!u.sortSatisfiedByIndex){var D=Oc(t.schema,i.query);b=b.sort(D)}return b=b.slice(n,c),{documents:b}})}function Kv(t,i){return R(this,null,function*(){var e=yield t.internals,r=i.queryPlan,n=r.index,o=Wv(e.booleanIndexes,r,e.dexieDb._options.IDBKeyRange),c=-1;return yield e.dexieDb.transaction("r",e.dexieTable,u=>R(null,null,function*(){var h=u.idbtrans,_=h.objectStore(La),g,b;b="["+n.map(C=>Mn(C)).join("+")+"]",g=_.index(b);var D=g.count(o);c=yield new Promise((C,S)=>{D.onsuccess=function(){C(D.result)},D.onerror=P=>S(P)})})),c})}var IS=mt(),Qu=!1,DS=(function(){function t(e,r,n,o,c,u,h,_){this.changes$=new ne,this.instanceId=IS++,this.storage=e,this.databaseName=r,this.collectionName=n,this.schema=o,this.internals=c,this.options=u,this.settings=h,this.devMode=_,this.primaryPath=zt(this.schema.primaryKey)}var i=t.prototype;return i.bulkWrite=function(r,n){return R(this,null,function*(){Pn(this),!Qu&&!(yield uc())&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),Qu=!0,r.forEach(g=>{if(!g.document._rev||g.previous&&!g.previous._rev)throw X("SNH",{args:{row:g}})});var o=yield this.internals,c={error:[]};this.devMode&&(r=r.map(g=>{var b=Ir(g.document);return{previous:g.previous,document:b}}));var u=r.map(g=>g.document[this.primaryPath]),h;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>R(this,null,function*(){var g=new Map,b=yield Ku(this.internals,u);b.forEach(S=>{var P=S;return P&&g.set(P[this.primaryPath],P),P}),h=Og(this,this.primaryPath,g,r,n),c.error=h.errors;var D=[];h.bulkInsertDocs.forEach(S=>{D.push(S.document)}),h.bulkUpdateDocs.forEach(S=>{D.push(S.document)}),D=D.map(S=>jv(o.booleanIndexes,S)),D.length>0&&(yield o.dexieTable.bulkPut(D));var C=[];h.attachmentsAdd.forEach(S=>{C.push({id:Na(S.documentId,S.attachmentId),data:S.attachmentData.data})}),h.attachmentsUpdate.forEach(S=>{C.push({id:Na(S.documentId,S.attachmentId),data:S.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(C),yield o.dexieAttachmentsTable.bulkDelete(h.attachmentsRemove.map(S=>Na(S.documentId,S.attachmentId)))})),h=ae(h),h.eventBulk.events.length>0){var _=ae(h.newestRow).document;h.eventBulk.checkpoint={id:_[this.primaryPath],lwt:_._meta.lwt},this.changes$.next(h.eventBulk)}return c})},i.findDocumentsById=function(r,n){return R(this,null,function*(){Pn(this);var o=yield this.internals,c=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>R(this,null,function*(){var u=yield Ku(this.internals,r);u.forEach(h=>{h&&(!h._deleted||n)&&c.push(h)})})),c})},i.query=function(r){return Pn(this),qu(this,r)},i.count=function(r){return R(this,null,function*(){if(r.queryPlan.selectorSatisfiedByIndex){var n=yield Kv(this,r);return{count:n,mode:"fast"}}else{var o=yield qu(this,r);return{count:o.documents.length,mode:"slow"}}})},i.changeStream=function(){return Pn(this),this.changes$.asObservable()},i.cleanup=function(r){return R(this,null,function*(){Pn(this);var n=yield this.internals;return yield n.dexieDb.transaction("rw",n.dexieTable,()=>R(this,null,function*(){var o=mt()-r,c=yield n.dexieTable.where("_meta.lwt").below(o).toArray(),u=[];c.forEach(h=>{h._deleted==="1"&&u.push(h[this.primaryPath])}),yield n.dexieTable.bulkDelete(u)})),!0})},i.getAttachmentData=function(r,n,o){return R(this,null,function*(){Pn(this);var c=yield this.internals,u=Na(r,n);return yield c.dexieDb.transaction("r",c.dexieAttachmentsTable,()=>R(this,null,function*(){var h=yield c.dexieAttachmentsTable.get(u);if(h)return h.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+n)}))})},i.remove=function(){return R(this,null,function*(){Pn(this);var r=yield this.internals;return yield r.dexieTable.clear(),this.close()})},i.close=function(){return this.closed?this.closed:(this.closed=R(this,null,function*(){this.changes$.complete(),yield $v(this.internals)}),this.closed)},t})();function qv(t,i,e){return R(this,null,function*(){var r=Vv(i.databaseName,i.collectionName,e,i.schema),n=new DS(t,i.databaseName,i.collectionName,i.schema,r,i.options,e,i.devMode);return yield Av(Zc,i,n),Promise.resolve(n)})}function Pn(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var RS=(function(){function t(e){this.name=Zc,this.rxdbVersion=ha,this.settings=e}var i=t.prototype;return i.createStorageInstance=function(r){if(Tg(r),r.schema.indexes){var n=r.schema.indexes.flat();n.filter(o=>!o.includes(".")).forEach(o=>{if(!r.schema.required||!r.schema.required.includes(o))throw X("DXE1",{field:o,schema:r.schema})})}return qv(this,r,this.settings)},t})();function Xu(t={}){var i=new RS(t);return i}var Xv=new WeakMap,MS=new WeakMap;function Qv(t){return kt(MS,t,()=>Bu(t))}function PS(){var t=Vu(this.storage.name,this.token,this.name,this),i=this.close.bind(this);this.close=function(){return Xc(this.token,this),i()};var e=Qv(t);return e||(e=Qv(t),Xv.set(this,e)),this.leaderElector=()=>e,e}function OS(){return this.multiInstance?this.leaderElector().isLeader:!0}function TS(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):ma}function AS(t){var i=Xv.get(t);i&&i.die()}var LS=!0,NS={RxDatabase:t=>{t.leaderElector=PS,t.isLeader=OS,t.waitForLeadership=TS}},Yv={name:"leader-election",rxdb:LS,prototypes:NS,hooks:{preCloseRxDatabase:{after:AS}}};var Yu=t=>Promise.resolve(t);function Gu(t,i){if(t==="_deleted")return i;i=Ee(i);var e=!!i._deleted;return i[t]=e,delete i._deleted,i}function Jc(t,i,e){return e.map(r=>{var n=Ee(r);if(i!=="_deleted"){var o=!!n[i];n._deleted=o,delete n[i]}else n._deleted=!!n._deleted;var c=t.schema.primaryPath;return n[c]=Ci(t.schema.jsonSchema,n),n})}function Zu(t,i){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(i);var e,r=new Promise(n=>{e=()=>{window.removeEventListener("online",e),n()},window.addEventListener("online",e)});return Promise.race([r,t.promiseWait(i)]).then(()=>{window.removeEventListener("online",e)})}function Gv(t){function i(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var r=new Event("mousemove");document.dispatchEvent(r)}}var e=setInterval(i,20*1e3);t.onCancel.push(()=>clearInterval(e))}var FS=new WeakMap,BS=(function(){function t(e,r,n,o,c,u,h,_,g){this.subs=[],this.subjects={received:new ne,sent:new ne,error:new ne,canceled:new Bt(!1),active:new Bt(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=Gt,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new ne,this.replicationIdentifier=e,this.collection=r,this.deletedField=n,this.pull=o,this.push=c,this.live=u,this.retryTime=h,this.autoStart=_,this.toggleOnDocumentVisible=g,this.metaInfoPromise=R(this,null,function*(){var C="rx-replication-meta-"+(yield r.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-"))),S=J_(this.collection.schema.jsonSchema,cu(this.collection.schema.jsonSchema));return{collectionName:C,schema:S}});var b=kt(FS,r,()=>[]);b.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(C=>{Object.defineProperty(this,C+"$",{get:function(){return this.subjects[C].asObservable()}})});var D=new Promise(C=>{this.callOnStart=C});this.startPromise=D}var i=t.prototype;return i.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},i._start=function(){return R(this,null,function*(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||Gv(this);var r=this.pull&&this.pull.modifier?this.pull.modifier:Yu,n=this.push&&this.push.modifier?this.push.modifier:Yu,o=this.collection.database,c=yield this.metaInfoPromise,[u]=yield Promise.all([this.collection.database.storage.createStorageInstance({databaseName:o.name,collectionName:c.collectionName,databaseInstanceToken:o.token,multiInstance:o.multiInstance,options:{},schema:c.schema,password:o.password,devMode:He.isDevMode()}),T_(this.collection,c.collectionName,c.schema)]);this.metaInstance=u,this.internalReplicationState=nv({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:o.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(Me(h=>!!this.pull),Ui(h=>R(this,null,function*(){if(h==="RESYNC")return h;var _=Ee(h);return _.documents=Jc(this.collection,this.deletedField,_.documents),_.documents=yield Promise.all(_.documents.map(g=>r(g))),_}))),masterChangesSince:(h,_)=>R(this,null,function*(){if(!this.pull)return{checkpoint:null,documents:[]};for(var g=!1,b={};!g&&!this.isStoppedOrPaused();)try{b=yield this.pull.handler(h,_),g=!0}catch(S){var D=X("RC_PULL",{checkpoint:h,errors:Gr(S).map(P=>Vd(P)),direction:"pull"});this.subjects.error.next(D),yield Zu(this.collection,ae(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var C=Ee(b);return C.documents=Jc(this.collection,this.deletedField,C.documents),C.documents=yield Promise.all(C.documents.map(S=>r(S))),C}),masterWrite:h=>R(this,null,function*(){if(!this.push)return[];var _=!1;yield Xi("preReplicationMasterWrite",{rows:h,collection:this.collection});var g=yield Promise.all(h.map(P=>R(this,null,function*(){return P.newDocumentState=yield n(P.newDocumentState),P.newDocumentState===null?null:(P.assumedMasterState&&(P.assumedMasterState=yield n(P.assumedMasterState)),this.deletedField!=="_deleted"&&(P.newDocumentState=Gu(this.deletedField,P.newDocumentState),P.assumedMasterState&&(P.assumedMasterState=Gu(this.deletedField,P.assumedMasterState))),P)}))),b=g.filter(hf),D=null;for(b.length===0&&(_=!0,D=[]);!_&&!this.isStoppedOrPaused();)try{if(D=yield this.push.handler(b),!Array.isArray(D))throw X("RC_PUSH_NO_AR",{pushRows:h,direction:"push",args:{result:D}});_=!0}catch(P){var C=P.rxdb?P:X("RC_PUSH",{pushRows:h,errors:Gr(P).map(T=>Vd(T)),direction:"push"});this.subjects.error.next(C),yield Zu(this.collection,ae(this.retryTime))}if(this.isStoppedOrPaused())return[];yield Xi("preReplicationMasterWriteDocumentsHandle",{result:D,collection:this.collection});var S=Jc(this.collection,this.deletedField,ae(D));return S})}}),this.subs.push(this.internalReplicationState.events.error.subscribe(h=>{this.subjects.error.next(h)}),this.internalReplicationState.events.processed.down.subscribe(h=>this.subjects.received.next(h.document)),this.internalReplicationState.events.processed.up.subscribe(h=>{this.subjects.sent.next(h.newDocumentState)}),ds([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([h,_])=>{var g=h||_;this.subjects.active.next(g)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:h=>{this.isStoppedOrPaused()||this.remoteEvents$.next(h)},error:h=>{this.subjects.error.next(h)}})),this.live||(yield Wc(this.internalReplicationState),yield Ou(this.internalReplicationState),yield this._cancel()),this.callOnStart()}})},i.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},i.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},i.isStopped=function(){return!!this.subjects.canceled.getValue()},i.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},i.awaitInitialReplication=function(){return R(this,null,function*(){return yield this.startPromise,Wc(ae(this.internalReplicationState))})},i.awaitInSync=function(){return R(this,null,function*(){yield this.startPromise,yield Wc(ae(this.internalReplicationState));for(var r=2;r>0;)r--,yield this.collection.database.requestIdlePromise(),yield Ou(ae(this.internalReplicationState));return!0})},i.reSync=function(){this.remoteEvents$.next("RESYNC")},i.emitEvent=function(r){this.remoteEvents$.next(r)},i.cancel=function(){return R(this,null,function*(){this.startQueue=this.startQueue.catch(()=>{}).then(()=>R(this,null,function*(){yield this._cancel()})),yield this.startQueue})},i._cancel=function(r=!1){return R(this,null,function*(){if(this.isStopped())return pi;var n=this.onCancel.map(o=>kf(o()));return this.internalReplicationState&&(yield ov(this.internalReplicationState)),this.metaInstance&&!r&&n.push(ae(this.internalReplicationState).checkpointQueue.then(()=>ae(this.metaInstance).close())),this.subs.forEach(o=>o.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(n)})},i.remove=function(){return R(this,null,function*(){return this.startQueue=this.startQueue.then(()=>R(this,null,function*(){var r=yield this.metaInfoPromise;yield this._cancel(!0),yield ae(this.internalReplicationState).checkpointQueue.then(()=>ae(this.metaInstance).remove()),yield A_(this.collection,r.collectionName,r.schema)})),this.startQueue})},t})();function Zv({replicationIdentifier:t,collection:i,deletedField:e="_deleted",pull:r,push:n,live:o=!0,retryTime:c=1e3*5,waitForLeadership:u=!0,autoStart:h=!0,toggleOnDocumentVisible:_=!1}){if(G_(Yv),!r&&!n)throw X("UT3",{collection:i.name,args:{replicationIdentifier:t}});var g=new BS(t,i,e,r,n,o,c,h,_);if(_&&typeof document<"u"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"){var b=()=>{if(!g.isStopped()){var D=document.visibilityState==="visible";D?g.start():i.database.isLeader()||g.pause()}};document.addEventListener("visibilitychange",b),g.onCancel.push(()=>document.removeEventListener("visibilitychange",b))}return VS(u,g),g}function VS(t,i){var e=t&&i.collection.database.multiInstance,r=e?i.collection.database.waitForLeadership():ma;return r.then(()=>{i.isStopped()||i.autoStart&&i.start()})}var Jv={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},listName:{type:"string",maxLength:200},items:{type:"array",items:{type:"string"}},sortedItems:{type:"array",items:{type:"string"}},tieredItems:{type:"array",items:{type:"object",properties:{tier:{type:"string"},items:{type:"array",items:{type:"string"}}},required:["tier","items"]}},completed:{type:"boolean"},createdAt:{type:"number"},completedAt:{type:"number"},userId:{type:"string",maxLength:100},updatedAt:{type:"number"}},required:["id","listName","items","completed","createdAt","userId","updatedAt"],indexes:["createdAt","userId","updatedAt"]};var el=class t{db=null;replicationState=null;isBrowser;dbReady;authService;syncStatusSubject=new Bt({isSetup:!1,isActive:!1});constructor(){let i=E(Km);this.authService=E(fs),this.isBrowser=ah(i),this.isBrowser?this.dbReady=this.initDatabase():this.dbReady=Promise.resolve(),this.isBrowser&&this.authService.currentUser$.subscribe(e=>{e?this.setupSync():this.cancelSync()})}initDatabase(){return R(this,null,function*(){try{console.log("Starting RxDB initialization...");let i="list-sorter-db",e=Xu();try{console.log("Creating RxDB database:",i),this.db=yield Ru({name:i,storage:e,multiInstance:!1,ignoreDuplicate:!1}),console.log("Database created successfully")}catch(n){if(n.code==="DB9"||n.parameters?.database===i)console.log("Database already exists, removing and recreating..."),yield Hc(i,e),this.db=yield Ru({name:i,storage:e,multiInstance:!1,ignoreDuplicate:!1}),console.log("Database recreated successfully");else throw n}console.log("Adding collections..."),yield this.db.addCollections({lists:{schema:Jv}}),console.log("Collections added successfully"),console.log("RxDB initialized and ready. Database:",this.db),console.log("Database name:",this.db.name),console.log("Collections:",Object.keys(this.db.collections));let r=yield this.db.lists.find().exec();console.log("Test query result - existing documents:",r.length),this.setupSyncInternal()}catch(i){throw console.error("Error initializing RxDB:",i),i}})}ensureReady(){return R(this,null,function*(){console.log("ensureReady: waiting for dbReady promise...");try{yield this.dbReady,console.log("ensureReady: dbReady promise resolved")}catch(i){throw console.error("ensureReady: dbReady promise rejected:",i),i}})}setupSync(){return R(this,null,function*(){yield this.ensureReady(),this.setupSyncInternal()})}setupSyncInternal(){return R(this,null,function*(){if(!this.db||!this.isBrowser)return;let i=this.authService.currentUserValue;if(i)try{let n,o,e=yield this.migrateLocalListsToUser(i.userId);e>0&&console.log(`Migrated ${e} local lists to user account`),this.cancelSync();let r=yield this.authService.getAppwriteConfig();if(!r){console.error("Failed to get AppWrite configuration");return}console.log("Setting up RxDB replication with AppWrite"),this.replicationState=Zv({collection:this.db.lists,replicationIdentifier:"appwrite-lists-replication",live:!0,retryTime:5e3,autoStart:!0,pull:{handler(c,u){return R(this,null,function*(){let h=c||0;try{let _=yield r.pullHandler(h,u);return{documents:_.map(g=>Ue(fe({},g),{_deleted:!1})),checkpoint:_.length>0?Math.max(..._.map(g=>g.updatedAt)):h}}catch(_){return console.error("Pull replication error:",_),{documents:[],checkpoint:h}}})},batchSize:20},push:{handler(c){return R(this,null,function*(){try{return yield r.pushHandler(c),[]}catch(u){throw console.error("Push replication error:",u),u}})},batchSize:20}}),this.replicationState.error$.subscribe(c=>{console.error("Replication error:",c)}),this.replicationState.active$.subscribe(c=>{console.log("Replication active:",c),this.updateSyncStatus()}),this.updateSyncStatus(),console.log("Replication setup complete")}catch(e){console.error("Error setting up sync:",e)}})}cancelSync(){this.replicationState&&(console.log("Cancelling replication"),this.replicationState.cancel(),this.replicationState=null),this.updateSyncStatus()}updateSyncStatus(){this.syncStatusSubject.next({isSetup:!!this.replicationState,isActive:!!this.replicationState&&!!this.authService.currentUserValue})}forceSyncNow(){return R(this,null,function*(){if(!this.replicationState||!this.isBrowser){console.log("Cannot force sync: replication not active");return}try{console.log("Forcing immediate sync..."),yield this.replicationState.reSync(),console.log("Force sync complete")}catch(i){console.error("Error during force sync:",i)}})}getSyncStatus(){return this.syncStatusSubject.value}saveSortedList(i){return R(this,null,function*(){if(console.log("saveSortedList called, isBrowser:",this.isBrowser),!this.isBrowser)return console.log("Not in browser, returning null"),null;if(console.log("Ensuring database is ready..."),yield this.ensureReady(),console.log("Database ready, db exists:",!!this.db),!this.db)return console.error("Database is null after ensureReady!"),null;let e=this.authService.currentUserValue,r=i._id||`list_${Date.now()}`,n=Date.now();console.log("User:",e,"ID:",r);let o={id:r,listName:i.listName,items:i.items,sortedItems:i.sortedItems,tieredItems:i.tieredItems,completed:i.completed,createdAt:i.createdAt?i.createdAt.getTime():n,completedAt:i.completedAt?i.completedAt.getTime():void 0,userId:e?e.userId:"local",updatedAt:n};try{console.log("Saving list with id:",r,"userId:",o.userId);let c=yield this.db.lists.findOne({selector:{id:r}}).exec();return c?(console.log("Updating existing list"),yield c.update({$set:o})):(console.log("Inserting new list"),yield this.db.lists.insert(o)),console.log("List saved successfully"),{id:r}}catch(c){throw console.error("Error saving list:",c),c}})}getSortedList(i){return R(this,null,function*(){if(!this.isBrowser||(yield this.ensureReady(),!this.db))return null;try{let e=yield this.db.lists.findOne({selector:{id:i}}).exec();return e?this.convertToSortedList(e.toJSON()):null}catch(e){return console.error("Error getting list:",e),null}})}getAllLists(){return R(this,null,function*(){if(!this.isBrowser)return[];if(yield this.ensureReady(),!this.db)return[];let i=this.authService.currentUserValue,e=i?i.userId:"local";try{let r=yield this.db.lists.find({selector:{userId:e},sort:[{createdAt:"desc"}]}).exec();return console.log("getAllLists: Retrieved",r.length,"lists"),r.map(n=>this.convertToSortedList(n.toJSON()))}catch(r){return console.error("Error in getAllLists:",r),[]}})}getAllLists$(){if(!this.isBrowser||!this.db)return new _n(r=>r.next([]));let i=this.authService.currentUserValue,e=i?i.userId:"local";return this.db.lists.find({selector:{userId:e},sort:[{createdAt:"desc"}]}).$.pipe(pt(r=>r.map(n=>this.convertToSortedList(n.toJSON()))))}updateSortedList(i){return R(this,null,function*(){return this.saveSortedList(i)})}deleteList(i){return R(this,null,function*(){if(!this.isBrowser||(yield this.ensureReady(),!this.db))return null;try{let e=yield this.db.lists.findOne({selector:{id:i}}).exec();e&&(yield e.remove())}catch(e){throw console.error("Error deleting list:",e),e}})}clearDatabase(){return R(this,null,function*(){if(this.isBrowser&&(yield this.ensureReady(),!!this.db))try{let i="list-sorter-db",e=Xu();yield this.db.remove(),this.db=null,yield Hc(i,e),yield this.initDatabase()}catch(i){console.error("Error clearing database:",i)}})}convertToSortedList(i){return{_id:i.id,listName:i.listName,items:i.items,sortedItems:i.sortedItems,tieredItems:i.tieredItems,completed:i.completed,createdAt:new Date(i.createdAt),completedAt:i.completedAt?new Date(i.completedAt):void 0}}migrateLocalListsToUser(i){return R(this,null,function*(){if(!this.isBrowser||!this.db)return 0;try{let e=yield this.db.lists.find({selector:{userId:"local"}}).exec();console.log(`Migrating ${e.length} local lists to user ${i}`);for(let r of e)yield r.update({$set:{userId:i,updatedAt:Date.now()}});return e.length}catch(e){return console.error("Error migrating local lists:",e),0}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})};var tl=class t{sortStateSubject=new Bt({isActive:!1,currentPair:null,progress:0,totalComparisons:0,completedComparisons:0});sortState$=this.sortStateSubject.asObservable();items=[];comparisons=new Map;pendingComparisons=[];resolveComparison=null;sortPromiseResolve=null;startSort(i){return R(this,null,function*(){this.items=[...i],this.comparisons.clear(),this.pendingComparisons=[];let e=Math.ceil(i.length*Math.log2(i.length));return this.updateState({isActive:!0,currentPair:null,progress:0,totalComparisons:e,completedComparisons:0}),new Promise(r=>{this.sortPromiseResolve=r,this.performMergeSort(this.items).then(n=>{this.updateState({isActive:!1,currentPair:null,progress:100,totalComparisons:this.sortStateSubject.value.totalComparisons,completedComparisons:this.sortStateSubject.value.totalComparisons}),r(n)})})})}performMergeSort(i){return R(this,null,function*(){if(i.length<=1)return i;let e=Math.floor(i.length/2),r=yield this.performMergeSort(i.slice(0,e)),n=yield this.performMergeSort(i.slice(e));return yield this.merge(r,n)})}merge(i,e){return R(this,null,function*(){let r=[],n=0,o=0;for(;n<i.length&&o<e.length;)(yield this.compare(i[n],e[o]))<=0?(r.push(i[n]),n++):(r.push(e[o]),o++);return r.concat(i.slice(n)).concat(e.slice(o))})}compare(i,e){return R(this,null,function*(){let r=this.getComparisonKey(i,e);return this.comparisons.has(r)?this.comparisons.get(r):new Promise(n=>{this.resolveComparison=n,this.updateState(Ue(fe({},this.sortStateSubject.value),{currentPair:{itemA:i,itemB:e}}))})})}submitComparison(i,e,r){let n=this.getComparisonKey(i,e),o=r==="A"?-1:r==="B"?1:0;this.comparisons.set(n,o);let c=this.sortStateSubject.value,u=c.completedComparisons+1,h=Math.round(u/c.totalComparisons*100);this.updateState(Ue(fe({},c),{currentPair:null,completedComparisons:u,progress:h})),this.resolveComparison&&(this.resolveComparison(o),this.resolveComparison=null)}cancelSort(){this.updateState({isActive:!1,currentPair:null,progress:0,totalComparisons:0,completedComparisons:0}),this.sortPromiseResolve&&(this.sortPromiseResolve([]),this.sortPromiseResolve=null)}getComparisonKey(i,e){return[i,e].sort().join("|||")}updateState(i){this.sortStateSubject.next(i)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"})};function jS(t,i){if(t&1){let e=Tt();N(0,"app-list-input",7),he("listNameChange",function(n){ge(e);let o=ue();return _e(o.listName.set(n))})("currentItemChange",function(n){ge(e);let o=ue();return _e(o.currentItem.set(n))})("pastedTextChange",function(n){ge(e);let o=ue();return _e(o.pastedText.set(n))})("addItem",function(){ge(e);let n=ue();return _e(n.addItem())})("removeItem",function(n){ge(e);let o=ue();return _e(o.removeItem(n))})("startSort",function(){ge(e);let n=ue();return _e(n.startSort())})("clearList",function(){ge(e);let n=ue();return _e(n.clearList())})("fileSelected",function(n){ge(e);let o=ue();return _e(o.onFileSelected(n))})("addPastedItems",function(){ge(e);let n=ue();return _e(n.addPastedItems())}),B()}if(t&2){let e=ue();pe("listName",e.listName())("items",e.items())("currentItem",e.currentItem())("pastedText",e.pastedText())("isDisabled",e.sortState().isActive)("canAddItem",e.canAddItem())("canStartSort",e.canStartSort())("currentListId",e.currentListId())}}function HS(t,i){if(t&1){let e=Tt();N(0,"app-sorting-comparison",8),he("selectOption",function(n){ge(e);let o=ue();return _e(o.selectOption(n))})("cancelSort",function(){ge(e);let n=ue();return _e(n.cancelSort())}),B()}if(t&2){let e=ue();pe("sortState",e.sortState())}}function US(t,i){if(t&1){let e=Tt();N(0,"app-tier-results",9),he("showAdvancedSettingsChange",function(n){ge(e);let o=ue();return _e(o.showAdvancedSettings.set(n))})("updateTierPercentage",function(n){ge(e);let o=ue();return _e(o.updateTierPercentage(n.index,n.value))})("validateTierPercentage",function(n){ge(e);let o=ue();return _e(o.validateTierPercentage(n))})("recalculateTiers",function(){ge(e);let n=ue();return _e(n.recalculateTiers())})("resetTierPercentages",function(){ge(e);let n=ue();return _e(n.resetTierPercentages())})("itemDrop",function(n){ge(e);let o=ue();return _e(o.onItemDrop(n))})("hideResults",function(){ge(e);let n=ue();return _e(n.showResults.set(!1))})("createNewList",function(){ge(e);let n=ue();return _e(n.clearList())}),B()}if(t&2){let e=ue();pe("listName",e.listName())("tieredItems",e.tieredItems())("tierPercentages",e.tierPercentages())("tierNames",e.tierNames)("showAdvancedSettings",e.showAdvancedSettings())}}var ey=class t{constructor(i,e,r){this.databaseService=i;this.mergeSortService=e;this.snackBar=r;this.mergeSortService.sortState$.subscribe(n=>{this.sortState.set(n)}),this.loadLists()}listName=ct("");currentItem=ct("");pastedText=ct("");items=ct([]);sortState=ct({isActive:!1,currentPair:null,progress:0,totalComparisons:0,completedComparisons:0});sortedItems=ct([]);tieredItems=ct([]);showResults=ct(!1);showAdvancedSettings=ct(!1);tierPercentages=ct([10,20,20,20,20,10]);tierNames=["S","A","B","C","D","F"];lists=ct([]);currentListId=ct(void 0);canAddItem=Yl(()=>this.currentItem().trim().length>0&&!this.sortState().isActive);canStartSort=Yl(()=>this.items().length>=2&&!this.sortState().isActive&&this.listName().trim().length>0);addItem(){let i=this.currentItem().trim();i&&!this.items().includes(i)?(this.items.update(e=>[...e,i]),this.currentItem.set("")):this.items().includes(i)&&this.snackBar.open("Item already exists in the list","Close",{duration:3e3})}removeItem(i){this.items.update(e=>e.filter(r=>r!==i))}startSort(){return R(this,null,function*(){if(this.canStartSort()){this.showResults.set(!1);try{let i=yield this.mergeSortService.startSort(this.items());this.sortedItems.set(i);let e=this.calculateTiers(i);this.tieredItems.set(e),this.showResults.set(!0);let r={_id:this.currentListId(),listName:this.listName(),items:this.items(),sortedItems:i,tieredItems:e,completed:!0,createdAt:new Date,completedAt:new Date};if(console.log("About to save list:",r),this.currentListId()){let n=yield this.databaseService.getSortedList(this.currentListId());n&&n._rev&&(r._rev=n._rev,r.createdAt=n.createdAt)}yield this.databaseService.saveSortedList(r),console.log("List saved, reloading lists..."),this.currentListId.set(r._id),yield this.loadLists(),this.snackBar.open("Sort completed and saved!","Close",{duration:3e3})}catch(i){console.error("Error during sorting/saving:",i),this.snackBar.open("Error during sorting","Close",{duration:3e3})}}})}selectOption(i){let e=this.sortState();e.currentPair&&this.mergeSortService.submitComparison(e.currentPair.itemA,e.currentPair.itemB,i)}cancelSort(){this.mergeSortService.cancelSort(),this.showResults.set(!1)}clearList(){this.items.set([]),this.currentItem.set(""),this.listName.set(""),this.sortedItems.set([]),this.tieredItems.set([]),this.showResults.set(!1),this.currentListId.set(void 0)}loadList(i){return R(this,null,function*(){this.listName.set(i.listName),this.items.set([...i.items]),this.currentListId.set(i._id),i.sortedItems?(this.sortedItems.set([...i.sortedItems]),i.tieredItems?this.tieredItems.set([...i.tieredItems]):this.tieredItems.set(this.calculateTiers(i.sortedItems)),this.showResults.set(!0)):(this.sortedItems.set([]),this.tieredItems.set([]),this.showResults.set(!1)),this.snackBar.open("List loaded - you can add more items and re-sort","Close",{duration:3e3})})}deleteList(i){return R(this,null,function*(){i._id&&(yield this.databaseService.deleteList(i._id),yield this.loadLists(),this.snackBar.open("List deleted","Close",{duration:2e3}))})}loadLists(){return R(this,null,function*(){let i=yield this.databaseService.getAllLists();this.lists.set(i.sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime()))})}onFileSelected(i){let e=new FileReader;e.onload=r=>{let n=r.target?.result;this.parseFileContent(n,i.name)},e.onerror=()=>{this.snackBar.open("Error reading file","Close",{duration:3e3})},e.readAsText(i)}addPastedItems(){let i=this.pastedText().trim();if(!i)return;let e=this.parseTextContent(i),r=this.items(),n=e.filter(o=>!r.includes(o));n.length>0?(this.items.update(o=>[...o,...n]),this.snackBar.open(`Added ${n.length} item${n.length!==1?"s":""} from pasted text`,"Close",{duration:3e3}),this.pastedText.set("")):this.snackBar.open("No new items found in pasted text","Close",{duration:3e3})}parseFileContent(i,e){let n=e.toLowerCase().endsWith(".csv")?this.parseCsvContent(i):this.parseTextContent(i),o=this.items(),c=n.filter(u=>!o.includes(u));c.length>0?(this.items.update(u=>[...u,...c]),this.snackBar.open(`Added ${c.length} item${c.length!==1?"s":""} from file`,"Close",{duration:3e3})):this.snackBar.open("No new items found in file","Close",{duration:3e3})}parseCsvContent(i){let e=[],r=i.split(/\r?\n/);for(let n of r){let o=n.includes(",")?n.split(","):n.split(";");e.push(...o.map(c=>c.trim()).filter(c=>c.length>0))}return e}parseTextContent(i){let e=i.split(/\r?\n/).map(r=>r.trim()).filter(r=>r.length>0);return e.length===1&&e[0].includes(",")&&(e=e[0].split(",").map(r=>r.trim()).filter(r=>r.length>0)),e}calculateTiers(i){if(i.length===0)return[];let e=i.length,r=this.tierPercentages(),n=[],o=0;for(let c=0;c<this.tierNames.length&&o<e;c++){let u=Math.max(1,Math.round(e*r[c]/100)),h=Math.min(o+u,e);o<e&&(n.push({tier:this.tierNames[c],items:i.slice(o,h)}),o=h)}if(o<e){let c=n[n.length-1];c&&c.items.push(...i.slice(o))}return n}onItemDrop(i){i.previousContainer===i.container?Ks(i.container.data,i.previousIndex,i.currentIndex):hp(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.tieredItems.update(e=>[...e]),this.saveCurrentList()}updateTierPercentage(i,e){let r=[...this.tierPercentages()];r[i]=e,this.tierPercentages.set(r)}validateTierPercentage(i){let e=[...this.tierPercentages()],r=e[i];r<0?r=0:r>100&&(r=100),e[i]=r,this.tierPercentages.set(e)}recalculateTiers(){let i=this.tieredItems().flatMap(r=>r.items),e=this.calculateTiers(i);this.tieredItems.set(e),this.saveCurrentList(),this.snackBar.open("Tiers recalculated with new percentages","Close",{duration:3e3})}resetTierPercentages(){this.tierPercentages.set([10,20,20,20,20,10]),this.snackBar.open("Tier percentages reset to defaults","Close",{duration:2e3})}saveCurrentList(){return R(this,null,function*(){if(!(!this.currentListId()||!this.showResults()))try{let i={_id:this.currentListId(),listName:this.listName(),items:this.items(),sortedItems:this.tieredItems().flatMap(r=>r.items),tieredItems:this.tieredItems(),completed:!0,createdAt:new Date,completedAt:new Date},e=yield this.databaseService.getSortedList(this.currentListId());e&&e._rev&&(i._rev=e._rev,i.createdAt=e.createdAt),yield this.databaseService.saveSortedList(i),yield this.loadLists()}catch(i){console.error("Error saving list:",i)}})}static \u0275fac=function(e){return new(e||t)(Un(el),Un(tl),Un(xn))};static \u0275cmp=ke({type:t,selectors:[["app-list-sorter"]],decls:8,vars:5,consts:[[1,"list-sorter-container"],[1,"main-content"],[3,"listName","items","currentItem","pastedText","isDisabled","canAddItem","canStartSort","currentListId","listNameChange","currentItemChange","pastedTextChange","addItem","removeItem","startSort","clearList","fileSelected","addPastedItems",4,"ngIf"],[3,"sortState","selectOption","cancelSort",4,"ngIf"],[3,"listName","tieredItems","tierPercentages","tierNames","showAdvancedSettings","showAdvancedSettingsChange","updateTierPercentage","validateTierPercentage","recalculateTiers","resetTierPercentages","itemDrop","hideResults","createNewList",4,"ngIf"],[1,"sidebar"],[3,"loadList","deleteList","lists","isDisabled"],[3,"listNameChange","currentItemChange","pastedTextChange","addItem","removeItem","startSort","clearList","fileSelected","addPastedItems","listName","items","currentItem","pastedText","isDisabled","canAddItem","canStartSort","currentListId"],[3,"selectOption","cancelSort","sortState"],[3,"showAdvancedSettingsChange","updateTierPercentage","validateTierPercentage","recalculateTiers","resetTierPercentages","itemDrop","hideResults","createNewList","listName","tieredItems","tierPercentages","tierNames","showAdvancedSettings"]],template:function(e,r){e&1&&(N(0,"div",0)(1,"div",1),Dt(2,jS,1,8,"app-list-input",2)(3,HS,1,1,"app-sorting-comparison",3)(4,US,1,5,"app-tier-results",4),B(),N(5,"div",5),ft(6,"app-auth-widget"),N(7,"app-saved-lists-sidebar",6),he("loadList",function(o){return r.loadList(o)})("deleteList",function(o){return r.deleteList(o)}),B()()()),e&2&&(K(2),pe("ngIf",!r.sortState().isActive&&!r.showResults()),K(),pe("ngIf",r.sortState().isActive&&r.sortState().currentPair),K(),pe("ngIf",r.showResults()),K(3),pe("lists",r.lists())("isDisabled",r.sortState().isActive))},dependencies:[di,Kn,$s,Xs,Zs,ec,tc,ic],styles:[".list-sorter-container[_ngcontent-%COMP%]{display:flex;gap:2rem;padding:2rem;max-width:1400px;margin:0 auto;min-height:calc(100vh - 4rem);background:linear-gradient(135deg,#ff6b6b,#ee5a6f 10%,#feca57,#f39c12,#48dbfb,#0abde3,#1dd1a1,#10ac84,#a29bfe,#6c5ce7 90%,#636e72 95%,#2d3436)}@media (max-width: 968px){.list-sorter-container[_ngcontent-%COMP%]{flex-direction:column;padding:1rem;min-height:calc(100vh - 2rem)}}.main-content[_ngcontent-%COMP%]{flex:1;min-width:0}.sidebar[_ngcontent-%COMP%]{width:350px;flex-shrink:0}@media (max-width: 968px){.sidebar[_ngcontent-%COMP%]{width:100%}}"]})};export{ey as ListSorterComponent};
