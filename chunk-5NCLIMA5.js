import{$ as xi,A as Xp,B as Yp,C as Gp,D as Zp,E as Jp,F as ef,G as bi,H as dn,I as Sc,J as hi,K as Gn,L as at,M as yr,N as un,O as mn,P as hn,Q as kc,R as pn,S as br,T as $t,U as Tr,V as Vo,W as Ic,X as $o,Y as du,Z as Ka,_ as tf,a as Hp,aa as rf,b as Lo,c as Up,ca as nf,d as No,da as Ec,ea as zo,fa as jo,g as Fo,ga as Ho,ha as Uo,i as Wp,ia as Wo,j as Kp,ja as uu,k as qp,ka as of,la as Dc,m as Bo,ma as Zn,n as bc,na as fn,o as xc,oa as gn,p as wc,pa as xr,q as Xn,qa as Pi,r as ln,ra as pi,s as qt,t as Pr,u as ar,v as Yn,w as $i,x as Qp,y as Wa,z as Cc}from"./chunk-7TQ3AQPA.js";import{$ as X,$a as pt,$b as Np,A as Ae,Aa as _r,Ab as ja,B as nu,Bb as Ha,C as _p,Ca as au,Cb as Ua,Da as ye,Db as Op,E as Xi,Ea as je,Eb as Kt,F as Io,Fa as ke,Fb as su,G as vp,Ga as yt,Gb as Rp,Ha as Sp,Hb as cn,I as yp,Ia as lt,Ib as Po,Ja as gc,Jb as Pp,K as bp,Ka as Ve,Kb as cu,L as Ba,La as Ze,Ma as Oi,N as It,Nb as vr,O as tn,P as Jt,Pa as _c,Pb as Tp,Q as Eo,Qa as Le,Qb as Je,Ra as Ke,Rb as Rt,Sa as kp,Sb as Ap,T as Va,Ta as qe,U as ct,Ua as Ip,V as ze,Va as qn,Vb as St,W as Ce,Wa as Mr,Wb as ot,X as $a,Xa as Or,Xb as si,Y as x,Ya as le,Za as S,Zb as Lp,_ as hc,_a as M,a as de,aa as Y,ab as Rr,ac as To,b as Be,ba as pc,bb as nn,bc as Ao,cb as Oo,cc as lu,d as nx,da as We,db as Qn,dc as vc,e as dc,ea as vt,eb as tt,ec as Fp,f as ox,fa as za,fb as on,fc as mi,g as R,gb as re,gc as Bp,h as Ht,hb as Ep,i as Wn,ia as Se,ib as j,j as J,ja as fc,jb as ai,jc as Vp,k as Zt,ka as ou,kb as Et,kc as $p,l as ru,la as fr,lb as Ct,ma as ni,mb as Dt,na as Te,nb as De,o as yi,oa as rn,ob as Me,p as pp,pc as zp,q as Kn,qa as xp,qb as Dp,r as ht,ra as wp,rb as Mp,rc as jp,s as uc,sb as an,sc as yc,t as or,ta as Do,tb as sn,ua as V,ub as Xe,v as mc,va as oi,vb as Ri,w as fp,wa as gr,wb as L,x as gp,xa as ui,xb as nt,y as Mi,ya as Mo,yb as Vi,za as Cp,zb as Ro}from"./chunk-PF5WOV3Z.js";var ob=nx((dh,uh)=>{"use strict";(function(t,r){typeof dh=="object"&&typeof uh<"u"?uh.exports=r():typeof define=="function"&&define.amd?define(r):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=r())})(dh,function(){"use strict";var t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(l[m]=u[m])},t(a,s)};function r(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(a,s);function l(){this.constructor=a}a.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}var e=function(){return e=Object.assign||function(s){for(var l,u=1,m=arguments.length;u<m;u++){l=arguments[u];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p])}return s},e.apply(this,arguments)};function i(a,s,l){if(l||arguments.length===2)for(var u=0,m=s.length,p;u<m;u++)(p||!(u in s))&&(p||(p=Array.prototype.slice.call(s,0,u)),p[u]=s[u]);return a.concat(p||Array.prototype.slice.call(s))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o=Object.keys,c=Array.isArray;typeof Promise<"u"&&!n.Promise&&(n.Promise=Promise);function d(a,s){return typeof s!="object"||o(s).forEach(function(l){a[l]=s[l]}),a}var h=Object.getPrototypeOf,g={}.hasOwnProperty;function f(a,s){return g.call(a,s)}function y(a,s){typeof s=="function"&&(s=s(h(a))),(typeof Reflect>"u"?o:Reflect.ownKeys)(s).forEach(function(l){C(a,l,s[l])})}var D=Object.defineProperty;function C(a,s,l,u){D(a,s,d(l&&f(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},u))}function k(a){return{from:function(s){return a.prototype=Object.create(s.prototype),C(a.prototype,"constructor",a),{extend:y.bind(null,a.prototype)}}}}var T=Object.getOwnPropertyDescriptor;function A(a,s){var l=T(a,s),u;return l||(u=h(a))&&A(u,s)}var ie=[].slice;function ae(a,s,l){return ie.call(a,s,l)}function se(a,s){return s(a)}function Oe(a){if(!a)throw new Error("Assertion Failed")}function we(a){n.setImmediate?setImmediate(a):setTimeout(a,0)}function Qe(a,s){return a.reduce(function(l,u,m){var p=s(u,m);return p&&(l[p[0]]=p[1]),l},{})}function ue(a,s){if(typeof s=="string"&&f(a,s))return a[s];if(!s)return a;if(typeof s!="string"){for(var l=[],u=0,m=s.length;u<m;++u){var p=ue(a,s[u]);l.push(p)}return l}var _=s.indexOf(".");if(_!==-1){var v=a[s.substr(0,_)];return v==null?void 0:ue(v,s.substr(_+1))}}function be(a,s,l){if(!(!a||s===void 0)&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof s!="string"&&"length"in s){Oe(typeof l!="string"&&"length"in l);for(var u=0,m=s.length;u<m;++u)be(a,s[u],l[u])}else{var p=s.indexOf(".");if(p!==-1){var _=s.substr(0,p),v=s.substr(p+1);if(v==="")l===void 0?c(a)&&!isNaN(parseInt(_))?a.splice(_,1):delete a[_]:a[_]=l;else{var b=a[_];(!b||!f(a,_))&&(b=a[_]={}),be(b,v,l)}}else l===void 0?c(a)&&!isNaN(parseInt(s))?a.splice(s,1):delete a[s]:a[s]=l}}function dt(a,s){typeof s=="string"?be(a,s,void 0):"length"in s&&[].map.call(s,function(l){be(a,l,void 0)})}function jt(a){var s={};for(var l in a)f(a,l)&&(s[l]=a[l]);return s}var Lt=[].concat;function He(a){return Lt.apply([],a)}var Ut="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(He([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(s){return s+a+"Array"})}))).filter(function(a){return n[a]}),Nt=new Set(Ut.map(function(a){return n[a]}));function Ft(a){var s={};for(var l in a)if(f(a,l)){var u=a[l];s[l]=!u||typeof u!="object"||Nt.has(u.constructor)?u:Ft(u)}return s}function ir(a){for(var s in a)if(f(a,s))return!1;return!0}var Fi=null;function Bt(a){Fi=new WeakMap;var s=qi(a);return Fi=null,s}function qi(a){if(!a||typeof a!="object")return a;var s=Fi.get(a);if(s)return s;if(c(a)){s=[],Fi.set(a,s);for(var l=0,u=a.length;l<u;++l)s.push(qi(a[l]))}else if(Nt.has(a.constructor))s=a;else{var m=h(a);s=m===Object.prototype?{}:Object.create(m),Fi.set(a,s);for(var p in a)f(a,p)&&(s[p]=qi(a[p]))}return s}var Ne={}.toString;function bt(a){return Ne.call(a).slice(8,-1)}var Wt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ge=typeof Wt=="symbol"?function(a){var s;return a!=null&&(s=a[Wt])&&s.apply(a)}:function(){return null};function xt(a,s){var l=a.indexOf(s);return l>=0&&a.splice(l,1),l>=0}var Ei={};function rr(a){var s,l,u,m;if(arguments.length===1){if(c(a))return a.slice();if(this===Ei&&typeof a=="string")return[a];if(m=Ge(a)){for(l=[];u=m.next(),!u.done;)l.push(u.value);return l}if(a==null)return[a];if(s=a.length,typeof s=="number"){for(l=new Array(s);s--;)l[s]=a[s];return l}return[a]}for(s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return l}var fd=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Rb=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Mh=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gd=Rb.concat(Mh),Pb={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vo(a,s){this.name=a,this.message=s}k(vo).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Oh(a,s){return a+". Errors: "+Object.keys(s).map(function(l){return s[l].toString()}).filter(function(l,u,m){return m.indexOf(l)===u}).join(`
`)}function Fs(a,s,l,u){this.failures=s,this.failedKeys=u,this.successCount=l,this.message=Oh(a,s)}k(Fs).from(vo);function yo(a,s){this.name="BulkError",this.failures=Object.keys(s).map(function(l){return s[l]}),this.failuresByPos=s,this.message=Oh(a,this.failures)}k(yo).from(vo);var _d=gd.reduce(function(a,s){return a[s]=s+"Error",a},{}),Tb=vo,fe=gd.reduce(function(a,s){var l=s+"Error";function u(m,p){this.name=l,m?typeof m=="string"?(this.message="".concat(m).concat(p?`
 `+p:""),this.inner=p||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=Pb[s]||l,this.inner=null)}return k(u).from(Tb),a[s]=u,a},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var Rh=Mh.reduce(function(a,s){return a[s+"Error"]=fe[s],a},{});function Ab(a,s){if(!a||a instanceof vo||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Rh[a.name])return a;var l=new Rh[a.name](s||a.message,a);return"stack"in a&&C(l,"stack",{get:function(){return this.inner.stack}}),l}var Bs=gd.reduce(function(a,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(a[s+"Error"]=fe[s]),a},{});Bs.ModifyError=Fs,Bs.DexieError=vo,Bs.BulkError=yo;function st(){}function Sa(a){return a}function Lb(a,s){return a==null||a===Sa?s:function(l){return s(a(l))}}function Nn(a,s){return function(){a.apply(this,arguments),s.apply(this,arguments)}}function Nb(a,s){return a===st?s:function(){var l=a.apply(this,arguments);l!==void 0&&(arguments[0]=l);var u=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var p=s.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?Nn(u,this.onsuccess):u),m&&(this.onerror=this.onerror?Nn(m,this.onerror):m),p!==void 0?p:l}}function Fb(a,s){return a===st?s:function(){a.apply(this,arguments);var l=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?Nn(l,this.onsuccess):l),u&&(this.onerror=this.onerror?Nn(u,this.onerror):u)}}function Bb(a,s){return a===st?s:function(l){var u=a.apply(this,arguments);d(l,u);var m=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var _=s.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Nn(m,this.onsuccess):m),p&&(this.onerror=this.onerror?Nn(p,this.onerror):p),u===void 0?_===void 0?void 0:_:d(u,_)}}function Vb(a,s){return a===st?s:function(){return s.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function vd(a,s){return a===st?s:function(){var l=a.apply(this,arguments);if(l&&typeof l.then=="function"){for(var u=this,m=arguments.length,p=new Array(m);m--;)p[m]=arguments[m];return l.then(function(){return s.apply(u,p)})}return s.apply(this,arguments)}}var ur=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ph(a,s){ur=a}var ka={},Th=100,yd=typeof Promise>"u"?[]:(function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,h(a),a];var s=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[s,h(s),a]})(),Ah=yd[0],Lh=yd[1],$b=yd[2],zb=Lh&&Lh.then,Fn=Ah&&Ah.constructor,bd=!!$b;function jb(){queueMicrotask(Ub)}var Ia=function(a,s){Ea.push([a,s]),Vs&&(jb(),Vs=!1)},xd=!0,Vs=!0,Bn=[],$s=[],wd=Sa,Kr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:st,pgp:!1,env:{},finalize:st},he=Kr,Ea=[],Vn=0,zs=[];function ne(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=he;if(typeof a!="function"){if(a!==ka)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Sd(this,this._value);return}this._state=null,this._value=null,++s.ref,Fh(this,a)}var Cd={get:function(){var a=he,s=Ws;function l(u,m){var p=this,_=!a.global&&(a!==he||s!==Ws),v=_&&!Qr(),b=new ne(function(w,O){kd(p,new Nh($h(u,a,_,v),$h(m,a,_,v),w,O,a))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return l.prototype=ka,l},set:function(a){C(this,"then",a&&a.prototype===ka?Cd:{get:function(){return a},set:Cd.set})}};y(ne.prototype,{then:Cd,_then:function(a,s){kd(this,new Nh(null,null,a,s,he))},catch:function(a){if(arguments.length===1)return this.then(null,a);var s=arguments[0],l=arguments[1];return typeof s=="function"?this.then(null,function(u){return u instanceof s?l(u):js(u)}):this.then(null,function(u){return u&&u.name===s?l(u):js(u)})},finally:function(a){return this.then(function(s){return ne.resolve(a()).then(function(){return s})},function(s){return ne.resolve(a()).then(function(){return js(s)})})},timeout:function(a,s){var l=this;return a<1/0?new ne(function(u,m){var p=setTimeout(function(){return m(new fe.Timeout(s))},a);l.then(u,m).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),Kr.env=Vh();function Nh(a,s,l,u,m){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof s=="function"?s:null,this.resolve=l,this.reject=u,this.psd=m}y(ne,{all:function(){var a=rr.apply(null,arguments).map(Ks);return new ne(function(s,l){a.length===0&&s([]);var u=a.length;a.forEach(function(m,p){return ne.resolve(m).then(function(_){a[p]=_,--u||s(a)},l)})})},resolve:function(a){if(a instanceof ne)return a;if(a&&typeof a.then=="function")return new ne(function(l,u){a.then(l,u)});var s=new ne(ka,!0,a);return s},reject:js,race:function(){var a=rr.apply(null,arguments).map(Ks);return new ne(function(s,l){a.map(function(u){return ne.resolve(u).then(s,l)})})},PSD:{get:function(){return he},set:function(a){return he=a}},totalEchoes:{get:function(){return Ws}},newPSD:qr,usePSD:$n,scheduler:{get:function(){return Ia},set:function(a){Ia=a}},rejectionMapper:{get:function(){return wd},set:function(a){wd=a}},follow:function(a,s){return new ne(function(l,u){return qr(function(m,p){var _=he;_.unhandleds=[],_.onunhandled=p,_.finalize=Nn(function(){var v=this;Wb(function(){v.unhandleds.length===0?m():p(v.unhandleds[0])})},_.finalize),a()},s,l,u)})}}),Fn&&(Fn.allSettled&&C(ne,"allSettled",function(){var a=rr.apply(null,arguments).map(Ks);return new ne(function(s){a.length===0&&s([]);var l=a.length,u=new Array(l);a.forEach(function(m,p){return ne.resolve(m).then(function(_){return u[p]={status:"fulfilled",value:_}},function(_){return u[p]={status:"rejected",reason:_}}).then(function(){return--l||s(u)})})})}),Fn.any&&typeof AggregateError<"u"&&C(ne,"any",function(){var a=rr.apply(null,arguments).map(Ks);return new ne(function(s,l){a.length===0&&l(new AggregateError([]));var u=a.length,m=new Array(u);a.forEach(function(p,_){return ne.resolve(p).then(function(v){return s(v)},function(v){m[_]=v,--u||l(new AggregateError(m))})})})}),Fn.withResolvers&&(ne.withResolvers=Fn.withResolvers));function Fh(a,s){try{s(function(l){if(a._state===null){if(l===a)throw new TypeError("A promise cannot be resolved with itself.");var u=a._lib&&bo();l&&typeof l.then=="function"?Fh(a,function(m,p){l instanceof ne?l._then(m,p):l.then(m,p)}):(a._state=!0,a._value=l,Bh(a)),u&&xo()}},Sd.bind(null,a))}catch(l){Sd(a,l)}}function Sd(a,s){if($s.push(s),a._state===null){var l=a._lib&&bo();s=wd(s),a._state=!1,a._value=s,Kb(a),Bh(a),l&&xo()}}function Bh(a){var s=a._listeners;a._listeners=[];for(var l=0,u=s.length;l<u;++l)kd(a,s[l]);var m=a._PSD;--m.ref||m.finalize(),Vn===0&&(++Vn,Ia(function(){--Vn===0&&Id()},[]))}function kd(a,s){if(a._state===null){a._listeners.push(s);return}var l=a._state?s.onFulfilled:s.onRejected;if(l===null)return(a._state?s.resolve:s.reject)(a._value);++s.psd.ref,++Vn,Ia(Hb,[l,a,s])}function Hb(a,s,l){try{var u,m=s._value;!s._state&&$s.length&&($s=[]),u=ur&&s._consoleTask?s._consoleTask.run(function(){return a(m)}):a(m),!s._state&&$s.indexOf(m)===-1&&qb(s),l.resolve(u)}catch(p){l.reject(p)}finally{--Vn===0&&Id(),--l.psd.ref||l.psd.finalize()}}function Ub(){$n(Kr,function(){bo()&&xo()})}function bo(){var a=xd;return xd=!1,Vs=!1,a}function xo(){var a,s,l;do for(;Ea.length>0;)for(a=Ea,Ea=[],l=a.length,s=0;s<l;++s){var u=a[s];u[0].apply(null,u[1])}while(Ea.length>0);xd=!0,Vs=!0}function Id(){var a=Bn;Bn=[],a.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var s=zs.slice(0),l=s.length;l;)s[--l]()}function Wb(a){function s(){a(),zs.splice(zs.indexOf(s),1)}zs.push(s),++Vn,Ia(function(){--Vn===0&&Id()},[])}function Kb(a){Bn.some(function(s){return s._value===a._value})||Bn.push(a)}function qb(a){for(var s=Bn.length;s;)if(Bn[--s]._value===a._value){Bn.splice(s,1);return}}function js(a){return new ne(ka,!1,a)}function wt(a,s){var l=he;return function(){var u=bo(),m=he;try{return Xr(l,!0),a.apply(this,arguments)}catch(p){s&&s(p)}finally{Xr(m,!1),u&&xo()}}}var Gt={awaits:0,echoes:0,id:0},Qb=0,Hs=[],Us=0,Ws=0,Xb=0;function qr(a,s,l,u){var m=he,p=Object.create(m);p.parent=m,p.ref=0,p.global=!1,p.id=++Xb,Kr.env,p.env=bd?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},s&&d(p,s),++m.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var _=$n(p,a,l,u);return p.ref===0&&p.finalize(),_}function wo(){return Gt.id||(Gt.id=++Qb),++Gt.awaits,Gt.echoes+=Th,Gt.id}function Qr(){return Gt.awaits?(--Gt.awaits===0&&(Gt.id=0),Gt.echoes=Gt.awaits*Th,!0):!1}(""+zb).indexOf("[native code]")===-1&&(wo=Qr=st);function Ks(a){return Gt.echoes&&a&&a.constructor===Fn?(wo(),a.then(function(s){return Qr(),s},function(s){return Qr(),Vt(s)})):a}function Yb(a){++Ws,(!Gt.echoes||--Gt.echoes===0)&&(Gt.echoes=Gt.awaits=Gt.id=0),Hs.push(he),Xr(a,!0)}function Gb(){var a=Hs[Hs.length-1];Hs.pop(),Xr(a,!1)}function Xr(a,s){var l=he;if((s?Gt.echoes&&(!Us++||a!==he):Us&&(!--Us||a!==he))&&queueMicrotask(s?Yb.bind(null,a):Gb),a!==he&&(he=a,l===Kr&&(Kr.env=Vh()),bd)){var u=Kr.env.Promise,m=a.env;(l.global||a.global)&&(Object.defineProperty(n,"Promise",m.PromiseProp),u.all=m.all,u.race=m.race,u.resolve=m.resolve,u.reject=m.reject,m.allSettled&&(u.allSettled=m.allSettled),m.any&&(u.any=m.any))}}function Vh(){var a=n.Promise;return bd?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function $n(a,s,l,u,m){var p=he;try{return Xr(a,!0),s(l,u,m)}finally{Xr(p,!1)}}function $h(a,s,l,u){return typeof a!="function"?a:function(){var m=he;l&&wo(),Xr(s,!0);try{return a.apply(this,arguments)}finally{Xr(m,!1),u&&queueMicrotask(Qr)}}}function Ed(a){Promise===Fn&&Gt.echoes===0?Us===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}var Vt=ne.reject;function Dd(a,s,l,u){if(!a.idbdb||!a._state.openComplete&&!he.letThrough&&!a._vip){if(a._state.openComplete)return Vt(new fe.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return Vt(new fe.DatabaseClosed);a.open().catch(st)}return a._state.dbReadyPromise.then(function(){return Dd(a,s,l,u)})}else{var m=a._createTransaction(s,l,a._dbSchema);try{m.create(),a._state.PR1398_maxLoop=3}catch(p){return p.name===_d.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),a.close({disableAutoOpen:!1}),a.open().then(function(){return Dd(a,s,l,u)})):Vt(p)}return m._promise(s,function(p,_){return qr(function(){return he.trans=m,u(p,_,m)})}).then(function(p){if(s==="readwrite")try{m.idbtrans.commit()}catch{}return s==="readonly"?p:m._completion.then(function(){return p})})}}var zh="4.0.10",zn="\uFFFF",Md=-1/0,Er="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",jh="String expected.",Co=[],qs="__dbnames",Od="readonly",Rd="readwrite";function jn(a,s){return a?s?function(){return a.apply(this,arguments)&&s.apply(this,arguments)}:a:s}var Hh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qs(a){return typeof a=="string"&&!/\./.test(a)?function(s){return s[a]===void 0&&a in s&&(s=Bt(s),delete s[a]),s}:function(s){return s}}function Uh(){throw fe.Type()}function $e(a,s){try{var l=Wh(a),u=Wh(s);if(l!==u)return l==="Array"?1:u==="Array"?-1:l==="binary"?1:u==="binary"?-1:l==="string"?1:u==="string"?-1:l==="Date"?1:u!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return a>s?1:a<s?-1:0;case"binary":return Jb(Kh(a),Kh(s));case"Array":return Zb(a,s)}}catch{}return NaN}function Zb(a,s){for(var l=a.length,u=s.length,m=l<u?l:u,p=0;p<m;++p){var _=$e(a[p],s[p]);if(_!==0)return _}return l===u?0:l<u?-1:1}function Jb(a,s){for(var l=a.length,u=s.length,m=l<u?l:u,p=0;p<m;++p)if(a[p]!==s[p])return a[p]<s[p]?-1:1;return l===u?0:l<u?-1:1}function Wh(a){var s=typeof a;if(s!=="object")return s;if(ArrayBuffer.isView(a))return"binary";var l=bt(a);return l==="ArrayBuffer"?"binary":l}function Kh(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var qh=(function(){function a(){}return a.prototype._trans=function(s,l,u){var m=this._tx||he.trans,p=this.name,_=ur&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function v(O,I,B){if(!B.schema[p])throw new fe.NotFound("Table "+p+" not part of transaction");return l(B.idbtrans,B)}var b=bo();try{var w=m&&m.db._novip===this.db._novip?m===he.trans?m._promise(s,v,u):qr(function(){return m._promise(s,v,u)},{trans:m,transless:he.transless||he}):Dd(this.db,s,[this.name],v);return _&&(w._consoleTask=_,w=w.catch(function(O){return console.trace(O),Vt(O)})),w}finally{b&&xo()}},a.prototype.get=function(s,l){var u=this;return s&&s.constructor===Object?this.where(s).first(l):s==null?Vt(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return u.core.get({trans:m,key:s}).then(function(p){return u.hook.reading.fire(p)})}).then(l)},a.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(c(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var l=o(s);if(l.length===1)return this.where(l[0]).equals(s[l[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&l.every(function(B){return O.keyPath.indexOf(B)>=0})){for(var I=0;I<l.length;++I)if(l.indexOf(O.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(O,I){return O.keyPath.length-I.keyPath.length})[0];if(u&&this.db._maxKey!==zn){var m=u.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(O){return s[O]}))}!u&&ur&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var p=this.schema.idxByName;function _(O,I){return $e(O,I)===0}var v=l.reduce(function(O,I){var B=O[0],q=O[1],E=p[I],P=s[I];return[B||E,B||!E?jn(q,E&&E.multi?function(N){var U=ue(N,I);return c(U)&&U.some(function(z){return _(P,z)})}:function(N){return _(P,ue(N,I))}):q]},[null,null]),b=v[0],w=v[1];return b?this.where(b.name).equals(s[b.keyPath]).filter(w):u?this.filter(w):this.where(l).equals("")},a.prototype.filter=function(s){return this.toCollection().and(s)},a.prototype.count=function(s){return this.toCollection().count(s)},a.prototype.offset=function(s){return this.toCollection().offset(s)},a.prototype.limit=function(s){return this.toCollection().limit(s)},a.prototype.each=function(s){return this.toCollection().each(s)},a.prototype.toArray=function(s){return this.toCollection().toArray(s)},a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},a.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,c(s)?"[".concat(s.join("+"),"]"):s))},a.prototype.reverse=function(){return this.toCollection().reverse()},a.prototype.mapToClass=function(s){var l=this,u=l.db,m=l.name;this.schema.mappedClass=s,s.prototype instanceof Uh&&(s=(function(b){r(w,b);function w(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(w.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),w.prototype.table=function(){return m},w})(s));for(var p=new Set,_=s.prototype;_;_=h(_))Object.getOwnPropertyNames(_).forEach(function(b){return p.add(b)});var v=function(b){if(!b)return b;var w=Object.create(s.prototype);for(var O in b)if(!p.has(O))try{w[O]=b[O]}catch{}return w};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),s},a.prototype.defineClass=function(){function s(l){d(this,l)}return this.mapToClass(s)},a.prototype.add=function(s,l){var u=this,m=this.schema.primKey,p=m.auto,_=m.keyPath,v=s;return _&&p&&(v=Qs(_)(s)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"add",keys:l!=null?[l]:null,values:[v]})}).then(function(b){return b.numFailures?ne.reject(b.failures[0]):b.lastResult}).then(function(b){if(_)try{be(s,_,b)}catch{}return b})},a.prototype.update=function(s,l){if(typeof s=="object"&&!c(s)){var u=ue(s,this.schema.primKey.keyPath);return u===void 0?Vt(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(l)}else return this.where(":id").equals(s).modify(l)},a.prototype.put=function(s,l){var u=this,m=this.schema.primKey,p=m.auto,_=m.keyPath,v=s;return _&&p&&(v=Qs(_)(s)),this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"put",values:[v],keys:l!=null?[l]:null})}).then(function(b){return b.numFailures?ne.reject(b.failures[0]):b.lastResult}).then(function(b){if(_)try{be(s,_,b)}catch{}return b})},a.prototype.delete=function(s){var l=this;return this._trans("readwrite",function(u){return l.core.mutate({trans:u,type:"delete",keys:[s]})}).then(function(u){return u.numFailures?ne.reject(u.failures[0]):void 0})},a.prototype.clear=function(){var s=this;return this._trans("readwrite",function(l){return s.core.mutate({trans:l,type:"deleteRange",range:Hh})}).then(function(l){return l.numFailures?ne.reject(l.failures[0]):void 0})},a.prototype.bulkGet=function(s){var l=this;return this._trans("readonly",function(u){return l.core.getMany({keys:s,trans:u}).then(function(m){return m.map(function(p){return l.hook.reading.fire(p)})})})},a.prototype.bulkAdd=function(s,l,u){var m=this,p=Array.isArray(l)?l:void 0;u=u||(p?void 0:l);var _=u?u.allKeys:void 0;return this._trans("readwrite",function(v){var b=m.schema.primKey,w=b.auto,O=b.keyPath;if(O&&p)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var I=s.length,B=O&&w?s.map(Qs(O)):s;return m.core.mutate({trans:v,type:"add",keys:p,values:B,wantResults:_}).then(function(q){var E=q.numFailures,P=q.results,N=q.lastResult,U=q.failures,z=_?P:N;if(E===0)return z;throw new yo("".concat(m.name,".bulkAdd(): ").concat(E," of ").concat(I," operations failed"),U)})})},a.prototype.bulkPut=function(s,l,u){var m=this,p=Array.isArray(l)?l:void 0;u=u||(p?void 0:l);var _=u?u.allKeys:void 0;return this._trans("readwrite",function(v){var b=m.schema.primKey,w=b.auto,O=b.keyPath;if(O&&p)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var I=s.length,B=O&&w?s.map(Qs(O)):s;return m.core.mutate({trans:v,type:"put",keys:p,values:B,wantResults:_}).then(function(q){var E=q.numFailures,P=q.results,N=q.lastResult,U=q.failures,z=_?P:N;if(E===0)return z;throw new yo("".concat(m.name,".bulkPut(): ").concat(E," of ").concat(I," operations failed"),U)})})},a.prototype.bulkUpdate=function(s){var l=this,u=this.core,m=s.map(function(v){return v.key}),p=s.map(function(v){return v.changes}),_=[];return this._trans("readwrite",function(v){return u.getMany({trans:v,keys:m,cache:"clone"}).then(function(b){var w=[],O=[];s.forEach(function(B,q){var E=B.key,P=B.changes,N=b[q];if(N){for(var U=0,z=Object.keys(P);U<z.length;U++){var H=z[U],K=P[H];if(H===l.schema.primKey.keyPath){if($e(K,E)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else be(N,H,K)}_.push(q),w.push(E),O.push(N)}});var I=w.length;return u.mutate({trans:v,type:"put",keys:w,values:O,updates:{keys:m,changeSpecs:p}}).then(function(B){var q=B.numFailures,E=B.failures;if(q===0)return I;for(var P=0,N=Object.keys(E);P<N.length;P++){var U=N[P],z=_[Number(U)];if(z!=null){var H=E[U];delete E[U],E[z]=H}}throw new yo("".concat(l.name,".bulkUpdate(): ").concat(q," of ").concat(I," operations failed"),E)})})})},a.prototype.bulkDelete=function(s){var l=this,u=s.length;return this._trans("readwrite",function(m){return l.core.mutate({trans:m,type:"delete",keys:s})}).then(function(m){var p=m.numFailures,_=m.lastResult,v=m.failures;if(p===0)return _;throw new yo("".concat(l.name,".bulkDelete(): ").concat(p," of ").concat(u," operations failed"),v)})},a})();function Da(a){var s={},l=function(v,b){if(b){for(var w=arguments.length,O=new Array(w-1);--w;)O[w-1]=arguments[w];return s[v].subscribe.apply(null,O),a}else if(typeof v=="string")return s[v]};l.addEventType=p;for(var u=1,m=arguments.length;u<m;++u)p(arguments[u]);return l;function p(v,b,w){if(typeof v=="object")return _(v);b||(b=Vb),w||(w=st);var O={subscribers:[],fire:w,subscribe:function(I){O.subscribers.indexOf(I)===-1&&(O.subscribers.push(I),O.fire=b(O.fire,I))},unsubscribe:function(I){O.subscribers=O.subscribers.filter(function(B){return B!==I}),O.fire=O.subscribers.reduce(b,w)}};return s[v]=l[v]=O,O}function _(v){o(v).forEach(function(b){var w=v[b];if(c(w))p(b,v[b][0],v[b][1]);else if(w==="asap")var O=p(b,Sa,function(){for(var B=arguments.length,q=new Array(B);B--;)q[B]=arguments[B];O.subscribers.forEach(function(E){we(function(){E.apply(null,q)})})});else throw new fe.InvalidArgument("Invalid event config")})}}function Ma(a,s){return k(s).from({prototype:a}),s}function e0(a){return Ma(qh.prototype,function(l,u,m){this.db=a,this._tx=m,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:Da(null,{creating:[Nb,st],reading:[Lb,Sa],updating:[Bb,st],deleting:[Fb,st]})})}function So(a,s){return!(a.filter||a.algorithm||a.or)&&(s?a.justLimit:!a.replayFilter)}function Pd(a,s){a.filter=jn(a.filter,s)}function Td(a,s,l){var u=a.replayFilter;a.replayFilter=u?function(){return jn(u(),s())}:s,a.justLimit=l&&!u}function t0(a,s){a.isMatch=jn(a.isMatch,s)}function Xs(a,s){if(a.isPrimKey)return s.primaryKey;var l=s.getIndexByKeyPath(a.index);if(!l)throw new fe.Schema("KeyPath "+a.index+" on object store "+s.name+" is not indexed");return l}function Qh(a,s,l){var u=Xs(a,s.schema);return s.openCursor({trans:l,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:u,range:a.range}})}function Ys(a,s,l,u){var m=a.replayFilter?jn(a.filter,a.replayFilter()):a.filter;if(a.or){var p={},_=function(v,b,w){if(!m||m(b,w,function(B){return b.stop(B)},function(B){return b.fail(B)})){var O=b.primaryKey,I=""+O;I==="[object ArrayBuffer]"&&(I=""+new Uint8Array(O)),f(p,I)||(p[I]=!0,s(v,b,w))}};return Promise.all([a.or._iterate(_,l),Xh(Qh(a,u,l),a.algorithm,_,!a.keysOnly&&a.valueMapper)])}else return Xh(Qh(a,u,l),jn(a.algorithm,m),s,!a.keysOnly&&a.valueMapper)}function Xh(a,s,l,u){var m=u?function(_,v,b){return l(u(_),v,b)}:l,p=wt(m);return a.then(function(_){if(_)return _.start(function(){var v=function(){return _.continue()};(!s||s(_,function(b){return v=b},function(b){_.stop(b),v=st},function(b){_.fail(b),v=st}))&&p(_.value,_,function(b){return v=b}),v()})})}var i0=Symbol(),Oa=(function(){function a(s){Object.assign(this,s)}return a.prototype.execute=function(s){var l;if(this.add!==void 0){var u=this.add;if(c(u))return i(i([],c(s)?s:[],!0),u,!0).sort();if(typeof u=="number")return(Number(s)||0)+u;if(typeof u=="bigint")try{return BigInt(s)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(this.remove!==void 0){var m=this.remove;if(c(m))return c(s)?s.filter(function(_){return!m.includes(_)}).sort():[];if(typeof m=="number")return Number(s)-m;if(typeof m=="bigint")try{return BigInt(s)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}var p=(l=this.replacePrefix)===null||l===void 0?void 0:l[0];return p&&typeof s=="string"&&s.startsWith(p)?this.replacePrefix[1]+s.substring(p.length):s},a})(),r0=(function(){function a(){}return a.prototype._read=function(s,l){var u=this._ctx;return u.error?u.table._trans(null,Vt.bind(null,u.error)):u.table._trans("readonly",s).then(l)},a.prototype._write=function(s){var l=this._ctx;return l.error?l.table._trans(null,Vt.bind(null,l.error)):l.table._trans("readwrite",s,"locked")},a.prototype._addAlgorithm=function(s){var l=this._ctx;l.algorithm=jn(l.algorithm,s)},a.prototype._iterate=function(s,l){return Ys(this._ctx,s,l,this._ctx.table.core)},a.prototype.clone=function(s){var l=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return s&&d(u,s),l._ctx=u,l},a.prototype.raw=function(){return this._ctx.valueMapper=null,this},a.prototype.each=function(s){var l=this._ctx;return this._read(function(u){return Ys(l,s,u,l.table.core)})},a.prototype.count=function(s){var l=this;return this._read(function(u){var m=l._ctx,p=m.table.core;if(So(m,!0))return p.count({trans:u,query:{index:Xs(m,p.schema),range:m.range}}).then(function(v){return Math.min(v,m.limit)});var _=0;return Ys(m,function(){return++_,!1},u,p).then(function(){return _})}).then(s)},a.prototype.sortBy=function(s,l){var u=s.split(".").reverse(),m=u[0],p=u.length-1;function _(w,O){return O?_(w[u[O]],O-1):w[m]}var v=this._ctx.dir==="next"?1:-1;function b(w,O){var I=_(w,p),B=_(O,p);return $e(I,B)*v}return this.toArray(function(w){return w.sort(b)}).then(l)},a.prototype.toArray=function(s){var l=this;return this._read(function(u){var m=l._ctx;if(m.dir==="next"&&So(m,!0)&&m.limit>0){var p=m.valueMapper,_=Xs(m,m.table.core.schema);return m.table.core.query({trans:u,limit:m.limit,values:!0,query:{index:_,range:m.range}}).then(function(b){var w=b.result;return p?w.map(p):w})}else{var v=[];return Ys(m,function(b){return v.push(b)},u,m.table.core).then(function(){return v})}},s)},a.prototype.offset=function(s){var l=this._ctx;return s<=0?this:(l.offset+=s,So(l)?Td(l,function(){var u=s;return function(m,p){return u===0?!0:u===1?(--u,!1):(p(function(){m.advance(u),u=0}),!1)}}):Td(l,function(){var u=s;return function(){return--u<0}}),this)},a.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Td(this._ctx,function(){var l=s;return function(u,m,p){return--l<=0&&m(p),l>=0}},!0),this},a.prototype.until=function(s,l){return Pd(this._ctx,function(u,m,p){return s(u.value)?(m(p),l):!0}),this},a.prototype.first=function(s){return this.limit(1).toArray(function(l){return l[0]}).then(s)},a.prototype.last=function(s){return this.reverse().first(s)},a.prototype.filter=function(s){return Pd(this._ctx,function(l){return s(l.value)}),t0(this._ctx,s),this},a.prototype.and=function(s){return this.filter(s)},a.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},a.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},a.prototype.desc=function(){return this.reverse()},a.prototype.eachKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(u,m){s(m.key,m)})},a.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},a.prototype.eachPrimaryKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(u,m){s(m.primaryKey,m)})},a.prototype.keys=function(s){var l=this._ctx;l.keysOnly=!l.isMatch;var u=[];return this.each(function(m,p){u.push(p.key)}).then(function(){return u}).then(s)},a.prototype.primaryKeys=function(s){var l=this._ctx;if(l.dir==="next"&&So(l,!0)&&l.limit>0)return this._read(function(m){var p=Xs(l,l.table.core.schema);return l.table.core.query({trans:m,values:!1,limit:l.limit,query:{index:p,range:l.range}})}).then(function(m){var p=m.result;return p}).then(s);l.keysOnly=!l.isMatch;var u=[];return this.each(function(m,p){u.push(p.primaryKey)}).then(function(){return u}).then(s)},a.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},a.prototype.firstKey=function(s){return this.limit(1).keys(function(l){return l[0]}).then(s)},a.prototype.lastKey=function(s){return this.reverse().firstKey(s)},a.prototype.distinct=function(){var s=this._ctx,l=s.index&&s.table.schema.idxByName[s.index];if(!l||!l.multi)return this;var u={};return Pd(this._ctx,function(m){var p=m.primaryKey.toString(),_=f(u,p);return u[p]=!0,!_}),this},a.prototype.modify=function(s){var l=this,u=this._ctx;return this._write(function(m){var p;if(typeof s=="function")p=s;else{var _=o(s),v=_.length;p=function(z){for(var H=!1,K=0;K<v;++K){var $=_[K],G=s[$],oe=ue(z,$);G instanceof Oa?(be(z,$,G.execute(oe)),H=!0):oe!==G&&(be(z,$,G),H=!0)}return H}}var b=u.table.core,w=b.schema.primaryKey,O=w.outbound,I=w.extractKey,B=200,q=l.db._options.modifyChunkSize;q&&(typeof q=="object"?B=q[b.name]||q["*"]||200:B=q);var E=[],P=0,N=[],U=function(z,H){var K=H.failures,$=H.numFailures;P+=z-$;for(var G=0,oe=o(K);G<oe.length;G++){var te=oe[G];E.push(K[te])}};return l.clone().primaryKeys().then(function(z){var H=So(u)&&u.limit===1/0&&(typeof s!="function"||s===Ad)&&{index:u.index,range:u.range},K=function($){var G=Math.min(B,z.length-$);return b.getMany({trans:m,keys:z.slice($,$+G),cache:"immutable"}).then(function(oe){for(var te=[],ge=[],Re=O?[]:null,ce=[],Ee=0;Ee<G;++Ee){var ve=oe[Ee],Ue={value:Bt(ve),primKey:z[$+Ee]};p.call(Ue,Ue.value,Ue)!==!1&&(Ue.value==null?ce.push(z[$+Ee]):!O&&$e(I(ve),I(Ue.value))!==0?(ce.push(z[$+Ee]),te.push(Ue.value)):(ge.push(Ue.value),O&&Re.push(z[$+Ee])))}return Promise.resolve(te.length>0&&b.mutate({trans:m,type:"add",values:te}).then(function(pe){for(var Ot in pe.failures)ce.splice(parseInt(Ot),1);U(te.length,pe)})).then(function(){return(ge.length>0||H&&typeof s=="object")&&b.mutate({trans:m,type:"put",keys:Re,values:ge,criteria:H,changeSpec:typeof s!="function"&&s,isAdditionalChunk:$>0}).then(function(pe){return U(ge.length,pe)})}).then(function(){return(ce.length>0||H&&s===Ad)&&b.mutate({trans:m,type:"delete",keys:ce,criteria:H,isAdditionalChunk:$>0}).then(function(pe){return U(ce.length,pe)})}).then(function(){return z.length>$+G&&K($+B)})})};return K(0).then(function(){if(E.length>0)throw new Fs("Error modifying one or more objects",E,P,N);return z.length})})})},a.prototype.delete=function(){var s=this._ctx,l=s.range;return So(s)&&(s.isPrimKey||l.type===3)?this._write(function(u){var m=s.table.core.schema.primaryKey,p=l;return s.table.core.count({trans:u,query:{index:m,range:p}}).then(function(_){return s.table.core.mutate({trans:u,type:"deleteRange",range:p}).then(function(v){var b=v.failures;v.lastResult,v.results;var w=v.numFailures;if(w)throw new Fs("Could not delete some values",Object.keys(b).map(function(O){return b[O]}),_-w);return _-w})})}):this.modify(Ad)},a})(),Ad=function(a,s){return s.value=null};function n0(a){return Ma(r0.prototype,function(l,u){this.db=a;var m=Hh,p=null;if(u)try{m=u()}catch(w){p=w}var _=l._ctx,v=_.table,b=v.hook.reading.fire;this._ctx={table:v,index:_.index,isPrimKey:!_.index||v.schema.primKey.keyPath&&_.index===v.schema.primKey.name,range:m,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:_.or,valueMapper:b!==Sa?b:null}})}function o0(a,s){return a<s?-1:a===s?0:1}function a0(a,s){return a>s?-1:a===s?0:1}function Bi(a,s,l){var u=a instanceof Gh?new a.Collection(a):a;return u._ctx.error=l?new l(s):new TypeError(s),u}function ko(a){return new a.Collection(a,function(){return Yh("")}).limit(0)}function s0(a){return a==="next"?function(s){return s.toUpperCase()}:function(s){return s.toLowerCase()}}function c0(a){return a==="next"?function(s){return s.toLowerCase()}:function(s){return s.toUpperCase()}}function l0(a,s,l,u,m,p){for(var _=Math.min(a.length,u.length),v=-1,b=0;b<_;++b){var w=s[b];if(w!==u[b])return m(a[b],l[b])<0?a.substr(0,b)+l[b]+l.substr(b+1):m(a[b],u[b])<0?a.substr(0,b)+u[b]+l.substr(b+1):v>=0?a.substr(0,v)+s[v]+l.substr(v+1):null;m(a[b],w)<0&&(v=b)}return _<u.length&&p==="next"?a+l.substr(a.length):_<a.length&&p==="prev"?a.substr(0,l.length):v<0?null:a.substr(0,v)+u[v]+l.substr(v+1)}function Gs(a,s,l,u){var m,p,_,v,b,w,O,I=l.length;if(!l.every(function(P){return typeof P=="string"}))return Bi(a,jh);function B(P){m=s0(P),p=c0(P),_=P==="next"?o0:a0;var N=l.map(function(U){return{lower:p(U),upper:m(U)}}).sort(function(U,z){return _(U.lower,z.lower)});v=N.map(function(U){return U.upper}),b=N.map(function(U){return U.lower}),w=P,O=P==="next"?"":u}B("next");var q=new a.Collection(a,function(){return Yr(v[0],b[I-1]+u)});q._ondirectionchange=function(P){B(P)};var E=0;return q._addAlgorithm(function(P,N,U){var z=P.key;if(typeof z!="string")return!1;var H=p(z);if(s(H,b,E))return!0;for(var K=null,$=E;$<I;++$){var G=l0(z,H,v[$],b[$],_,w);G===null&&K===null?E=$+1:(K===null||_(K,G)>0)&&(K=G)}return N(K!==null?function(){P.continue(K+O)}:U),!1}),q}function Yr(a,s,l,u){return{type:2,lower:a,upper:s,lowerOpen:l,upperOpen:u}}function Yh(a){return{type:1,lower:a,upper:a}}var Gh=(function(){function a(){}return Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),a.prototype.between=function(s,l,u,m){u=u!==!1,m=m===!0;try{return this._cmp(s,l)>0||this._cmp(s,l)===0&&(u||m)&&!(u&&m)?ko(this):new this.Collection(this,function(){return Yr(s,l,!u,!m)})}catch{return Bi(this,Er)}},a.prototype.equals=function(s){return s==null?Bi(this,Er):new this.Collection(this,function(){return Yh(s)})},a.prototype.above=function(s){return s==null?Bi(this,Er):new this.Collection(this,function(){return Yr(s,void 0,!0)})},a.prototype.aboveOrEqual=function(s){return s==null?Bi(this,Er):new this.Collection(this,function(){return Yr(s,void 0,!1)})},a.prototype.below=function(s){return s==null?Bi(this,Er):new this.Collection(this,function(){return Yr(void 0,s,!1,!0)})},a.prototype.belowOrEqual=function(s){return s==null?Bi(this,Er):new this.Collection(this,function(){return Yr(void 0,s)})},a.prototype.startsWith=function(s){return typeof s!="string"?Bi(this,jh):this.between(s,s+zn,!0,!0)},a.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Gs(this,function(l,u){return l.indexOf(u[0])===0},[s],zn)},a.prototype.equalsIgnoreCase=function(s){return Gs(this,function(l,u){return l===u[0]},[s],"")},a.prototype.anyOfIgnoreCase=function(){var s=rr.apply(Ei,arguments);return s.length===0?ko(this):Gs(this,function(l,u){return u.indexOf(l)!==-1},s,"")},a.prototype.startsWithAnyOfIgnoreCase=function(){var s=rr.apply(Ei,arguments);return s.length===0?ko(this):Gs(this,function(l,u){return u.some(function(m){return l.indexOf(m)===0})},s,zn)},a.prototype.anyOf=function(){var s=this,l=rr.apply(Ei,arguments),u=this._cmp;try{l.sort(u)}catch{return Bi(this,Er)}if(l.length===0)return ko(this);var m=new this.Collection(this,function(){return Yr(l[0],l[l.length-1])});m._ondirectionchange=function(_){u=_==="next"?s._ascending:s._descending,l.sort(u)};var p=0;return m._addAlgorithm(function(_,v,b){for(var w=_.key;u(w,l[p])>0;)if(++p,p===l.length)return v(b),!1;return u(w,l[p])===0?!0:(v(function(){_.continue(l[p])}),!1)}),m},a.prototype.notEqual=function(s){return this.inAnyRange([[Md,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},a.prototype.noneOf=function(){var s=rr.apply(Ei,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Bi(this,Er)}var l=s.reduce(function(u,m){return u?u.concat([[u[u.length-1][1],m]]):[[Md,m]]},null);return l.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},a.prototype.inAnyRange=function(s,l){var u=this,m=this._cmp,p=this._ascending,_=this._descending,v=this._min,b=this._max;if(s.length===0)return ko(this);if(!s.every(function($){return $[0]!==void 0&&$[1]!==void 0&&p($[0],$[1])<=0}))return Bi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var w=!l||l.includeLowers!==!1,O=l&&l.includeUppers===!0;function I($,G){for(var oe=0,te=$.length;oe<te;++oe){var ge=$[oe];if(m(G[0],ge[1])<0&&m(G[1],ge[0])>0){ge[0]=v(ge[0],G[0]),ge[1]=b(ge[1],G[1]);break}}return oe===te&&$.push(G),$}var B=p;function q($,G){return B($[0],G[0])}var E;try{E=s.reduce(I,[]),E.sort(q)}catch{return Bi(this,Er)}var P=0,N=O?function($){return p($,E[P][1])>0}:function($){return p($,E[P][1])>=0},U=w?function($){return _($,E[P][0])>0}:function($){return _($,E[P][0])>=0};function z($){return!N($)&&!U($)}var H=N,K=new this.Collection(this,function(){return Yr(E[0][0],E[E.length-1][1],!w,!O)});return K._ondirectionchange=function($){$==="next"?(H=N,B=p):(H=U,B=_),E.sort(q)},K._addAlgorithm(function($,G,oe){for(var te=$.key;H(te);)if(++P,P===E.length)return G(oe),!1;return z(te)?!0:(u._cmp(te,E[P][1])===0||u._cmp(te,E[P][0])===0||G(function(){B===p?$.continue(E[P][0]):$.continue(E[P][1])}),!1)}),K},a.prototype.startsWithAnyOf=function(){var s=rr.apply(Ei,arguments);return s.every(function(l){return typeof l=="string"})?s.length===0?ko(this):this.inAnyRange(s.map(function(l){return[l,l+zn]})):Bi(this,"startsWithAnyOf() only works with strings")},a})();function d0(a){return Ma(Gh.prototype,function(l,u,m){if(this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:m},this._cmp=this._ascending=$e,this._descending=function(p,_){return $e(_,p)},this._max=function(p,_){return $e(p,_)>0?p:_},this._min=function(p,_){return $e(p,_)<0?p:_},this._IDBKeyRange=a._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})}function mr(a){return wt(function(s){return Ra(s),a(s.target.error),!1})}function Ra(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Pa="storagemutated",Ld="x-storagemutated-1",Gr=Da(null,Pa),u0=(function(){function a(){}return a.prototype._lock=function(){return Oe(!he.global),++this._reculock,this._reculock===1&&!he.global&&(he.lockOwnerFor=this),this},a.prototype._unlock=function(){if(Oe(!he.global),--this._reculock===0)for(he.global||(he.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var s=this._blockedFuncs.shift();try{$n(s[1],s[0])}catch{}}return this},a.prototype._locked=function(){return this._reculock&&he.lockOwnerFor!==this},a.prototype.create=function(s){var l=this;if(!this.mode)return this;var u=this.db.idbdb,m=this.db._state.dbOpenError;if(Oe(!this.idbtrans),!s&&!u)switch(m&&m.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(m);case"MissingAPIError":throw new fe.MissingAPI(m.message,m);default:throw new fe.OpenFailed(m)}if(!this.active)throw new fe.TransactionInactive;return Oe(this._completion._state===null),s=this.idbtrans=s||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):u.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),s.onerror=wt(function(p){Ra(p),l._reject(s.error)}),s.onabort=wt(function(p){Ra(p),l.active&&l._reject(new fe.Abort(s.error)),l.active=!1,l.on("abort").fire(p)}),s.oncomplete=wt(function(){l.active=!1,l._resolve(),"mutatedParts"in s&&Gr.storagemutated.fire(s.mutatedParts)}),this},a.prototype._promise=function(s,l,u){var m=this;if(s==="readwrite"&&this.mode!=="readwrite")return Vt(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return Vt(new fe.TransactionInactive);if(this._locked())return new ne(function(_,v){m._blockedFuncs.push([function(){m._promise(s,l,u).then(_,v)},he])});if(u)return qr(function(){var _=new ne(function(v,b){m._lock();var w=l(v,b,m);w&&w.then&&w.then(v,b)});return _.finally(function(){return m._unlock()}),_._lib=!0,_});var p=new ne(function(_,v){var b=l(_,v,m);b&&b.then&&b.then(_,v)});return p._lib=!0,p},a.prototype._root=function(){return this.parent?this.parent._root():this},a.prototype.waitFor=function(s){var l=this._root(),u=ne.resolve(s);if(l._waitingFor)l._waitingFor=l._waitingFor.then(function(){return u});else{l._waitingFor=u,l._waitingQueue=[];var m=l.idbtrans.objectStore(l.storeNames[0]);(function _(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(m.get(-1/0).onsuccess=_)})()}var p=l._waitingFor;return new ne(function(_,v){u.then(function(b){return l._waitingQueue.push(wt(_.bind(null,b)))},function(b){return l._waitingQueue.push(wt(v.bind(null,b)))}).finally(function(){l._waitingFor===p&&(l._waitingFor=null)})})},a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},a.prototype.table=function(s){var l=this._memoizedTables||(this._memoizedTables={});if(f(l,s))return l[s];var u=this.schema[s];if(!u)throw new fe.NotFound("Table "+s+" not part of transaction");var m=new this.db.Table(s,u,this);return m.core=this.db.core.table(s),l[s]=m,m},a})();function m0(a){return Ma(u0.prototype,function(l,u,m,p,_){var v=this;this.db=a,this.mode=l,this.storeNames=u,this.schema=m,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=Da(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(b,w){v._resolve=b,v._reject=w}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(b){var w=v.active;return v.active=!1,v.on.error.fire(b),v.parent?v.parent._reject(b):w&&v.idbtrans&&v.idbtrans.abort(),Vt(b)})})}function Nd(a,s,l,u,m,p,_){return{name:a,keyPath:s,unique:l,multi:u,auto:m,compound:p,src:(l&&!_?"&":"")+(u?"*":"")+(m?"++":"")+Zh(s)}}function Zh(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Fd(a,s,l){return{name:a,primKey:s,indexes:l,mappedClass:null,idxByName:Qe(l,function(u){return[u.name,u]})}}function h0(a){return a.length===1?a[0]:a}var Ta=function(a){try{return a.only([[]]),Ta=function(){return[[]]},[[]]}catch{return Ta=function(){return zn},zn}};function Bd(a){return a==null?function(){}:typeof a=="string"?p0(a):function(s){return ue(s,a)}}function p0(a){var s=a.split(".");return s.length===1?function(l){return l[a]}:function(l){return ue(l,a)}}function Jh(a){return[].slice.call(a)}var f0=0;function Aa(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function g0(a,s,l){function u(I,B){var q=Jh(I.objectStoreNames);return{schema:{name:I.name,tables:q.map(function(E){return B.objectStore(E)}).map(function(E){var P=E.keyPath,N=E.autoIncrement,U=c(P),z=P==null,H={},K={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:z,compound:U,keyPath:P,autoIncrement:N,unique:!0,extractKey:Bd(P)},indexes:Jh(E.indexNames).map(function($){return E.index($)}).map(function($){var G=$.name,oe=$.unique,te=$.multiEntry,ge=$.keyPath,Re=c(ge),ce={name:G,compound:Re,keyPath:ge,unique:oe,multiEntry:te,extractKey:Bd(ge)};return H[Aa(ge)]=ce,ce}),getIndexByKeyPath:function($){return H[Aa($)]}};return H[":id"]=K.primaryKey,P!=null&&(H[Aa(P)]=K.primaryKey),K})},hasGetAll:q.length>0&&"getAll"in B.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function m(I){if(I.type===3)return null;if(I.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var B=I.lower,q=I.upper,E=I.lowerOpen,P=I.upperOpen,N=B===void 0?q===void 0?null:s.upperBound(q,!!P):q===void 0?s.lowerBound(B,!!E):s.bound(B,q,!!E,!!P);return N}function p(I){var B=I.name;function q(N){var U=N.trans,z=N.type,H=N.keys,K=N.values,$=N.range;return new Promise(function(G,oe){G=wt(G);var te=U.objectStore(B),ge=te.keyPath==null,Re=z==="put"||z==="add";if(!Re&&z!=="delete"&&z!=="deleteRange")throw new Error("Invalid operation type: "+z);var ce=(H||K||{length:1}).length;if(H&&K&&H.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(ce===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});var Ee,ve=[],Ue=[],pe=0,Ot=function(pr){++pe,Ra(pr)};if(z==="deleteRange"){if($.type===4)return G({numFailures:pe,failures:Ue,results:[],lastResult:void 0});$.type===3?ve.push(Ee=te.clear()):ve.push(Ee=te.delete(m($)))}else{var di=Re?ge?[K,H]:[K,null]:[H,null],hr=di[0],Di=di[1];if(Re)for(var Qi=0;Qi<ce;++Qi)ve.push(Ee=Di&&Di[Qi]!==void 0?te[z](hr[Qi],Di[Qi]):te[z](hr[Qi])),Ee.onerror=Ot;else for(var Qi=0;Qi<ce;++Qi)ve.push(Ee=te[z](hr[Qi])),Ee.onerror=Ot}var en=function(pr){var Fa=pr.target.result;ve.forEach(function(nr,lc){return nr.error!=null&&(Ue[lc]=nr.error)}),G({numFailures:pe,failures:Ue,results:z==="delete"?H:ve.map(function(nr){return nr.result}),lastResult:Fa})};Ee.onerror=function(pr){Ot(pr),en(pr)},Ee.onsuccess=en})}function E(N){var U=N.trans,z=N.values,H=N.query,K=N.reverse,$=N.unique;return new Promise(function(G,oe){G=wt(G);var te=H.index,ge=H.range,Re=U.objectStore(B),ce=te.isPrimaryKey?Re:Re.index(te.name),Ee=K?$?"prevunique":"prev":$?"nextunique":"next",ve=z||!("openKeyCursor"in ce)?ce.openCursor(m(ge),Ee):ce.openKeyCursor(m(ge),Ee);ve.onerror=mr(oe),ve.onsuccess=wt(function(Ue){var pe=ve.result;if(!pe){G(null);return}pe.___id=++f0,pe.done=!1;var Ot=pe.continue.bind(pe),di=pe.continuePrimaryKey;di&&(di=di.bind(pe));var hr=pe.advance.bind(pe),Di=function(){throw new Error("Cursor not started")},Qi=function(){throw new Error("Cursor not stopped")};pe.trans=U,pe.stop=pe.continue=pe.continuePrimaryKey=pe.advance=Di,pe.fail=wt(oe),pe.next=function(){var en=this,pr=1;return this.start(function(){return pr--?en.continue():en.stop()}).then(function(){return en})},pe.start=function(en){var pr=new Promise(function(nr,lc){nr=wt(nr),ve.onerror=mr(lc),pe.fail=lc,pe.stop=function(rx){pe.stop=pe.continue=pe.continuePrimaryKey=pe.advance=Qi,nr(rx)}}),Fa=function(){if(ve.result)try{en()}catch(nr){pe.fail(nr)}else pe.done=!0,pe.start=function(){throw new Error("Cursor behind last entry")},pe.stop()};return ve.onsuccess=wt(function(nr){ve.onsuccess=Fa,Fa()}),pe.continue=Ot,pe.continuePrimaryKey=di,pe.advance=hr,Fa(),pr},G(pe)},oe)})}function P(N){return function(U){return new Promise(function(z,H){z=wt(z);var K=U.trans,$=U.values,G=U.limit,oe=U.query,te=G===1/0?void 0:G,ge=oe.index,Re=oe.range,ce=K.objectStore(B),Ee=ge.isPrimaryKey?ce:ce.index(ge.name),ve=m(Re);if(G===0)return z({result:[]});if(N){var Ue=$?Ee.getAll(ve,te):Ee.getAllKeys(ve,te);Ue.onsuccess=function(hr){return z({result:hr.target.result})},Ue.onerror=mr(H)}else{var pe=0,Ot=$||!("openKeyCursor"in Ee)?Ee.openCursor(ve):Ee.openKeyCursor(ve),di=[];Ot.onsuccess=function(hr){var Di=Ot.result;if(!Di)return z({result:di});if(di.push($?Di.value:Di.primaryKey),++pe===G)return z({result:di});Di.continue()},Ot.onerror=mr(H)}})}}return{name:B,schema:I,mutate:q,getMany:function(N){var U=N.trans,z=N.keys;return new Promise(function(H,K){H=wt(H);for(var $=U.objectStore(B),G=z.length,oe=new Array(G),te=0,ge=0,Re,ce=function(pe){var Ot=pe.target;(oe[Ot._pos]=Ot.result)!=null,++ge===te&&H(oe)},Ee=mr(K),ve=0;ve<G;++ve){var Ue=z[ve];Ue!=null&&(Re=$.get(z[ve]),Re._pos=ve,Re.onsuccess=ce,Re.onerror=Ee,++te)}te===0&&H(oe)})},get:function(N){var U=N.trans,z=N.key;return new Promise(function(H,K){H=wt(H);var $=U.objectStore(B),G=$.get(z);G.onsuccess=function(oe){return H(oe.target.result)},G.onerror=mr(K)})},query:P(b),openCursor:E,count:function(N){var U=N.query,z=N.trans,H=U.index,K=U.range;return new Promise(function($,G){var oe=z.objectStore(B),te=H.isPrimaryKey?oe:oe.index(H.name),ge=m(K),Re=ge?te.count(ge):te.count();Re.onsuccess=wt(function(ce){return $(ce.target.result)}),Re.onerror=mr(G)})}}}var _=u(a,l),v=_.schema,b=_.hasGetAll,w=v.tables.map(function(I){return p(I)}),O={};return w.forEach(function(I){return O[I.name]=I}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(I){var B=O[I];if(!B)throw new Error("Table '".concat(I,"' not found"));return O[I]},MIN_KEY:-1/0,MAX_KEY:Ta(s),schema:v}}function _0(a,s){return s.reduce(function(l,u){var m=u.create;return e(e({},l),m(l))},a)}function v0(a,s,l,u){var m=l.IDBKeyRange;l.indexedDB;var p=_0(g0(s,m,u),a.dbcore);return{dbcore:p}}function Zs(a,s){var l=s.db,u=v0(a._middlewares,l,a._deps,s);a.core=u.dbcore,a.tables.forEach(function(m){var p=m.name;a.core.schema.tables.some(function(_){return _.name===p})&&(m.core=a.core.table(p),a[p]instanceof a.Table&&(a[p].core=m.core))})}function Js(a,s,l,u){l.forEach(function(m){var p=u[m];s.forEach(function(_){var v=A(_,m);(!v||"value"in v&&v.value===void 0)&&(_===a.Transaction.prototype||_ instanceof a.Transaction?C(_,m,{get:function(){return this.table(m)},set:function(b){D(this,m,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):_[m]=new a.Table(m,p))})})}function Vd(a,s){s.forEach(function(l){for(var u in l)l[u]instanceof a.Table&&delete l[u]})}function y0(a,s){return a._cfg.version-s._cfg.version}function b0(a,s,l,u){var m=a._dbSchema;l.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=Fd("$meta",tp("")[0],[]),a._storeNames.push("$meta"));var p=a._createTransaction("readwrite",a._storeNames,m);p.create(l),p._completion.catch(u);var _=p._reject.bind(p),v=he.transless||he;qr(function(){if(he.trans=p,he.transless=v,s===0)o(m).forEach(function(b){zd(l,b,m[b].primKey,m[b].indexes)}),Zs(a,l),ne.follow(function(){return a.on.populate.fire(p)}).catch(_);else return Zs(a,l),w0(a,p,s).then(function(b){return C0(a,b,p,l)}).catch(_)})}function x0(a,s){ep(a._dbSchema,s),s.db.version%10===0&&!s.objectStoreNames.contains("$meta")&&s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var l=tc(a,a.idbdb,s);ic(a,a._dbSchema,s);for(var u=$d(l,a._dbSchema),m=function(w){if(w.change.length||w.recreate)return console.warn("Unable to patch indexes of table ".concat(w.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=s.objectStore(w.name);w.add.forEach(function(I){ur&&console.debug("Dexie upgrade patch: Creating missing index ".concat(w.name,".").concat(I.src)),ec(O,I)})},p=0,_=u.change;p<_.length;p++){var v=_[p],b=m(v);if(typeof b=="object")return b.value}}function w0(a,s,l){return s.storeNames.includes("$meta")?s.table("$meta").get("version").then(function(u){return u??l}):ne.resolve(l)}function C0(a,s,l,u){var m=[],p=a._versions,_=a._dbSchema=tc(a,a.idbdb,u),v=p.filter(function(w){return w._cfg.version>=s});if(v.length===0)return ne.resolve();v.forEach(function(w){m.push(function(){var O=_,I=w._cfg.dbschema;ic(a,O,u),ic(a,I,u),_=a._dbSchema=I;var B=$d(O,I);B.add.forEach(function(z){zd(u,z[0],z[1].primKey,z[1].indexes)}),B.change.forEach(function(z){if(z.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var H=u.objectStore(z.name);z.add.forEach(function(K){return ec(H,K)}),z.change.forEach(function(K){H.deleteIndex(K.name),ec(H,K)}),z.del.forEach(function(K){return H.deleteIndex(K)})});var q=w._cfg.contentUpgrade;if(q&&w._cfg.version>s){Zs(a,u),l._memoizedTables={};var E=jt(I);B.del.forEach(function(z){E[z]=O[z]}),Vd(a,[a.Transaction.prototype]),Js(a,[a.Transaction.prototype],o(E),E),l.schema=E;var P=fd(q);P&&wo();var N,U=ne.follow(function(){if(N=q(l),N&&P){var z=Qr.bind(null,null);N.then(z,z)}});return N&&typeof N.then=="function"?ne.resolve(N):U.then(function(){return N})}}),m.push(function(O){var I=w._cfg.dbschema;S0(I,O),Vd(a,[a.Transaction.prototype]),Js(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),l.schema=a._dbSchema}),m.push(function(O){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===w._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(I){return I!=="$meta"})):O.objectStore("$meta").put(w._cfg.version,"version"))})});function b(){return m.length?ne.resolve(m.shift()(l.idbtrans)).then(b):ne.resolve()}return b().then(function(){ep(_,u)})}function $d(a,s){var l={del:[],add:[],change:[]},u;for(u in a)s[u]||l.del.push(u);for(u in s){var m=a[u],p=s[u];if(!m)l.add.push([u,p]);else{var _={name:u,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||m.primKey.auto!==p.primKey.auto)_.recreate=!0,l.change.push(_);else{var v=m.idxByName,b=p.idxByName,w=void 0;for(w in v)b[w]||_.del.push(w);for(w in b){var O=v[w],I=b[w];O?O.src!==I.src&&_.change.push(I):_.add.push(I)}(_.del.length>0||_.add.length>0||_.change.length>0)&&l.change.push(_)}}}return l}function zd(a,s,l,u){var m=a.db.createObjectStore(s,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return u.forEach(function(p){return ec(m,p)}),m}function ep(a,s){o(a).forEach(function(l){s.db.objectStoreNames.contains(l)||(ur&&console.debug("Dexie: Creating missing table",l),zd(s,l,a[l].primKey,a[l].indexes))})}function S0(a,s){[].slice.call(s.db.objectStoreNames).forEach(function(l){return a[l]==null&&s.db.deleteObjectStore(l)})}function ec(a,s){a.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function tc(a,s,l){var u={},m=ae(s.objectStoreNames,0);return m.forEach(function(p){for(var _=l.objectStore(p),v=_.keyPath,b=Nd(Zh(v),v||"",!0,!1,!!_.autoIncrement,v&&typeof v!="string",!0),w=[],O=0;O<_.indexNames.length;++O){var I=_.index(_.indexNames[O]);v=I.keyPath;var B=Nd(I.name,v,!!I.unique,!!I.multiEntry,!1,v&&typeof v!="string",!1);w.push(B)}u[p]=Fd(p,b,w)}),u}function k0(a,s,l){a.verno=s.version/10;var u=a._dbSchema=tc(a,s,l);a._storeNames=ae(s.objectStoreNames,0),Js(a,[a._allTables],o(u),u)}function I0(a,s){var l=tc(a,a.idbdb,s),u=$d(l,a._dbSchema);return!(u.add.length||u.change.some(function(m){return m.add.length||m.change.length}))}function ic(a,s,l){for(var u=l.db.objectStoreNames,m=0;m<u.length;++m){var p=u[m],_=l.objectStore(p);a._hasGetAll="getAll"in _;for(var v=0;v<_.indexNames.length;++v){var b=_.indexNames[v],w=_.index(b).keyPath,O=typeof w=="string"?w:"["+ae(w).join("+")+"]";if(s[p]){var I=s[p].idxByName[O];I&&(I.name=b,delete s[p].idxByName[O],s[p].idxByName[b]=I)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function tp(a){return a.split(",").map(function(s,l){s=s.trim();var u=s.replace(/([&*]|\+\+)/g,""),m=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Nd(u,m||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),c(m),l===0)})}var E0=(function(){function a(){}return a.prototype._parseStoresSpec=function(s,l){o(s).forEach(function(u){if(s[u]!==null){var m=tp(s[u]),p=m.shift();if(p.unique=!0,p.multi)throw new fe.Schema("Primary key cannot be multi-valued");m.forEach(function(_){if(_.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!_.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),l[u]=Fd(u,p,m)}})},a.prototype.stores=function(s){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,s):s;var u=l._versions,m={},p={};return u.forEach(function(_){d(m,_._cfg.storesSource),p=_._cfg.dbschema={},_._parseStoresSpec(m,p)}),l._dbSchema=p,Vd(l,[l._allTables,l,l.Transaction.prototype]),Js(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],o(p),p),l._storeNames=o(p),this},a.prototype.upgrade=function(s){return this._cfg.contentUpgrade=vd(this._cfg.contentUpgrade||st,s),this},a})();function D0(a){return Ma(E0.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function jd(a,s){var l=a._dbNamesDB;return l||(l=a._dbNamesDB=new Dr(qs,{addons:[],indexedDB:a,IDBKeyRange:s}),l.version(1).stores({dbnames:"name"})),l.table("dbnames")}function Hd(a){return a&&typeof a.databases=="function"}function M0(a){var s=a.indexedDB,l=a.IDBKeyRange;return Hd(s)?Promise.resolve(s.databases()).then(function(u){return u.map(function(m){return m.name}).filter(function(m){return m!==qs})}):jd(s,l).toCollection().primaryKeys()}function O0(a,s){var l=a.indexedDB,u=a.IDBKeyRange;!Hd(l)&&s!==qs&&jd(l,u).put({name:s}).catch(st)}function R0(a,s){var l=a.indexedDB,u=a.IDBKeyRange;!Hd(l)&&s!==qs&&jd(l,u).delete(s).catch(st)}function Ud(a){return qr(function(){return he.letThrough=!0,a()})}function P0(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var s;return new Promise(function(l){var u=function(){return indexedDB.databases().finally(l)};s=setInterval(u,100),u()}).finally(function(){return clearInterval(s)})}var Wd;function Kd(a){return!("from"in a)}var li=function(a,s){if(this)d(this,arguments.length?{d:1,from:a,to:arguments.length>1?s:a}:{d:0});else{var l=new li;return a&&"d"in a&&d(l,a),l}};y(li.prototype,(Wd={add:function(a){return Na(this,a),this},addKey:function(a){return La(this,a,a),this},addKeys:function(a){var s=this;return a.forEach(function(l){return La(s,l,l)}),this},hasKey:function(a){var s=rc(this).next(a).value;return s&&$e(s.from,a)<=0&&$e(s.to,a)>=0}},Wd[Wt]=function(){return rc(this)},Wd));function La(a,s,l){var u=$e(s,l);if(!isNaN(u)){if(u>0)throw RangeError();if(Kd(a))return d(a,{from:s,to:l,d:1});var m=a.l,p=a.r;if($e(l,a.from)<0)return m?La(m,s,l):a.l={from:s,to:l,d:1,l:null,r:null},rp(a);if($e(s,a.to)>0)return p?La(p,s,l):a.r={from:s,to:l,d:1,l:null,r:null},rp(a);$e(s,a.from)<0&&(a.from=s,a.l=null,a.d=p?p.d+1:1),$e(l,a.to)>0&&(a.to=l,a.r=null,a.d=a.l?a.l.d+1:1);var _=!a.r;m&&!a.l&&Na(a,m),p&&_&&Na(a,p)}}function Na(a,s){function l(u,m){var p=m.from,_=m.to,v=m.l,b=m.r;La(u,p,_),v&&l(u,v),b&&l(u,b)}Kd(s)||l(a,s)}function ip(a,s){var l=rc(s),u=l.next();if(u.done)return!1;for(var m=u.value,p=rc(a),_=p.next(m.from),v=_.value;!u.done&&!_.done;){if($e(v.from,m.to)<=0&&$e(v.to,m.from)>=0)return!0;$e(m.from,v.from)<0?m=(u=l.next(v.from)).value:v=(_=p.next(m.from)).value}return!1}function rc(a){var s=Kd(a)?null:{s:0,n:a};return{next:function(l){for(var u=arguments.length>0;s;)switch(s.s){case 0:if(s.s=1,u)for(;s.n.l&&$e(l,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!u||$e(l,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function rp(a){var s,l,u=(((s=a.r)===null||s===void 0?void 0:s.d)||0)-(((l=a.l)===null||l===void 0?void 0:l.d)||0),m=u>1?"r":u<-1?"l":"";if(m){var p=m==="r"?"l":"r",_=e({},a),v=a[m];a.from=v.from,a.to=v.to,a[m]=v[m],_[m]=v[p],a[p]=_,_.d=np(_)}a.d=np(a)}function np(a){var s=a.r,l=a.l;return(s?l?Math.max(s.d,l.d):s.d:l?l.d:0)+1}function nc(a,s){return o(s).forEach(function(l){a[l]?Na(a[l],s[l]):a[l]=Ft(s[l])}),a}function qd(a,s){return a.all||s.all||Object.keys(a).some(function(l){return s[l]&&ip(s[l],a[l])})}var Hn={},Qd={},Xd=!1;function oc(a,s){nc(Qd,a),Xd||(Xd=!0,setTimeout(function(){Xd=!1;var l=Qd;Qd={},Yd(l,!1)},0))}function Yd(a,s){s===void 0&&(s=!1);var l=new Set;if(a.all)for(var u=0,m=Object.values(Hn);u<m.length;u++){var p=m[u];op(p,a,l,s)}else for(var _ in a){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(_);if(v){var b=v[1],w=v[2],p=Hn["idb://".concat(b,"/").concat(w)];p&&op(p,a,l,s)}}l.forEach(function(O){return O()})}function op(a,s,l,u){for(var m=[],p=0,_=Object.entries(a.queries.query);p<_.length;p++){for(var v=_[p],b=v[0],w=v[1],O=[],I=0,B=w;I<B.length;I++){var q=B[I];qd(s,q.obsSet)?q.subscribers.forEach(function(U){return l.add(U)}):u&&O.push(q)}u&&m.push([b,O])}if(u)for(var E=0,P=m;E<P.length;E++){var N=P[E],b=N[0],O=N[1];a.queries.query[b]=O}}function T0(a){var s=a._state,l=a._deps.indexedDB;if(s.isBeingOpened||a.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?Vt(s.dbOpenError):a});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var u=s.openCanceller,m=Math.round(a.verno*10),p=!1;function _(){if(s.openCanceller!==u)throw new fe.DatabaseClosed("db.open() was cancelled")}var v=s.dbReadyResolve,b=null,w=!1,O=function(){return new ne(function(I,B){if(_(),!l)throw new fe.MissingAPI;var q=a.name,E=s.autoSchema||!m?l.open(q):l.open(q,m);if(!E)throw new fe.MissingAPI;E.onerror=mr(B),E.onblocked=wt(a._fireOnBlocked),E.onupgradeneeded=wt(function(P){if(b=E.transaction,s.autoSchema&&!a._options.allowEmptyDB){E.onerror=Ra,b.abort(),E.result.close();var N=l.deleteDatabase(q);N.onsuccess=N.onerror=wt(function(){B(new fe.NoSuchDatabase("Database ".concat(q," doesnt exist")))})}else{b.onerror=mr(B);var U=P.oldVersion>Math.pow(2,62)?0:P.oldVersion;w=U<1,a.idbdb=E.result,p&&x0(a,b),b0(a,U/10,b,B)}},B),E.onsuccess=wt(function(){b=null;var P=a.idbdb=E.result,N=ae(P.objectStoreNames);if(N.length>0)try{var U=P.transaction(h0(N),"readonly");if(s.autoSchema)k0(a,P,U);else if(ic(a,a._dbSchema,U),!I0(a,U)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),m=P.version+1,p=!0,I(O());Zs(a,U)}catch{}Co.push(a),P.onversionchange=wt(function(z){s.vcFired=!0,a.on("versionchange").fire(z)}),P.onclose=wt(function(z){a.on("close").fire(z)}),w&&O0(a._deps,q),I()},B)}).catch(function(I){switch(I?.name){case"UnknownError":if(s.PR1398_maxLoop>0)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(m>0)return m=0,O();break}return ne.reject(I)})};return ne.race([u,(typeof navigator>"u"?ne.resolve():P0()).then(O)]).then(function(){return _(),s.onReadyBeingFired=[],ne.resolve(Ud(function(){return a.on.ready.fire(a.vip)})).then(function I(){if(s.onReadyBeingFired.length>0){var B=s.onReadyBeingFired.reduce(vd,st);return s.onReadyBeingFired=[],ne.resolve(Ud(function(){return B(a.vip)})).then(I)}})}).finally(function(){s.openCanceller===u&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(I){s.dbOpenError=I;try{b&&b.abort()}catch{}return u===s.openCanceller&&a._close(),Vt(I)}).finally(function(){s.openComplete=!0,v()}).then(function(){if(w){var I={};a.tables.forEach(function(B){B.schema.indexes.forEach(function(q){q.name&&(I["idb://".concat(a.name,"/").concat(B.name,"/").concat(q.name)]=new li(-1/0,[[[]]]))}),I["idb://".concat(a.name,"/").concat(B.name,"/")]=I["idb://".concat(a.name,"/").concat(B.name,"/:dels")]=new li(-1/0,[[[]]])}),Gr(Pa).fire(I),Yd(I,!0)}return a})}function Gd(a){var s=function(_){return a.next(_)},l=function(_){return a.throw(_)},u=p(s),m=p(l);function p(_){return function(v){var b=_(v),w=b.value;return b.done?w:!w||typeof w.then!="function"?c(w)?Promise.all(w).then(u,m):u(w):w.then(u,m)}}return p(s)()}function A0(a,s,l){var u=arguments.length;if(u<2)throw new fe.InvalidArgument("Too few arguments");for(var m=new Array(u-1);--u;)m[u-1]=arguments[u];l=m.pop();var p=He(m);return[a,p,l]}function ap(a,s,l,u,m){return ne.resolve().then(function(){var p=he.transless||he,_=a._createTransaction(s,l,a._dbSchema,u);_.explicit=!0;var v={trans:_,transless:p};if(u)_.idbtrans=u.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,a._state.PR1398_maxLoop=3}catch(I){return I.name===_d.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),a.close({disableAutoOpen:!1}),a.open().then(function(){return ap(a,s,l,null,m)})):Vt(I)}var b=fd(m);b&&wo();var w,O=ne.follow(function(){if(w=m.call(_,_),w)if(b){var I=Qr.bind(null,null);w.then(I,I)}else typeof w.next=="function"&&typeof w.throw=="function"&&(w=Gd(w))},v);return(w&&typeof w.then=="function"?ne.resolve(w).then(function(I){return _.active?I:Vt(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):O.then(function(){return w})).then(function(I){return u&&_._resolve(),_._completion.then(function(){return I})}).catch(function(I){return _._reject(I),Vt(I)})})}function ac(a,s,l){for(var u=c(a)?a.slice():[a],m=0;m<l;++m)u.push(s);return u}function L0(a){return e(e({},a),{table:function(s){var l=a.table(s),u=l.schema,m={},p=[];function _(P,N,U){var z=Aa(P),H=m[z]=m[z]||[],K=P==null?0:typeof P=="string"?1:P.length,$=N>0,G=e(e({},U),{name:$?"".concat(z,"(virtual-from:").concat(U.name,")"):U.name,lowLevelIndex:U,isVirtual:$,keyTail:N,keyLength:K,extractKey:Bd(P),unique:!$&&U.unique});if(H.push(G),G.isPrimaryKey||p.push(G),K>1){var oe=K===2?P[0]:P.slice(0,K-1);_(oe,N+1,U)}return H.sort(function(te,ge){return te.keyTail-ge.keyTail}),G}var v=_(u.primaryKey.keyPath,0,u.primaryKey);m[":id"]=[v];for(var b=0,w=u.indexes;b<w.length;b++){var O=w[b];_(O.keyPath,0,O)}function I(P){var N=m[Aa(P)];return N&&N[0]}function B(P,N){return{type:P.type===1?2:P.type,lower:ac(P.lower,P.lowerOpen?a.MAX_KEY:a.MIN_KEY,N),lowerOpen:!0,upper:ac(P.upper,P.upperOpen?a.MIN_KEY:a.MAX_KEY,N),upperOpen:!0}}function q(P){var N=P.query.index;return N.isVirtual?e(e({},P),{query:{index:N.lowLevelIndex,range:B(P.query.range,N.keyTail)}}):P}var E=e(e({},l),{schema:e(e({},u),{primaryKey:v,indexes:p,getIndexByKeyPath:I}),count:function(P){return l.count(q(P))},query:function(P){return l.query(q(P))},openCursor:function(P){var N=P.query.index,U=N.keyTail,z=N.isVirtual,H=N.keyLength;if(!z)return l.openCursor(P);function K($){function G(te){te!=null?$.continue(ac(te,P.reverse?a.MAX_KEY:a.MIN_KEY,U)):P.unique?$.continue($.key.slice(0,H).concat(P.reverse?a.MIN_KEY:a.MAX_KEY,U)):$.continue()}var oe=Object.create($,{continue:{value:G},continuePrimaryKey:{value:function(te,ge){$.continuePrimaryKey(ac(te,a.MAX_KEY,U),ge)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var te=$.key;return H===1?te[0]:te.slice(0,H)}},value:{get:function(){return $.value}}});return oe}return l.openCursor(q(P)).then(function($){return $&&K($)})}});return E}})}var N0={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:L0};function Zd(a,s,l,u){return l=l||{},u=u||"",o(a).forEach(function(m){if(!f(s,m))l[u+m]=void 0;else{var p=a[m],_=s[m];if(typeof p=="object"&&typeof _=="object"&&p&&_){var v=bt(p),b=bt(_);v!==b?l[u+m]=s[m]:v==="Object"?Zd(p,_,l,u+m+"."):p!==_&&(l[u+m]=s[m])}else p!==_&&(l[u+m]=s[m])}}),o(s).forEach(function(m){f(a,m)||(l[u+m]=s[m])}),l}function Jd(a,s){return s.type==="delete"?s.keys:s.keys||s.values.map(a.extractKey)}var F0={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return e(e({},a),{table:function(s){var l=a.table(s),u=l.schema.primaryKey,m=e(e({},l),{mutate:function(p){var _=he.trans,v=_.table(s).hook,b=v.deleting,w=v.creating,O=v.updating;switch(p.type){case"add":if(w.fire===st)break;return _._promise("readwrite",function(){return I(p)},!0);case"put":if(w.fire===st&&O.fire===st)break;return _._promise("readwrite",function(){return I(p)},!0);case"delete":if(b.fire===st)break;return _._promise("readwrite",function(){return I(p)},!0);case"deleteRange":if(b.fire===st)break;return _._promise("readwrite",function(){return B(p)},!0)}return l.mutate(p);function I(E){var P=he.trans,N=E.keys||Jd(u,E);if(!N)throw new Error("Keys missing");return E=E.type==="add"||E.type==="put"?e(e({},E),{keys:N}):e({},E),E.type!=="delete"&&(E.values=i([],E.values,!0)),E.keys&&(E.keys=i([],E.keys,!0)),B0(l,E,N).then(function(U){var z=N.map(function(H,K){var $=U[K],G={onerror:null,onsuccess:null};if(E.type==="delete")b.fire.call(G,H,$,P);else if(E.type==="add"||$===void 0){var oe=w.fire.call(G,H,E.values[K],P);H==null&&oe!=null&&(H=oe,E.keys[K]=H,u.outbound||be(E.values[K],u.keyPath,H))}else{var te=Zd($,E.values[K]),ge=O.fire.call(G,te,H,$,P);if(ge){var Re=E.values[K];Object.keys(ge).forEach(function(ce){f(Re,ce)?Re[ce]=ge[ce]:be(Re,ce,ge[ce])})}}return G});return l.mutate(E).then(function(H){for(var K=H.failures,$=H.results,G=H.numFailures,oe=H.lastResult,te=0;te<N.length;++te){var ge=$?$[te]:N[te],Re=z[te];ge==null?Re.onerror&&Re.onerror(K[te]):Re.onsuccess&&Re.onsuccess(E.type==="put"&&U[te]?E.values[te]:ge)}return{failures:K,results:$,numFailures:G,lastResult:oe}}).catch(function(H){return z.forEach(function(K){return K.onerror&&K.onerror(H)}),Promise.reject(H)})})}function B(E){return q(E.trans,E.range,1e4)}function q(E,P,N){return l.query({trans:E,values:!1,query:{index:u,range:P},limit:N}).then(function(U){var z=U.result;return I({type:"delete",keys:z,trans:E}).then(function(H){return H.numFailures>0?Promise.reject(H.failures[0]):z.length<N?{failures:[],numFailures:0,lastResult:void 0}:q(E,e(e({},P),{lower:z[z.length-1],lowerOpen:!0}),N)})})}}});return m}})}};function B0(a,s,l){return s.type==="add"?Promise.resolve([]):a.getMany({trans:s.trans,keys:l,cache:"immutable"})}function sp(a,s,l){try{if(!s||s.keys.length<a.length)return null;for(var u=[],m=0,p=0;m<s.keys.length&&p<a.length;++m)$e(s.keys[m],a[p])===0&&(u.push(l?Bt(s.values[m]):s.values[m]),++p);return u.length===a.length?u:null}catch{return null}}var V0={stack:"dbcore",level:-1,create:function(a){return{table:function(s){var l=a.table(s);return e(e({},l),{getMany:function(u){if(!u.cache)return l.getMany(u);var m=sp(u.keys,u.trans._cache,u.cache==="clone");return m?ne.resolve(m):l.getMany(u).then(function(p){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?Bt(p):p},p})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),l.mutate(u)}})}}}};function cp(a,s){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function lp(a,s){switch(a){case"query":return s.values&&!s.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var $0={stack:"dbcore",level:0,name:"Observability",create:function(a){var s=a.schema.name,l=new li(a.MIN_KEY,a.MAX_KEY);return e(e({},a),{transaction:function(u,m,p){if(he.subscr&&m!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(he.querier));return a.transaction(u,m,p)},table:function(u){var m=a.table(u),p=m.schema,_=p.primaryKey,v=p.indexes,b=_.extractKey,w=_.outbound,O=_.autoIncrement&&v.filter(function(E){return E.compound&&E.keyPath.includes(_.keyPath)}),I=e(e({},m),{mutate:function(E){var P,N,U=E.trans,z=E.mutatedParts||(E.mutatedParts={}),H=function(ve){var Ue="idb://".concat(s,"/").concat(u,"/").concat(ve);return z[Ue]||(z[Ue]=new li)},K=H(""),$=H(":dels"),G=E.type,oe=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[Jd(_,E).filter(function(ve){return ve}),E.values]:[],te=oe[0],ge=oe[1],Re=E.trans._cache;if(c(te)){K.addKeys(te);var ce=G==="delete"||te.length===ge.length?sp(te,Re):null;ce||$.addKeys(te),(ce||ge)&&z0(H,p,ce,ge)}else if(te){var Ee={from:(P=te.lower)!==null&&P!==void 0?P:a.MIN_KEY,to:(N=te.upper)!==null&&N!==void 0?N:a.MAX_KEY};$.add(Ee),K.add(Ee)}else K.add(l),$.add(l),p.indexes.forEach(function(ve){return H(ve.name).add(l)});return m.mutate(E).then(function(ve){return te&&(E.type==="add"||E.type==="put")&&(K.addKeys(ve.results),O&&O.forEach(function(Ue){for(var pe=E.values.map(function(Di){return Ue.extractKey(Di)}),Ot=Ue.keyPath.findIndex(function(Di){return Di===_.keyPath}),di=0,hr=ve.results.length;di<hr;++di)pe[di][Ot]=ve.results[di];H(Ue.name).addKeys(pe)})),U.mutatedParts=nc(U.mutatedParts||{},z),ve})}}),B=function(E){var P,N,U=E.query,z=U.index,H=U.range;return[z,new li((P=H.lower)!==null&&P!==void 0?P:a.MIN_KEY,(N=H.upper)!==null&&N!==void 0?N:a.MAX_KEY)]},q={get:function(E){return[_,new li(E.key)]},getMany:function(E){return[_,new li().addKeys(E.keys)]},count:B,query:B,openCursor:B};return o(q).forEach(function(E){I[E]=function(P){var N=he.subscr,U=!!N,z=cp(he,m)&&lp(E,P),H=z?P.obsSet={}:N;if(U){var K=function(ce){var Ee="idb://".concat(s,"/").concat(u,"/").concat(ce);return H[Ee]||(H[Ee]=new li)},$=K(""),G=K(":dels"),oe=q[E](P),te=oe[0],ge=oe[1];if(E==="query"&&te.isPrimaryKey&&!P.values?G.add(ge):K(te.name||"").add(ge),!te.isPrimaryKey)if(E==="count")G.add(l);else{var Re=E==="query"&&w&&P.values&&m.query(e(e({},P),{values:!1}));return m[E].apply(this,arguments).then(function(ce){if(E==="query"){if(w&&P.values)return Re.then(function(pe){var Ot=pe.result;return $.addKeys(Ot),ce});var Ee=P.values?ce.result.map(b):ce.result;P.values?$.addKeys(Ee):G.addKeys(Ee)}else if(E==="openCursor"){var ve=ce,Ue=P.values;return ve&&Object.create(ve,{key:{get:function(){return G.addKey(ve.primaryKey),ve.key}},primaryKey:{get:function(){var pe=ve.primaryKey;return G.addKey(pe),pe}},value:{get:function(){return Ue&&$.addKey(ve.primaryKey),ve.value}}})}return ce})}}return m[E].apply(this,arguments)}}),I}})}};function z0(a,s,l,u){function m(p){var _=a(p.name||"");function v(w){return w!=null?p.extractKey(w):null}var b=function(w){return p.multiEntry&&c(w)?w.forEach(function(O){return _.addKey(O)}):_.addKey(w)};(l||u).forEach(function(w,O){var I=l&&v(l[O]),B=u&&v(u[O]);$e(I,B)!==0&&(I!=null&&b(I),B!=null&&b(B))})}s.indexes.forEach(m)}function dp(a,s,l){if(l.numFailures===0)return s;if(s.type==="deleteRange")return null;var u=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1;if(l.numFailures===u)return null;var m=e({},s);return c(m.keys)&&(m.keys=m.keys.filter(function(p,_){return!(_ in l.failures)})),"values"in m&&c(m.values)&&(m.values=m.values.filter(function(p,_){return!(_ in l.failures)})),m}function j0(a,s){return s.lower===void 0?!0:s.lowerOpen?$e(a,s.lower)>0:$e(a,s.lower)>=0}function H0(a,s){return s.upper===void 0?!0:s.upperOpen?$e(a,s.upper)<0:$e(a,s.upper)<=0}function eu(a,s){return j0(a,s)&&H0(a,s)}function up(a,s,l,u,m,p){if(!l||l.length===0)return a;var _=s.query.index,v=_.multiEntry,b=s.query.range,w=u.schema.primaryKey,O=w.extractKey,I=_.extractKey,B=(_.lowLevelIndex||_).extractKey,q=l.reduce(function(E,P){var N=E,U=[];if(P.type==="add"||P.type==="put")for(var z=new li,H=P.values.length-1;H>=0;--H){var K=P.values[H],$=O(K);if(!z.hasKey($)){var G=I(K);(v&&c(G)?G.some(function(ce){return eu(ce,b)}):eu(G,b))&&(z.addKey($),U.push(K))}}switch(P.type){case"add":{var oe=new li().addKeys(s.values?E.map(function(ce){return O(ce)}):E);N=E.concat(s.values?U.filter(function(ce){var Ee=O(ce);return oe.hasKey(Ee)?!1:(oe.addKey(Ee),!0)}):U.map(function(ce){return O(ce)}).filter(function(ce){return oe.hasKey(ce)?!1:(oe.addKey(ce),!0)}));break}case"put":{var te=new li().addKeys(P.values.map(function(ce){return O(ce)}));N=E.filter(function(ce){return!te.hasKey(s.values?O(ce):ce)}).concat(s.values?U:U.map(function(ce){return O(ce)}));break}case"delete":var ge=new li().addKeys(P.keys);N=E.filter(function(ce){return!ge.hasKey(s.values?O(ce):ce)});break;case"deleteRange":var Re=P.range;N=E.filter(function(ce){return!eu(O(ce),Re)});break}return N},a);return q===a?a:(q.sort(function(E,P){return $e(B(E),B(P))||$e(O(E),O(P))}),s.limit&&s.limit<1/0&&(q.length>s.limit?q.length=s.limit:a.length===s.limit&&q.length<s.limit&&(m.dirty=!0)),p?Object.freeze(q):q)}function mp(a,s){return $e(a.lower,s.lower)===0&&$e(a.upper,s.upper)===0&&!!a.lowerOpen==!!s.lowerOpen&&!!a.upperOpen==!!s.upperOpen}function U0(a,s,l,u){if(a===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;var m=$e(a,s);if(m===0){if(l&&u)return 0;if(l)return 1;if(u)return-1}return m}function W0(a,s,l,u){if(a===void 0)return s!==void 0?1:0;if(s===void 0)return-1;var m=$e(a,s);if(m===0){if(l&&u)return 0;if(l)return-1;if(u)return 1}return m}function K0(a,s){return U0(a.lower,s.lower,a.lowerOpen,s.lowerOpen)<=0&&W0(a.upper,s.upper,a.upperOpen,s.upperOpen)>=0}function q0(a,s,l,u){var m=Hn["idb://".concat(a,"/").concat(s)];if(!m)return[];var p=m.queries[l];if(!p)return[null,!1,m,null];var _=u.query?u.query.index.name:null,v=p[_||""];if(!v)return[null,!1,m,null];switch(l){case"query":var b=v.find(function(I){return I.req.limit===u.limit&&I.req.values===u.values&&mp(I.req.query.range,u.query.range)});if(b)return[b,!0,m,v];var w=v.find(function(I){var B="limit"in I.req?I.req.limit:1/0;return B>=u.limit&&(u.values?I.req.values:!0)&&K0(I.req.query.range,u.query.range)});return[w,!1,m,v];case"count":var O=v.find(function(I){return mp(I.req.query.range,u.query.range)});return[O,!!O,m,v]}}function Q0(a,s,l,u){a.subscribers.add(l),u.addEventListener("abort",function(){a.subscribers.delete(l),a.subscribers.size===0&&X0(a,s)})}function X0(a,s){setTimeout(function(){a.subscribers.size===0&&xt(s,a)},3e3)}var Y0={stack:"dbcore",level:0,name:"Cache",create:function(a){var s=a.schema.name,l=e(e({},a),{transaction:function(u,m,p){var _=a.transaction(u,m,p);if(m==="readwrite"){var v=new AbortController,b=v.signal,w=function(O){return function(){if(v.abort(),m==="readwrite"){for(var I=new Set,B=0,q=u;B<q.length;B++){var E=q[B],P=Hn["idb://".concat(s,"/").concat(E)];if(P){var N=a.table(E),U=P.optimisticOps.filter(function(Ue){return Ue.trans===_});if(_._explicit&&O&&_.mutatedParts)for(var z=0,H=Object.values(P.queries.query);z<H.length;z++)for(var K=H[z],$=0,G=K.slice();$<G.length;$++){var oe=G[$];qd(oe.obsSet,_.mutatedParts)&&(xt(K,oe),oe.subscribers.forEach(function(Ue){return I.add(Ue)}))}else if(U.length>0){P.optimisticOps=P.optimisticOps.filter(function(Ue){return Ue.trans!==_});for(var te=0,ge=Object.values(P.queries.query);te<ge.length;te++)for(var K=ge[te],Re=0,ce=K.slice();Re<ce.length;Re++){var oe=ce[Re];if(oe.res!=null&&_.mutatedParts)if(O&&!oe.dirty){var Ee=Object.isFrozen(oe.res),ve=up(oe.res,oe.req,U,N,oe,Ee);oe.dirty?(xt(K,oe),oe.subscribers.forEach(function(Ot){return I.add(Ot)})):ve!==oe.res&&(oe.res=ve,oe.promise=ne.resolve({result:ve}))}else oe.dirty&&xt(K,oe),oe.subscribers.forEach(function(Ot){return I.add(Ot)})}}}}I.forEach(function(Ue){return Ue()})}}};_.addEventListener("abort",w(!1),{signal:b}),_.addEventListener("error",w(!1),{signal:b}),_.addEventListener("complete",w(!0),{signal:b})}return _},table:function(u){var m=a.table(u),p=m.schema.primaryKey,_=e(e({},m),{mutate:function(v){var b=he.trans;if(p.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return m.mutate(v);var w=Hn["idb://".concat(s,"/").concat(u)];if(!w)return m.mutate(v);var O=m.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||Jd(p,v).some(function(I){return I==null}))?O.then(function(I){var B=e(e({},v),{values:v.values.map(function(E,P){var N;if(I.failures[P])return E;var U=!((N=p.keyPath)===null||N===void 0)&&N.includes(".")?Bt(E):e({},E);return be(U,p.keyPath,I.results[P]),U})}),q=dp(w,B,I);w.optimisticOps.push(q),queueMicrotask(function(){return v.mutatedParts&&oc(v.mutatedParts)})}):(w.optimisticOps.push(v),v.mutatedParts&&oc(v.mutatedParts),O.then(function(I){if(I.numFailures>0){xt(w.optimisticOps,v);var B=dp(w,v,I);B&&w.optimisticOps.push(B),v.mutatedParts&&oc(v.mutatedParts)}}),O.catch(function(){xt(w.optimisticOps,v),v.mutatedParts&&oc(v.mutatedParts)})),O},query:function(v){var b;if(!cp(he,m)||!lp("query",v))return m.query(v);var w=((b=he.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",O=he,I=O.requery,B=O.signal,q=q0(s,u,"query",v),E=q[0],P=q[1],N=q[2],U=q[3];if(E&&P)E.obsSet=v.obsSet;else{var z=m.query(v).then(function(H){var K=H.result;if(E&&(E.res=K),w){for(var $=0,G=K.length;$<G;++$)Object.freeze(K[$]);Object.freeze(K)}else H.result=Bt(K);return H}).catch(function(H){return U&&E&&xt(U,E),Promise.reject(H)});E={obsSet:v.obsSet,promise:z,subscribers:new Set,type:"query",req:v,dirty:!1},U?U.push(E):(U=[E],N||(N=Hn["idb://".concat(s,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),N.queries.query[v.query.index.name||""]=U)}return Q0(E,U,I,B),E.promise.then(function(H){return{result:up(H.result,v,N?.optimisticOps,m,E,w)}})}});return _}});return l}};function sc(a,s){return new Proxy(a,{get:function(l,u,m){return u==="db"?s:Reflect.get(l,u,m)}})}var Dr=(function(){function a(s,l){var u=this;this._middlewares={},this.verno=0;var m=a.dependencies;this._options=l=e({addons:a.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange};var p=l.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var _={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:st,dbReadyPromise:null,cancelOpen:st,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};_.dbReadyPromise=new ne(function(b){_.dbReadyResolve=b}),_.openCanceller=new ne(function(b,w){_.cancelOpen=w}),this._state=_,this.name=s,this.on=Da(this,"populate","blocked","versionchange","close",{ready:[vd,st]}),this.on.ready.subscribe=se(this.on.ready.subscribe,function(b){return function(w,O){a.vip(function(){var I=u._state;if(I.openComplete)I.dbOpenError||ne.resolve().then(w),O&&b(w);else if(I.onReadyBeingFired)I.onReadyBeingFired.push(w),O&&b(w);else{b(w);var B=u;O||b(function q(){B.on.ready.unsubscribe(w),B.on.ready.unsubscribe(q)})}})}}),this.Collection=n0(this),this.Table=e0(this),this.Transaction=m0(this),this.Version=D0(this),this.WhereClause=d0(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=Ta(l.IDBKeyRange),this._createTransaction=function(b,w,O,I){return new u.Transaction(b,w,O,u._options.chromeTransactionDurability,I)},this._fireOnBlocked=function(b){u.on("blocked").fire(b),Co.filter(function(w){return w.name===u.name&&w!==u&&!w._state.vcFired}).map(function(w){return w.on("versionchange").fire(b)})},this.use(V0),this.use(Y0),this.use($0),this.use(N0),this.use(F0);var v=new Proxy(this,{get:function(b,w,O){if(w==="_vip")return!0;if(w==="table")return function(B){return sc(u.table(B),v)};var I=Reflect.get(b,w,O);return I instanceof qh?sc(I,v):w==="tables"?I.map(function(B){return sc(B,v)}):w==="_createTransaction"?function(){var B=I.apply(this,arguments);return sc(B,v)}:I}});this.vip=v,p.forEach(function(b){return b(u)})}return a.prototype.version=function(s){if(isNaN(s)||s<.1)throw new fe.Type("Given version is not a positive number");if(s=Math.round(s*10)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var l=this._versions,u=l.filter(function(m){return m._cfg.version===s})[0];return u||(u=new this.Version(s),l.push(u),l.sort(y0),u.stores({}),this._state.autoSchema=!1,u)},a.prototype._whenReady=function(s){var l=this;return this.idbdb&&(this._state.openComplete||he.letThrough||this._vip)?s():new ne(function(u,m){if(l._state.openComplete)return m(new fe.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen){m(new fe.DatabaseClosed);return}l.open().catch(st)}l._state.dbReadyPromise.then(u,m)}).then(s)},a.prototype.use=function(s){var l=s.stack,u=s.create,m=s.level,p=s.name;p&&this.unuse({stack:l,name:p});var _=this._middlewares[l]||(this._middlewares[l]=[]);return _.push({stack:l,create:u,level:m??10,name:p}),_.sort(function(v,b){return v.level-b.level}),this},a.prototype.unuse=function(s){var l=s.stack,u=s.name,m=s.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(p){return m?p.create!==m:u?p.name!==u:!1})),this},a.prototype.open=function(){var s=this;return $n(Kr,function(){return T0(s)})},a.prototype._close=function(){var s=this._state,l=Co.indexOf(this);if(l>=0&&Co.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ne(function(u){s.dbReadyResolve=u}),s.openCanceller=new ne(function(u,m){s.cancelOpen=m}))},a.prototype.close=function(s){var l=s===void 0?{disableAutoOpen:!0}:s,u=l.disableAutoOpen,m=this._state;u?(m.isBeingOpened&&m.cancelOpen(new fe.DatabaseClosed),this._close(),m.autoOpen=!1,m.dbOpenError=new fe.DatabaseClosed):(this._close(),m.autoOpen=this._options.autoOpen||m.isBeingOpened,m.openComplete=!1,m.dbOpenError=null)},a.prototype.delete=function(s){var l=this;s===void 0&&(s={disableAutoOpen:!0});var u=arguments.length>0&&typeof arguments[0]!="object",m=this._state;return new ne(function(p,_){var v=function(){l.close(s);var b=l._deps.indexedDB.deleteDatabase(l.name);b.onsuccess=wt(function(){R0(l._deps,l.name),p()}),b.onerror=mr(_),b.onblocked=l._fireOnBlocked};if(u)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(v):v()})},a.prototype.backendDB=function(){return this.idbdb},a.prototype.isOpen=function(){return this.idbdb!==null},a.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},a.prototype.hasFailed=function(){return this._state.dbOpenError!==null},a.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(a.prototype,"tables",{get:function(){var s=this;return o(this._allTables).map(function(l){return s._allTables[l]})},enumerable:!1,configurable:!0}),a.prototype.transaction=function(){var s=A0.apply(this,arguments);return this._transaction.apply(this,s)},a.prototype._transaction=function(s,l,u){var m=this,p=he.trans;(!p||p.db!==this||s.indexOf("!")!==-1)&&(p=null);var _=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");var v,b;try{if(b=l.map(function(O){var I=O instanceof m.Table?O.name:O;if(typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),s=="r"||s===Od)v=Od;else if(s=="rw"||s==Rd)v=Rd;else throw new fe.InvalidArgument("Invalid transaction mode: "+s);if(p){if(p.mode===Od&&v===Rd)if(_)p=null;else throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&b.forEach(function(O){if(p&&p.storeNames.indexOf(O)===-1)if(_)p=null;else throw new fe.SubTransaction("Table "+O+" not included in parent transaction.")}),_&&p&&!p.active&&(p=null)}}catch(O){return p?p._promise(null,function(I,B){B(O)}):Vt(O)}var w=ap.bind(null,this,v,b,p,u);return p?p._promise(v,w,"lock"):he.trans?$n(he.transless,function(){return m._whenReady(w)}):this._whenReady(w)},a.prototype.table=function(s){if(!f(this._allTables,s))throw new fe.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},a})(),G0=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Z0=(function(){function a(s){this._subscribe=s}return a.prototype.subscribe=function(s,l,u){return this._subscribe(!s||typeof s=="function"?{next:s,error:l,complete:u}:s)},a.prototype[G0]=function(){return this},a})(),cc;try{cc={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{cc={indexedDB:null,IDBKeyRange:null}}function hp(a){var s=!1,l,u=new Z0(function(m){var p=fd(a);function _(U){var z=bo();try{p&&wo();var H=qr(a,U);return p&&(H=H.finally(Qr)),H}finally{z&&xo()}}var v=!1,b,w={},O={},I={get closed(){return v},unsubscribe:function(){v||(v=!0,b&&b.abort(),B&&Gr.storagemutated.unsubscribe(P))}};m.start&&m.start(I);var B=!1,q=function(){return Ed(N)};function E(){return qd(O,w)}var P=function(U){nc(w,U),E()&&q()},N=function(){if(!(v||!cc.indexedDB)){w={};var U={};b&&b.abort(),b=new AbortController;var z={subscr:U,signal:b.signal,requery:q,querier:a,trans:null},H=_(z);Promise.resolve(H).then(function(K){s=!0,l=K,!(v||z.signal.aborted)&&(w={},O=U,!ir(O)&&!B&&(Gr(Pa,P),B=!0),Ed(function(){return!v&&m.next&&m.next(K)}))},function(K){s=!1,["DatabaseClosedError","AbortError"].includes(K?.name)||v||Ed(function(){v||m.error&&m.error(K)})})}};return setTimeout(q,0),I});return u.hasValue=function(){return s},u.getValue=function(){return l},u}var Un=Dr;y(Un,e(e({},Bs),{delete:function(a){var s=new Un(a,{addons:[]});return s.delete()},exists:function(a){return new Un(a,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return M0(Un.dependencies).then(a)}catch{return Vt(new fe.MissingAPI)}},defineClass:function(){function a(s){d(this,s)}return a},ignoreTransaction:function(a){return he.trans?$n(he.transless,a):a()},vip:Ud,async:function(a){return function(){try{var s=Gd(a.apply(this,arguments));return!s||typeof s.then!="function"?ne.resolve(s):s}catch(l){return Vt(l)}}},spawn:function(a,s,l){try{var u=Gd(a.apply(l,s||[]));return!u||typeof u.then!="function"?ne.resolve(u):u}catch(m){return Vt(m)}},currentTransaction:{get:function(){return he.trans||null}},waitFor:function(a,s){var l=ne.resolve(typeof a=="function"?Un.ignoreTransaction(a):a).timeout(s||6e4);return he.trans?he.trans.waitFor(l):l},Promise:ne,debug:{get:function(){return ur},set:function(a){Ph(a)}},derive:k,extend:d,props:y,override:se,Events:Da,on:Gr,liveQuery:hp,extendObservabilitySet:nc,getByKeyPath:ue,setByKeyPath:be,delByKeyPath:dt,shallowClone:jt,deepClone:Bt,getObjectDiff:Zd,cmp:$e,asap:we,minKey:Md,addons:[],connections:Co,errnames:_d,dependencies:cc,cache:Hn,semVer:zh,version:zh.split(".").map(function(a){return parseInt(a)}).reduce(function(a,s,l){return a+s/Math.pow(10,l*2)})})),Un.maxKey=Ta(Un.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Gr(Pa,function(a){if(!Zr){var s;s=new CustomEvent(Ld,{detail:a}),Zr=!0,dispatchEvent(s),Zr=!1}}),addEventListener(Ld,function(a){var s=a.detail;Zr||tu(s)}));function tu(a){var s=Zr;try{Zr=!0,Gr.storagemutated.fire(a),Yd(a,!0)}finally{Zr=s}}var Zr=!1,Jr,iu=function(){};typeof BroadcastChannel<"u"&&(iu=function(){Jr=new BroadcastChannel(Ld),Jr.onmessage=function(a){return a.data&&tu(a.data)}},iu(),typeof Jr.unref=="function"&&Jr.unref(),Gr(Pa,function(a){Zr||Jr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Dr.disableBfCache&&a.persisted){ur&&console.debug("Dexie: handling persisted pagehide"),Jr?.close();for(var s=0,l=Co;s<l.length;s++){var u=l[s];u.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(a){!Dr.disableBfCache&&a.persisted&&(ur&&console.debug("Dexie: handling persisted pageshow"),iu(),tu({all:new li(-1/0,[[]])}))}));function J0(a){return new Oa({add:a})}function ex(a){return new Oa({remove:a})}function tx(a,s){return new Oa({replacePrefix:[a,s]})}ne.rejectionMapper=Ab,Ph(ur);var ix=Object.freeze({__proto__:null,Dexie:Dr,liveQuery:hp,Entity:Uh,cmp:$e,PropModSymbol:i0,PropModification:Oa,replacePrefix:tx,add:J0,remove:ex,default:Dr,RangeSet:li,mergeRanges:Na,rangesOverlap:ip});return e(Dr,ix,{default:Dr}),Dr})});var qa=class{_attachedHost;attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},Ar=class extends qa{component;viewContainerRef;injector;projectableNodes;constructor(r,e,i,n){super(),this.component=r,this.viewContainerRef=e,this.injector=i,this.projectableNodes=n}},Yi=class extends qa{templateRef;viewContainerRef;context;injector;constructor(r,e,i,n){super(),this.templateRef=r,this.viewContainerRef=e,this.context=i,this.injector=n}get origin(){return this.templateRef.elementRef}attach(r,e=this.context){return this.context=e,super.attach(r)}detach(){return this.context=void 0,super.detach()}},mu=class extends qa{element;constructor(r){super(),this.element=r instanceof Te?r.nativeElement:r}},_n=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof Ar)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof Yi)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof mu)return this._attachedPortal=r,this.attachDomPortal(r)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Qa=class extends _n{outletElement;_appRef;_defaultInjector;constructor(r,e,i){super(),this.outletElement=r,this._appRef=e,this._defaultInjector=i}attachComponentPortal(r){let e;if(r.viewContainerRef){let i=r.injector||r.viewContainerRef.injector,n=i.get(au,null,{optional:!0})||void 0;e=r.viewContainerRef.createComponent(r.component,{index:r.viewContainerRef.length,injector:i,ngModuleRef:n,projectableNodes:r.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,n=r.injector||this._defaultInjector||We.NULL,o=n.get(hc,i.injector);e=Lp(r.component,{elementInjector:n,environmentInjector:o,projectableNodes:r.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=r,e}attachTemplatePortal(r){let e=r.viewContainerRef,i=e.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return i.rootNodes.forEach(n=>this.outletElement.appendChild(n)),i.detectChanges(),this.setDisposeFn(()=>{let n=e.indexOf(i);n!==-1&&e.remove(n)}),this._attachedPortal=r,i}attachDomPortal=r=>{let e=r.element;e.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=r,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}};var wr=(()=>{class t extends _n{_moduleRef=x(au,{optional:!0});_document=x(vt);_viewContainerRef=x(_r);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new Ve;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,n=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let n=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(n,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(i,n)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[yt]})}return t})();var sr=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({})}return t})();var ax=20,Jn=(()=>{class t{_ngZone=x(Ze);_platform=x(qt);_renderer=x(gr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new J;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=ax){return this._platform.isBrowser?new Wn(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=e>0?this._scrolled.pipe(nu(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):yi()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let n=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Ae(o=>!o||n.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((n,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_scrollableContainsElement(e,i){let n=ar(i),o=e.getElementRef().nativeElement;do if(n==o)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),af=(()=>{class t{elementRef=x(Te);scrollDispatcher=x(Jn);ngZone=x(Ze);dir=x(hi,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new J;_renderer=x(ui);_cleanupScroll;_elementScrolled=new J;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,n=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=n?e.end:e.start),e.right==null&&(e.right=n?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),n&&$o()!=Vo.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),$o()==Vo.INVERTED?e.left=e.right:$o()==Vo.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;Ic()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",n="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let c=this.dir&&this.dir.value=="rtl";return e=="start"?e=c?n:i:e=="end"&&(e=c?i:n),c&&$o()==Vo.INVERTED?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:c&&$o()==Vo.NEGATED?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),sx=20,vn=(()=>{class t{_platform=x(qt);_listeners;_viewportSize;_change=new J;_document=x(vt);constructor(){let e=x(Ze),i=x(gr).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=o=>this._change.next(o);this._listeners=[i.listen("window","resize",n),i.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+i,height:n,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),n=e.documentElement,o=n.getBoundingClientRect(),c=-o.top||e.body.scrollTop||i.scrollY||n.scrollTop||0,d=-o.left||e.body.scrollLeft||i.scrollX||n.scrollLeft||0;return{top:c,left:d}}change(e=sx){return e>0?this._change.pipe(nu(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ko=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({})}return t})(),hu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[Gn,Ko,Gn,Ko]})}return t})();var sf=Ic();function Qo(t){return new Mc(t.get(vn),t.get(vt))}var Mc=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(r,e){this._viewportRuler=r,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=$t(-this._previousScrollPosition.left),r.style.top=$t(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,e=this._document.body,i=r.style,n=e.style,o=i.scrollBehavior||"",c=n.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),sf&&(i.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),sf&&(i.scrollBehavior=o,n.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};function pf(t,r){return new Oc(t.get(Jn),t.get(Ze),t.get(vn),r)}var Oc=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(r,e,i,n){this._scrollDispatcher=r,this._ngZone=e,this._viewportRuler=i,this._config=n}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(Ae(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Xa=class{enable(){}disable(){}attach(){}};function pu(t,r){return r.some(e=>{let i=t.bottom<e.top,n=t.top>e.bottom,o=t.right<e.left,c=t.left>e.right;return i||n||o||c})}function cf(t,r){return r.some(e=>{let i=t.top<e.top,n=t.bottom>e.bottom,o=t.left<e.left,c=t.right>e.right;return i||n||o||c})}function to(t,r){return new Rc(t.get(Jn),t.get(vn),t.get(Ze),r)}var Rc=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(r,e,i,n){this._scrollDispatcher=r,this._viewportRuler=e,this._ngZone=i,this._config=n}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:n}=this._viewportRuler.getViewportSize();pu(e,[{width:i,height:n,bottom:n,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ff=(()=>{class t{_injector=x(We);constructor(){}noop=()=>new Xa;close=e=>pf(this._injector,e);block=()=>Qo(this._injector);reposition=e=>to(this._injector,e);static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cr=class{positionStrategy;scrollStrategy=new Xa;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(r){if(r){let e=Object.keys(r);for(let i of e)r[i]!==void 0&&(this[i]=r[i])}}};var Pc=class{connectionPair;scrollableViewProperties;constructor(r,e){this.connectionPair=r,this.scrollableViewProperties=e}};var gf=(()=>{class t{_attachedOverlays=[];_document=x(vt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_f=(()=>{class t extends gf{_ngZone=x(Ze);_renderer=x(gr).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let n=i.length-1;n>-1;n--)if(i[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[n]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vf=(()=>{class t extends gf{_platform=x(qt);_ngZone=x(Ze);_renderer=x(gr).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,n={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,n),o.listen(i,"click",this._clickListener,n),o.listen(i,"auxclick",this._clickListener,n),o.listen(i,"contextmenu",this._clickListener,n)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=ln(e)};_clickListener=e=>{let i=ln(e),n=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let c=o.length-1;c>-1;c--){let d=o[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(lf(d.overlayElement,i)||lf(d.overlayElement,n))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(e)):h.next(e)}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lf(t,r){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=r;for(;i;){if(i===t)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var yf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),Lc=(()=>{class t{_platform=x(qt);_containerElement;_document=x(vt);_styleLoader=x($i);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||du()){let n=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}let i=this._document.createElement("div");i.classList.add(e),du()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(yf)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fu=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(r,e,i,n){this._renderer=e,this._ngZone=i,this.element=r.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let r=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(r,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),r.style.pointerEvents="none",r.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},qo=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new J;_attachments=new J;_detachments=new J;_positionStrategy;_scrollStrategy;_locationChanges=Ht.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new J;_outsidePointerEvents=new J;_afterNextRenderRef;constructor(r,e,i,n,o,c,d,h,g,f=!1,y,D){this._portalOutlet=r,this._host=e,this._pane=i,this._config=n,this._ngZone=o,this._keyboardDispatcher=c,this._document=d,this._location=h,this._outsideClickDispatcher=g,this._animationsDisabled=f,this._injector=y,this._renderer=D,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(r){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(r);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Oi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,r&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=de(de({},this._config),r),this._updateElementSize()}setDirection(r){this._config=Be(de({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=$t(this._config.width),r.height=$t(this._config.height),r.minWidth=$t(this._config.minWidth),r.minHeight=$t(this._config.minHeight),r.maxWidth=$t(this._config.maxWidth),r.maxHeight=$t(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new fu(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(r))}):this._backdropRef.element.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(r,e,i){let n=Wa(e||[]).filter(o=>!!o);n.length&&(i?r.classList.add(...n):r.classList.remove(...n))}_detachContentWhenEmpty(){let r=!1;try{this._detachContentAfterRenderRef=Oi(()=>{r=!0,this._detachContent()},{injector:this._injector})}catch(e){if(r)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let r=this._scrollStrategy;r?.disable(),r?.detach?.()}},df="cdk-overlay-connected-position-bounding-box",lx=/([A-Za-z%]+)$/;function Nc(t,r){return new Tc(r,t.get(vn),t.get(vt),t.get(qt),t.get(Lc))}var Tc=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new J;_resizeSubscription=Ht.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(r,e,i,n,o){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=o,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(df),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,e=this._overlayRect,i=this._viewportRect,n=this._containerRect,o=[],c;for(let d of this._preferredPositions){let h=this._getOriginPoint(r,n,d),g=this._getOverlayPoint(h,e,d),f=this._getOverlayFit(g,e,i,d);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(d,h);return}if(this._canFitWithFlexibleDimensions(f,g,i)){o.push({position:d,origin:h,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(h,d)});continue}(!c||c.overlayFit.visibleArea<f.visibleArea)&&(c={overlayFit:f,overlayPoint:g,originPoint:h,position:d,overlayRect:e})}if(o.length){let d=null,h=-1;for(let g of o){let f=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);f>h&&(h=f,d=g)}this._isPushed=!1,this._applyPosition(d.position,d.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(c.position,c.originPoint);return}this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&eo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(df),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,e)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,e,i){let n;if(i.originX=="center")n=r.left+r.width/2;else{let c=this._isRtl()?r.right:r.left,d=this._isRtl()?r.left:r.right;n=i.originX=="start"?c:d}e.left<0&&(n-=e.left);let o;return i.originY=="center"?o=r.top+r.height/2:o=i.originY=="top"?r.top:r.bottom,e.top<0&&(o-=e.top),{x:n,y:o}}_getOverlayPoint(r,e,i){let n;i.overlayX=="center"?n=-e.width/2:i.overlayX==="start"?n=this._isRtl()?-e.width:0:n=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:r.x+n,y:r.y+o}}_getOverlayFit(r,e,i,n){let o=mf(e),{x:c,y:d}=r,h=this._getOffset(n,"x"),g=this._getOffset(n,"y");h&&(c+=h),g&&(d+=g);let f=0-c,y=c+o.width-i.width,D=0-d,C=d+o.height-i.height,k=this._subtractOverflows(o.width,f,y),T=this._subtractOverflows(o.height,D,C),A=k*T;return{visibleArea:A,isCompletelyWithinViewport:o.width*o.height===A,fitsInViewportVertically:T===o.height,fitsInViewportHorizontally:k==o.width}}_canFitWithFlexibleDimensions(r,e,i){if(this._hasFlexibleDimensions){let n=i.bottom-e.y,o=i.right-e.x,c=uf(this._overlayRef.getConfig().minHeight),d=uf(this._overlayRef.getConfig().minWidth),h=r.fitsInViewportVertically||c!=null&&c<=n,g=r.fitsInViewportHorizontally||d!=null&&d<=o;return h&&g}return!1}_pushOverlayOnScreen(r,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let n=mf(e),o=this._viewportRect,c=Math.max(r.x+n.width-o.width,0),d=Math.max(r.y+n.height-o.height,0),h=Math.max(o.top-i.top-r.y,0),g=Math.max(o.left-i.left-r.x,0),f=0,y=0;return n.width<=o.width?f=g||-c:f=r.x<this._viewportMargin?o.left-i.left-r.x:0,n.height<=o.height?y=h||-d:y=r.y<this._viewportMargin?o.top-i.top-r.y:0,this._previousPushAmount={x:f,y},{x:r.x+f,y:r.y+y}}_applyPosition(r,e){if(this._setTransformOrigin(r),this._setOverlayElementStyles(e,r),this._setBoundingBoxStyles(e,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!dx(this._lastScrollVisibility,i)){let n=new Pc(r,i);this._positionChanges.next(n)}this._lastScrollVisibility=i}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,n=r.overlayY;r.overlayX==="center"?i="center":this._isRtl()?i=r.overlayX==="start"?"right":"left":i=r.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(r,e){let i=this._viewportRect,n=this._isRtl(),o,c,d;if(e.overlayY==="top")c=r.y,o=i.height-c+this._viewportMargin;else if(e.overlayY==="bottom")d=i.height-r.y+this._viewportMargin*2,o=i.height-d+this._viewportMargin;else{let C=Math.min(i.bottom-r.y+i.top,r.y),k=this._lastBoundingBoxSize.height;o=C*2,c=r.y-C,o>k&&!this._isInitialRender&&!this._growAfterOpen&&(c=r.y-k/2)}let h=e.overlayX==="start"&&!n||e.overlayX==="end"&&n,g=e.overlayX==="end"&&!n||e.overlayX==="start"&&n,f,y,D;if(g)D=i.width-r.x+this._viewportMargin*2,f=r.x-this._viewportMargin;else if(h)y=r.x,f=i.right-r.x;else{let C=Math.min(i.right-r.x+i.left,r.x),k=this._lastBoundingBoxSize.width;f=C*2,y=r.x-C,f>k&&!this._isInitialRender&&!this._growAfterOpen&&(y=r.x-k/2)}return{top:c,left:y,bottom:d,right:D,width:f,height:o}}_setBoundingBoxStyles(r,e){let i=this._calculateBoundingBoxRect(r,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;n.height=$t(i.height),n.top=$t(i.top),n.bottom=$t(i.bottom),n.width=$t(i.width),n.left=$t(i.left),n.right=$t(i.right),e.overlayX==="center"?n.alignItems="center":n.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?n.justifyContent="center":n.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(n.maxHeight=$t(o)),c&&(n.maxWidth=$t(c))}this._lastBoundingBoxSize=i,eo(this._boundingBox.style,n)}_resetBoundingBoxStyles(){eo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){eo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,e){let i={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(n){let f=this._viewportRuler.getViewportScrollPosition();eo(i,this._getExactOverlayY(e,r,f)),eo(i,this._getExactOverlayX(e,r,f))}else i.position="static";let d="",h=this._getOffset(e,"x"),g=this._getOffset(e,"y");h&&(d+=`translateX(${h}px) `),g&&(d+=`translateY(${g}px)`),i.transform=d.trim(),c.maxHeight&&(n?i.maxHeight=$t(c.maxHeight):o&&(i.maxHeight="")),c.maxWidth&&(n?i.maxWidth=$t(c.maxWidth):o&&(i.maxWidth="")),eo(this._pane.style,i)}_getExactOverlayY(r,e,i){let n={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,r);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),r.overlayY==="bottom"){let c=this._document.documentElement.clientHeight;n.bottom=`${c-(o.y+this._overlayRect.height)}px`}else n.top=$t(o.y);return n}_getExactOverlayX(r,e,i){let n={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,r);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let c;if(this._isRtl()?c=r.overlayX==="end"?"left":"right":c=r.overlayX==="end"?"right":"left",c==="right"){let d=this._document.documentElement.clientWidth;n.right=`${d-(o.x+this._overlayRect.width)}px`}else n.left=$t(o.x);return n}_getScrollVisibility(){let r=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:cf(r,i),isOriginOutsideView:pu(r,i),isOverlayClipped:cf(e,i),isOverlayOutsideView:pu(e,i)}}_subtractOverflows(r,...e){return e.reduce((i,n)=>i-Math.max(n,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+r-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:r-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,e){return e==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&Wa(r).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){let r=this._origin;if(r instanceof Te)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let e=r.width||0,i=r.height||0;return{top:r.y,bottom:r.y+i,left:r.x,right:r.x+e,height:i,width:e}}};function eo(t,r){for(let e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t}function uf(t){if(typeof t!="number"&&t!=null){let[r,e]=t.split(lx);return!e||e==="px"?parseFloat(r):null}return t||null}function mf(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function dx(t,r){return t===r?!0:t.isOriginClipped===r.isOriginClipped&&t.isOriginOutsideView===r.isOriginOutsideView&&t.isOverlayClipped===r.isOverlayClipped&&t.isOverlayOutsideView===r.isOverlayOutsideView}var hf="cdk-global-overlay-wrapper";function yn(t){return new Ac}var Ac=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(r){let e=r.getConfig();this._overlayRef=r,this._width&&!e.width&&r.updateSize({width:this._width}),this._height&&!e.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(hf),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:c,maxHeight:d}=i,h=(n==="100%"||n==="100vw")&&(!c||c==="100%"||c==="100vw"),g=(o==="100%"||o==="100vh")&&(!d||d==="100%"||d==="100vh"),f=this._xPosition,y=this._xOffset,D=this._overlayRef.getConfig().direction==="rtl",C="",k="",T="";h?T="flex-start":f==="center"?(T="center",D?k=y:C=y):D?f==="left"||f==="end"?(T="flex-end",C=y):(f==="right"||f==="start")&&(T="flex-start",k=y):f==="left"||f==="start"?(T="flex-start",C=y):(f==="right"||f==="end")&&(T="flex-end",k=y),r.position=this._cssPosition,r.marginLeft=h?"0":C,r.marginTop=g?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=h?"0":k,e.justifyContent=T,e.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(hf),i.justifyContent=i.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},bf=(()=>{class t{_injector=x(We);constructor(){}global(){return yn()}flexibleConnectedTo(e){return Nc(this._injector,e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bn(t,r){t.get($i).load(yf);let e=t.get(Lc),i=t.get(vt),n=t.get(bi),o=t.get(_c),c=t.get(hi),d=i.createElement("div"),h=i.createElement("div");h.id=n.getId("cdk-overlay-"),h.classList.add("cdk-overlay-pane"),d.appendChild(h),e.getContainerElement().appendChild(d);let g=new Qa(h,o,t),f=new Cr(r),y=t.get(ui,null,{optional:!0})||t.get(gr).createRenderer(null,null);return f.direction=f.direction||c.value,new qo(g,d,h,f,t.get(Ze),t.get(_f),i,t.get(Np),t.get(vf),r?.disableAnimations??t.get(wp,null,{optional:!0})==="NoopAnimations",t.get(hc),y)}var xf=(()=>{class t{scrollStrategies=x(ff);_positionBuilder=x(bf);_injector=x(We);constructor(){}create(e){return bn(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ux=new Ce("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=x(We);return()=>to(t)}});function mx(t){let r=x(We);return()=>to(r)}var hx={provide:ux,useFactory:mx},Lr=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[xf,hx],imports:[Gn,sr,hu,hu]})}return t})();function px(t,r){if(t&1){let e=tt();S(0,"div",1)(1,"button",2),re("click",function(){X(e);let n=j();return Y(n.action())}),L(2),M()()}if(t&2){let e=j();V(2),Vi(" ",e.data.action," ")}}var fx=["label"];function gx(t,r){}var _x=Math.pow(2,31)-1,Ya=class{_overlayRef;instance;containerInstance;_afterDismissed=new J;_afterOpened=new J;_onAction=new J;_durationTimeoutId;_dismissedByAction=!1;constructor(r,e){this._overlayRef=e,this.containerInstance=r,r._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(r){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(r,_x))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},wf=new Ce("MatSnackBarData"),Xo=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},vx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),yx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),bx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),Cf=(()=>{class t{snackBarRef=x(Ya);data=x(wf);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(i,n){i&1&&(S(0,"div",0),L(1),M(),Ke(2,px,3,1,"div",1)),i&2&&(V(),Vi(" ",n.data.message,`
`),V(),qe(n.hasAction?2:-1))},dependencies:[Pi,vx,yx,bx],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),gu="_mat-snack-bar-enter",_u="_mat-snack-bar-exit",xx=(()=>{class t extends _n{_ngZone=x(Ze);_elementRef=x(Te);_changeDetectorRef=x(St);_platform=x(qt);_animationsDisabled=xi();snackBarConfig=x(Xo);_document=x(vt);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=x(We);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new J;_onExit=new J;_onEnter=new J;_animationState="void";_live;_label;_role;_liveElementId=x(bi).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}attachDomPortal=e=>{this._assertNotAttached();let i=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),i};onAnimationEnd(e){e===_u?this._completeExit():e===gu&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?Oi(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(gu)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(gu)},200)))}exit(){return this._destroyed?yi(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?Oi(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(_u)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(_u),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(c=>e.classList.add(c)):e.classList.add(i)),this._exposeToModals();let n=this._label.nativeElement,o="mdc-snackbar__label";n.classList.toggle(o,!n.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let n=0;n<i.length;n++){let o=i[n],c=o.getAttribute("aria-owns");this._trackedModals.add(o),c?c.indexOf(e)===-1&&o.setAttribute("aria-owns",c+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let i=e.getAttribute("aria-owns");if(i){let n=i.replace(this._liveElementId,"").trim();n.length>0?e.setAttribute("aria-owns",n):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,i=e.querySelector("[aria-hidden]"),n=e.querySelector("[aria-live]");if(i&&n){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),n.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,n){if(i&1&&(Dt(wr,7),Dt(fx,7)),i&2){let o;De(o=Me())&&(n._portalOutlet=o.first),De(o=Me())&&(n._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(i,n){i&1&&re("animationend",function(c){return n.onAnimationEnd(c.animationName)})("animationcancel",function(c){return n.onAnimationEnd(c.animationName)}),i&2&&Xe("mat-snack-bar-container-enter",n._animationState==="visible")("mat-snack-bar-container-exit",n._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!n._animationsDisabled)},features:[yt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,n){i&1&&(S(0,"div",1)(1,"div",2,0)(3,"div",3),lt(4,gx,0,0,"ng-template",4),M(),pt(5,"div"),M()()),i&2&&(V(5),Le("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[wr],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function wx(){return new Xo}var Cx=new Ce("mat-snack-bar-default-options",{providedIn:"root",factory:wx}),io=(()=>{class t{_live=x(Jp);_injector=x(We);_breakpointObserver=x(Cc);_parentSnackBar=x(t,{optional:!0,skipSelf:!0});_defaultConfig=x(Cx);_animationsDisabled=xi();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Cf;snackBarContainerComponent=xx;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",n){let o=de(de({},this._defaultConfig),n);return o.data={message:e,action:i},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){let n=i&&i.viewContainerRef&&i.viewContainerRef.injector,o=We.create({parent:n||this._injector,providers:[{provide:Xo,useValue:i}]}),c=new Ar(this.snackBarContainerComponent,i.viewContainerRef,o),d=e.attach(c);return d.instance.snackBarConfig=i,d.instance}_attach(e,i){let n=de(de(de({},new Xo),this._defaultConfig),i),o=this._createOverlay(n),c=this._attachSnackBarContainer(o,n),d=new Ya(c,o);if(e instanceof oi){let h=new Yi(e,null,{$implicit:n.data,snackBarRef:d});d.instance=c.attachTemplatePortal(h)}else{let h=this._createInjector(n,d),g=new Ar(e,void 0,h),f=c.attachComponentPortal(g);d.instance=f.instance}return this._breakpointObserver.observe(Ka.HandsetPortrait).pipe(Jt(o.detachments())).subscribe(h=>{o.overlayElement.classList.toggle(this.handsetCssClass,h.matches)}),n.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(n.announcementMessage,n.politeness)}),this._animateSnackBar(d,n),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let i=new Cr;i.direction=e.direction;let n=yn(this._injector),o=e.direction==="rtl",c=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,d=!c&&e.horizontalPosition!=="center";return c?n.left("0"):d?n.right("0"):n.centerHorizontally(),e.verticalPosition==="top"?n.top("0"):n.bottom("0"),i.positionStrategy=n,i.disableAnimations=this._animationsDisabled,bn(this._injector,i)}_createInjector(e,i){let n=e&&e.viewContainerRef&&e.viewContainerRef.injector;return We.create({parent:n||this._injector,providers:[{provide:Ya,useValue:i},{provide:wf,useValue:e.data}]})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fc=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[io],imports:[Lr,sr,pi,at,Cf,at]})}return t})();function bu(t){let r=t.cloneNode(!0),e=r.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();r.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return i==="canvas"?Ef(t,r):(i==="input"||i==="select"||i==="textarea")&&If(t,r),kf("canvas",t,r,Ef),kf("input, textarea, select",t,r,If),r}function kf(t,r,e,i){let n=r.querySelectorAll(t);if(n.length){let o=e.querySelectorAll(t);for(let c=0;c<n.length;c++)i(n[c],o[c])}}var Sx=0;function If(t,r){r.type!=="file"&&(r.value=t.value),r.type==="radio"&&r.name&&(r.name=`mat-clone-${r.name}-${Sx++}`)}function Ef(t,r){let e=r.getContext("2d");if(e)try{e.drawImage(t,0,0)}catch{}}function Iu(t){let r=t.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height,x:r.x,y:r.y}}function xu(t,r,e){let{top:i,bottom:n,left:o,right:c}=t;return e>=i&&e<=n&&r>=o&&r<=c}function kx(t,r){let e=r.left<t.left,i=r.left+r.width>t.right,n=r.top<t.top,o=r.top+r.height>t.bottom;return e||i||n||o}function Ja(t,r,e){t.top+=r,t.bottom=t.top+t.height,t.left+=e,t.right=t.left+t.width}function Df(t,r,e,i){let{top:n,right:o,bottom:c,left:d,width:h,height:g}=t,f=h*r,y=g*r;return i>n-y&&i<c+y&&e>d-f&&e<o+f}var Bc=class{_document;positions=new Map;constructor(r){this._document=r}clear(){this.positions.clear()}cache(r){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),r.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Iu(e)})})}handleScroll(r){let e=ln(r),i=this.positions.get(e);if(!i)return null;let n=i.scrollPosition,o,c;if(e===this._document){let g=this.getViewportScrollPosition();o=g.top,c=g.left}else o=e.scrollTop,c=e.scrollLeft;let d=n.top-o,h=n.left-c;return this.positions.forEach((g,f)=>{g.clientRect&&e!==f&&e.contains(f)&&Ja(g.clientRect,d,h)}),n.top=o,n.left=c,{top:d,left:h}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Vf(t,r){let e=t.rootNodes;if(e.length===1&&e[0].nodeType===r.ELEMENT_NODE)return e[0];let i=r.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function Eu(t,r,e){for(let i in r)if(r.hasOwnProperty(i)){let n=r[i];n?t.setProperty(i,n,e?.has(i)?"important":""):t.removeProperty(i)}return t}function Yo(t,r){let e=r?"":"none";Eu(t.style,{"touch-action":r?"":"none","-webkit-user-drag":r?"":"none","-webkit-tap-highlight-color":r?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Mf(t,r,e){Eu(t.style,{position:r?"":"fixed",top:r?"":"0",opacity:r?"":"0",left:r?"":"-999em"},e)}function Vc(t,r){return r&&r!="none"?t+" "+r:t}function Of(t,r){t.style.width=`${r.width}px`,t.style.height=`${r.height}px`,t.style.transform=es(r.left,r.top)}function es(t,r){return`translate3d(${Math.round(t)}px, ${Math.round(r)}px, 0)`}function Rf(t){let r=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*r}function Ix(t){let r=getComputedStyle(t),e=vu(r,"transition-property"),i=e.find(d=>d==="transform"||d==="all");if(!i)return 0;let n=e.indexOf(i),o=vu(r,"transition-duration"),c=vu(r,"transition-delay");return Rf(o[n])+Rf(c[n])}function vu(t,r){return t.getPropertyValue(r).split(",").map(i=>i.trim())}var Ex=new Set(["position"]),wu=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(r,e,i,n,o,c,d,h,g,f){this._document=r,this._rootElement=e,this._direction=i,this._initialDomRect=n,this._previewTemplate=o,this._previewClass=c,this._pickupPositionOnPage=d,this._initialTransform=h,this._zIndex=g,this._renderer=f}attach(r){this._preview=this._createPreview(),r.appendChild(this._preview),Pf(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(r){this._preview.style.transform=r}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(r){this._preview.classList.add(r)}getTransitionDuration(){return Ix(this._preview)}addEventListener(r,e){return this._renderer.listen(this._preview,r,e)}_createPreview(){let r=this._previewTemplate,e=this._previewClass,i=r?r.template:null,n;if(i&&r){let o=r.matchSize?this._initialDomRect:null,c=r.viewContainer.createEmbeddedView(i,r.context);c.detectChanges(),n=Vf(c,this._document),this._previewEmbeddedView=c,r.matchSize?Of(n,o):n.style.transform=es(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=bu(this._rootElement),Of(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Eu(n.style,{"pointer-events":"none",margin:Pf(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Ex),Yo(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>n.classList.add(o)):n.classList.add(e)),n}};function Pf(t){return"showPopover"in t}var Dx={passive:!0},Tf={passive:!1},Mx={passive:!1,capture:!0},Ox=800,Af="cdk-drag-placeholder",Lf=new Set(["position"]),Cu=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Se(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new J;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Ht.EMPTY;_pointerUpSubscription=Ht.EMPTY;_scrollSubscription=Ht.EMPTY;_resizeSubscription=Ht.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(r){r!==this._disabled&&(this._disabled=r,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Yo(e,r)))}_disabled=!1;beforeStarted=new J;started=new J;released=new J;ended=new J;entered=new J;exited=new J;dropped=new J;moved=this._moveEvents;data;constrainPosition;constructor(r,e,i,n,o,c,d){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=c,this._renderer=d,this.withRootElement(r).withParent(e.parentDragRef||null),this._parentPositions=new Bc(i),c.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(r){this._handles=r.map(i=>ar(i)),this._handles.forEach(i=>Yo(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(r){return this._previewTemplate=r,this}withPlaceholderTemplate(r){return this._placeholderTemplate=r,this}withRootElement(r){let e=ar(r);if(e!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"mousedown",this._pointerDown,Tf),i.listen(e,"touchstart",this._pointerDown,Dx),i.listen(e,"dragstart",this._nativeDragStart,Tf)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(r){return this._boundaryElement=r?ar(r):null,this._resizeSubscription.unsubscribe(),r&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(r){return this._parentDragRef=r,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&kx(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let r=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),i=0,n=0;e.left<r.left?i=r.left-e.left:e.right>r.right&&(i=r.right-e.right),e.top<r.top?n=r.top-e.top:e.bottom>r.bottom&&(n=r.bottom-e.bottom);let o=this._activeTransform.x,c=this._activeTransform.y,d=o+i,h=c+n;this._rootElement.style.transform=es(d,h),this._activeTransform={x:d,y:h},this._passiveTransform={x:d,y:h}}}disableHandle(r){!this._disabledHandles.has(r)&&this._handles.indexOf(r)>-1&&(this._disabledHandles.add(r),Yo(r,!0))}enableHandle(r){this._disabledHandles.has(r)&&(this._disabledHandles.delete(r),Yo(r,this.disabled))}withDirection(r){return this._direction=r,this}_withDropContainer(r){this._dropContainer=r}getFreeDragPosition(){let r=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:r.x,y:r.y}}setFreeDragPosition(r){return this._activeTransform={x:0,y:0},this._passiveTransform.x=r.x,this._passiveTransform.y=r.y,this._dropContainer||this._applyRootElementTransform(r.x,r.y),this}withPreviewContainer(r){return this._previewContainer=r,this}_sortFromLastPointerPosition(){let r=this._lastKnownPointerPosition;r&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(r),r)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=r=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(r);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,r)}else this.disabled||this._initializeDragSequence(this._rootElement,r)};_pointerMove=r=>{let e=this._getPointerPositionOnPage(r);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+o>=this._config.dragStartThreshold){let d=Date.now()>=this._dragStartTime+this._getDragStartDelay(r),h=this._dropContainer;if(!d){this._endDragSequence(r);return}(!h||!h.isDragging()&&!h.isReceiving())&&(r.cancelable&&r.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(r)))}return}r.cancelable&&r.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-n.x+this._passiveTransform.x,o.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:r,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=r=>{this._endDragSequence(r)};_endDragSequence(r){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:r}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(r),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(r);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:r})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(r){Ga(r)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",Rx,Mx)}),i){let n=this._rootElement,o=n.parentNode,c=this._placeholder=this._createPlaceholderElement(),d=this._marker=this._marker||this._document.createComment("");o.insertBefore(d,n),this._initialTransform=n.style.transform||"",this._preview=new wu(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),Mf(n,!1,Lf),this._document.body.appendChild(o.replaceChild(c,n)),this.started.next({source:this,event:r}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:r}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(r,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),n=Ga(e),o=!n&&e.button!==0,c=this._rootElement,d=ln(e),h=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Ox>Date.now(),g=n?xc(e):bc(e);if(d&&d.draggable&&e.type==="mousedown"&&e.preventDefault(),i||o||h||g)return;if(this._handles.length){let D=c.style;this._rootElementTapHighlight=D.webkitTapHighlightColor||"",D.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>this._updateOnScroll(D)),this._boundaryElement&&(this._boundaryRect=Iu(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,r,e);let y=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:y.x,y:y.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(r){Mf(this._rootElement,!0,Lf),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(r),o=this._getDragDistance(n),c=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:r}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:o,dropPoint:n,event:r}),e.drop(this,i,this._initialIndex,this._initialContainer,c,o,n,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:r,y:e},{x:i,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,r,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(r,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let c=this._dropContainer.getItemIndex(this),d=this._dropContainer.getItemAtIndex(c+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,d),this._dropContainer=o,this._dropContainer.enter(this,r,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,r,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(r,e):this._applyPreviewTransform(r-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let r=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(r.left,r.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=d=>{(!d||this._preview&&ln(d)===this._preview.element&&d.propertyName==="transform")&&(c(),i(),clearTimeout(o))},o=setTimeout(n,e*1.5),c=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let r=this._placeholderTemplate,e=r?r.template:null,i;return e?(this._placeholderRef=r.viewContainer.createEmbeddedView(e,r.context),this._placeholderRef.detectChanges(),i=Vf(this._placeholderRef,this._document)):i=bu(this._rootElement),i.style.pointerEvents="none",i.classList.add(Af),i}_getPointerPositionInElement(r,e,i){let n=e===this._rootElement?null:e,o=n?n.getBoundingClientRect():r,c=Ga(i)?i.targetTouches[0]:i,d=this._getViewportScrollPosition(),h=c.pageX-o.left-d.left,g=c.pageY-o.top-d.top;return{x:o.left-r.left+h,y:o.top-r.top+g}}_getPointerPositionOnPage(r){let e=this._getViewportScrollPosition(),i=Ga(r)?r.touches[0]||r.changedTouches[0]||{pageX:0,pageY:0}:r,n=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){let c=this._ownerSVGElement.getScreenCTM();if(c){let d=this._ownerSVGElement.createSVGPoint();return d.x=n,d.y=o,d.matrixTransform(c.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(r){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(r,this,this._initialDomRect,this._pickupPositionInElement):r;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:c}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,d=this._boundaryRect,{width:h,height:g}=this._getPreviewRect(),f=d.top+c,y=d.bottom-(g-c),D=d.left+o,C=d.right-(h-o);i=Nf(i,D,C),n=Nf(n,f,y)}return{x:i,y:n}}_updatePointerDirectionDelta(r){let{x:e,y:i}=r,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,c=Math.abs(e-o.x),d=Math.abs(i-o.y);return c>this._config.pointerDirectionChangeThreshold&&(n.x=e>o.x?1:-1,o.x=e),d>this._config.pointerDirectionChangeThreshold&&(n.y=i>o.y?1:-1,o.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let r=this._handles.length>0||!this.isDragging();r!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=r,Yo(this._rootElement,r))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(r=>r()),this._rootElementCleanups=void 0}_applyRootElementTransform(r,e){let i=1/this.scale,n=es(r*i,e*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Vc(n,this._initialTransform)}_applyPreviewTransform(r,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=es(r,e);this._preview.setTransform(Vc(n,i))}_getDragDistance(r){let e=this._pickupPositionOnPage;return e?{x:r.x-e.x,y:r.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:r,y:e}=this._passiveTransform;if(r===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let o=n.left-i.left,c=i.right-n.right,d=n.top-i.top,h=i.bottom-n.bottom;n.width>i.width?(o>0&&(r+=o),c>0&&(r-=c)):r=0,n.height>i.height?(d>0&&(e+=d),h>0&&(e-=h)):e=0,(r!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:r})}_getDragStartDelay(r){let e=this.dragStartDelay;return typeof e=="number"?e:Ga(r)?e.touch:e?e.mouse:0}_updateOnScroll(r){let e=this._parentPositions.handleScroll(r);if(e){let i=ln(r);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Ja(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=wc(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(r,e){let i=this._previewContainer||"global";if(i==="parent")return r;if(i==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return ar(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=r=>{if(this._handles.length){let e=this._getTargetHandle(r);e&&!this._disabledHandles.has(e)&&!this.disabled&&r.preventDefault()}else this.disabled||r.preventDefault()};_getTargetHandle(r){return this._handles.find(e=>r.target&&(r.target===e||e.contains(r.target)))}_conditionallyInsertAnchor(r,e,i){if(r===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let n=this._anchor??=bu(this._placeholder);n.classList.remove(Af),n.classList.add("cdk-drag-anchor"),n.style.transform="",i?i.before(n):ar(e.element).appendChild(n)}}};function Nf(t,r,e){return Math.max(r,Math.min(e,t))}function Ga(t){return t.type[0]==="t"}function Rx(t){t.preventDefault()}function Hc(t,r,e){let i=$c(r,t.length-1),n=$c(e,t.length-1);if(i===n)return;let o=t[i],c=n<i?-1:1;for(let d=i;d!==n;d+=c)t[d]=t[d+c];t[n]=o}function $f(t,r,e,i){let n=$c(e,t.length-1),o=$c(i,r.length);t.length&&r.splice(o,0,t.splice(n,1)[0])}function $c(t,r){return Math.max(0,Math.min(r,t))}var zc=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(r){this._dragDropRegistry=r}_previousSwap={drag:null,delta:0,overlaps:!1};start(r){this.withItems(r)}sort(r,e,i,n){let o=this._itemPositions,c=this._getItemIndexFromPointerPosition(r,e,i,n);if(c===-1&&o.length>0)return null;let d=this.orientation==="horizontal",h=o.findIndex(A=>A.drag===r),g=o[c],f=o[h].clientRect,y=g.clientRect,D=h>c?1:-1,C=this._getItemOffsetPx(f,y,D),k=this._getSiblingOffsetPx(h,o,D),T=o.slice();return Hc(o,h,c),o.forEach((A,ie)=>{if(T[ie]===A)return;let ae=A.drag===r,se=ae?C:k,Oe=ae?r.getPlaceholderElement():A.drag.getRootElement();A.offset+=se;let we=Math.round(A.offset*(1/A.drag.scale));d?(Oe.style.transform=Vc(`translate3d(${we}px, 0, 0)`,A.initialTransform),Ja(A.clientRect,0,se)):(Oe.style.transform=Vc(`translate3d(0, ${we}px, 0)`,A.initialTransform),Ja(A.clientRect,se,0))}),this._previousSwap.overlaps=xu(y,e,i),this._previousSwap.drag=g.drag,this._previousSwap.delta=d?n.x:n.y,{previousIndex:h,currentIndex:c}}enter(r,e,i,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(r,e,i):n,c=this._activeDraggables,d=c.indexOf(r),h=r.getPlaceholderElement(),g=c[o];if(g===r&&(g=c[o+1]),!g&&(o==null||o===-1||o<c.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(g=c[0]),d>-1&&c.splice(d,1),g&&!this._dragDropRegistry.isDragging(g)){let f=g.getRootElement();f.parentElement.insertBefore(h,f),c.splice(o,0,r)}else this._element.appendChild(h),c.push(r);h.style.transform="",this._cacheItemPositions()}withItems(r){this._activeDraggables=r.slice(),this._cacheItemPositions()}withSortPredicate(r){this._sortPredicate=r}reset(){this._activeDraggables?.forEach(r=>{let e=r.getRootElement();if(e){let i=this._itemPositions.find(n=>n.drag===r)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(r){return this._getVisualItemPositions().findIndex(e=>e.drag===r)}getItemAtIndex(r){return this._getVisualItemPositions()[r]?.drag||null}updateOnScroll(r,e){this._itemPositions.forEach(({clientRect:i})=>{Ja(i,r,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(r){this._element=r}_cacheItemPositions(){let r=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Iu(i)}}).sort((e,i)=>r?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(r,e,i){let n=this.orientation==="horizontal",o=n?e.left-r.left:e.top-r.top;return i===-1&&(o+=n?e.width-r.width:e.height-r.height),o}_getSiblingOffsetPx(r,e,i){let n=this.orientation==="horizontal",o=e[r].clientRect,c=e[r+i*-1],d=o[n?"width":"height"]*i;if(c){let h=n?"left":"top",g=n?"right":"bottom";i===-1?d-=c.clientRect[h]-o[g]:d+=o[h]-c.clientRect[g]}return d}_shouldEnterAsFirstChild(r,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let c=i[i.length-1].clientRect;return n?r>=c.right:e>=c.bottom}else{let c=i[0].clientRect;return n?r<=c.left:e<=c.top}}_getItemIndexFromPointerPosition(r,e,i,n){let o=this.orientation==="horizontal",c=this._itemPositions.findIndex(({drag:d,clientRect:h})=>{if(d===r)return!1;if(n){let g=o?n.x:n.y;if(d===this._previousSwap.drag&&this._previousSwap.overlaps&&g===this._previousSwap.delta)return!1}return o?e>=Math.floor(h.left)&&e<Math.floor(h.right):i>=Math.floor(h.top)&&i<Math.floor(h.bottom)});return c===-1||!this._sortPredicate(c,r)?-1:c}},Su=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(r,e){this._document=r,this._dragDropRegistry=e}start(r){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let n=e[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(r)}sort(r,e,i,n){let o=this._getItemIndexFromPointerPosition(r,e,i),c=this._previousSwap;if(o===-1||this._activeItems[o]===r)return null;let d=this._activeItems[o];if(c.drag===d&&c.overlaps&&c.deltaX===n.x&&c.deltaY===n.y)return null;let h=this.getItemIndex(r),g=r.getPlaceholderElement(),f=d.getRootElement();o>h?f.after(g):f.before(g),Hc(this._activeItems,h,o);let y=this._getRootNode().elementFromPoint(e,i);return c.deltaX=n.x,c.deltaY=n.y,c.drag=d,c.overlaps=f===y||f.contains(y),{previousIndex:h,currentIndex:o}}enter(r,e,i,n){let o=this._activeItems.indexOf(r);o>-1&&this._activeItems.splice(o,1);let c=n==null||n<0?this._getItemIndexFromPointerPosition(r,e,i):n;c===-1&&(c=this._getClosestItemIndexToPointer(r,e,i));let d=this._activeItems[c];d&&!this._dragDropRegistry.isDragging(d)?(this._activeItems.splice(c,0,r),d.getRootElement().before(r.getPlaceholderElement())):(this._activeItems.push(r),this._element.appendChild(r.getPlaceholderElement()))}withItems(r){this._activeItems=r.slice()}withSortPredicate(r){this._sortPredicate=r}reset(){let r=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,o]=this._relatedNodes[i];n.parentNode===r&&n.nextSibling!==o&&(o===null?r.appendChild(n):o.parentNode===r&&r.insertBefore(n,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(r){return this._activeItems.indexOf(r)}getItemAtIndex(r){return this._activeItems[r]||null}updateOnScroll(){this._activeItems.forEach(r=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(r){r!==this._element&&(this._element=r,this._rootNode=void 0)}_getItemIndexFromPointerPosition(r,e,i){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),o=n?this._activeItems.findIndex(c=>{let d=c.getRootElement();return n===d||d.contains(n)}):-1;return o===-1||!this._sortPredicate(o,r)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=wc(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(r,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,o=-1;for(let c=0;c<this._activeItems.length;c++){let d=this._activeItems[c];if(d!==r){let{x:h,y:g}=d.getRootElement().getBoundingClientRect(),f=Math.hypot(e-h,i-g);f<n&&(n=f,o=c)}}return o}},Ff=.05,zf=.05,Gi=(function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t})(Gi||{}),wi=(function(t){return t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t})(wi||{}),ku=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new J;entered=new J;exited=new J;dropped=new J;sorted=new J;receivingStarted=new J;receivingStopped=new J;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Ht.EMPTY;_verticalScrollDirection=Gi.NONE;_horizontalScrollDirection=wi.NONE;_scrollNode;_stopScrollTimers=new J;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(r,e,i,n,o){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=o;let c=this.element=ar(r);this._document=i,this.withOrientation("vertical").withElementContainer(c),e.registerDropContainer(this),this._parentPositions=new Bc(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(r,e,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(r)),this._sortStrategy.enter(r,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:r,container:this,currentIndex:this.getItemIndex(r)})}exit(r){this._reset(),this.exited.next({item:r,container:this})}drop(r,e,i,n,o,c,d,h={}){this._reset(),this.dropped.next({item:r,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:o,distance:c,dropPoint:d,event:h})}withItems(r){let e=this._draggables;return this._draggables=r,r.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>r.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(r){return this._direction=r,this._sortStrategy instanceof zc&&(this._sortStrategy.direction=r),this}connectedTo(r){return this._siblings=r.slice(),this}withOrientation(r){if(r==="mixed")this._sortStrategy=new Su(this._document,this._dragDropRegistry);else{let e=new zc(this._dragDropRegistry);e.direction=this._direction,e.orientation=r,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(r){let e=this._container;return this._scrollableElements=r.indexOf(e)===-1?[e,...r]:r.slice(),this}withElementContainer(r){if(r===this._container)return this;let e=ar(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(r);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(r),this._cachedShadowRoot=null,this._scrollableElements.unshift(r),this._container=r,this}getScrollableParents(){return this._scrollableElements}getItemIndex(r){return this._isDragging?this._sortStrategy.getItemIndex(r):this._draggables.indexOf(r)}getItemAtIndex(r){return this._isDragging?this._sortStrategy.getItemAtIndex(r):this._draggables[r]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(r,e,i,n){if(this.sortingDisabled||!this._domRect||!Df(this._domRect,Ff,e,i))return;let o=this._sortStrategy.sort(r,e,i,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:r})}_startScrollingIfNecessary(r,e){if(this.autoScrollDisabled)return;let i,n=Gi.NONE,o=wi.NONE;if(this._parentPositions.positions.forEach((c,d)=>{d===this._document||!c.clientRect||i||Df(c.clientRect,Ff,r,e)&&([n,o]=Px(d,c.clientRect,this._direction,r,e),(n||o)&&(i=d))}),!n&&!o){let{width:c,height:d}=this._viewportRuler.getViewportSize(),h={width:c,height:d,top:0,right:c,bottom:d,left:0};n=jf(h,e),o=Hf(h,r),i=window}i&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=i,(n||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let r=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=r.msScrollSnapType||r.scrollSnapType||"",r.scrollSnapType=r.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let r=this._container.style;r.scrollSnapType=r.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),gp(0,ru).pipe(Jt(this._stopScrollTimers)).subscribe(()=>{let r=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Gi.UP?r.scrollBy(0,-e):this._verticalScrollDirection===Gi.DOWN&&r.scrollBy(0,e),this._horizontalScrollDirection===wi.LEFT?r.scrollBy(-e,0):this._horizontalScrollDirection===wi.RIGHT&&r.scrollBy(e,0)})};_isOverContainer(r,e){return this._domRect!=null&&xu(this._domRect,r,e)}_getSiblingContainerFromPosition(r,e,i){return this._siblings.find(n=>n._canReceive(r,e,i))}_canReceive(r,e,i){if(!this._domRect||!xu(this._domRect,e,i)||!this.enterPredicate(r,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(r,e){let i=this._activeSiblings;!i.has(r)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(r),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:r,receiver:this,items:e}))}_stopReceiving(r){this._activeSiblings.delete(r),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:r,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(r=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(r);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let r=wc(this._container);this._cachedShadowRoot=r||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let r=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,r))}};function jf(t,r){let{top:e,bottom:i,height:n}=t,o=n*zf;return r>=e-o&&r<=e+o?Gi.UP:r>=i-o&&r<=i+o?Gi.DOWN:Gi.NONE}function Hf(t,r){let{left:e,right:i,width:n}=t,o=n*zf;return r>=e-o&&r<=e+o?wi.LEFT:r>=i-o&&r<=i+o?wi.RIGHT:wi.NONE}function Px(t,r,e,i,n){let o=jf(r,n),c=Hf(r,i),d=Gi.NONE,h=wi.NONE;if(o){let g=t.scrollTop;o===Gi.UP?g>0&&(d=Gi.UP):t.scrollHeight-g>t.clientHeight&&(d=Gi.DOWN)}if(c){let g=t.scrollLeft;e==="rtl"?c===wi.RIGHT?g<0&&(h=wi.RIGHT):t.scrollWidth+g>t.clientWidth&&(h=wi.LEFT):c===wi.LEFT?g>0&&(h=wi.LEFT):t.scrollWidth-g>t.clientWidth&&(h=wi.RIGHT)}return[d,h]}var Za={capture:!0},yu={passive:!1,capture:!0},Tx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return t})(),Du=(()=>{class t{_ngZone=x(Ze);_document=x(vt);_styleLoader=x($i);_renderer=x(gr).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new J;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Se([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new J;pointerUp=new J;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,yu)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Tx),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),o=d=>this.pointerUp.next(d),c=[["scroll",d=>this._scroll.next(d),Za],["selectstart",this._preventDefaultWhileDragging,yu]];n?c.push(["touchend",o,Za],["touchcancel",o,Za]):c.push(["mouseup",o,Za]),n||c.push(["mousemove",d=>this.pointerMove.next(d),yu]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=c.map(([d,h,g])=>this._renderer.listen(this._document,d,h,g))})}}stopDragging(e){this._activeDragInstances.update(i=>{let n=i.indexOf(e);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this._scroll];return e&&e!==this._document&&i.push(new Wn(n=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(e,"scroll",c=>{this._activeDragInstances().length&&n.next(c)},Za);return()=>{o()}}))),Mi(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ax={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Mu=(()=>{class t{_document=x(vt);_ngZone=x(Ze);_viewportRuler=x(vn);_dragDropRegistry=x(Du);_renderer=x(gr).createRenderer(null,null);constructor(){}createDrag(e,i=Ax){return new Cu(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new ku(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jc=new Ce("CDK_DRAG_PARENT");var Uf=new Ce("CdkDragHandle"),Wf=(()=>{class t{element=x(Te);_parentDrag=x(jc,{optional:!0,skipSelf:!0});_dragDropRegistry=x(Du);_stateChanges=new J;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",ot]},features:[Kt([{provide:Uf,useExisting:t}])]})}return t})(),Kf=new Ce("CDK_DRAG_CONFIG"),qf=new Ce("CdkDropList"),Qf=(()=>{class t{element=x(Te);dropContainer=x(qf,{optional:!0,skipSelf:!0});_ngZone=x(Ze);_viewContainerRef=x(_r);_dir=x(hi,{optional:!0});_changeDetectorRef=x(St);_selfHandle=x(Uf,{optional:!0,self:!0});_parentDrag=x(jc,{optional:!0,skipSelf:!0});_dragDropRegistry=x(Du);_destroyed=new J;_handles=new Zt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Ve;released=new Ve;ended=new Ve;entered=new Ve;exited=new Ve;dropped=new Ve;moved=new Wn(e=>{let i=this._dragRef.moved.pipe(ht(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=x(We);constructor(){let e=this.dropContainer,i=x(Kf,{optional:!0}),n=x(Mu);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(Jt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Oi(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),n=i.indexOf(e);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):ar(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:Pr(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Xi(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){e.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:n,constrainPosition:o,previewClass:c,boundaryElement:d,draggingDisabled:h,rootElementSelector:g,previewContainer:f}=e;this.disabled=h??!1,this.dragStartDelay=n||0,this.lockAxis=i||null,o&&(this.constrainPosition=o),c&&(this.previewClass=c),d&&(this.boundaryElement=d),g&&(this.rootElementSelector=g),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(Eo(e=>{let i=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),tn(e=>Mi(...e.map(i=>i._stateChanges.pipe(It(i))))),Jt(this._destroyed)).subscribe(e=>{let i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&Xe("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",ot],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",si]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Kt([{provide:jc,useExisting:t}]),fr]})}return t})(),Bf=new Ce("CdkDropListGroup");var Xf=(()=>{class t{element=x(Te);_changeDetectorRef=x(St);_scrollDispatcher=x(Jn);_dir=x(hi,{optional:!0});_group=x(Bf,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new J;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=x(bi).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new Ve;entered=new Ve;exited=new Ve;sorted=new Ve;_unsortedItems=new Set;constructor(){let e=x(Mu),i=x(Kf,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(n,o)=>this.enterPredicate(n.data,o.data),this._dropListRef.sortPredicate=(n,o,c)=>this.sortPredicate(n,o.data,c.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(It(this._dir.value),Jt(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=Wa(this.connectedTo).map(n=>{if(typeof n=="string"){let o=t._dropLists.find(c=>c.id===n);return o}return n});if(this._group&&this._group._items.forEach(n=>{i.indexOf(n)===-1&&i.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(n)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Pr(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),Mi(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:c,listOrientation:d}=e;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=c??!1,this.orientation=d||"vertical",this.lockAxis=i||null}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){i&2&&(Le("id",n.id),Xe("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",ot],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",ot],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",ot],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",ot]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Kt([{provide:Bf,useValue:void 0},{provide:qf,useExisting:t}])]})}return t})();var Lx=new Ce("CdkDragPlaceholder"),Yf=(()=>{class t{templateRef=x(oi);_drag=x(jc,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[Kt([{provide:Lx,useExisting:t}])]})}return t})();var Gf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[Mu],imports:[Ko]})}return t})();var Fx=new Ce("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Zf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[Ho,{provide:Fx,useValue:{separatorKeyCodes:[13]}}],imports:[at,xr,at]})}return t})();var Wc;function Bx(){if(Wc===void 0&&(Wc=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Wc=t.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return Wc}function ts(t){return Bx()?.createHTML(t)||t}function Jf(t){return Error(`Unable to find icon with the name "${t}"`)}function Vx(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function eg(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function tg(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Nr=class{url;svgText;options;svgElement;constructor(r,e,i){this.url=r,this.svgText=e,this.options=i}},rg=(()=>{class t{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,i,n,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._document=n}addSvgIcon(e,i,n){return this.addSvgIconInNamespace("",e,i,n)}addSvgIconLiteral(e,i,n){return this.addSvgIconLiteralInNamespace("",e,i,n)}addSvgIconInNamespace(e,i,n,o){return this._addSvgIconConfig(e,i,new Nr(n,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,n,o){let c=this._sanitizer.sanitize(Do.HTML,n);if(!c)throw tg(n);let d=ts(c);return this._addSvgIconConfig(e,i,new Nr("",d,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,n){return this._addSvgIconSetConfig(e,new Nr(i,null,n))}addSvgIconSetLiteralInNamespace(e,i,n){let o=this._sanitizer.sanitize(Do.HTML,i);if(!o)throw tg(i);let c=ts(o);return this._addSvgIconSetConfig(e,new Nr("",c,n))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(Do.RESOURCE_URL,e);if(!i)throw eg(e);let n=this._cachedIconsByUrl.get(i);return n?yi(Kc(n)):this._loadSvgIconFromConfig(new Nr(e,null)).pipe(Eo(o=>this._cachedIconsByUrl.set(i,o)),ht(o=>Kc(o)))}getNamedSvgIcon(e,i=""){let n=ig(i,e),o=this._svgIconConfigs.get(n);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(n,o),this._getSvgFromConfig(o);let c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):pp(Jf(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?yi(Kc(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ht(i=>Kc(i)))}_getSvgFromIconSetConfigs(e,i){let n=this._extractIconWithNameFromAnySet(e,i);if(n)return yi(n);let o=i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(_p(d=>{let g=`Loading icon set URL: ${this._sanitizer.sanitize(Do.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(g)),yi(null)})));return fp(o).pipe(ht(()=>{let c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw Jf(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let n=i.length-1;n>=0;n--){let o=i[n];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let c=this._svgElementFromConfig(o),d=this._extractSvgIconFromSet(c,e,o.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Eo(i=>e.svgText=i),ht(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?yi(null):this._fetchIcon(e).pipe(Eo(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,n){let o=e.querySelector(`[id="${i}"]`);if(!o)return null;let c=o.cloneNode(!0);if(c.removeAttribute("id"),c.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(c,n);if(c.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(c),n);let d=this._svgElementFromString(ts("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,n)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let n=i.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){let i=this._svgElementFromString(ts("<svg></svg>")),n=e.attributes;for(let o=0;o<n.length;o++){let{name:c,value:d}=n[o];c!=="id"&&i.setAttribute(c,d)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:n}=e,o=n?.withCredentials??!1;if(!this._httpClient)throw Vx();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let c=this._sanitizer.sanitize(Do.RESOURCE_URL,i);if(!c)throw eg(i);let d=this._inProgressUrlFetches.get(c);if(d)return d;let h=this._httpClient.get(c,{responseType:"text",withCredentials:o}).pipe(ht(g=>ts(g)),vp(()=>this._inProgressUrlFetches.delete(c)),bp());return this._inProgressUrlFetches.set(c,h),h}_addSvgIconConfig(e,i,n){return this._svgIconConfigs.set(ig(e,i),n),this}_addSvgIconSetConfig(e,i){let n=this._iconSetConfigs.get(e);return n?n.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let n=0;n<this._resolvers.length;n++){let o=this._resolvers[n](i,e);if(o)return $x(o)?new Nr(o.url,null,o.options):new Nr(o,null)}}static \u0275fac=function(i){return new(i||t)($a(Vp,8),$a($p),$a(vt,8),$a(za))};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Kc(t){return t.cloneNode(!0)}function ig(t,r){return t+":"+r}function $x(t){return!!(t.url&&t.options)}var zx=["*"],jx=new Ce("MAT_ICON_DEFAULT_OPTIONS"),Hx=new Ce("mat-icon-location",{providedIn:"root",factory:Ux});function Ux(){let t=x(vt),r=t?t.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var ng=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Wx=ng.map(t=>`[${t}]`).join(", "),Kx=/^url\(['"]?#(.*?)['"]?\)$/,fi=(()=>{class t{_elementRef=x(Te);_iconRegistry=x(rg);_location=x(Hx);_errorHandler=x(za);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Ht.EMPTY;constructor(){let e=x(new Tp("aria-hidden"),{optional:!0}),i=x(jx,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let n=e.childNodes[i];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>e.classList.remove(n)),i.forEach(n=>e.classList.add(n)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((n,o)=>{n.forEach(c=>{o.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(Wx),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)ng.forEach(c=>{let d=i[o],h=d.getAttribute(c),g=h?h.match(Kx):null;if(g){let f=n.get(d);f||(f=[],n.set(d,f)),f.push({name:c,value:g[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,n]=this._splitIconName(e);i&&(this._svgNamespace=i),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,i).pipe(Xi(1)).subscribe(o=>this._setSvgElement(o),o=>{let c=`Error retrieving icon ${i}:${n}! ${o.message}`;this._errorHandler.handleError(new Error(c))})}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,n){i&2&&(Le("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),Ri(n.color?"mat-"+n.color:""),Xe("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",ot],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:zx,decls:1,vars:0,template:function(i,n){i&1&&(ai(),Et(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return t})(),gi=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[at,at]})}return t})();var qx=["*"];function Qx(t,r){t&1&&Et(0)}var Ou=(()=>{class t{_elementRef=x(Te);constructor(){}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]})}return t})(),Ru=(()=>{class t{template=x(oi);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkStepLabel",""]]})}return t})();var no={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},Xx=new Ce("STEPPER_GLOBAL_OPTIONS"),qc=(()=>{class t{_stepperOptions;_stepper=x(Qc);_displayDefaultIndicatorType;stepLabel;_childForms;content;stepControl;get interacted(){return this._interacted()}set interacted(e){this._interacted.set(e)}_interacted=Se(!1);interactedStream=new Ve;label;errorMessage;ariaLabel;ariaLabelledby;get state(){return this._state()}set state(e){this._state.set(e)}_state=Se(void 0);get editable(){return this._editable()}set editable(e){this._editable.set(e)}_editable=Se(!0);optional=!1;get completed(){let e=this._completedOverride(),i=this._interacted();return e??(i&&(!this.stepControl||this.stepControl.valid))}set completed(e){this._completedOverride.set(e)}_completedOverride=Se(null);index=Se(-1);isSelected=vr(()=>this._stepper.selectedIndex===this.index());indicatorType=vr(()=>{let e=this.isSelected(),i=this.completed,n=this._state()??no.NUMBER,o=this._editable();return this._showError()&&this.hasError&&!e?no.ERROR:this._displayDefaultIndicatorType?!i||e?no.NUMBER:o?no.EDIT:no.DONE:i&&!e?no.DONE:i&&e?n:o&&e?no.EDIT:n});isNavigable=vr(()=>{let e=this.isSelected();return this.completed||e||!this._stepper.linear});get hasError(){let e=this._customError();return e??this._getDefaultError()}set hasError(e){this._customError.set(e)}_customError=Se(null);_getDefaultError(){return this.interacted&&!!this.stepControl?.invalid}constructor(){let e=x(Xx,{optional:!0});this._stepperOptions=e||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this._interacted.set(!1),this._completedOverride()!=null&&this._completedOverride.set(!1),this._customError()!=null&&this._customError.set(!1),this.stepControl&&(this._childForms?.forEach(e=>e.resetForm?.()),this.stepControl.reset())}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this._interacted()||(this._interacted.set(!0),this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError()!=null}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["cdk-step"]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,Ru,5),Ct(o,Up,5)),i&2){let c;De(c=Me())&&(n.stepLabel=c.first),De(c=Me())&&(n._childForms=c)}},viewQuery:function(i,n){if(i&1&&Dt(oi,7),i&2){let o;De(o=Me())&&(n.content=o.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",ot],optional:[2,"optional","optional",ot],completed:[2,"completed","completed",ot],hasError:[2,"hasError","hasError",ot]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[fr],ngContentSelectors:qx,decls:1,vars:0,template:function(i,n){i&1&&(ai(),gc(0,Qx,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return t})(),Qc=(()=>{class t{_dir=x(hi,{optional:!0});_changeDetectorRef=x(St);_elementRef=x(Te);_destroyed=new J;_keyManager;_steps;steps=new rn;_stepHeader;_sortedHeaders=new rn;linear=!1;get selectedIndex(){return this._selectedIndex()}set selectedIndex(e){this._steps?(this._isValidIndex(e),this.selectedIndex!==e&&(this.selected?._markAsInteracted(),!this._anyControlsInvalidOrPending(e)&&(e>=this.selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(e))):this._selectedIndex.set(e)}_selectedIndex=Se(0);get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}selectionChange=new Ve;selectedIndexChange=new Ve;_groupId=x(bi).getId("cdk-stepper-");get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation(e==="vertical")}_orientation="horizontal";constructor(){}ngAfterContentInit(){this._steps.changes.pipe(It(this._steps),Jt(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(i=>i._stepper===this)),this.steps.forEach((i,n)=>i.index.set(n)),this.steps.notifyOnChanges()})}ngAfterViewInit(){if(this._stepHeader.changes.pipe(It(this._stepHeader),Jt(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((i,n)=>i._elementRef.nativeElement.compareDocumentPosition(n._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new Sc(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),this._keyManager.updateActiveItem(this.selectedIndex),(this._dir?this._dir.change:yi()).pipe(It(this._layoutDirection()),Jt(this._destroyed)).subscribe(e=>this._keyManager?.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this.selectedIndex),this.steps.changes.subscribe(()=>{this.selected||this._selectedIndex.set(Math.max(this.selectedIndex-1,0))}),this._isValidIndex(this.selectedIndex)||this._selectedIndex.set(0),this.linear&&this.selectedIndex>0){let e=this.steps.toArray().slice(0,this._selectedIndex());for(let i of e)i._markAsInteracted()}}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex()+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex()-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`${this._groupId}-label-${e}`}_getStepContentId(e){return`${this._groupId}-content-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){let i=e-this._selectedIndex();return i<0?this._layoutDirection()==="rtl"?"next":"previous":i>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex()}_updateSelectedItemIndex(e){let i=this.steps.toArray(),n=this._selectedIndex();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:n,selectedStep:i[e],previouslySelectedStep:i[n]}),this._keyManager&&(this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e)),this._selectedIndex.set(e),this.selectedIndexChange.emit(e),this._stateChanged()}_onKeydown(e){let i=dn(e),n=e.keyCode,o=this._keyManager;o?.activeItemIndex!=null&&!i&&(n===32||n===13)?(this.selectedIndex=o.activeItemIndex,e.preventDefault()):o?.setFocusOrigin("keyboard").onKeydown(e)}_anyControlsInvalidOrPending(e){return this.linear&&e>=0?this.steps.toArray().slice(0,e).some(i=>{let n=i.stepControl;return(n?n.invalid||n.pending||!i.interacted:!i.completed)&&!i.optional&&!i._completedOverride()}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let e=this._elementRef.nativeElement,i=Xn();return e===i||e.contains(i)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","cdkStepper",""]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,qc,5),Ct(o,Ou,5)),i&2){let c;De(c=Me())&&(n._steps=c),De(c=Me())&&(n._stepHeader=c)}},inputs:{linear:[2,"linear","linear",ot],selectedIndex:[2,"selectedIndex","selectedIndex",si],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"]})}return t})();var ag=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[Gn]})}return t})();var Yx=(t,r,e)=>({index:t,active:r,optional:e});function Gx(t,r){if(t&1&&Qn(0,2),t&2){let e=j();le("ngTemplateOutlet",e.iconOverrides[e.state])("ngTemplateOutletContext",Rp(2,Yx,e.index,e.active,e.optional))}}function Zx(t,r){if(t&1&&(S(0,"span",7),L(1),M()),t&2){let e=j(2);V(),nt(e._getDefaultTextForState(e.state))}}function Jx(t,r){if(t&1&&(S(0,"span",8),L(1),M()),t&2){let e=j(3);V(),nt(e._intl.completedLabel)}}function ew(t,r){if(t&1&&(S(0,"span",8),L(1),M()),t&2){let e=j(3);V(),nt(e._intl.editableLabel)}}function tw(t,r){if(t&1&&(Ke(0,Jx,2,1,"span",8)(1,ew,2,1,"span",8),S(2,"mat-icon",7),L(3),M()),t&2){let e=j(2);qe(e.state==="done"?0:e.state==="edit"?1:-1),V(3),nt(e._getDefaultTextForState(e.state))}}function iw(t,r){if(t&1&&Ke(0,Zx,2,1,"span",7)(1,tw,4,2),t&2){let e,i=j();qe((e=i.state)==="number"?0:1)}}function rw(t,r){t&1&&(S(0,"div",4),Qn(1,9),M()),t&2&&(V(),le("ngTemplateOutlet",r.template))}function nw(t,r){if(t&1&&(S(0,"div",4),L(1),M()),t&2){let e=j();V(),nt(e.label)}}function ow(t,r){if(t&1&&(S(0,"div",5),L(1),M()),t&2){let e=j();V(),nt(e._intl.optionalLabel)}}function aw(t,r){if(t&1&&(S(0,"div",6),L(1),M()),t&2){let e=j();V(),nt(e.errorMessage)}}var sg=["*"];function sw(t,r){}function cw(t,r){if(t&1&&(Et(0),lt(1,sw,0,0,"ng-template",0)),t&2){let e=j();V(),le("cdkPortalOutlet",e._portal)}}var lw=["animatedContainer"],cg=t=>({step:t});function dw(t,r){t&1&&Et(0)}function uw(t,r){t&1&&pt(0,"div",7)}function mw(t,r){if(t&1&&(Qn(0,6),Ke(1,uw,1,0,"div",7)),t&2){let e=r.$implicit,i=r.$index,n=r.$count;j(2);let o=an(4);le("ngTemplateOutlet",o)("ngTemplateOutletContext",su(3,cg,e)),V(),qe(i!==n-1?1:-1)}}function hw(t,r){if(t&1&&(S(0,"div",8,1),Qn(2,9),M()),t&2){let e=r.$implicit,i=r.$index,n=j(2);Ri("mat-horizontal-stepper-content-"+n._getAnimationDirection(i)),le("id",n._getStepContentId(i)),Le("aria-labelledby",n._getStepLabelId(i))("inert",n.selectedIndex===i?null:""),V(2),le("ngTemplateOutlet",e.content)}}function pw(t,r){if(t&1&&(S(0,"div",2)(1,"div",3),Mr(2,mw,2,5,null,null,qn),M(),S(4,"div",4),Mr(5,hw,3,6,"div",5,qn),M()()),t&2){let e=j();V(2),Or(e.steps),V(3),Or(e.steps)}}function fw(t,r){if(t&1&&(S(0,"div",10),Qn(1,6),S(2,"div",11,1)(4,"div",12)(5,"div",13),Qn(6,9),M()()()()),t&2){let e=r.$implicit,i=r.$index,n=r.$index,o=r.$count,c=j(2),d=an(4);V(),le("ngTemplateOutlet",d)("ngTemplateOutletContext",su(10,cg,e)),V(),Xe("mat-stepper-vertical-line",n!==o-1)("mat-vertical-content-container-active",c.selectedIndex===i),Le("inert",c.selectedIndex===i?null:""),V(2),le("id",c._getStepContentId(i)),Le("aria-labelledby",c._getStepLabelId(i)),V(2),le("ngTemplateOutlet",e.content)}}function gw(t,r){if(t&1&&Mr(0,fw,7,12,"div",10,qn),t&2){let e=j();Or(e.steps)}}function _w(t,r){if(t&1){let e=tt();S(0,"mat-step-header",14),re("click",function(){let n=X(e).step;return Y(n.select())})("keydown",function(n){X(e);let o=j();return Y(o._onKeydown(n))}),M()}if(t&2){let e=r.step,i=j();Xe("mat-horizontal-stepper-header",i.orientation==="horizontal")("mat-vertical-stepper-header",i.orientation==="vertical"),le("tabIndex",i._getFocusIndex()===e.index()?0:-1)("id",i._getStepLabelId(e.index()))("index",e.index())("state",e.indicatorType())("label",e.stepLabel||e.label)("selected",e.isSelected())("active",e.isNavigable())("optional",e.optional)("errorMessage",e.errorMessage)("iconOverrides",i._iconOverrides)("disableRipple",i.disableRipple||!e.isNavigable())("color",e.color||i.color),Le("aria-posinset",e.index()+1)("aria-setsize",i.steps.length)("aria-controls",i._getStepContentId(e.index()))("aria-selected",e.isSelected())("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null)("aria-disabled",e.isNavigable()?null:!0)}}var is=(()=>{class t extends Ru{static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275dir=ke({type:t,selectors:[["","matStepLabel",""]],features:[yt]})}return t})(),Xc=(()=>{class t{changes=new J;optionalLabel="Optional";completedLabel="Completed";editableLabel="Editable";static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vw(t){return t||new Xc}var yw={provide:Xc,deps:[[new fc,new ou,Xc]],useFactory:vw},Pu=(()=>{class t extends Ou{_intl=x(Xc);_focusMonitor=x(Yn);_intlSubscription;state;label;errorMessage;iconOverrides;index;selected;active;optional;disableRipple;color;constructor(){super();let e=x($i);e.load(fn),e.load(Qp);let i=x(St);this._intlSubscription=this._intl.changes.subscribe(()=>i.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._elementRef,e,i):this._elementRef.nativeElement.focus(i)}_stringLabel(){return this.label instanceof is?null:this.label}_templateLabel(){return this.label instanceof is?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getDefaultTextForState(e){return e=="number"?`${this.index+1}`:e=="edit"?"create":e=="error"?"warning":e}_hasEmptyLabel(){return!this._stringLabel()&&!this._templateLabel()&&!this._hasOptionalLabel()&&!this._hasErrorLabel()}_hasOptionalLabel(){return this.optional&&this.state!=="error"}_hasErrorLabel(){return this.state==="error"}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:4,hostBindings:function(i,n){i&2&&(Ri("mat-"+(n.color||"primary")),Xe("mat-step-header-empty-label",n._hasEmptyLabel()))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},features:[yt],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(i,n){if(i&1&&(pt(0,"div",0),S(1,"div")(2,"div",1),Ke(3,Gx,1,6,"ng-container",2)(4,iw,2,1),M()(),S(5,"div",3),Ke(6,rw,2,1,"div",4)(7,nw,2,1,"div",4),Ke(8,ow,2,1,"div",5),Ke(9,aw,2,1,"div",6),M()),i&2){let o;le("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disableRipple),V(),Ri(Op("mat-step-icon-state-",n.state," mat-step-icon")),Xe("mat-step-icon-selected",n.selected),V(2),qe(n.iconOverrides&&n.iconOverrides[n.state]?3:4),V(2),Xe("mat-step-label-active",n.active)("mat-step-label-selected",n.selected)("mat-step-label-error",n.state=="error"),V(),qe((o=n._templateLabel())?6:n._stringLabel()?7:-1,o),V(2),qe(n._hasOptionalLabel()?8:-1),V(),qe(n._hasErrorLabel()?9:-1)}},dependencies:[Zn,lu,fi],styles:[`.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent));border-radius:var(--mat-stepper-header-hover-state-layer-shape, var(--mat-sys-corner-medium))}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));border-radius:var(--mat-stepper-header-focus-state-layer-shape, var(--mat-sys-corner-medium))}@media(hover: none){.mat-step-header:hover{background:none}}@media(forced-colors: active){.mat-step-header{outline:solid 1px}.mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-header[aria-disabled=true]{outline-color:GrayText}.mat-step-header[aria-disabled=true] .mat-step-label,.mat-step-header[aria-disabled=true] .mat-step-icon,.mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color, var(--mat-sys-surface));background-color:var(--mat-stepper-header-icon-background-color, var(--mat-sys-on-surface-variant))}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color, transparent);color:var(--mat-stepper-header-error-state-icon-foreground-color, var(--mat-sys-error))}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-stepper-header-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-stepper-header-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-stepper-header-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color, var(--mat-sys-error));font-size:var(--mat-stepper-header-error-state-label-text-size, var(--mat-sys-title-small-size))}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-stepper-header-selected-state-label-text-weight, var(--mat-sys-title-small-weight))}.mat-step-header-empty-label .mat-step-label{min-width:0}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-selected-state-icon-foreground-color, var(--mat-sys-on-primary))}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-done-state-icon-foreground-color, var(--mat-sys-on-primary))}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-edit-state-icon-foreground-color, var(--mat-sys-on-primary))}
`],encapsulation:2,changeDetection:0})}return t})(),bw=(()=>{class t{templateRef=x(oi);name;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[0,"matStepperIcon","name"]}})}return t})(),xw=(()=>{class t{_template=x(oi);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["ng-template","matStepContent",""]]})}return t})(),Tu=(()=>{class t extends qc{_errorStateMatcher=x(Ho,{skipSelf:!0});_viewContainerRef=x(_r);_isSelected=Ht.EMPTY;stepLabel=void 0;color;_lazyContent;_portal;ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(tn(()=>this._stepper.selectionChange.pipe(ht(e=>e.selectedStep===this),It(this._stepper.selected===this)))).subscribe(e=>{e&&this._lazyContent&&!this._portal&&(this._portal=new Yi(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(e,i){let n=this._errorStateMatcher.isErrorState(e,i),o=!!(e&&e.invalid&&this.interacted);return n||o}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275cmp=ye({type:t,selectors:[["mat-step"]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,is,5),Ct(o,xw,5)),i&2){let c;De(c=Me())&&(n.stepLabel=c.first),De(c=Me())&&(n._lazyContent=c.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],features:[Kt([{provide:Ho,useExisting:t},{provide:qc,useExisting:t}]),yt],ngContentSelectors:sg,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(i,n){i&1&&(ai(),lt(0,cw,2,1,"ng-template"))},dependencies:[wr],encapsulation:2,changeDetection:0})}return t})(),Au=(()=>{class t extends Qc{_ngZone=x(Ze);_renderer=x(ui);_animationsDisabled=xi();_cleanupTransition;_isAnimating=Se(!1);_stepHeader=void 0;_animatedContainers;_steps=void 0;steps=new rn;_icons;animationDone=new Ve;disableRipple;color;labelPosition="end";headerPosition="top";_iconOverrides={};get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e)?e+"ms":e}_animationDuration="";_isServer=!x(qt).isBrowser;constructor(){super();let i=x(Te).nativeElement.nodeName.toLowerCase();this.orientation=i==="mat-vertical-stepper"?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:e,templateRef:i})=>this._iconOverrides[e]=i),this.steps.changes.pipe(Jt(this._destroyed)).subscribe(()=>this._stateChanged()),this.selectedIndexChange.pipe(Jt(this._destroyed)).subscribe(()=>{let e=this._getAnimationDuration();e==="0ms"||e==="0s"?this._onAnimationDone():this._isAnimating.set(!0)}),this._ngZone.runOutsideAngular(()=>{this._animationsDisabled||setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-stepper-animations-enabled"),this._cleanupTransition=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionend)},200)})}ngAfterViewInit(){if(super.ngAfterViewInit(),typeof queueMicrotask=="function"){let e=!1;this._animatedContainers.changes.pipe(It(null),Jt(this._destroyed)).subscribe(()=>queueMicrotask(()=>{e||(e=!0,this.animationDone.emit()),this._stateChanged()}))}}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransition?.()}_getAnimationDuration(){return this._animationsDisabled?"0ms":this.animationDuration?this.animationDuration:this.orientation==="horizontal"?"500ms":"225ms"}_handleTransitionend=e=>{let i=e.target;if(!i)return;let n=this.orientation==="horizontal"&&e.propertyName==="transform"&&i.classList.contains("mat-horizontal-stepper-content-current"),o=this.orientation==="vertical"&&e.propertyName==="grid-template-rows"&&i.classList.contains("mat-vertical-content-container-active");(n||o)&&this._animatedContainers.find(d=>d.nativeElement===i)&&this._onAnimationDone()};_onAnimationDone(){this._isAnimating.set(!1),this.animationDone.emit()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,Tu,5),Ct(o,bw,5)),i&2){let c;De(c=Me())&&(n._steps=c),De(c=Me())&&(n._icons=c)}},viewQuery:function(i,n){if(i&1&&(Dt(Pu,5),Dt(lw,5)),i&2){let o;De(o=Me())&&(n._stepHeader=o),De(o=Me())&&(n._animatedContainers=o)}},hostAttrs:["role","tablist"],hostVars:15,hostBindings:function(i,n){i&2&&(Le("aria-orientation",n.orientation),sn("--mat-stepper-animation-duration",n._getAnimationDuration()),Xe("mat-stepper-horizontal",n.orientation==="horizontal")("mat-stepper-vertical",n.orientation==="vertical")("mat-stepper-label-position-end",n.orientation==="horizontal"&&n.labelPosition=="end")("mat-stepper-label-position-bottom",n.orientation==="horizontal"&&n.labelPosition=="bottom")("mat-stepper-header-position-bottom",n.headerPosition==="bottom")("mat-stepper-animating",n._isAnimating()))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[Kt([{provide:Qc,useExisting:t}]),yt],ngContentSelectors:sg,decls:5,vars:2,consts:[["stepTemplate",""],["animatedContainer",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","class"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(i,n){if(i&1&&(ai(),Ke(0,dw,1,0),Ke(1,pw,7,0,"div",2)(2,gw,2,0),lt(3,_w,1,23,"ng-template",null,0,cu)),i&2){let o;qe(n._isServer?0:-1),V(),qe((o=n.orientation)==="horizontal"?1:o==="vertical"?2:-1)}},dependencies:[lu,Pu],styles:[`.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font, var(--mat-sys-body-medium-font));background:var(--mat-stepper-container-color, var(--mat-sys-surface))}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color, var(--mat-sys-outline))}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height, 72px)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header.mat-step-header-empty-label .mat-step-icon{margin:0}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color, var(--mat-sys-outline))}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{visibility:hidden;overflow:hidden;outline:0;height:0}.mat-stepper-animations-enabled .mat-horizontal-stepper-content{transition:transform var(--mat-stepper-animation-duration, 0) cubic-bezier(0.35, 0, 0.25, 1)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-previous{transform:translate3d(-100%, 0, 0)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-next{transform:translate3d(100%, 0, 0)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-current{visibility:visible;transform:none;height:auto}.mat-stepper-horizontal:not(.mat-stepper-animating) .mat-horizontal-stepper-content.mat-horizontal-stepper-content-current{overflow:visible}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}@media(forced-colors: active){.mat-horizontal-content-container{outline:solid 1px}}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{display:grid;grid-template-rows:0fr;grid-template-columns:100%;margin-left:36px;border:0;position:relative}.mat-stepper-animations-enabled .mat-vertical-content-container{transition:grid-template-rows var(--mat-stepper-animation-duration, 0) cubic-bezier(0.4, 0, 0.2, 1)}.mat-vertical-content-container.mat-vertical-content-container-active{grid-template-rows:1fr}.mat-step:last-child .mat-vertical-content-container{border:none}@media(forced-colors: active){.mat-vertical-content-container{outline:solid 1px}}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}@supports not (grid-template-rows: 0fr){.mat-vertical-content-container{height:0}.mat-vertical-content-container.mat-vertical-content-container-active{height:auto}}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color, var(--mat-sys-outline));top:calc(8px - calc((var(--mat-stepper-header-height, 72px) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height, 72px) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0;visibility:hidden}.mat-stepper-animations-enabled .mat-vertical-stepper-content{transition:visibility var(--mat-stepper-animation-duration, 0) linear}.mat-vertical-content-container-active>.mat-vertical-stepper-content{visibility:visible}.mat-vertical-content{padding:0 24px 24px 24px}
`],encapsulation:2,changeDetection:0})}return t})();var lg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[yw,Ho],imports:[at,sr,ag,gi,xr,Au,Pu,at]})}return t})();var Cw=["stepper"];function Sw(t,r){t&1&&L(0,"Name Your List")}function kw(t,r){t&1&&L(0,"Add Items")}function Iw(t,r){if(t&1){let e=tt();S(0,"div",31),re("click",function(){X(e);let n=j(),o=n.$implicit,c=n.$index,d=j(2);return Y(!d.isDisabled()&&d.startEditingItem(c,o))}),S(1,"span",32),L(2),M()()}if(t&2){let e=j().$implicit;V(2),nt(e)}}function Ew(t,r){if(t&1){let e=tt();S(0,"div",29)(1,"mat-form-field",33)(2,"input",34),Ua("ngModelChange",function(n){X(e);let o=j(3);return Ha(o.editingItemValue,n)||(o.editingItemValue=n),Y(n)}),re("keyup.enter",function(){X(e);let n=j().$implicit,o=j(2);return Y(o.saveItemEdit(n))})("keyup.escape",function(){X(e);let n=j(3);return Y(n.cancelEditingItem())}),M()(),S(3,"button",35),re("click",function(){X(e);let n=j().$implicit,o=j(2);return Y(o.saveItemEdit(n))}),S(4,"mat-icon"),L(5,"check"),M()(),S(6,"button",36),re("click",function(){X(e);let n=j(3);return Y(n.cancelEditingItem())}),S(7,"mat-icon"),L(8,"close"),M()()()}if(t&2){let e=j(3);V(2),ja("ngModel",e.editingItemValue)}}function Dw(t,r){if(t&1){let e=tt();S(0,"button",37),re("click",function(n){X(e);let o=j().$implicit,c=j(2);return n.stopPropagation(),Y(c.onRemoveItem(o))}),S(1,"mat-icon"),L(2,"delete"),M()()}if(t&2){let e=j(3);le("disabled",e.isDisabled())}}function Mw(t,r){if(t&1&&(S(0,"div",27),Ke(1,Iw,3,1,"div",28),Ke(2,Ew,9,1,"div",29),Ke(3,Dw,3,1,"button",30),M()),t&2){let e=r.$index,i=j(2);V(),qe(i.isEditingItem(e)?-1:1),V(),qe(i.isEditingItem(e)?2:-1),V(),qe(i.isEditingItem(e)?-1:3)}}function Ow(t,r){if(t&1&&(S(0,"div",20)(1,"h3"),L(2),M(),S(3,"div",26),Mr(4,Mw,4,3,"div",27,qn),M()()),t&2){let e=j();V(2),Vi("Items (",e.items().length,")"),V(2),Or(e.items())}}function Rw(t,r){t&1&&L(0,"Review & Start")}function Pw(t,r){if(t&1&&(S(0,"div",27)(1,"div",28)(2,"span",32),L(3),M()()()),t&2){let e=r.$implicit;V(3),nt(e)}}function Tw(t,r){if(t&1&&(S(0,"div",20)(1,"h3"),L(2,"Your Items"),M(),S(3,"div",26),Mr(4,Pw,4,1,"div",27,qn),M()()),t&2){let e=j();V(4),Or(e.items())}}var Yc=class t{constructor(r){this.snackBar=r}listName=Rt.required();items=Rt.required();currentItem=Rt.required();pastedText=Rt.required();isDisabled=Rt(!1);canAddItem=Rt(!1);canStartSort=Rt(!1);currentListId=Rt(void 0);listNameChange=Je();currentItemChange=Je();pastedTextChange=Je();addItem=Je();removeItem=Je();startSort=Je();clearList=Je();fileSelected=Je();addPastedItems=Je();editItem=Je();editingItemIndex=Se(null);editingItemValue=Se("");stepper=Ap("stepper");breakpointObserver=x(Cc);stepperOrientation=this.breakpointObserver.observe([Ka.XSmall,Ka.Small]).pipe(ht(({matches:r})=>r?"vertical":"horizontal"));isStep1Valid=vr(()=>this.listName().trim().length>0);isStep2Valid=vr(()=>this.items().length>=2);onListNameChange(r){this.listNameChange.emit(r)}onCurrentItemChange(r){this.currentItemChange.emit(r)}onPastedTextChange(r){this.pastedTextChange.emit(r)}onAddItem(){this.addItem.emit()}onRemoveItem(r){this.removeItem.emit(r)}onStartSort(){this.startSort.emit()}onClearList(){this.clearList.emit()}onKeyPress(r){r.key==="Enter"&&this.onAddItem()}onFileSelected(r){let e=r.target;if(!e.files||e.files.length===0)return;let i=e.files[0];this.fileSelected.emit(i),e.value=""}onAddPastedItems(){this.addPastedItems.emit()}startEditingItem(r,e){this.editingItemIndex.set(r),this.editingItemValue.set(e)}saveItemEdit(r){let e=this.editingItemValue().trim();e&&e!==r&&this.editItem.emit({oldName:r,newName:e}),this.editingItemIndex.set(null)}cancelEditingItem(){this.editingItemIndex.set(null)}isEditingItem(r){return this.editingItemIndex()===r}goToNextStep(){let r=this.stepper();r&&r.next()}goToPreviousStep(){let r=this.stepper();r&&r.previous()}resetStepper(){let r=this.stepper();r&&r.reset()}static \u0275fac=function(e){return new(e||t)(Mo(io))};static \u0275cmp=ye({type:t,selectors:[["app-list-input"]],viewQuery:function(e,i){e&1&&Dp(i.stepper,Cw,5),e&2&&Mp()},inputs:{listName:[1,"listName"],items:[1,"items"],currentItem:[1,"currentItem"],pastedText:[1,"pastedText"],isDisabled:[1,"isDisabled"],canAddItem:[1,"canAddItem"],canStartSort:[1,"canStartSort"],currentListId:[1,"currentListId"]},outputs:{listNameChange:"listNameChange",currentItemChange:"currentItemChange",pastedTextChange:"pastedTextChange",addItem:"addItem",removeItem:"removeItem",startSort:"startSort",clearList:"clearList",fileSelected:"fileSelected",addPastedItems:"addPastedItems",editItem:"editItem"},decls:105,vars:25,consts:[["stepper",""],["fileInput",""],[1,"input-card"],["linear","",3,"orientation"],[3,"completed"],["matStepLabel",""],[1,"step-content"],[1,"step-description"],["appearance","outline",1,"full-width"],["matInput","","placeholder","e.g., Favorite Movies",3,"ngModelChange","ngModel","disabled"],["matPrefix",""],[1,"step-actions"],["mat-raised-button","","color","primary",3,"click","disabled"],["matInput","","placeholder","Enter an item",3,"ngModelChange","keypress","ngModel","disabled"],["mat-icon-button","","matSuffix","",3,"click","disabled"],[1,"file-upload-section"],["type","file","accept",".txt,.csv",2,"display","none",3,"change"],["mat-stroked-button","",3,"click","disabled"],[1,"paste-section"],["matInput","","placeholder","Paste items here (one per line or comma-separated)","rows","5",3,"ngModelChange","ngModel","disabled"],[1,"items-list"],["mat-button","",3,"click"],[1,"review-section"],[1,"review-item"],[1,"review-content"],["mat-button","","color","warn",3,"click","disabled"],[1,"items-grid"],[1,"item-card"],[1,"item-display"],[1,"item-edit"],["mat-icon-button","","color","warn",1,"delete-button",3,"disabled"],[1,"item-display",3,"click"],[1,"item-name"],["appearance","outline",1,"item-edit-field"],["matInput","","placeholder","Item name",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",1,"delete-button",3,"click","disabled"]],template:function(e,i){if(e&1){let n=tt();S(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title"),L(3),M(),S(4,"mat-card-subtitle"),L(5),M()(),S(6,"mat-card-content")(7,"mat-stepper",3,0),cn(9,"async"),S(10,"mat-step",4),lt(11,Sw,1,0,"ng-template",5),S(12,"div",6)(13,"p",7),L(14,"Give your list a descriptive name"),M(),S(15,"mat-form-field",8)(16,"mat-label"),L(17,"List Name"),M(),S(18,"input",9),re("ngModelChange",function(c){return X(n),Y(i.onListNameChange(c))}),M(),S(19,"mat-icon",10),L(20,"label"),M()(),S(21,"div",11)(22,"button",12),re("click",function(){return X(n),Y(i.goToNextStep())}),L(23," Next "),S(24,"mat-icon"),L(25,"arrow_forward"),M()()()()(),S(26,"mat-step",4),lt(27,kw,1,0,"ng-template",5),S(28,"div",6)(29,"p",7),L(30,"Add at least 2 items to your list"),M(),S(31,"mat-form-field",8)(32,"mat-label"),L(33,"Add Item"),M(),S(34,"input",13),re("ngModelChange",function(c){return X(n),Y(i.onCurrentItemChange(c))})("keypress",function(c){return X(n),Y(i.onKeyPress(c))}),M(),S(35,"mat-icon",10),L(36,"add"),M(),S(37,"button",14),re("click",function(){return X(n),Y(i.onAddItem())}),S(38,"mat-icon"),L(39,"add_circle"),M()()(),S(40,"div",15)(41,"input",16,1),re("change",function(c){return X(n),Y(i.onFileSelected(c))}),M(),S(43,"button",17),re("click",function(){X(n);let c=an(42);return Y(c.click())}),S(44,"mat-icon"),L(45,"upload_file"),M(),L(46," Import from File (TXT/CSV) "),M()(),S(47,"div",18)(48,"mat-form-field",8)(49,"mat-label"),L(50,"Or Paste Your List"),M(),S(51,"textarea",19),re("ngModelChange",function(c){return X(n),Y(i.onPastedTextChange(c))}),L(52,"              "),M(),S(53,"mat-icon",10),L(54,"content_paste"),M()(),S(55,"button",17),re("click",function(){return X(n),Y(i.onAddPastedItems())}),S(56,"mat-icon"),L(57,"add_box"),M(),L(58," Add Pasted Items "),M()(),Ke(59,Ow,6,1,"div",20),S(60,"div",11)(61,"button",21),re("click",function(){return X(n),Y(i.goToPreviousStep())}),S(62,"mat-icon"),L(63,"arrow_back"),M(),L(64," Back "),M(),S(65,"button",12),re("click",function(){return X(n),Y(i.goToNextStep())}),L(66," Next "),S(67,"mat-icon"),L(68,"arrow_forward"),M()()()()(),S(69,"mat-step"),lt(70,Rw,1,0,"ng-template",5),S(71,"div",6)(72,"p",7),L(73,"Review your list and start sorting"),M(),S(74,"div",22)(75,"div",23)(76,"mat-icon"),L(77,"label"),M(),S(78,"div",24)(79,"strong"),L(80,"List Name:"),M(),S(81,"span"),L(82),M()()(),S(83,"div",23)(84,"mat-icon"),L(85,"list"),M(),S(86,"div",24)(87,"strong"),L(88,"Total Items:"),M(),S(89,"span"),L(90),M()()()(),Ke(91,Tw,6,0,"div",20),S(92,"div",11)(93,"button",21),re("click",function(){return X(n),Y(i.goToPreviousStep())}),S(94,"mat-icon"),L(95,"arrow_back"),M(),L(96," Back "),M(),S(97,"button",12),re("click",function(){return X(n),Y(i.onStartSort())}),S(98,"mat-icon"),L(99,"sort"),M(),L(100),M(),S(101,"button",25),re("click",function(){return X(n),Y(i.onClearList())}),S(102,"mat-icon"),L(103,"clear"),M(),L(104," Clear List "),M()()()()()()()}e&2&&(V(3),nt(i.currentListId()?"Edit Your List":"Create Your List"),V(2),nt(i.currentListId()?"Add more items and re-sort":"Follow the steps to create your list"),V(2),le("orientation",Po(9,23,i.stepperOrientation)??"horizontal"),V(3),le("completed",i.isStep1Valid()),V(8),le("ngModel",i.listName())("disabled",i.isDisabled()),V(4),le("disabled",!i.isStep1Valid()),V(4),le("completed",i.isStep2Valid()),V(8),le("ngModel",i.currentItem())("disabled",i.isDisabled()),V(3),le("disabled",!i.canAddItem()),V(6),le("disabled",i.isDisabled()),V(8),le("ngModel",i.pastedText())("disabled",i.isDisabled()),V(4),le("disabled",!i.pastedText()||i.pastedText().trim().length===0||i.isDisabled()),V(4),qe(i.items().length>0?59:-1),V(6),le("disabled",!i.isStep2Valid()),V(17),nt(i.listName()),V(8),nt(i.items().length),V(),qe(i.items().length>0?91:-1),V(6),le("disabled",!i.canStartSort()),V(3),Vi(" ",i.currentListId()?"Re-Sort List":"Start Sorting"," "),V(),le("disabled",i.items().length===0))},dependencies:[mi,Bo,Lo,No,Fo,br,yr,mn,pn,hn,un,pi,Pi,gn,Wo,Uo,zo,rf,nf,Ec,jo,Zf,gi,fi,Fc,lg,Tu,is,Au,vc],styles:[".input-card[_ngcontent-%COMP%]   mat-stepper[_ngcontent-%COMP%]{background:transparent}.input-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{padding:1.5rem 0;min-height:300px}@media (max-width: 599px){.input-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{padding:1rem 0;min-height:200px}}.input-card[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:.95rem;color:#0009;margin-bottom:1.5rem;margin-top:0}.input-card[_ngcontent-%COMP%]   .step-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.1)}.input-card[_ngcontent-%COMP%]   .step-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (max-width: 599px){.input-card[_ngcontent-%COMP%]   .step-actions[_ngcontent-%COMP%]{flex-direction:column}.input-card[_ngcontent-%COMP%]   .step-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;background-color:#677eea0d;border-radius:8px;border:1px solid rgba(103,126,234,.2)}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 0}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.1)}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   .review-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   .review-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem;color:#0009}.input-card[_ngcontent-%COMP%]   .review-section[_ngcontent-%COMP%]   .review-item[_ngcontent-%COMP%]   .review-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:#000000de}.input-card[_ngcontent-%COMP%]   .file-upload-section[_ngcontent-%COMP%], .input-card[_ngcontent-%COMP%]   .paste-section[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#677eea0d;border-radius:8px;border:2px dashed rgba(103,126,234,.3)}.input-card[_ngcontent-%COMP%]   .file-upload-section[_ngcontent-%COMP%]{text-align:center}.input-card[_ngcontent-%COMP%]   .paste-section[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.input-card[_ngcontent-%COMP%]   .paste-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]{margin-top:1.5rem}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.75rem;color:#000000de}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:.75rem}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;border:2px solid rgba(0,0,0,.1);border-radius:8px;transition:all .2s ease;gap:.5rem;overflow:hidden}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #677eea33}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-display[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;cursor:pointer;-webkit-user-select:none;user-select:none}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-display[_ngcontent-%COMP%]:hover{background-color:#677eea0d}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-display[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-edit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1;padding:.5rem .5rem .5rem 1rem}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-edit[_ngcontent-%COMP%]   .item-edit-field[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .item-edit[_ngcontent-%COMP%]   .item-edit-field[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding-bottom:0}.input-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{flex-shrink:0;margin-right:.25rem}.full-width[_ngcontent-%COMP%]{width:100%}"]})};function Aw(t,r){t&1&&Oo(0,"div",2)}var Lw=new Ce("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var pg=(()=>{class t{_elementRef=x(Te);_ngZone=x(Ze);_changeDetectorRef=x(St);_renderer=x(ui);_cleanupTransitionEnd;constructor(){let e=tf(),i=x(Lw,{optional:!0});this._isNoopAnimation=e==="di-disabled",e==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),i&&(i.color&&(this.color=this._defaultColor=i.color),this.mode=i.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=hg(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=hg(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new Ve;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,n){i&2&&(Le("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),Ri("mat-"+n.color),Xe("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",si],bufferValue:[2,"bufferValue","bufferValue",si],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,n){i&1&&(Rr(0,"div",0),Oo(1,"div",1),Ke(2,Aw,1,0,"div",2),nn(),Rr(3,"div",3),Oo(4,"span",4),nn(),Rr(5,"div",5),Oo(6,"span",4),nn()),i&2&&(V(),sn("flex-basis",n._getBufferBarFlexBasis()),V(),qe(n.mode==="buffer"?2:-1),V(),sn("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return t})();function hg(t,r=0,e=100){return Math.max(r,Math.min(e,t))}var fg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[at]})}return t})();var gg=(()=>{class t{get vertical(){return this._vertical}set vertical(e){this._vertical=Tr(e)}_vertical=!1;get inset(){return this._inset}set inset(e){this._inset=Tr(e)}_inset=!1;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,n){i&2&&(Le("aria-orientation",n.vertical?"vertical":"horizontal"),Xe("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,n){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return t})(),Zc=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[at,at]})}return t})();var Jc=class t{sortState=Rt.required();selectOption=Je();cancelSort=Je();onSelectOption(r){this.selectOption.emit(r)}onCancelSort(){this.cancelSort.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ye({type:t,selectors:[["app-sorting-comparison"]],inputs:{sortState:[1,"sortState"]},outputs:{selectOption:"selectOption",cancelSort:"cancelSort"},decls:35,vars:5,consts:[[1,"sorting-card"],["mode","determinate",1,"progress-bar",3,"value"],[1,"comparison-container"],["mat-raised-button","","color","primary",1,"comparison-button",3,"click"],[1,"comparison-content"],[1,"or-divider"],["mat-stroked-button","",1,"equal-button",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(e,i){if(e&1&&(S(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),L(3,"Which do you prefer?"),M(),S(4,"mat-card-subtitle"),L(5),M()(),S(6,"mat-card-content"),pt(7,"mat-progress-bar",1),S(8,"div",2)(9,"button",3),re("click",function(){return i.onSelectOption("A")}),S(10,"div",4)(11,"mat-icon"),L(12,"thumb_up"),M(),S(13,"span"),L(14),M()()(),S(15,"div",5),pt(16,"mat-divider"),S(17,"span"),L(18,"OR"),M(),pt(19,"mat-divider"),M(),S(20,"button",3),re("click",function(){return i.onSelectOption("B")}),S(21,"div",4)(22,"mat-icon"),L(23,"thumb_up"),M(),S(24,"span"),L(25),M()()()(),S(26,"button",6),re("click",function(){return i.onSelectOption("Equal")}),S(27,"mat-icon"),L(28,"balance"),M(),L(29," They're Equal "),M()(),S(30,"mat-card-actions")(31,"button",7),re("click",function(){return i.onCancelSort()}),S(32,"mat-icon"),L(33,"cancel"),M(),L(34," Cancel Sort "),M()()()),e&2){let n,o;V(5),Ro(" Comparison ",i.sortState().completedComparisons+1," of ~",i.sortState().totalComparisons," "),V(2),le("value",i.sortState().progress),V(7),nt((n=i.sortState().currentPair)==null?null:n.itemA),V(11),nt((o=i.sortState().currentPair)==null?null:o.itemB)}},dependencies:[mi,br,yr,kc,mn,pn,hn,un,pi,Pi,gi,fi,fg,pg,Zc,gg],styles:[".sorting-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{margin-bottom:2rem;height:8px;border-radius:4px}.sorting-card[_ngcontent-%COMP%]   .comparison-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]{width:100%;min-height:80px;font-size:1.1rem;padding:1rem;transition:all .3s ease}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]   .comparison-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:center}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]   .comparison-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}.sorting-card[_ngcontent-%COMP%]   .comparison-button[_ngcontent-%COMP%]   .comparison-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.sorting-card[_ngcontent-%COMP%]   .or-divider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:.5rem 0}.sorting-card[_ngcontent-%COMP%]   .or-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#0000008a;white-space:nowrap}.sorting-card[_ngcontent-%COMP%]   .or-divider[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{flex:1}.sorting-card[_ngcontent-%COMP%]   .equal-button[_ngcontent-%COMP%]{width:100%;margin-top:1rem;padding:.75rem}.sorting-card[_ngcontent-%COMP%]   .equal-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}"]})};var $w=["mat-menu-item",""],zw=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],jw=["mat-icon, [matMenuItemIcon]","*"];function Hw(t,r){t&1&&(pc(),S(0,"svg",2),pt(1,"polygon",3),M())}var Uw=["*"];function Ww(t,r){if(t&1){let e=tt();Rr(0,"div",0),Ep("click",function(){X(e);let n=j();return Y(n.closed.emit("click"))})("animationstart",function(n){X(e);let o=j();return Y(o._onAnimationStart(n.animationName))})("animationend",function(n){X(e);let o=j();return Y(o._onAnimationDone(n.animationName))})("animationcancel",function(n){X(e);let o=j();return Y(o._onAnimationDone(n.animationName))}),Rr(1,"div",1),Et(2),nn()()}if(t&2){let e=j();Ri(e._classList),Xe("mat-menu-panel-animations-disabled",e._animationsDisabled)("mat-menu-panel-exit-animation",e._panelAnimationState==="void")("mat-menu-panel-animating",e._isAnimating()),on("id",e.panelId),Le("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var Nu=new Ce("MAT_MENU_PANEL"),ns=(()=>{class t{_elementRef=x(Te);_document=x(vt);_focusMonitor=x(Yn);_parentMenu=x(Nu,{optional:!0});_changeDetectorRef=x(St);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new J;_focused=new J;_highlighted=!1;_triggersSubmenu=!1;constructor(){x($i).load(fn),this._parentMenu?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let n=0;n<i.length;n++)i[n].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,n){i&1&&re("click",function(c){return n._checkDisabled(c)})("mouseenter",function(){return n._handleMouseEnter()}),i&2&&(Le("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),Xe("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",ot],disableRipple:[2,"disableRipple","disableRipple",ot]},exportAs:["matMenuItem"],attrs:$w,ngContentSelectors:jw,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,n){i&1&&(ai(zw),Et(0),S(1,"span",0),Et(2,1),M(),pt(3,"div",1),Ke(4,Hw,2,0,":svg:svg",2)),i&2&&(V(3),le("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),V(),qe(n._triggersSubmenu?4:-1))},dependencies:[Zn],encapsulation:2,changeDetection:0})}return t})();var Kw=new Ce("MatMenuContent");var qw=new Ce("mat-menu-default-options",{providedIn:"root",factory:Qw});function Qw(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Lu="_mat-menu-enter",el="_mat-menu-exit",Jo=(()=>{class t{_elementRef=x(Te);_changeDetectorRef=x(St);_injector=x(We);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=xi();_allItems;_directDescendantItems=new rn;_classList={};_panelAnimationState="void";_animationDone=new J;_isAnimating=Se(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(e){let i=this._previousPanelClass,n=de({},this._classList);i&&i.length&&i.split(" ").forEach(o=>{n[o]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(o=>{n[o]=!0}),this._elementRef.nativeElement.className=""),this._classList=n}_previousPanelClass;get classList(){return this.panelClass}set classList(e){this.panelClass=e}closed=new Ve;close=this.closed;panelId=x(bi).getId("mat-menu-panel-");constructor(){let e=x(qw);this.overlayPanelClass=e.overlayPanelClass||"",this._xPosition=e.xPosition,this._yPosition=e.yPosition,this.backdropClass=e.backdropClass,this.overlapTrigger=e.overlapTrigger,this.hasBackdrop=e.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Sc(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(It(this._directDescendantItems),tn(e=>Mi(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let n=e.toArray(),o=Math.max(0,Math.min(n.length-1,i.activeItemIndex||0));n[o]&&!n[o].disabled?i.setActiveItem(o):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(It(this._directDescendantItems),tn(i=>Mi(...i.map(n=>n._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let i=e.keyCode,n=this._keyManager;switch(i){case 27:dn(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&n.setFocusOrigin("keyboard"),n.onKeydown(e);return}}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Oi(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let n=this._keyManager;n.setFocusOrigin(e).setFirstItemActive(),!n.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){}setPositionClasses(e=this.xPosition,i=this.yPosition){this._classList=Be(de({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(e){let i=e===el;(i||e===Lu)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(e){(e===Lu||e===el)&&this._isAnimating.set(!0)}_setIsOpen(e){if(this._panelAnimationState=e?"enter":"void",e){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(el),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?Lu:el)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(It(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let e=null;return this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),e}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-menu"]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,Kw,5),Ct(o,ns,5),Ct(o,ns,4)),i&2){let c;De(c=Me())&&(n.lazyContent=c.first),De(c=Me())&&(n._allItems=c),De(c=Me())&&(n.items=c)}},viewQuery:function(i,n){if(i&1&&Dt(oi,5),i&2){let o;De(o=Me())&&(n.templateRef=o.first)}},hostVars:3,hostBindings:function(i,n){i&2&&Le("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",ot],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:ot(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[Kt([{provide:Nu,useExisting:t}])],ngContentSelectors:Uw,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,n){i&1&&(ai(),gc(0,Ww,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return t})(),yg=new Ce("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=x(We);return()=>to(t)}});function Xw(t){let r=x(We);return()=>to(r)}var Yw={provide:yg,deps:[],useFactory:Xw};var Zo=new WeakMap,Gw=(()=>{class t{_canHaveBackdrop;_element=x(Te);_viewContainerRef=x(_r);_menuItemInstance=x(ns,{optional:!0,self:!0});_dir=x(hi,{optional:!0});_focusMonitor=x(Yn);_ngZone=x(Ze);_injector=x(We);_scrollStrategy=x(yg);_changeDetectorRef=x(St);_animationsDisabled=xi();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Ht.EMPTY;_menuCloseSubscription=Ht.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(e){e!==this._menuInternal&&(this._menuInternal=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(e){this._canHaveBackdrop=e;let i=x(Nu,{optional:!0});this._parentMaterialMenu=i instanceof Jo?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&Zo.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(e){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let n=Zo.get(i);Zo.set(i,this),n&&n!==this&&n._closeMenu();let o=this._createOverlay(i),c=o.getConfig(),d=c.positionStrategy;this._setPosition(i,d),this._canHaveBackdrop?c.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:c.hasBackdrop=!1,o.hasAttached()||(o.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,e&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof Jo&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(Jt(i.close)).subscribe(()=>{d.withLockedPosition(!1).reapplyLastPosition(),d.withLockedPosition(!0)}))}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}_destroyMenu(e){let i=this._overlayRef,n=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),n instanceof Jo&&this._ownsMenu(n)?(this._pendingRemoval=n._animationDone.pipe(Xi(1)).subscribe(()=>{i.detach(),Zo.has(n)||n.lazyContent?.detach()}),n._setIsOpen(!1)):(i.detach(),n?.lazyContent?.detach()),n&&this._ownsMenu(n)&&Zo.delete(n),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=bn(this._injector,i),this._overlayRef.keydownEvents().subscribe(n=>{this._menu instanceof Jo&&this._menu._handleKeydown(n)})}return this._overlayRef}_getOverlayConfig(e){return new Cr({positionStrategy:Nc(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(n=>{this._ngZone.run(()=>{let o=n.connectionPair.overlayX==="start"?"after":"before",c=n.connectionPair.overlayY==="top"?"below":"above";e.setPositionClasses(o,c)})})}_setPosition(e,i){let[n,o]=e.xPosition==="before"?["end","start"]:["start","end"],[c,d]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[h,g]=[c,d],[f,y]=[n,o],D=0;if(this._triggersSubmenu()){if(y=n=e.xPosition==="before"?"start":"end",o=f=n==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let C=this._parentMaterialMenu.items.first;this._parentInnerPadding=C?C._getHostElement().offsetTop:0}D=c==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(h=c==="top"?"bottom":"top",g=d==="top"?"bottom":"top");i.withPositions([{originX:n,originY:h,overlayX:f,overlayY:c,offsetY:D},{originX:o,originY:h,overlayX:y,overlayY:c,offsetY:D},{originX:n,originY:g,overlayX:f,overlayY:d,offsetY:-D},{originX:o,originY:g,overlayX:y,overlayY:d,offsetY:-D}])}_menuClosingActions(){let e=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:yi(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Ae(c=>this._menuOpen&&c!==this._menuItemInstance)):yi();return Mi(e,n,o,i)}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Yi(e.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(e){return Zo.get(e)===this}static \u0275fac=function(i){Cp()};static \u0275dir=ke({type:t})}return t})(),bg=(()=>{class t extends Gw{_cleanupTouchstart;_hoverSubscription=Ht.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){this._menu=e}menuData;restoreFocus=!0;menuOpened=new Ve;onMenuOpen=this.menuOpened;menuClosed=new Ve;onMenuClose=this.menuClosed;constructor(){super(!0);let e=x(ui);this._cleanupTouchstart=e.listen(this._element.nativeElement,"touchstart",i=>{xc(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(e){return e.backdropClick()}_handleMousedown(e){bc(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let i=e.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(e=>{e===this._menuItemInstance&&!e.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,n){i&1&&re("click",function(c){return n._handleClick(c)})("mousedown",function(c){return n._handleMousedown(c)})("keydown",function(c){return n._handleKeydown(c)}),i&2&&Le("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu==null?null:n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[yt]})}return t})();var xg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[Yw],imports:[xr,at,Lr,Ko,at]})}return t})(),wg={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},RR=wg.fadeInItems,PR=wg.transformMenu;function Jw(t,r){}var xn=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Bu=(()=>{class t extends _n{_elementRef=x(Te);_focusTrapFactory=x(Zp);_config;_interactivityChecker=x(Gp);_ngZone=x(Ze);_focusMonitor=x(Yn);_renderer=x(ui);_changeDetectorRef=x(St);_injector=x(We);_platform=x(qt);_document=x(vt);_portalOutlet;_focusTrapped=new J;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=x(xn,{optional:!0})||new xn,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{o(),c(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",n),c=this._renderer.listen(e,"mousedown",n)})),e.focus(i)}_focusByCssSelector(e,i){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,i)}_trapFocus(e){this._isDestroyed||Oi(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let n=Xn(),o=this._elementRef.nativeElement;(!n||n===this._document.body||n===o||o.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus?.(e)}_containsFocus(){let e=this._elementRef.nativeElement,i=Xn();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Xn()))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,n){if(i&1&&Dt(wr,7),i&2){let o;De(o=Me())&&(n._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,n){i&2&&Le("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[yt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,n){i&1&&lt(0,Jw,0,0,"ng-template",0)},dependencies:[wr],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),os=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new J;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(r,e){this.overlayRef=r,this.config=e,this.disableClose=e.disableClose,this.backdropClick=r.backdropClick(),this.keydownEvents=r.keydownEvents(),this.outsidePointerEvents=r.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!dn(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=r.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(r,e){if(this._canClose(r)){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(r),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(r="",e=""){return this.overlayRef.updateSize({width:r,height:e}),this}addPanelClass(r){return this.overlayRef.addPanelClass(r),this}removePanelClass(r){return this.overlayRef.removePanelClass(r),this}_canClose(r){let e=this.config;return!!this.containerInstance&&(!e.closePredicate||e.closePredicate(r,e,this.componentInstance))}},eC=new Ce("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=x(We);return()=>Qo(t)}}),tC=new Ce("DialogData"),iC=new Ce("DefaultDialogConfig");function rC(t){let r=Se(t),e=new Ve;return{valueSignal:r,get value(){return r()},change:e,ngOnDestroy(){e.complete()}}}var Vu=(()=>{class t{_injector=x(We);_defaultOptions=x(iC,{optional:!0});_parentDialog=x(t,{optional:!0,skipSelf:!0});_overlayContainer=x(Lc);_idGenerator=x(bi);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new J;_afterOpenedAtThisLevel=new J;_ariaHiddenElements=new Map;_scrollStrategy=x(eC);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=mc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(It(void 0)));constructor(){}open(e,i){let n=this._defaultOptions||new xn;i=de(de({},n),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),c=bn(this._injector,o),d=new os(c,i),h=this._attachContainer(c,d,i);if(d.containerInstance=h,!this.openDialogs.length){let g=this._overlayContainer.getContainerElement();h._focusTrapped?h._focusTrapped.pipe(Xi(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(g)}):this._hideNonDialogContentFromAssistiveTechnology(g)}return this._attachDialogContent(e,d,h,i),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){Fu(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Fu(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),Fu(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Cr({positionStrategy:e.positionStrategy||yn().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation,disableAnimations:e.disableAnimations});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,n){let o=n.injector||n.viewContainerRef?.injector,c=[{provide:xn,useValue:n},{provide:os,useValue:i},{provide:qo,useValue:e}],d;n.container?typeof n.container=="function"?d=n.container:(d=n.container.type,c.push(...n.container.providers(n))):d=Bu;let h=new Ar(d,n.viewContainerRef,We.create({parent:o||this._injector,providers:c}));return e.attach(h).instance}_attachDialogContent(e,i,n,o){if(e instanceof oi){let c=this._createInjector(o,i,n,void 0),d={$implicit:o.data,dialogRef:i};o.templateContext&&(d=de(de({},d),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),n.attachTemplatePortal(new Yi(e,null,d,c))}else{let c=this._createInjector(o,i,n,this._injector),d=n.attachComponentPortal(new Ar(e,o.viewContainerRef,c));i.componentRef=d,i.componentInstance=d.instance}}_createInjector(e,i,n,o){let c=e.injector||e.viewContainerRef?.injector,d=[{provide:tC,useValue:e.data},{provide:os,useValue:i}];return e.providers&&(typeof e.providers=="function"?d.push(...e.providers(i,e,n)):d.push(...e.providers)),e.direction&&(!c||!c.get(hi,null,{optional:!0}))&&d.push({provide:hi,useValue:rC(e.direction)}),We.create({parent:c||o,providers:d})}_removeOpenDialog(e,i){let n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,c)=>{o?c.setAttribute("aria-hidden",o):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let i=e.parentElement.children;for(let n=i.length-1;n>-1;n--){let o=i[n];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fu(t,r){let e=t.length;for(;e--;)r(t[e])}var Cg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[Vu],imports:[Lr,sr,ef,sr]})}return t})();function nC(t,r){}var ss=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},$u="mdc-dialog--open",Sg="mdc-dialog--opening",kg="mdc-dialog--closing",oC=150,aC=75,Dg=(()=>{class t extends Bu{_animationStateChanged=new Ve;_animationsEnabled=!xi();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Eg(this._config.enterAnimationDuration)??oC:0;_exitAnimationDuration=this._animationsEnabled?Eg(this._config.exitAnimationDuration)??aC:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Ig,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Sg,$u)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add($u),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove($u),this._animationsEnabled?(this._hostElement.style.setProperty(Ig,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(kg)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Sg,kg)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275cmp=ye({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,n){i&2&&(on("id",n._config.id),Le("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Xe("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[yt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,n){i&1&&(S(0,"div",0)(1,"div",1),lt(2,nC,0,0,"ng-template",2),M()())},dependencies:[wr],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),Ig="--mat-dialog-transition-duration";function Eg(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Pr(t.substring(0,t.length-2)):t.endsWith("s")?Pr(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var as=(function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t})(as||{}),wn=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new J;_beforeClosed=new J;_result;_closeFallbackTimeout;_state=as.OPEN;_closeInteractionType;constructor(r,e,i){this._ref=r,this._config=e,this._containerInstance=i,this.disableClose=e.disableClose,this.id=r.id,r.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Ae(n=>n.state==="opened"),Xi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ae(n=>n.state==="closed"),Xi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),r.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Mi(this.backdropClick(),this.keydownEvents().pipe(Ae(n=>n.keyCode===27&&!this.disableClose&&!dn(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),zu(this,n.type==="keydown"?"keyboard":"mouse"))})}close(r){let e=this._config.closePredicate;e&&!e(r,this._config,this.componentInstance)||(this._result=r,this._containerInstance._animationStateChanged.pipe(Ae(i=>i.state==="closing"),Xi(1)).subscribe(i=>{this._beforeClosed.next(r),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=as.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(r){let e=this._ref.config.positionStrategy;return r&&(r.left||r.right)?r.left?e.left(r.left):e.right(r.right):e.centerHorizontally(),r&&(r.top||r.bottom)?r.top?e.top(r.top):e.bottom(r.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(r="",e=""){return this._ref.updateSize(r,e),this}addPanelClass(r){return this._ref.addPanelClass(r),this}removePanelClass(r){return this._ref.removePanelClass(r),this}getState(){return this._state}_finishDialogClose(){this._state=as.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function zu(t,r,e){return t._closeInteractionType=r,t.close(e)}var il=new Ce("MatMdcDialogData"),Mg=new Ce("mat-mdc-dialog-default-options"),Og=new Ce("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=x(We);return()=>Qo(t)}}),ea=(()=>{class t{_defaultOptions=x(Mg,{optional:!0});_scrollStrategy=x(Og);_parentDialog=x(t,{optional:!0,skipSelf:!0});_idGenerator=x(bi);_injector=x(We);_dialog=x(Vu);_animationsDisabled=xi();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new J;_afterOpenedAtThisLevel=new J;dialogConfigClass=ss;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=mc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(It(void 0)));constructor(){this._dialogRefConstructor=wn,this._dialogContainerType=Dg,this._dialogDataToken=il}open(e,i){let n;i=de(de({},this._defaultOptions||new ss),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,Be(de({},i),{positionStrategy:yn(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||i.enterAnimationDuration?.toLocaleString()==="0"||i.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:xn,useValue:i}]},templateContext:()=>({dialogRef:n}),providers:(c,d,h)=>(n=new this._dialogRefConstructor(c,i,h),n.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:h},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=o.componentRef,n.componentInstance=o.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let c=this.openDialogs.indexOf(n);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ju=(()=>{class t{dialogRef=x(wn,{optional:!0});_elementRef=x(Te);_dialog=x(ea);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=Pg(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){zu(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,n){i&1&&re("click",function(c){return n._onButtonClick(c)}),i&2&&Le("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[fr]})}return t})(),Rg=(()=>{class t{_dialogRef=x(wn,{optional:!0});_elementRef=x(Te);_dialog=x(ea);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Pg(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t})}return t})(),Hu=(()=>{class t extends Rg{id=x(bi).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275dir=ke({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,n){i&2&&on("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[yt]})}return t})(),Uu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Sp([af])]})}return t})(),Wu=(()=>{class t extends Rg{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275dir=ke({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,n){i&2&&Xe("mat-mdc-dialog-actions-align-start",n.align==="start")("mat-mdc-dialog-actions-align-center",n.align==="center")("mat-mdc-dialog-actions-align-end",n.align==="end")},inputs:{align:"align"},features:[yt]})}return t})();function Pg(t,r){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?r.find(i=>i.id===e.id):null}var Ku=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({providers:[ea],imports:[Cg,Lr,sr,at,at]})}return t})();var cC=["knob"],lC=["valueIndicatorContainer"];function dC(t,r){if(t&1&&(S(0,"div",2,1)(2,"div",5)(3,"span",6),L(4),M()()()),t&2){let e=j();V(4),nt(e.valueIndicatorText)}}var uC=["trackActive"],mC=["*"];function hC(t,r){if(t&1&&pt(0,"div"),t&2){let e=r.$implicit,i=r.$index,n=j(3);Ri(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),sn("transform",n._calcTickMarkTransform(i))}}function pC(t,r){if(t&1&&Mr(0,hC,1,4,"div",8,Ip),t&2){let e=j(2);Or(e._tickMarks)}}function fC(t,r){if(t&1&&(S(0,"div",6,1),Ke(2,pC,2,0),M()),t&2){let e=j();V(2),qe(e._cachedWidth?2:-1)}}function gC(t,r){if(t&1&&pt(0,"mat-slider-visual-thumb",7),t&2){let e=j();le("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var xe=(function(t){return t[t.START=1]="START",t[t.END=2]="END",t})(xe||{}),ta=(function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t})(ta||{}),qu=new Ce("_MatSlider"),Tg=new Ce("_MatSliderThumb"),_C=new Ce("_MatSliderRangeThumb"),Ag=new Ce("_MatSliderVisualThumb");var vC=(()=>{class t{_cdr=x(St);_ngZone=x(Ze);_slider=x(qu);_renderer=x(ui);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=x(Te).nativeElement;_platform=x(qt);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let i=this._sliderInputEl,n=this._renderer;this._listenerCleanups=[n.listen(i,"pointermove",this._onPointerMove),n.listen(i,"pointerdown",this._onDragStart),n.listen(i,"pointerup",this._onDragEnd),n.listen(i,"pointerleave",this._onMouseLeave),n.listen(i,"focus",this._onFocus),n.listen(i,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let i=this._hostElement.getBoundingClientRect(),n=this._slider._isCursorOnSliderThumb(e,i);this._isHovered=n,n?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===uu.FADING_IN||e?.state===uu.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===xe.START?xe.END:xe.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!i)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===xe.START?xe.END:xe.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,n){if(i&1&&(Dt(Zn,5),Dt(cC,5),Dt(lC,5)),i&2){let o;De(o=Me())&&(n._ripple=o.first),De(o=Me())&&(n._knob=o.first),De(o=Me())&&(n._valueIndicatorContainer=o.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[Kt([{provide:Ag,useExisting:t}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,n){i&1&&(Ke(0,dC,5,1,"div",2),pt(1,"div",3,0)(3,"div",4)),i&2&&(qe(n.discrete?0:-1),V(3),le("matRippleDisabled",!0))},dependencies:[Zn],styles:[`.mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}
`],encapsulation:2,changeDetection:0})}return t})(),Lg=(()=>{class t{_ngZone=x(Ze);_cdr=x(St);_elementRef=x(Te);_dir=x(hi,{optional:!0});_globalRippleOptions=x(Dc,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let i=this._getInput(xe.END),n=this._getInput(xe.START);i&&(i.disabled=this._disabled),n&&(n.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;get showTickMarks(){return this._showTickMarks}set showTickMarks(e){this._showTickMarks=e,this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI())}_showTickMarks=!1;get min(){return this._min}set min(e){let i=e==null||isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_min=0;color;disableRipple=!1;_updateMin(e){let i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let i=this._getInput(xe.END),n=this._getInput(xe.START),o=i.value,c=n.value;n.min=e.new,i.min=Math.max(e.new,n.value),n.max=Math.min(i.max,i.value),n._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,n):this._onTranslateXChangeBySideEffect(n,i),o!==i.value&&this._onValueChange(i),c!==n.value&&this._onValueChange(n)}_updateMinNonRange(e){let i=this._getInput(xe.END);if(i){let n=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),n!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){let i=e==null||isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_max=100;_updateMax(e){let i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let i=this._getInput(xe.END),n=this._getInput(xe.START),o=i.value,c=n.value;i.max=e.new,n.max=Math.min(e.new,i.value),i.min=n.value,i._updateWidthInactive(),n._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(n,i):this._onTranslateXChangeBySideEffect(i,n),o!==i.value&&this._onValueChange(i),c!==n.value&&this._onValueChange(n)}_updateMaxNonRange(e){let i=this._getInput(xe.END);if(i){let n=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),n!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){let i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(xe.END),i=this._getInput(xe.START),n=e.value,o=i.value,c=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<c?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),n!==e.value&&this._onValueChange(e),o!==i.value&&this._onValueChange(i)}_updateStepNonRange(){let e=this._getInput(xe.END);if(e){let i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations=xi();_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=x(qt);constructor(){x($i).load(fn),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(xe.END),i=this._getInput(xe.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();let n=this._getThumb(xe.END);this._rippleRadius=n._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(xe.END),i=this._getInput(xe.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(xe.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(xe.START)._isActive||this._getThumb(xe.END)._isActive}_getValue(e=xe.END){let i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!!(this._getInput(xe.START)?._skipUIUpdate||this._getInput(xe.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){let i=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-i:i}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(xe.END),i=this._getInput(xe.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{let e=this._getInput(xe.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(xe.START),i=this._getInput(xe.END);return!e||!i?!1:i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let i=e.getSibling(),n=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),n._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let i=this._getThumb(e.thumbPosition===xe.END?xe.END:xe.START);i._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===xe.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;let n=this._getThumb(e.thumbPosition);i.length<3?n._hostElement.classList.add("mdc-slider__thumb--short-value"):n._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(xe.END),i=this._getInput(xe.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,n=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*n}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let i=e.getSibling();if(!i||!this._cachedWidth)return;let n=Math.abs(i.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-i.translateX}px`,transformOrigin:"right",transform:`scaleX(${n})`}):this._setTrackActiveStyles({left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${n})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let i=this._getValue(),n=Math.max(Math.round((i-this.min)/e),0)+1,o=Math.max(Math.round((this.max-i)/e),0)-1;this._isRtl?n++:o++,this._tickMarks=Array(n).fill(ta.ACTIVE).concat(Array(o).fill(ta.INACTIVE))}_updateTickMarkUIRange(e){let i=this._getValue(),n=this._getValue(xe.START),o=Math.max(Math.round((n-this.min)/e),0),c=Math.max(Math.round((i-n)/e)+1,0),d=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(o).fill(ta.INACTIVE).concat(Array(c).fill(ta.ACTIVE),Array(d).fill(ta.INACTIVE))}_getInput(e){if(e===xe.END&&this._input)return this._input;if(this._inputs?.length)return e===xe.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===xe.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){let n=i.width/2,o=i.x+n,c=i.y+n,d=e.clientX-o,h=e.clientY-c;return Math.pow(d,2)+Math.pow(h,2)<Math.pow(n,2)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ye({type:t,selectors:[["mat-slider"]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,Tg,5),Ct(o,_C,4)),i&2){let c;De(c=Me())&&(n._input=c.first),De(c=Me())&&(n._inputs=c)}},viewQuery:function(i,n){if(i&1&&(Dt(uC,5),Dt(Ag,5)),i&2){let o;De(o=Me())&&(n._trackActive=o.first),De(o=Me())&&(n._thumbs=o)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,n){i&2&&(Ri("mat-"+(n.color||"primary")),Xe("mdc-slider--range",n._isRange)("mdc-slider--disabled",n.disabled)("mdc-slider--discrete",n.discrete)("mdc-slider--tick-marks",n.showTickMarks)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",ot],discrete:[2,"discrete","discrete",ot],showTickMarks:[2,"showTickMarks","showTickMarks",ot],min:[2,"min","min",si],color:"color",disableRipple:[2,"disableRipple","disableRipple",ot],max:[2,"max","max",si],step:[2,"step","step",si],displayWith:"displayWith"},exportAs:["matSlider"],features:[Kt([{provide:qu,useExisting:t}])],ngContentSelectors:mC,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,n){i&1&&(ai(),Et(0),S(1,"div",2),pt(2,"div",3),S(3,"div",4),pt(4,"div",5,0),M(),Ke(6,fC,3,1,"div",6),M(),Ke(7,gC,1,3,"mat-slider-visual-thumb",7),pt(8,"mat-slider-visual-thumb",7)),i&2&&(V(6),qe(n.showTickMarks?6:-1),V(),qe(n._isRange?7:-1),V(),le("discrete",n.discrete)("thumbPosition",2)("valueIndicatorText",n.endValueIndicatorText))},dependencies:[vC],styles:[`.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mat-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mat-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mat-slider-active-track-height, 4px);top:calc((var(--mat-slider-inactive-track-height, 4px) - var(--mat-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mat-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mat-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mat-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mat-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mat-slider-inactive-track-height, 4px);border-radius:var(--mat-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mat-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;transform:scale(0);transform-origin:var(--mat-slider-value-indicator-transform-origin, 0 28px);transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mat-slider-label-container-color, var(--mat-sys-primary));color:var(--mat-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mat-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mat-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mat-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mat-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mat-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mat-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mat-slider-handle-width, 20px);height:var(--mat-slider-handle-height, 20px);border-width:calc(var(--mat-slider-handle-height, 20px)/2) calc(var(--mat-slider-handle-width, 20px)/2);box-shadow:var(--mat-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mat-slider-handle-color, var(--mat-sys-primary));border-color:var(--mat-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mat-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mat-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mat-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mat-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mat-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mat-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mat-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mat-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mat-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mat-slider-with-tick-marks-container-size, 2px);height:var(--mat-slider-with-tick-marks-container-size, 2px);border-radius:var(--mat-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mat-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mat-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mat-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mat-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mat-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mat-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__input{cursor:auto}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();var yC={provide:Hp,useExisting:Va(()=>Qu),multi:!0};var Qu=(()=>{class t{_ngZone=x(Ze);_elementRef=x(Te);_cdr=x(St);_slider=x(qu);_platform=x(qt);_listenerCleanups;get value(){return si(this._hostElement.value,0)}set value(e){e===null&&(e=this._getDefaultValue()),e=isNaN(e)?0:e;let i=e+"";if(!this._hasSetInitialValue){this._initialValue=i;return}this._isActive||this._setValue(i)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new Ve;dragStart=new Ve;dragEnd=new Ve;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=xe.END;get min(){return si(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return si(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return si(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return ot(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=Se("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new J;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=x(ui);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=i,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let i=e.clientX-this._slider._cachedLeft,n=this._slider._cachedWidth,o=this._slider.step===0?1:this._slider.step,c=Math.floor((this._slider.max-this._slider.min)/o),d=this._slider._isRtl?1-i/n:i/n,g=Math.round(d*c)/c*(this._slider.max-this._slider.min)+this._slider.min,f=Math.round(g/o)*o,y=this.value;if(f===y){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=f,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let i=this._tickMarkOffset,n=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,n),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,n){i&1&&re("change",function(){return n._onChange()})("input",function(){return n._onInput()})("blur",function(){return n._onBlur()})("focus",function(){return n._onFocus()}),i&2&&Le("aria-valuetext",n._valuetext())},inputs:{value:[2,"value","value",si]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[Kt([yC,{provide:Tg,useExisting:t}])]})}return t})();var Ng=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[at,xr]})}return t})();function xC(t,r){if(t&1){let e=tt();S(0,"div",10)(1,"label",11)(2,"span",12),L(3),M()(),S(4,"div",13)(5,"mat-slider",14)(6,"input",15),re("ngModelChange",function(n){let o=X(e).index,c=j();return Y(c.updateTierPercentage(o,n))}),M()(),S(7,"mat-form-field",16)(8,"input",17),re("ngModelChange",function(n){let o=X(e).index,c=j();return Y(c.updateTierPercentage(o,n))})("blur",function(){let n=X(e).index,o=j();return Y(o.validateTierPercentage(n))}),M(),S(9,"span",18),L(10,"%"),M()()()()}if(t&2){let e=r.$implicit,i=r.index,n=j();V(),Le("data-tier",e),V(2),nt(e),V(),Le("data-tier",e),V(),le("displayWith",n.formatLabel),V(),le("ngModel",n.tierPercentages[i]),V(2),le("ngModel",n.tierPercentages[i])}}var rl=class t{dialogRef=x(wn);data=x(il);tierPercentages=[...this.data.tierPercentages];updateTierPercentage(r,e){this.tierPercentages[r]=e}validateTierPercentage(r){this.tierPercentages[r]<0?this.tierPercentages[r]=0:this.tierPercentages[r]>100&&(this.tierPercentages[r]=100)}getTotalPercentage(){return this.tierPercentages.reduce((r,e)=>r+e,0)}formatLabel(r){return`${r}%`}onApply(){this.dialogRef.close({tierPercentages:this.tierPercentages,action:"apply"})}onReset(){this.dialogRef.close({action:"reset"})}onCancel(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ye({type:t,selectors:[["app-tier-settings-dialog"]],decls:26,vars:2,consts:[[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close",""],[1,"settings-info"],[1,"tier-sliders"],["class","tier-slider",4,"ngFor","ngForOf"],["align","end"],["mat-stroked-button","",3,"click"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"tier-slider"],[1,"slider-label"],[1,"tier-badge"],[1,"slider-input-container"],["min","0","max","100","step","1","showTickMarks","","discrete","",1,"tier-slider-control",3,"displayWith"],["matSliderThumb","",3,"ngModelChange","ngModel"],["appearance","outline",1,"percentage-input"],["matInput","","type","number","min","0","max","100",3,"ngModelChange","blur","ngModel"],["matTextSuffix",""]],template:function(e,i){e&1&&(S(0,"div",0)(1,"h2",1)(2,"mat-icon"),L(3,"settings"),M(),L(4," Advanced Settings "),M(),S(5,"button",2)(6,"mat-icon"),L(7,"close"),M()()(),S(8,"mat-dialog-content")(9,"p",3)(10,"mat-icon"),L(11,"info"),M(),L(12),M(),S(13,"div",4),lt(14,xC,11,6,"div",5),M()(),S(15,"mat-dialog-actions",6)(16,"button",7),re("click",function(){return i.onReset()}),S(17,"mat-icon"),L(18,"restore"),M(),L(19," Reset to Defaults "),M(),S(20,"button",8),re("click",function(){return i.onCancel()}),L(21,"Cancel"),M(),S(22,"button",9),re("click",function(){return i.onApply()}),S(23,"mat-icon"),L(24,"refresh"),M(),L(25," Apply & Recalculate "),M()()),e&2&&(V(12),Vi(" Customize the percentage of items in each tier. Total: ",i.getTotalPercentage(),"% "),V(2),le("ngForOf",i.data.tierNames))},dependencies:[mi,To,Bo,Lo,Wp,No,qp,Kp,Fo,Ku,ju,Hu,Wu,Uu,Ng,Lg,Qu,jo,zo,Ec,Wo,Uo,pi,Pi,gn,gi,fi],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem 0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1.5rem;font-weight:600}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem}mat-dialog-content[_ngcontent-%COMP%]{padding:1.5rem;min-width:500px;max-height:70vh}mat-dialog-content[_ngcontent-%COMP%]   .settings-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;padding:.75rem;background-color:#677eea1a;border-radius:6px;color:#000000de;font-size:.9rem}mat-dialog-content[_ngcontent-%COMP%]   .settings-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem;color:#667eea}mat-dialog-content[_ngcontent-%COMP%]   .tier-sliders[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:1rem}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:4px;color:#fff;font-weight:900;font-size:1rem;letter-spacing:1px}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=S][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f)}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=A][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#feca57,#f39c12)}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=B][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48dbfb,#0abde3)}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=C][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1dd1a1,#10ac84)}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=D][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a29bfe,#6c5ce7)}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-label[data-tier=F][_ngcontent-%COMP%]   .tier-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#636e72,#2d3436)}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .tier-slider-control[_ngcontent-%COMP%]{flex:1;min-width:0}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]{width:80px;flex-shrink:0}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-top:4px;padding-bottom:4px;min-height:auto}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding-bottom:0}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{text-align:right;font-weight:600}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=S][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#ee5a6f}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=A][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#f39c12}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=B][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#0abde3}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=C][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#10ac84}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=D][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#6c5ce7}mat-dialog-content[_ngcontent-%COMP%]   .tier-slider[_ngcontent-%COMP%]   .slider-input-container[data-tier=F][_ngcontent-%COMP%]   .percentage-input[_ngcontent-%COMP%]     input{color:#2d3436}mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;gap:.75rem}"]})};var nl=class t{dialog=x(ea);tierPercentages=Rt.required();tierNames=Rt.required();updateTierPercentage=Je();recalculateTiers=Je();resetTierPercentages=Je();openSettingsDialog(){this.dialog.open(rl,{width:"600px",data:{tierPercentages:this.tierPercentages(),tierNames:this.tierNames()}}).afterClosed().subscribe(e=>{e&&(e.action==="apply"?(e.tierPercentages.forEach((i,n)=>{this.updateTierPercentage.emit({index:n,value:i})}),this.recalculateTiers.emit()):e.action==="reset"&&this.resetTierPercentages.emit())})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ye({type:t,selectors:[["app-tier-settings"]],inputs:{tierPercentages:[1,"tierPercentages"],tierNames:[1,"tierNames"]},outputs:{updateTierPercentage:"updateTierPercentage",recalculateTiers:"recalculateTiers",resetTierPercentages:"resetTierPercentages"},decls:5,vars:0,consts:[[1,"settings-button-container"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,i){e&1&&(S(0,"div",0)(1,"button",1),re("click",function(){return i.openSettingsDialog()}),S(2,"mat-icon"),L(3,"settings"),M(),L(4," Advanced Settings "),M()())},dependencies:[mi,pi,Pi,gi,fi],styles:[".settings-button-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;justify-content:center}.settings-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;font-size:1rem;font-weight:500}.settings-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}"]})};function wC(t,r){if(t&1){let e=tt();S(0,"span",12),L(1),S(2,"button",13),re("click",function(){X(e);let n=j();return Y(n.startEditingListName())}),S(3,"mat-icon"),L(4,"edit"),M()()()}if(t&2){let e=j();V(),Vi(" ",e.listName()," - Tier List ")}}function CC(t,r){if(t&1){let e=tt();S(0,"div",14)(1,"mat-form-field",15)(2,"input",16),Ua("ngModelChange",function(n){X(e);let o=j();return Ha(o.editingListNameValue,n)||(o.editingListNameValue=n),Y(n)}),re("keyup.enter",function(){X(e);let n=j();return Y(n.saveListName())})("keyup.escape",function(){X(e);let n=j();return Y(n.cancelEditingListName())}),M()(),S(3,"button",17),re("click",function(){X(e);let n=j();return Y(n.saveListName())}),S(4,"mat-icon"),L(5,"check"),M()(),S(6,"button",18),re("click",function(){X(e);let n=j();return Y(n.cancelEditingListName())}),S(7,"mat-icon"),L(8,"close"),M()()()}if(t&2){let e=j();V(2),ja("ngModel",e.editingListNameValue)}}function SC(t,r){if(t&1){let e=tt();S(0,"span",30),re("click",function(){X(e);let n=j(),o=n.$implicit,c=n.index,d=j().index,h=j();return Y(h.startEditingItem(d,c,o))}),L(1),M()}if(t&2){let e=j().$implicit;V(),Vi(" ",e," ")}}function kC(t,r){if(t&1){let e=tt();S(0,"div",31)(1,"mat-form-field",32)(2,"input",33),Ua("ngModelChange",function(n){X(e);let o=j(3);return Ha(o.editingItemValue,n)||(o.editingItemValue=n),Y(n)}),re("keyup.enter",function(){X(e);let n=j(),o=n.$implicit,c=n.index,d=j().index,h=j();return Y(h.saveItemName(d,c,o))})("keyup.escape",function(){X(e);let n=j(3);return Y(n.cancelEditingItem())}),M()(),S(3,"button",17),re("click",function(){X(e);let n=j(),o=n.$implicit,c=n.index,d=j().index,h=j();return Y(h.saveItemName(d,c,o))}),S(4,"mat-icon"),L(5,"check"),M()(),S(6,"button",18),re("click",function(){X(e);let n=j(3);return Y(n.cancelEditingItem())}),S(7,"mat-icon"),L(8,"close"),M()()()}if(t&2){let e=j(3);V(2),ja("ngModel",e.editingItemValue)}}function IC(t,r){t&1&&pt(0,"div",34)}function EC(t,r){if(t&1&&(S(0,"div",25)(1,"mat-icon",26),L(2,"drag_indicator"),M(),lt(3,SC,2,1,"span",27)(4,kC,9,1,"div",28)(5,IC,1,0,"div",29),M()),t&2){let e=r.index,i=j().index,n=j();V(3),le("ngIf",!n.isEditingItem(i,e)),V(),le("ngIf",n.isEditingItem(i,e))}}function DC(t,r){if(t&1){let e=tt();S(0,"div",19)(1,"div",20)(2,"span",21),L(3),M(),S(4,"span",22),L(5),M()(),S(6,"div",23),re("cdkDropListDropped",function(n){X(e);let o=j();return Y(o.onItemDrop(n))}),lt(7,EC,6,2,"div",24),M()()}if(t&2){let e=r.$implicit,i=r.index,n=j();V(),Le("data-tier",e.tier),V(2),nt(e.tier),V(2),Ro("",e.items.length," item",e.items.length!==1?"s":""),V(),le("id","tier-"+i)("cdkDropListData",e.items)("cdkDropListConnectedTo",n.getConnectedLists(i)),V(),le("ngForOf",e.items)}}var ol=class t{snackBar=x(io);listName=Rt.required();tieredItems=Rt.required();tierPercentages=Rt.required();tierNames=Rt.required();updateTierPercentage=Je();recalculateTiers=Je();resetTierPercentages=Je();itemDrop=Je();hideResults=Je();createNewList=Je();resortEntireList=Je();listNameChange=Je();itemNameChange=Je();editingListName=Se(!1);editingListNameValue=Se("");editingItem=Se(null);editingItemValue=Se("");onUpdateTierPercentage(r){this.updateTierPercentage.emit(r)}onRecalculateTiers(){this.recalculateTiers.emit()}onResetTierPercentages(){this.resetTierPercentages.emit()}onItemDrop(r){this.itemDrop.emit(r)}onHideResults(){this.hideResults.emit()}onCreateNewList(){this.createNewList.emit()}onResortEntireList(){this.resortEntireList.emit()}getConnectedLists(r){return this.tieredItems().map((e,i)=>`tier-${i}`).filter((e,i)=>i!==r)}copyToClipboardWithFormatting(){return R(this,null,function*(){let r=this.formatTierListAsText();try{yield navigator.clipboard.writeText(r),this.snackBar.open("Tier list copied to clipboard!","Close",{duration:3e3})}catch{this.fallbackCopyToClipboard(r)}})}copyToClipboardItemsOnly(){return R(this,null,function*(){let r=this.formatItemsOnlyAsText();try{yield navigator.clipboard.writeText(r),this.snackBar.open("Items copied to clipboard!","Close",{duration:3e3})}catch{this.fallbackCopyToClipboard(r)}})}formatTierListAsText(){let r=[];r.push(`${this.listName()} - Tier List`),r.push("=".repeat(this.listName().length+13)),r.push("");for(let e of this.tieredItems()){r.push(`[${e.tier}]`);for(let i of e.items)r.push(`  \u2022 ${i}`);r.push("")}return r.join(`
`)}formatItemsOnlyAsText(){let r=[];for(let e of this.tieredItems())for(let i of e.items)r.push(i);return r.join(`
`)}fallbackCopyToClipboard(r){let e=document.createElement("textarea");e.value=r,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),this.snackBar.open("Tier list copied to clipboard!","Close",{duration:3e3})}catch{this.snackBar.open("Failed to copy to clipboard","Close",{duration:3e3})}finally{document.body.removeChild(e)}}startEditingListName(){this.editingListNameValue.set(this.listName()),this.editingListName.set(!0)}saveListName(){let r=this.editingListNameValue().trim();r&&r!==this.listName()&&this.listNameChange.emit(r),this.editingListName.set(!1)}cancelEditingListName(){this.editingListName.set(!1)}startEditingItem(r,e,i){this.editingItem.set({tierIndex:r,itemIndex:e}),this.editingItemValue.set(i)}saveItemName(r,e,i){let n=this.editingItemValue().trim();n&&n!==i&&this.itemNameChange.emit({tierIndex:r,itemIndex:e,oldName:i,newName:n}),this.editingItem.set(null)}cancelEditingItem(){this.editingItem.set(null)}isEditingItem(r,e){let i=this.editingItem();return i!==null&&i.tierIndex===r&&i.itemIndex===e}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ye({type:t,selectors:[["app-tier-results"]],inputs:{listName:[1,"listName"],tieredItems:[1,"tieredItems"],tierPercentages:[1,"tierPercentages"],tierNames:[1,"tierNames"]},outputs:{updateTierPercentage:"updateTierPercentage",recalculateTiers:"recalculateTiers",resetTierPercentages:"resetTierPercentages",itemDrop:"itemDrop",hideResults:"hideResults",createNewList:"createNewList",resortEntireList:"resortEntireList",listNameChange:"listNameChange",itemNameChange:"itemNameChange"},decls:42,vars:6,consts:[["copyMenu","matMenu"],[1,"results-card"],[1,"list-name-container"],["class","list-name-display",4,"ngIf"],["class","list-name-edit",4,"ngIf"],[3,"updateTierPercentage","recalculateTiers","resetTierPercentages","tierPercentages","tierNames"],["class","tier-container",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"list-name-display"],["mat-icon-button","",1,"edit-icon-button",3,"click"],[1,"list-name-edit"],["appearance","outline",1,"list-name-field"],["matInput","","placeholder","List name",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","",3,"click"],[1,"tier-container"],[1,"tier-header"],[1,"tier-label"],[1,"tier-count"],["cdkDropList","",1,"tier-items",3,"cdkDropListDropped","id","cdkDropListData","cdkDropListConnectedTo"],["class","tier-item","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"tier-item"],["cdkDragHandle","",1,"drag-handle"],["class","item-text",3,"click",4,"ngIf"],["class","item-edit",4,"ngIf"],["class","drag-placeholder",4,"cdkDragPlaceholder"],[1,"item-text",3,"click"],[1,"item-edit"],["appearance","outline",1,"item-name-field"],["matInput","","placeholder","Item name",3,"ngModelChange","keyup.enter","keyup.escape","ngModel"],[1,"drag-placeholder"]],template:function(e,i){if(e&1){let n=tt();S(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title")(3,"div",2),lt(4,wC,5,1,"span",3)(5,CC,9,1,"div",4),M()(),S(6,"mat-card-subtitle"),L(7,"Your personalized ranking organized by tiers (drag items to reorder)"),M()(),S(8,"mat-card-content")(9,"app-tier-settings",5),re("updateTierPercentage",function(c){return X(n),Y(i.onUpdateTierPercentage(c))})("recalculateTiers",function(){return X(n),Y(i.onRecalculateTiers())})("resetTierPercentages",function(){return X(n),Y(i.onResetTierPercentages())}),M(),lt(10,DC,8,8,"div",6),M(),S(11,"mat-card-actions")(12,"button",7)(13,"mat-icon"),L(14,"content_copy"),M(),L(15," Copy to Clipboard "),S(16,"mat-icon"),L(17,"arrow_drop_down"),M()(),S(18,"mat-menu",null,0)(20,"button",8),re("click",function(){return X(n),Y(i.copyToClipboardWithFormatting())}),S(21,"mat-icon"),L(22,"format_list_bulleted"),M(),S(23,"span"),L(24,"Copy with Tier Formatting"),M()(),S(25,"button",8),re("click",function(){return X(n),Y(i.copyToClipboardItemsOnly())}),S(26,"mat-icon"),L(27,"list"),M(),S(28,"span"),L(29,"Copy Items Only"),M()()(),S(30,"button",9),re("click",function(){return X(n),Y(i.onHideResults())}),S(31,"mat-icon"),L(32,"edit"),M(),L(33," Add More Items "),M(),S(34,"button",10),re("click",function(){return X(n),Y(i.onResortEntireList())}),S(35,"mat-icon"),L(36,"refresh"),M(),L(37," Resort Entire List "),M(),S(38,"button",11),re("click",function(){return X(n),Y(i.onCreateNewList())}),S(39,"mat-icon"),L(40,"add"),M(),L(41," Create New List "),M()()()}if(e&2){let n=an(19);V(4),le("ngIf",!i.editingListName()),V(),le("ngIf",i.editingListName()),V(4),le("tierPercentages",i.tierPercentages())("tierNames",i.tierNames()),V(),le("ngForOf",i.tieredItems()),V(2),le("matMenuTriggerFor",n)}},dependencies:[mi,To,Ao,Bo,Lo,No,Fo,br,yr,kc,mn,pn,hn,un,pi,Pi,gn,gi,fi,Wo,Uo,zo,jo,Gf,Xf,Qf,Wf,Yf,nl,xg,Jo,ns,bg],styles:[".results-card[_ngcontent-%COMP%]   .list-name-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.results-card[_ngcontent-%COMP%]   .list-name-container[_ngcontent-%COMP%]   .list-name-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.results-card[_ngcontent-%COMP%]   .list-name-container[_ngcontent-%COMP%]   .list-name-display[_ngcontent-%COMP%]   .edit-icon-button[_ngcontent-%COMP%]{opacity:.6;transition:opacity .2s ease}.results-card[_ngcontent-%COMP%]   .list-name-container[_ngcontent-%COMP%]   .list-name-display[_ngcontent-%COMP%]   .edit-icon-button[_ngcontent-%COMP%]:hover{opacity:1}.results-card[_ngcontent-%COMP%]   .list-name-container[_ngcontent-%COMP%]   .list-name-edit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;width:100%}.results-card[_ngcontent-%COMP%]   .list-name-container[_ngcontent-%COMP%]   .list-name-edit[_ngcontent-%COMP%]   .list-name-field[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.results-card[_ngcontent-%COMP%]   .tier-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.results-card[_ngcontent-%COMP%]   .tier-container[_ngcontent-%COMP%]:last-child{margin-bottom:0}.results-card[_ngcontent-%COMP%]   .tier-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;font-weight:700;font-size:1.1rem;color:#fff}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=S][_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=A][_ngcontent-%COMP%]{background:linear-gradient(135deg,#feca57,#f39c12)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=B][_ngcontent-%COMP%]{background:linear-gradient(135deg,#48dbfb,#0abde3)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=C][_ngcontent-%COMP%]{background:linear-gradient(135deg,#1dd1a1,#10ac84)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=D][_ngcontent-%COMP%]{background:linear-gradient(135deg,#a29bfe,#6c5ce7)}.results-card[_ngcontent-%COMP%]   .tier-header[data-tier=F][_ngcontent-%COMP%]{background:linear-gradient(135deg,#636e72,#2d3436)}.results-card[_ngcontent-%COMP%]   .tier-header[_ngcontent-%COMP%]   .tier-label[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:900;letter-spacing:2px}.results-card[_ngcontent-%COMP%]   .tier-header[_ngcontent-%COMP%]   .tier-count[_ngcontent-%COMP%]{font-size:.85rem;opacity:.9;font-weight:500}.results-card[_ngcontent-%COMP%]   .tier-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding:1rem;background-color:#00000005;min-height:60px;transition:background-color .2s ease}.results-card[_ngcontent-%COMP%]   .tier-items.cdk-drop-list-dragging[_ngcontent-%COMP%]{background-color:#677eea1a}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#fff;padding:.5rem 1rem;border-radius:6px;border:2px solid rgba(0,0,0,.1);font-weight:500;transition:all .2s ease;box-shadow:0 1px 3px #0000001a;cursor:move}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026;border-color:#667eea}.results-card[_ngcontent-%COMP%]   .tier-item.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0003;border-color:#667eea;opacity:.9;cursor:grabbing}.results-card[_ngcontent-%COMP%]   .tier-item.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:grab;color:#0006;font-size:1.25rem;width:1.25rem;height:1.25rem;transition:color .2s ease}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:hover{color:#667eea}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{flex:1;cursor:pointer;-webkit-user-select:none;user-select:none;padding:.25rem .5rem;border-radius:4px;transition:background-color .2s ease}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]:hover{background-color:#677eea1a}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .item-edit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .item-edit[_ngcontent-%COMP%]   .item-name-field[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .item-edit[_ngcontent-%COMP%]   .item-name-field[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding-bottom:0}.results-card[_ngcontent-%COMP%]   .tier-item[_ngcontent-%COMP%]   .drag-placeholder[_ngcontent-%COMP%]{background:#677eea33;border:2px dashed #667eea;border-radius:6px;min-height:40px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};var Fg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[at]})}return t})();var MC=["*"],OC=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,RC=["unscopedContent"],PC=["text"],TC=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],AC=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var LC=new Ce("ListOption"),Yu=(()=>{class t{_elementRef=x(Te);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return t})(),Gu=(()=>{class t{_elementRef=x(Te);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return t})(),Zu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return t})(),Bg=(()=>{class t{_listOption=x(LC,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,hostVars:4,hostBindings:function(i,n){i&2&&Xe("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}})}return t})(),NC=(()=>{class t extends Bg{static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275dir=ke({type:t,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[yt]})}return t})(),FC=(()=>{class t extends Bg{static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275dir=ke({type:t,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[yt]})}return t})(),BC=new Ce("MAT_LIST_CONFIG"),Xu=(()=>{class t{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Tr(e)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(e){this._disabled.set(Tr(e))}_disabled=Se(!1);_defaultOptions=x(BC,{optional:!0});static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,hostVars:1,hostBindings:function(i,n){i&2&&Le("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),VC=(()=>{class t{_elementRef=x(Te);_ngZone=x(Ze);_listBase=x(Xu,{optional:!0});_platform=x(qt);_hostElement;_isButtonElement;_noopAnimations=xi();_avatars;_icons;set lines(e){this._explicitLines=Pr(e,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=Tr(e)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(e){this._disabled.set(Tr(e))}_disabled=Se(!1);_subscriptions=new Ht;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){x($i).load(fn);let e=x(Dc,{optional:!0});this.rippleConfig=e||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new of(this,this._ngZone,this._hostElement,this._platform,x(We)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(Mi(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),n=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&i===1;n.classList.toggle("mdc-list-item__primary-text",o),n.classList.toggle("mdc-list-item__secondary-text",!o)}else n.classList.remove("mdc-list-item__primary-text"),n.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ke({type:t,contentQueries:function(i,n,o){if(i&1&&(Ct(o,NC,4),Ct(o,FC,4)),i&2){let c;De(c=Me())&&(n._avatars=c),De(c=Me())&&(n._icons=c)}},hostVars:4,hostBindings:function(i,n){i&2&&(Le("aria-disabled",n.disabled)("disabled",n._isButtonElement&&n.disabled||null),Xe("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return t})();var Vg=(()=>{class t extends Xu{static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275cmp=ye({type:t,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[Kt([{provide:Xu,useExisting:t}]),yt],ngContentSelectors:MC,decls:1,vars:0,template:function(i,n){i&1&&(ai(),Et(0))},styles:[OC],encapsulation:2,changeDetection:0})}return t})(),$g=(()=>{class t extends VC{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(e){this._activated=Tr(e)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ni(t)))(n||t)}})();static \u0275cmp=ye({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,n,o){if(i&1&&(Ct(o,Gu,5),Ct(o,Yu,5),Ct(o,Zu,5)),i&2){let c;De(c=Me())&&(n._lines=c),De(c=Me())&&(n._titles=c),De(c=Me())&&(n._meta=c)}},viewQuery:function(i,n){if(i&1&&(Dt(RC,5),Dt(PC,5)),i&2){let o;De(o=Me())&&(n._unscopedContent=o.first),De(o=Me())&&(n._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,n){i&2&&(Le("aria-current",n._getAriaCurrent()),Xe("mdc-list-item--activated",n.activated)("mdc-list-item--with-leading-avatar",n._avatars.length!==0)("mdc-list-item--with-leading-icon",n._icons.length!==0)("mdc-list-item--with-trailing-meta",n._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",n._hasBothLeadingAndTrailing())("_mat-animation-noopable",n._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[yt],ngContentSelectors:AC,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,n){if(i&1){let o=tt();ai(TC),Et(0),S(1,"span",1),Et(2,1),Et(3,2),S(4,"span",2,0),re("cdkObserveContent",function(){return X(o),Y(n._updateItemLines(!0))}),Et(6,3),M()(),Et(7,4),Et(8,5),pt(9,"div",3)}},dependencies:[Xp],encapsulation:2,changeDetection:0})}return t})();var zg=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=je({type:t});static \u0275inj=ze({imports:[Yp,at,xr,Fg,Zc]})}return t})();function zC(t,r){if(t&1&&(S(0,"mat-card-subtitle"),L(1),M()),t&2){let e=j();V(),Ro("",e.lists().length," saved list",e.lists().length!==1?"s":"")}}function jC(t,r){if(t&1){let e=tt();S(0,"mat-list-item")(1,"span",4),L(2),M(),S(3,"span",5),L(4),M(),S(5,"span",6),L(6),cn(7,"date"),M(),S(8,"button",7),re("click",function(){let n=X(e).$implicit,o=j(2);return Y(o.onLoadList(n))}),S(9,"mat-icon"),L(10,"open_in_new"),M()(),S(11,"button",8),re("click",function(){let n=X(e).$implicit,o=j(2);return Y(o.onDeleteList(n))}),S(12,"mat-icon"),L(13,"delete"),M()()()}if(t&2){let e=r.$implicit,i=j(2);V(2),nt(e.listName),V(2),Vi("",e.items.length," items"),V(2),nt(Pp(7,5,e.createdAt,"short")),V(2),le("disabled",i.isDisabled()),V(3),le("disabled",i.isDisabled())}}function HC(t,r){if(t&1&&(S(0,"mat-list"),lt(1,jC,14,8,"mat-list-item",3),M()),t&2){let e=j();V(),le("ngForOf",e.lists())}}function UC(t,r){t&1&&(S(0,"div",9)(1,"mat-icon"),L(2,"inbox"),M(),S(3,"p"),L(4,"No saved lists yet"),M(),S(5,"p"),L(6,"Complete a sort to save a list locally"),M(),S(7,"p",10),L(8,"\u{1F4A1} Sign in to sync across devices"),M()())}var al=class t{lists=Rt.required();isDisabled=Rt(!1);loadList=Je();deleteList=Je();onLoadList(r){this.loadList.emit(r)}onDeleteList(r){this.deleteList.emit(r)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ye({type:t,selectors:[["app-saved-lists-sidebar"]],inputs:{lists:[1,"lists"],isDisabled:[1,"isDisabled"]},outputs:{loadList:"loadList",deleteList:"deleteList"},decls:8,vars:3,consts:[[1,"lists-card"],[4,"ngIf"],["class","no-lists",4,"ngIf"],[4,"ngFor","ngForOf"],["matListItemTitle",""],["matListItemLine",""],["matListItemLine","",1,"date"],["mat-icon-button","","matListItemMeta","",3,"click","disabled"],["mat-icon-button","","matListItemMeta","","color","warn",3,"click","disabled"],[1,"no-lists"],[1,"hint"]],template:function(e,i){e&1&&(S(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),L(3,"Saved Lists"),M(),lt(4,zC,2,2,"mat-card-subtitle",1),M(),S(5,"mat-card-content"),lt(6,HC,2,1,"mat-list",1)(7,UC,9,0,"div",2),M()()),e&2&&(V(4),le("ngIf",i.lists().length>0),V(2),le("ngIf",i.lists().length>0),V(),le("ngIf",i.lists().length===0))},dependencies:[mi,To,Ao,br,yr,mn,pn,hn,un,zg,Vg,$g,Gu,Yu,Zu,pi,gn,gi,fi,Fp],styles:[".lists-card[_ngcontent-%COMP%]{position:sticky;top:2rem}.lists-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{cursor:pointer;border-bottom:1px solid rgba(0,0,0,.12)}.lists-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.lists-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.75rem;color:#0000008a}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;text-align:center;color:#0000008a}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;margin-bottom:1rem;opacity:.4;color:#677eea99}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem}.lists-card[_ngcontent-%COMP%]   .no-lists[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:.85rem;opacity:.7}"]})};function WC(t,r){if(t&1){let e=tt();S(0,"div",1)(1,"div",3)(2,"mat-icon",4),L(3,"account_circle"),M(),S(4,"div",5)(5,"span",6),L(6),M(),S(7,"span",7)(8,"mat-icon",8),L(9,"cloud_done"),M(),L(10," Syncing "),M()()(),S(11,"button",9),re("click",function(){X(e);let n=j(3);return Y(n.logout())}),S(12,"mat-icon"),L(13,"logout"),M(),L(14," Logout "),M()()}if(t&2){let e=r;V(6),nt(e.name||e.email)}}function KC(t,r){t&1&&(S(0,"div",2)(1,"div",10)(2,"mat-icon",11),L(3,"cloud_off"),M(),S(4,"p",12),L(5,"Sign in to sync your lists across devices"),M()(),S(6,"div",13)(7,"button",14),L(8," Login "),M(),S(9,"button",15),L(10," Register "),M()()())}function qC(t,r){if(t&1&&(S(0,"mat-card",0),Ke(1,WC,15,1,"div",1),cn(2,"async"),kp(3,KC,11,0,"div",2),M()),t&2){let e,i=j(2);V(),qe((e=Po(2,1,i.authService.currentUser$))?1:3,e)}}function QC(t,r){if(t&1&&(Ke(0,qC,4,3,"mat-card",0),cn(1,"async")),t&2){let e=j();qe(Po(1,1,e.authService.appwriteAvailable$)?0:-1)}}var sl=class t{authService=x(yc);logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=ye({type:t,selectors:[["app-auth-widget"]],decls:2,vars:3,consts:[[1,"auth-widget"],[1,"auth-content","logged-in"],[1,"auth-content","logged-out"],[1,"user-info"],[1,"user-icon"],[1,"user-details"],[1,"username"],[1,"sync-status"],[1,"sync-icon"],["mat-button","",1,"logout-btn",3,"click"],[1,"auth-message"],[1,"cloud-icon"],[1,"message-text"],[1,"auth-buttons"],["mat-raised-button","","color","primary","routerLink","/login"],["mat-stroked-button","","routerLink","/register"]],template:function(e,i){e&1&&(Ke(0,QC,2,3),cn(1,"async")),e&2&&qe(Po(1,1,i.authService.isOnline$)?0:-1)},dependencies:[mi,jp,zp,br,yr,pi,Pi,gi,fi,vc],styles:[".auth-widget[_ngcontent-%COMP%]{margin-bottom:16px;background:linear-gradient(135deg,#667eea15,#764ba215);border:1px solid rgba(102,126,234,.2)}.auth-content[_ngcontent-%COMP%]{padding:12px}.auth-content.logged-in[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}.auth-content.logged-out[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:1;min-width:0}.user-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#667eea}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;min-width:0;flex:1}.username[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#000000de;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sync-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#0009}.sync-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:#4caf50}.logout-btn[_ngcontent-%COMP%]{min-width:auto;padding:0 12px}.logout-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:4px}.auth-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center}.cloud-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;color:#0000004d}.message-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#0009;line-height:1.4}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;max-width:120px}@media (max-width: 600px){.auth-content.logged-in[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.logout-btn[_ngcontent-%COMP%]{width:100%}}"]})};function ao(t){"@babel/helpers - typeof";return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ao(t)}function jg(t,r){if(ao(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,r||"default");if(ao(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Hg(t){var r=jg(t,"string");return ao(r)=="symbol"?r:r+""}function Ug(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Hg(i.key),i)}}function Ci(t,r,e){return r&&Ug(t.prototype,r),e&&Ug(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wg(t){return t[t.length-1]}function Cn(t){return Array.isArray(t)?t.slice(0):[t]}function Kg(t,r){t=t.slice(0);for(var e=[];t.length;){var i=t.splice(0,r);e.push(i)}return e}function so(t){return Array.isArray(t)}function qg(t){return t!=null}function cl(t,r){var e=0,i=-1;for(var n of t){i=i+1;var o=r(n,i);if(o)e=e+1;else break}return e}function Ti(t,r){var e=r.length;if(e!==0){var i=t.length;t.length=i+r.length;for(var n=0;n<e;++n)t[i+n]=r[n]}}function Qg(t){return t.filter(function(r,e,i){return i.indexOf(r)===e})}function Zi(t){for(var r="",e=0;e<t.length;e++){var i=t[e];if(i==="-")return parseInt(r,10);r+=i}throw new Error("malformatted revision: "+t)}function Si(t,r){var e=r?Zi(r._rev)+1:1;return e+"-"+t}function Xg(t){var r=t.split("."),e=r.length;return e===1?i=>i[t]:i=>{for(var n=i,o=0;o<e;++o){var c=r[o];if(n=n[c],typeof n>"u")return n}return n}}function Pe(t){return Object.assign({},t)}function Yg(t){return Object.keys(t)[0]}function ia(t,r=!1){if(!t)return t;if(!r&&Array.isArray(t))return t.sort((i,n)=>typeof i=="string"&&typeof n=="string"?i.localeCompare(n):typeof i=="object"?1:-1).map(i=>ia(i,r));if(typeof t=="object"&&!Array.isArray(t)){var e={};return Object.keys(t).sort((i,n)=>i.localeCompare(n)).forEach(i=>{e[i]=ia(t[i],r)}),e}return t}function Ju(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var r=new Array(t.length),e=r.length;e--;)r[e]=Ju(t[e]);return r}var i={};for(var n in t)i[n]=Ju(t[n]);return i}var Qt=Ju;function zi(t,r,e){return Object.defineProperty(t,r,{get:function(){return e}}),e}var cs=1;function Sn(){return{lwt:cs}}function _i(){return""}function Gg(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function Zg(t,r,e){if(r.length!==e.length)return!1;for(var i=0,n=r.length;i<n;){var o=r[i],c=e[i];if(i++,o[t]!==c[t]||o._rev!==c._rev||o._meta.lwt!==c._meta.lwt)return!1}return!0}function kn(t,r){return kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},kn(t,r)}function em(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,kn(t,r)}function ll(t){return ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ll(t)}function Jg(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function tm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tm=function(){return!!t})()}function e_(t,r,e){if(tm())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,r);var n=new(t.bind.apply(t,i));return e&&kn(n,e.prototype),n}function ls(t){var r=typeof Map=="function"?new Map:void 0;return ls=function(i){if(i===null||!Jg(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(i))return r.get(i);r.set(i,n)}function n(){return e_(i,arguments,ll(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),kn(n,i)},ls(t)}var et={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return`
        RxDB Error-Code: `+t+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function XC(t){var r="";return Object.keys(t).length===0||(r+="-".repeat(20)+`
`,r+=`Parameters:
`,r+=Object.keys(t).map(e=>{var i="[object Object]";try{e==="errors"?i=t[e].map(n=>JSON.stringify(n,Object.getOwnPropertyNames(n))):i=JSON.stringify(t[e],function(n,o){return o===void 0?null:o},2)}catch{}return e+": "+i}).join(`
`),r+=`
`),r}function t_(t,r,e){return`
`+t+`
`+XC(e)}var YC=(function(t){function r(i,n,o={}){var c,d=t_(n,i,o);return c=t.call(this,d)||this,c.code=i,c.message=d,c.url=im(i),c.parameters=o,c.rxdb=!0,c}em(r,t);var e=r.prototype;return e.toString=function(){return this.message},Ci(r,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])})(ls(Error)),GC=(function(t){function r(i,n,o={}){var c,d=t_(n,i,o);return c=t.call(this,d)||this,c.code=i,c.message=d,c.url=im(i),c.parameters=o,c.rxdb=!0,c}em(r,t);var e=r.prototype;return e.toString=function(){return this.message},Ci(r,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])})(ls(TypeError));function im(t){return"https://rxdb.info/errors.html?console=errors#"+t}function i_(t){return`
Find out more about this error here: `+im(t)+` 
`}function ee(t,r){return new YC(t,et.tunnelErrorMessage(t)+i_(t),r)}function ds(t,r){return new GC(t,et.tunnelErrorMessage(t)+i_(t),r)}function ra(t){return t&&t.status===409?t:!1}var ZC={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function dl(t){return ee("COL20",{name:ZC[t.status],document:t.documentId,writeError:t})}var ul;function JC(){if(ul)return ul;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw ee("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof crypto?.subtle,typeof_crypto_subtle_digest:typeof crypto?.subtle?.digest}});return ul=crypto.subtle.digest.bind(crypto.subtle),ul}function eS(t){return R(this,null,function*(){var r=new TextEncoder().encode(t),e=yield JC()("SHA-256",r),i=Array.prototype.map.call(new Uint8Array(e),n=>("00"+n.toString(16)).slice(-2)).join("");return i})}var ml=eS;function r_(){return new Promise(t=>setTimeout(t,0))}function n_(t=0){return new Promise(r=>setTimeout(r,t))}function o_(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var us=Promise.resolve(!0),Ai=Promise.resolve(!1),a_=Promise.resolve(null),vi=Promise.resolve();function na(t=1e4){return typeof requestIdleCallback=="function"?new Promise(r=>{requestIdleCallback(()=>r(),{timeout:t})}):n_(0)}var rm=vi;function s_(t=void 0){return rm=rm.then(()=>na(t)),rm}function c_(t,r){return t.reduce((e,i)=>e.then(i),Promise.resolve(r))}var l_=/\./g;var d_="abcdefghijklmnopqrstuvwxyz";function co(t=10){for(var r="",e=0;e<t;e++)r+=d_.charAt(Math.floor(Math.random()*d_.length));return r}function hl(t){t+="";var r=t.charAt(0).toUpperCase();return r+t.substr(1)}function lo(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function oa(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var e,i;if(Array.isArray(t)){if(e=t.length,e!==r.length)return!1;for(i=e;i--!==0;)if(!oa(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var n=Object.keys(t);if(e=n.length,e!==Object.keys(r).length)return!1;for(i=e;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[i]))return!1;for(i=e;i--!==0;){var o=n[i];if(!oa(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}var om=t=>{var r=typeof t;return t!==null&&(r==="object"||r==="function")},nm=new Set(["__proto__","prototype","constructor"]),tS=new Set("0123456789");function u_(t){var r=[],e="",i="start",n=!1;for(var o of t)switch(o){case"\\":{if(i==="index")throw new Error("Invalid character in an index");if(i==="indexEnd")throw new Error("Invalid character after an index");n&&(e+=o),i="property",n=!n;break}case".":{if(i==="index")throw new Error("Invalid character in an index");if(i==="indexEnd"){i="property";break}if(n){n=!1,e+=o;break}if(nm.has(e))return[];r.push(e),e="",i="property";break}case"[":{if(i==="index")throw new Error("Invalid character in an index");if(i==="indexEnd"){i="index";break}if(n){n=!1,e+=o;break}if(i==="property"){if(nm.has(e))return[];r.push(e),e=""}i="index";break}case"]":{if(i==="index"){r.push(Number.parseInt(e,10)),e="",i="indexEnd";break}if(i==="indexEnd")throw new Error("Invalid character after an index")}default:{if(i==="index"&&!tS.has(o))throw new Error("Invalid character in an index");if(i==="indexEnd")throw new Error("Invalid character after an index");i==="start"&&(i="property"),n&&(n=!1,e+="\\"),e+=o}}switch(n&&(e+="\\"),i){case"property":{if(nm.has(e))return[];r.push(e);break}case"index":throw new Error("Index was not closed");case"start":{r.push("");break}}return r}function m_(t,r){if(typeof r!="number"&&Array.isArray(t)){var e=Number.parseInt(r,10);return Number.isInteger(e)&&t[e]===t[r]}return!1}function iS(t,r){if(m_(t,r))throw new Error("Cannot use string index")}function Fr(t,r,e){if(Array.isArray(r)&&(r=r.join(".")),!r.includes(".")&&!r.includes("["))return t[r];if(!om(t)||typeof r!="string")return e===void 0?t:e;var i=u_(r);if(i.length===0)return e;for(var n=0;n<i.length;n++){var o=i[n];if(m_(t,o)?t=n===i.length-1?void 0:null:t=t[o],t==null){if(n!==i.length-1)return e;break}}return t===void 0?e:t}function am(t,r,e){if(Array.isArray(r)&&(r=r.join(".")),!om(t)||typeof r!="string")return t;for(var i=t,n=u_(r),o=0;o<n.length;o++){var c=n[o];iS(t,c),o===n.length-1?t[c]=e:om(t[c])||(t[c]=typeof n[o+1]=="number"?[]:{}),t=t[c]}return i}function uo(t,r){var e=t.get(r);if(typeof e>"u")throw new Error("missing value from map "+r);return e}function zt(t,r,e,i){var n=t.get(r);return typeof n>"u"?(n=e(),t.set(r,n)):i&&i(n),n}function Ye(t){var r=t.split("-"),e="RxDB";return r.forEach(i=>{e+=hl(i)}),e+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+e+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+e+`);
        `)}function sm(t){var r={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,extensions:t.extensions,code:t.code,url:t.url,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return r}var cm=0;function Mt(){var t=Date.now();t=t+.01,t<=cm&&(t=cm+.01);var r=parseFloat(t.toFixed(2));return cm=r,r}function me(t,r){if(!t)throw r||(r=""),new Error("ensureNotFalsy() is falsy: "+r);return t}var pl={bufferSize:1,refCount:!0};var ms="16.19.1";var fl={};var rS="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",dm=16,lm=Ai,h_=!1;function gl(){return R(this,null,function*(){return h_||(h_=!0,lm=R(null,null,function*(){return!!(fl.premium&&typeof fl.premium=="string"&&(yield ml(fl.premium))===rS)})),lm})}var aa={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Pt(t,r){aa[t].length>0&&aa[t].forEach(e=>e(r))}function cr(t,r){return R(this,null,function*(){for(var e of aa[t])yield e(r)})}function Sr(t,r){var e=r;e=e.replace(l_,".properties."),e="properties."+e,e=lo(e);var i=Fr(t,e);return i}function p_(t,r,e){if(typeof r.primaryKey=="string")return e;var i=ji(r,e),n=e[t];if(n&&n!==i)throw ee("DOC19",{args:{documentData:e,existingPrimary:n,newPrimary:i},schema:r});return e[t]=i,e}function ei(t){return typeof t=="string"?t:t.key}function f_(t){var r=ei(t.primaryKey),e=Sr(t,r);return me(e.maxLength)}function ji(t,r){if(typeof t.primaryKey=="string")return r[t.primaryKey];var e=t.primaryKey;return e.fields.map(i=>{var n=Fr(r,i);if(typeof n>"u")throw ee("DOC18",{args:{field:i,documentData:r}});return n}).join(e.separator)}function g_(t){var r=ia(t,!0);return r}function nS(t){return["_deleted",t]}function sa(t){t=Pe(t);var r=ei(t.primaryKey);t.properties=Pe(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=aS,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var e=um(t);Ti(t.required,e),t.required=t.required.filter(o=>!o.includes(".")).filter((o,c,d)=>d.indexOf(o)===c),t.version=t.version||0;var i=t.indexes.map(o=>{var c=so(o)?o.slice(0):[o];return c.includes(r)||c.push(r),c[0]!=="_deleted"&&c.unshift("_deleted"),c});i.length===0&&i.push(nS(r)),i.push(["_meta.lwt",r]),t.internalIndexes&&t.internalIndexes.map(o=>{i.push(o)});var n=new Set;return i.filter(o=>{var c=o.join(",");return n.has(c)?!1:(n.add(c),!0)}),t.indexes=i,t}var oS=1e15,aS={type:"object",properties:{lwt:{type:"number",minimum:cs,maximum:oS,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function um(t){var r=Object.keys(t.properties).filter(i=>t.properties[i].final),e=ei(t.primaryKey);return r.push(e),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(i=>r.push(i)),r}function __(t,r){for(var e=Object.keys(t.defaultValues),i=0;i<e.length;++i){var n=e[i];(!Object.prototype.hasOwnProperty.call(r,n)||typeof r[n]>"u")&&(r[n]=t.defaultValues[n])}return r}var mm=(function(){function t(e,i){if(this.jsonSchema=e,this.hashFunction=i,this.indexes=sS(this.jsonSchema),this.primaryPath=ei(this.jsonSchema.primaryKey),!e.properties[this.primaryPath].maxLength)throw ee("SC39",{schema:e});this.finalFields=um(this.jsonSchema)}var r=t.prototype;return r.validateChange=function(i,n){this.finalFields.forEach(o=>{if(!oa(i[o],n[o]))throw ee("DOC9",{dataBefore:i,dataAfter:n,fieldName:o,schema:this.jsonSchema})})},r.getDocumentPrototype=function(){var i={},n=Sr(this.jsonSchema,"");return Object.keys(n).forEach(o=>{var c=o;i.__defineGetter__(o,function(){if(!(!this.get||typeof this.get!="function")){var d=this.get(c);return d}}),Object.defineProperty(i,o+"$",{get:function(){return this.get$(c)},enumerable:!1,configurable:!1}),Object.defineProperty(i,o+"$$",{get:function(){return this.get$$(c)},enumerable:!1,configurable:!1}),Object.defineProperty(i,o+"_",{get:function(){return this.populate(c)},enumerable:!1,configurable:!1})}),zi(this,"getDocumentPrototype",()=>i),i},r.getPrimaryOfDocumentData=function(i){return ji(this.jsonSchema,i)},Ci(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter(([,i])=>Object.prototype.hasOwnProperty.call(i,"default")).forEach(([i,n])=>e[i]=n.default),zi(this,"defaultValues",e)}},{key:"hash",get:function(){return zi(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])})();function sS(t){return(t.indexes||[]).map(r=>so(r)?r:[r])}function v_(t,r,e=!0){e&&Pt("preCreateRxSchema",t);var i=sa(t);i=g_(i),et.deepFreezeWhenDevMode(i);var n=new mm(i,r);return Pt("createRxSchema",n),n}function y_(t){return t.documentData?t.documentData:t.previousDocumentData}function b_(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:et.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}var cS=new Map;function _l(t){return zt(cS,t,()=>{for(var r=new Array(t.events.length),e=t.events,i=t.collectionName,n=t.isLocal,o=et.deepFreezeWhenDevMode,c=0;c<e.length;c++){var d=e[c];r[c]={documentId:d.documentId,collectionName:i,isLocal:n,operation:d.operation,documentData:o(d.documentData),previousDocumentData:o(d.previousDocumentData)}}return r})}var mo="\uFFFF",ho=Number.MIN_SAFE_INTEGER;function x_(t,r){var e=r.selector,i=t.indexes?t.indexes.slice(0):[];r.index&&(i=[r.index]);var n=!!r.sort.find(f=>Object.values(f)[0]==="desc"),o=new Set;Object.keys(e).forEach(f=>{var y=Sr(t,f);y&&y.type==="boolean"&&Object.prototype.hasOwnProperty.call(e[f],"$eq")&&o.add(f)});var c=r.sort.map(f=>Object.keys(f)[0]),d=c.filter(f=>!o.has(f)).join(","),h=-1,g;if(i.forEach(f=>{var y=!0,D=!0,C=f.map(ae=>{var se=e[ae],Oe=se?Object.keys(se):[],we={};if(!se||!Oe.length){var Qe=D?ho:mo;we={startKey:Qe,endKey:y?mo:ho,inclusiveStart:!0,inclusiveEnd:!0}}else Oe.forEach(ue=>{if(vl.has(ue)){var be=se[ue],dt=mS(ue,be);we=Object.assign(we,dt)}});return typeof we.startKey>"u"&&(we.startKey=ho),typeof we.endKey>"u"&&(we.endKey=mo),typeof we.inclusiveStart>"u"&&(we.inclusiveStart=!0),typeof we.inclusiveEnd>"u"&&(we.inclusiveEnd=!0),D&&!we.inclusiveStart&&(D=!1),y&&!we.inclusiveEnd&&(y=!1),we}),k=C.map(ae=>ae.startKey),T=C.map(ae=>ae.endKey),A={index:f,startKeys:k,endKeys:T,inclusiveEnd:y,inclusiveStart:D,sortSatisfiedByIndex:!n&&d===f.filter(ae=>!o.has(ae)).join(","),selectorSatisfiedByIndex:uS(f,r.selector,k,T)},ie=hS(t,r,A);(ie>=h||r.index)&&(h=ie,g=A)}),!g)throw ee("SNH",{query:r});return g}var vl=new Set(["$eq","$gt","$gte","$lt","$lte"]),lS=new Set(["$eq","$gt","$gte"]),dS=new Set(["$eq","$lt","$lte"]);function uS(t,r,e,i){var n=Object.entries(r),o=n.find(([ue,be])=>{if(!t.includes(ue))return!0;var dt=Object.entries(be).find(([jt,Lt])=>!vl.has(jt));return dt});if(o||r.$and||r.$or)return!1;var c=[],d=new Set;for(var[h,g]of Object.entries(r)){if(!t.includes(h))return!1;var f=Object.keys(g).filter(ue=>lS.has(ue));if(f.length>1)return!1;var y=f[0];if(y&&d.add(h),y!=="$eq"){if(c.length>0)return!1;c.push(y)}}var D=[],C=new Set;for(var[k,T]of Object.entries(r)){if(!t.includes(k))return!1;var A=Object.keys(T).filter(ue=>dS.has(ue));if(A.length>1)return!1;var ie=A[0];if(ie&&C.add(k),ie!=="$eq"){if(D.length>0)return!1;D.push(ie)}}var ae=0;for(var se of t){for(var Oe of[d,C]){if(!Oe.has(se)&&Oe.size>0)return!1;Oe.delete(se)}var we=e[ae],Qe=i[ae];if(we!==Qe&&d.size>0&&C.size>0)return!1;ae++}return!0}function mS(t,r){switch(t){case"$eq":return{startKey:r,endKey:r,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:r,inclusiveEnd:!0};case"$gte":return{startKey:r,inclusiveStart:!0};case"$lt":return{endKey:r,inclusiveEnd:!1};case"$gt":return{startKey:r,inclusiveStart:!1};default:throw new Error("SNH")}}function hS(t,r,e){var i=0,n=f=>{f>0&&(i=i+f)},o=10,c=cl(e.startKeys,f=>f!==ho&&f!==mo);n(c*o);var d=cl(e.startKeys,f=>f!==mo&&f!==ho);n(d*o);var h=cl(e.startKeys,(f,y)=>f===e.endKeys[y]);n(h*o*1.5);var g=e.sortSatisfiedByIndex?5:0;return n(g),i}var ki=class extends Error{},hs=Symbol("missing"),S_=Object.freeze(new Error("mingo: cycle detected while processing object/array")),ps=t=>{let r=yl(t),e=0,i=r.length;for(;i;)e=(e<<5)-e^r.charCodeAt(--i);return e>>>0},In=t=>typeof t!="object"&&typeof t!="function"||t===null,k_=t=>In(t)||ci(t)||er(t),I_={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},ft=(t,r)=>{t===hs&&(t=void 0),r===hs&&(r=void 0);let[e,i]=[t,r].map(n=>I_[Br(n)]||0);return e!==i?e-i:Xt(t,r)?0:t<r?-1:t>r?1:0},Ji=class t extends Map{#e=ps;#i=new Map;#t=r=>{let e=this.#e(r);return[(this.#i.get(e)||[]).find(i=>Xt(i,r)),e]};constructor(){super()}static init(r){let e=new t;return r&&(e.#e=r),e}clear(){super.clear(),this.#i.clear()}delete(r){if(In(r))return super.delete(r);let[e,i]=this.#t(r);return super.delete(e)?(this.#i.set(i,this.#i.get(i).filter(n=>!Xt(n,e))),!0):!1}get(r){if(In(r))return super.get(r);let[e,i]=this.#t(r);return super.get(e)}has(r){if(In(r))return super.has(r);let[e,i]=this.#t(r);return super.has(e)}set(r,e){if(In(r))return super.set(r,e);let[i,n]=this.#t(r);if(super.has(i))super.set(i,e);else{super.set(r,e);let o=this.#i.get(n)||[];o.push(r),this.#i.set(n,o)}return this}get size(){return super.size}};function W(t,r){if(!t)throw new ki(r)}var pS=Object.keys(I_).reduce((t,r)=>(t["[object "+r[0].toUpperCase()+r.substring(1)+"]"]=r,t),{});function Br(t){let r=Object.prototype.toString.call(t);return r==="[object Object]"?t?.constructor?.name?.toLowerCase()||"object":pS[r]||r.substring(8,r.length-1).toLowerCase()}var Vr=t=>typeof t=="boolean",Fe=t=>typeof t=="string",fS=t=>typeof t=="symbol",_e=t=>!isNaN(t)&&typeof t=="number";var Q=Array.isArray;function Ie(t){if(!t)return!1;let r=Object.getPrototypeOf(t);return(r===Object.prototype||r===null)&&Br(t)==="object"}var E_=t=>!In(t),ci=t=>t instanceof Date,er=t=>t instanceof RegExp,la=t=>typeof t=="function",Z=t=>t==null,Ii=(t,r=!0)=>!!t||r&&t==="",Hi=t=>Z(t)||Fe(t)&&!t||Q(t)&&t.length===0||Ie(t)&&Object.keys(t).length===0,dr=t=>Q(t)?t:[t],Tt=(t,r)=>!!t&&Object.prototype.hasOwnProperty.call(t,r),gS=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),lr=(t,r)=>{if(Z(t)||Vr(t)||_e(t)||Fe(t))return t;if(ci(t))return new Date(t);if(er(t))return new RegExp(t);if(gS(t)){let e=t.constructor;return new e(t)}if(r instanceof Set||(r=new Set),r.has(t))throw S_;r.add(t);try{if(Q(t)){let e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=lr(t[i],r);return e}if(Ie(t)){let e={};for(let i of Object.keys(t))e[i]=lr(t[i],r);return e}}finally{r.delete(t)}return t},w_=t=>t===hs;function xl(t,r){if(w_(t)||Z(t))return r;if(w_(r)||Z(r))return t;if(In(t)||In(r))return r;Q(t)&&Q(r)&&W(t.length===r.length,"arrays must be of equal length to merge.");for(let e of Object.keys(r))t[e]=xl(t[e],r[e]);return t}function fs(t,r=ps){let e=[Ji.init(r),Ji.init(r)];if(t.length===0)return[];if(t.some(i=>i.length===0))return[];if(t.length===1)return[...t];t[t.length-1].forEach(i=>e[0].set(i,!0));for(let i=t.length-2;i>-1;i--){if(t[i].forEach(n=>{e[0].has(n)&&e[1].set(n,!0)}),e[1].size===0)return[];e.reverse(),e[1].clear()}return Array.from(e[0].keys())}function Dn(t,r=1){let e=new Array;function i(n,o){for(let c=0,d=n.length;c<d;c++)Q(n[c])&&(o>0||o<0)?i(n[c],Math.max(-1,o-1)):e.push(n[c])}return i(t,r),e}function _S(t){let r={};for(;t;){for(let e of Object.getOwnPropertyNames(t))e in r||(r[e]=t[e]);t=Object.getPrototypeOf(t)}return r}function D_(t){for(;t;){if(Object.getOwnPropertyNames(t).includes("toString"))return t.toString!==Object.prototype.toString;t=Object.getPrototypeOf(t)}return!1}function Xt(t,r){if(t===r||Object.is(t,r))return!0;if(t===null||r===null||typeof t!=typeof r||typeof t!="object"||t.constructor!==r.constructor)return!1;if(t instanceof Date)return+t==+r;if(t instanceof RegExp)return t.toString()===r.toString();let e=t.constructor;if(e===Array||e===Object){let i=Object.keys(t).sort(),n=Object.keys(r).sort();if(i.length!==n.length)return!1;for(let o=0,c=i[o];o<i.length;c=i[++o])if(c!==n[o]||!Xt(t[c],r[c]))return!1;return!0}return D_(t)&&t.toString()===r.toString()}function wl(t,r=ps){let e=Ji.init(r);return t.forEach(i=>e.set(i,!0)),Array.from(e.keys())}var yl=(t,r)=>{if(t===null)return"null";if(t===void 0)return"undefined";if(Fe(t)||_e(t)||Vr(t))return JSON.stringify(t);if(ci(t))return t.toISOString();if(er(t)||fS(t)||la(t))return t.toString();if(r instanceof Set||(r=new Set),r.has(t))throw S_;try{if(r.add(t),Q(t))return"["+t.map(i=>yl(i,r)).join(",")+"]";if(Ie(t))return"{"+Object.keys(t).sort().map(n=>`${n}:${yl(t[n],r)}`).join()+"}";let e=D_(t)?t.toString():yl(_S(t),r);return Br(t)+"("+e+")"}finally{r.delete(t)}};function M_(t,r){return Z(t)?null:(r=r||ps,r(t))}function Cl(t,r,e=ps){if(t.length<1)return new Map;let i=new Map,n=new Map;for(let o=0;o<t.length;o++){let c=t[o],d=r(c,o),h=M_(d,e);if(h===null)n.has(null)?n.get(null).push(c):n.set(null,[c]);else{let g=i.has(h)?i.get(h).find(f=>Xt(f,d)):null;Z(g)?(n.set(d,[c]),i.has(h)?i.get(h).push(d):i.set(h,[d])):n.get(g).push(c)}}return n}function hm(t,r){return E_(t)?t[r]:void 0}function vS(t,r){if(r<1)return t;for(;r--&&t.length===1;)t=t[0];return t}function At(t,r,e){let i=0;function n(c,d){let h=c;for(let g=0;g<d.length;g++){let f=d[g];if(/^\d+$/.exec(f)===null&&Q(h)){if(g===0&&i>0)break;i+=1;let D=d.slice(g);h=h.reduce((C,k)=>{let T=n(k,D);return T!==void 0&&C.push(T),C},[]);break}else h=hm(h,f);if(h===void 0)break}return h}let o=k_(t)?t:n(t,r.split("."));return Q(o)&&e?.unwrapArray?vS(o,i):o}function En(t,r,e){let i=r.indexOf("."),n=i==-1?r:r.substring(0,i),o=r.substring(i+1),c=i!=-1;if(Q(t)){let g=/^\d+$/.test(n),f=g&&e?.preserveIndex?[...t]:[];if(g){let y=parseInt(n),D=hm(t,y);c&&(D=En(D,o,e)),e?.preserveIndex?f[y]=D:f.push(D)}else for(let y of t){let D=En(y,r,e);e?.preserveMissing?f.push(D??hs):(D!=null||e?.preserveIndex)&&f.push(D)}return f}let d=e?.preserveKeys?de({},t):{},h=hm(t,n);if(c&&(h=En(h,o,e)),h!==void 0)return d[n]=h,d}function bl(t){if(Q(t))for(let r=t.length-1;r>=0;r--)t[r]===hs?t.splice(r,1):bl(t[r]);else if(Ie(t))for(let r in t)Tt(t,r)&&bl(t[r])}var C_=/^\d+$/;function ca(t,r,e,i){let n=r.split("."),o=n[0],c=n.slice(1).join(".");if(n.length===1)(Ie(t)||Q(t)&&C_.test(o))&&e(t,o);else{i?.buildGraph&&Z(t[o])&&(t[o]={});let d=t[o];if(!d)return;let h=!!(n.length>1&&C_.test(n[1]));Q(d)&&i?.descendArray&&!h?d.forEach(g=>ca(g,c,e,i)):ca(d,c,e,i)}}function gs(t,r,e){ca(t,r,(i,n)=>{i[n]=la(e)?e(i[n]):e},{buildGraph:!0})}function _s(t,r,e){ca(t,r,(i,n)=>{if(Q(i)){if(/^\d+$/.test(n))i.splice(parseInt(n),1);else if(e&&e.descendArray)for(let o of i)Ie(o)&&delete o[n]}else Ie(i)&&delete i[n]},e)}var yS=/^\$[a-zA-Z0-9_]+$/;function Li(t){return yS.test(t)}function Sl(t){if(k_(t))return er(t)?{$regex:t}:{$eq:t};if(E_(t)){if(!Object.keys(t).some(Li))return{$eq:t};if(Tt(t,"$regex")){let r=de({},t);return r.$regex=new RegExp(t.$regex,t.$options),delete r.$options,r}}return t}var da=(t=>(t[t.CLONE_OFF=0]="CLONE_OFF",t[t.CLONE_INPUT=1]="CLONE_INPUT",t[t.CLONE_OUTPUT=2]="CLONE_OUTPUT",t[t.CLONE_ALL=3]="CLONE_ALL",t))(da||{}),kt=class t{#e;#i;#t;constructor(r,e,i){this.#e=r,this.update(e,i)}static init(r,e,i){return r instanceof t?new t(r.#e,r.root??e,Be(de(de({},r.#t),i),{variables:Object.assign({},r.#t?.variables,i?.variables)})):new t(r,e,i)}update(r,e){this.#i=r;let i=Object.assign({},this.#t?.variables,e?.variables);return Object.keys(i).length?this.#t=Be(de({},e),{variables:i}):this.#t=e??{},this}getOptions(){return Object.freeze(Be(de({},this.#e),{context:Mn.from(this.#e.context)}))}get root(){return this.#i}get local(){return this.#t}get idKey(){return this.#e.idKey}get collation(){return this.#e?.collation}get processingMode(){return this.#e?.processingMode||0}get useStrictMode(){return this.#e?.useStrictMode}get scriptEnabled(){return this.#e?.scriptEnabled}get useGlobalContext(){return this.#e?.useGlobalContext}get hashFunction(){return this.#e?.hashFunction}get collectionResolver(){return this.#e?.collectionResolver}get jsonSchemaValidator(){return this.#e?.jsonSchemaValidator}get variables(){return this.#e?.variables}get context(){return this.#e?.context}};function fo(t){return t instanceof kt?t.getOptions():Object.freeze(Be(de({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0},t),{context:t?.context?Mn.from(t?.context):Mn.init()}))}var Mn=class t{#e=new Map;constructor(){}static init(){return new t}static from(r){let e=t.init();return Z(r)||r.#e.forEach((i,n)=>e.addOperators(n,i)),e}addOperators(r,e){this.#e.has(r)||this.#e.set(r,{});for(let[i,n]of Object.entries(e))this.getOperator(r,i)||(this.#e.get(r)[i]=n);return this}getOperator(r,e){return(this.#e.get(r)??{})[e]??null}addAccumulatorOps(r){return this.addOperators("accumulator",r)}addExpressionOps(r){return this.addOperators("expression",r)}addQueryOps(r){return this.addOperators("query",r)}addPipelineOps(r){return this.addOperators("pipeline",r)}addProjectionOps(r){return this.addOperators("projection",r)}addWindowOps(r){return this.addOperators("window",r)}},po=Mn.init();function pm(t,r){for(let[e,i]of Object.entries(r)){W(la(i)&&Li(e),`'${e}' is not a valid operator`);let n=$r(t,e,null);W(!n||i===n,`${e} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":po.addAccumulatorOps(r);break;case"expression":po.addExpressionOps(r);break;case"pipeline":po.addPipelineOps(r);break;case"projection":po.addProjectionOps(r);break;case"query":po.addQueryOps(r);break;case"window":po.addWindowOps(r);break}}function $r(t,r,e){let{context:i,useGlobalContext:n}=e||{},o=i?i.getOperator(t,r):null;return!o&&n?po.getOperator(t,r):o}function F(t,r,e,i){let n=kt.init(i,t);return e&&Li(e)?O_(t,r,e,n):kl(t,r,n)}var bS=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function kl(t,r,e){if(Fe(r)&&r.length>0&&r[0]==="$"){if(xS.includes(r))return r;let i=e.root,n=r.split(".");if(bS.includes(n[0])){switch(n[0]){case"$$ROOT":break;case"$$CURRENT":i=t;break;case"$$REMOVE":i=void 0;break;case"$$NOW":i=new Date;break}r=r.slice(n[0].length+1)}else if(n[0].slice(0,2)==="$$"){i=Object.assign({},e.variables,{this:t},e?.local?.variables);let o=n[0].slice(2);W(Tt(i,o),`Use of undefined variable: ${o}`),r=r.slice(2)}else r=r.slice(1);return r===""?i:At(i,r)}if(Q(r))return r.map(i=>kl(t,i,e));if(Ie(r)){let i={},n=Object.entries(r);for(let[o,c]of n){if(Li(o))return W(n.length==1,"expression must have single operator."),O_(t,c,o,e);i[o]=kl(t,c,e)}return i}return r}function O_(t,r,e,i){let n=$r("expression",e,i);if(n)return n(t,r,i);let o=$r("accumulator",e,i);return W(!!o,`accumulator '${e}' is not registered.`),Q(t)||(t=kl(t,r,i),r=null),W(Q(t),`arguments must resolve to array for ${e}.`),o(t,r,i)}var xS=["$$KEEP","$$PRUNE","$$DESCEND"];function ti(t){return t instanceof vs?t:new vs(t)}function ys(...t){let r=0;return ti(()=>{for(;r<t.length;){let e=t[r].next();if(!e.done)return e;r++}return{done:!0}})}function wS(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function CS(t,r){let e=t.slice(r+1);t.splice(r),Array.prototype.push.apply(t,e)}var fm=new Error;function SS(t,r,e){let i=!1,n=-1,o=0;return function(c){try{e:for(;!i;){let d=t();n++;let h=-1,g=r.length,f=!1;for(;++h<g;){let y=r[h];switch(y.action){case 0:d=y.func(d,n);break;case 1:if(!y.func(d,n))continue e;break;case 2:--y.count,y.count||(f=!0);break;case 3:--y.count,y.count||CS(r,h);continue e;default:break e}}if(i=f,c)e[o++]=d;else return{value:d,done:!1}}}catch(d){if(d!==fm)throw d}return i=!0,{done:i}}}var vs=class{constructor(r){this.#e=[],this.#i=[],this.isDone=!1;let e;if(r instanceof Function&&(r={next:r}),wS(r)){let i=r;e=()=>{let n=i.next();if(n.done)throw fm;return n.value}}else if(Q(r)){let i=r,n=i.length,o=0;e=()=>{if(o<n)return i[o++];throw fm}}else if(!(r instanceof Function))throw new ki("Lazy must be initialized with an array, generator, or function.");this.#t=SS(e,this.#e,this.#i)}#e;#i;#t;push(r,e){return typeof e=="function"?this.#e.push({action:r,func:e}):typeof e=="number"&&this.#e.push({action:r,count:e}),this}next(){return this.#t()}map(r){return this.push(0,r)}filter(r){return this.push(1,r)}take(r){return r>0?this.push(2,r):this}drop(r){return r>0?this.push(3,r):this}transform(r){let e=this,i;return ti(()=>(i||(i=ti(r(e.value()))),i.next()))}value(){return this.isDone||(this.isDone=this.#t(!0).done),this.#i}each(r){for(;;){let e=this.next();if(e.done)break;if(r(e.value)===!1)return!1}return!0}reduce(r,e){let i=this.next();for(e===void 0&&!i.done&&(e=i.value,i=this.next());!i.done;)e=r(e,i.value),i=this.next();return e}size(){return this.reduce((r,e)=>++r,0)}[Symbol.iterator](){return this}};var R_=(t,r,e)=>t.take(r);var bs=(t,r,e)=>Hi(r)?t:(T_(r,e),t.map(P_(r,kt.init(e))));function P_(t,r,e=!0){let i=r.idKey,n=Object.keys(t),o=new Array,c=new Array,d={};for(let C of n){let k=t[C];if(_e(k)||Vr(k))k?c.push(C):o.push(C);else if(Q(k))d[C]=T=>k.map(A=>F(T,A,null,r.update(T))??null);else if(Ie(k)){let T=Object.keys(k),A=T.length==1?T[0]:"",ie=$r("projection",A,r);ie?A==="$slice"&&!dr(k[A]).every(_e)?d[C]=se=>F(se,k,C,r.update(se)):d[C]=se=>ie(se,k[A],C,r.update(se)):Li(A)?d[C]=ae=>F(ae,k[A],A,r):(T_(k,r),d[C]=ae=>{if(!Tt(ae,C))return F(ae,k,null,r);e&&r.update(ae);let se=At(ae,C),Oe=P_(k,r,!1);return Q(se)?se.map(Oe):Ie(se)?Oe(se):Oe(ae)})}else d[C]=Fe(k)&&k[0]==="$"?T=>F(T,k,C,r):T=>k}let h=Object.keys(d),g=o.includes(i);if(e&&g&&o.length===1&&!c.length&&!h.length)return C=>{let k=de({},C);return delete k[i],k};let y=e&&!g&&!c.includes(i),D={preserveMissing:!0};return C=>{let k={};if(o.length&&!c.length){xl(k,C);for(let T of o)_s(k,T,{descendArray:!0})}for(let T of c){let A=En(C,T,D)??{};xl(k,A)}c.length&&bl(k);for(let T of h){let A=d[T](C);A===void 0?_s(k,T,{descendArray:!0}):gs(k,T,A)}return y&&Tt(C,i)&&(k[i]=At(C,i)),k}}function T_(t,r){let e=!1,i=!1;for(let[n,o]of Object.entries(t))W(!n.startsWith("$"),"Field names may not start with '$'."),W(!n.endsWith(".$"),"Positional projection operator '$' is not supported."),n!==r?.idKey&&(o===0||o===!1?e=!0:(o===1||o===!0)&&(i=!0),W(!(e&&i),"Projection cannot have a mix of inclusion and exclusion."))}var A_=(t,r,e)=>t.drop(r);var kr=(t,r,e)=>{if(Hi(r)||!Ie(r))return t;let i=ft,n=e.collation;return Ie(n)&&Fe(n.locale)&&(i=IS(n)),t.transform(o=>{let c=Object.keys(r);for(let d of c.reverse()){let h=Cl(o,y=>At(y,d),e.hashFunction),g=Array.from(h.keys()).sort(i);r[d]===-1&&g.reverse();let f=0;for(let y of g)for(let D of h.get(y))o[f++]=D;W(f==o.length,"bug: counter must match collection size.")}return o})},kS={1:"base",2:"accent",3:"variant"};function IS(t){let r={sensitivity:kS[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(r.sensitivity==="base"&&(r.sensitivity="case"),r.sensitivity==="accent"&&(r.sensitivity="variant"));let e=new Intl.Collator(t.locale,r);return(i,n)=>{if(!Fe(i)||!Fe(n))return ft(i,n);let o=e.compare(i,n);return o<0?-1:o>0?1:0}}var ES={$sort:kr,$skip:A_,$limit:R_},Il=class{#e;#i;#t;#n;#a={};#r=null;#o=[];constructor(r,e,i,n){this.#e=r,this.#i=e,this.#t=i,this.#n=n}fetch(){if(this.#r)return this.#r;this.#r=ti(this.#e).filter(this.#i);let r=this.#n.processingMode;r&da.CLONE_INPUT&&this.#r.map(lr);for(let e of["$sort","$skip","$limit"])Tt(this.#a,e)&&(this.#r=ES[e](this.#r,this.#a[e],this.#n));return Object.keys(this.#t).length&&(this.#r=bs(this.#r,this.#t,this.#n)),r&da.CLONE_OUTPUT&&this.#r.map(lr),this.#r}fetchAll(){let r=ti([...this.#o]);return this.#o=[],ys(r,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(r){return this.#a.$skip=r,this}limit(r){return this.#a.$limit=r,this}sort(r){return this.#a.$sort=r,this}collation(r){return this.#n=Be(de({},this.#n),{collation:r}),this}next(){if(this.#o.length>0)return this.#o.pop();let r=this.fetch().next();if(!r.done)return r.value}hasNext(){if(this.#o.length>0)return!0;let r=this.fetch().next();return r.done?!1:(this.#o.push(r.value),!0)}map(r){return this.all().map(r)}forEach(r){this.all().forEach(r)}[Symbol.iterator](){return this.fetchAll()}};var DS=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"])),Yt=class{#e;#i;#t;constructor(r,e){this.#t=lr(r),this.#i=fo(e),this.#e=[],this.compile()}compile(){W(Ie(this.#t),`query criteria must be an object: ${JSON.stringify(this.#t)}`);let r={};for(let[e,i]of Object.entries(this.#t)){if(e==="$where")W(this.#i.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(r,{field:e,expr:i});else if(DS.has(e))this.processOperator(e,e,i);else{W(!Li(e),`unknown top level operator: ${e}`);for(let[n,o]of Object.entries(Sl(i)))this.processOperator(e,n,o)}r.field&&this.processOperator(r.field,r.field,r.expr)}}processOperator(r,e,i){let n=$r("query",e,this.#i);W(!!n,`unknown query operator ${e}`),this.#e.push(n(r,i,this.#i))}test(r){return this.#e.every(e=>e(r))}find(r,e){return new Il(r,i=>this.test(i),e||{},this.#i)}remove(r){return r.reduce((e,i)=>(this.test(i)||e.push(i),e),[])}};var wN=Object.freeze({R5:[10,16,25,40,63],R10:[100,125,160,200,250,315,400,500,630,800],R20:[100,112,125,140,160,180,200,224,250,280,315,355,400,450,500,560,630,710,800,900],R40:[100,106,112,118,125,132,140,150,160,170,180,190,200,212,224,236,250,265,280,300,315,355,375,400,425,450,475,500,530,560,600,630,670,710,750,800,850,900,950],R80:[103,109,115,122,128,136,145,155,165,175,185,195,206,218,230,243,258,272,290,307,325,345,365,387,412,437,462,487,515,545,575,615,650,690,730,775,825,875,925,975],"1-2-5":[10,20,50],E6:[10,15,22,33,47,68],E12:[10,12,15,18,22,27,33,39,47,56,68,82],E24:[10,11,12,13,15,16,18,20,22,24,27,30,33,36,39,43,47,51,56,62,68,75,82,91],E48:[100,105,110,115,121,127,133,140,147,154,162,169,178,187,196,205,215,226,237,249,261,274,287,301,316,332,348,365,383,402,422,442,464,487,511,536,562,590,619,649,681,715,750,787,825,866,909,953],E96:[100,102,105,107,110,113,115,118,121,124,127,130,133,137,140,143,147,150,154,158,162,165,169,174,178,182,187,191,196,200,205,210,215,221,226,232,237,243,249,255,261,267,274,280,287,294,301,309,316,324,332,340,348,357,365,374,383,392,402,412,422,432,442,453,464,475,487,499,511,523,536,549,562,576,590,604,619,634,649,665,681,698,715,732,750,768,787,806,825,845,866,887,909,931,953,976],E192:[100,101,102,104,105,106,107,109,110,111,113,114,115,117,118,120,121,123,124,126,127,129,130,132,133,135,137,138,140,142,143,145,147,149,150,152,154,156,158,160,162,164,165,167,169,172,174,176,178,180,182,184,187,189,191,193,196,198,200,203,205,208,210,213,215,218,221,223,226,229,232,234,237,240,243,246,249,252,255,258,261,264,267,271,274,277,280,284,287,291,294,298,301,305,309,312,316,320,324,328,332,336,340,344,348,352,357,361,365,370,374,379,383,388,392,397,402,407,412,417,422,427,432,437,442,448,453,459,464,470,475,481,487,493,499,505,511,517,523,530,536,542,549,556,562,569,576,583,590,597,604,612,619,626,634,642,649,657,665,673,681,690,698,706,715,723,732,741,750,759,768,777,787,796,806,816,825,835,845,856,866,876,887,898,909,920,931,942,953,965,976,988]});var N_=7;var ua=1e3*60*60*24,F_={week:ua*N_,day:ua,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1},MS=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"],OS=new Set(MS),RN=Object.freeze({mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:7});var B_=Object.freeze({"%Y":{name:"year",padding:4,re:/([0-9]{4})/},"%G":{name:"year",padding:4,re:/([0-9]{4})/},"%m":{name:"month",padding:2,re:/(0[1-9]|1[012])/},"%d":{name:"day",padding:2,re:/(0[1-9]|[12][0-9]|3[01])/},"%H":{name:"hour",padding:2,re:/([01][0-9]|2[0-3])/},"%M":{name:"minute",padding:2,re:/([0-5][0-9])/},"%S":{name:"second",padding:2,re:/([0-5][0-9]|60)/},"%L":{name:"millisecond",padding:3,re:/([0-9]{3})/},"%u":{name:"weekday",padding:1,re:/([1-7])/},"%U":{name:"week",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%V":{name:"isoWeek",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%z":{name:"timezone",padding:2,re:/(([+-][01][0-9]|2[0-3]):?([0-5][0-9])?)/},"%Z":{name:"minuteOffset",padding:3,re:/([+-][0-9]{3})/}});var jN=Object.freeze({});var lB={week:ua*7,day:ua,hour:ua/24,minute:6e4,second:1e3,millisecond:1};function it(t){return(e,i,n)=>{let o={unwrapArray:!0},c=Math.max(1,e.split(".").length-1);return d=>{let h=At(d,e,o);return t(h,i,Be(de({},n),{depth:c}))}}}function Ni(t){return(r,e,i)=>{let n=F(r,e,null,i);return t(...n)}}function xs(t,r,e){return Xt(t,r)||Z(t)&&Z(r)?!0:Q(t)?t.some(i=>Xt(i,r))||Dn(t,e?.depth).some(i=>Xt(i,r)):!1}function El(t,r,e){return!xs(t,r,e)}function _m(t,r,e){return Z(t)?r.some(i=>i===null):fs([dr(t),r],e?.hashFunction).length>0}function Dl(t,r,e){return!_m(t,r,e)}function Ml(t,r,e){return Tl(t,r,(i,n)=>ft(i,n)<0)}function Ol(t,r,e){return Tl(t,r,(i,n)=>ft(i,n)<=0)}function Rl(t,r,e){return Tl(t,r,(i,n)=>ft(i,n)>0)}function Pl(t,r,e){return Tl(t,r,(i,n)=>ft(i,n)>=0)}function H_(t,r,e){return dr(t).some(i=>r.length===2&&i%r[0]===r[1])}function U_(t,r,e){let i=dr(t),n=o=>Fe(o)&&Ii(r.exec(o),e?.useStrictMode);return i.some(n)||Dn(i,1).some(n)}function W_(t,r,e){if(!Q(t)||!Q(r)||!t.length||!r.length)return!1;let i=!0;for(let n of r){if(!i)break;Ie(n)&&Object.keys(n).includes("$elemMatch")?i=vm(t,n.$elemMatch,e):er(n)?i=t.some(o=>typeof o=="string"&&n.test(o)):i=t.some(o=>Xt(n,o))}return i}function K_(t,r,e){return Array.isArray(t)&&t.length===r}function zS(t){return Li(t)&&["$and","$or","$nor"].indexOf(t)===-1}function vm(t,r,e){if(Q(t)&&!Hi(t)){let i=c=>c,n=r;Object.keys(r).every(zS)&&(n={temp:r},i=c=>({temp:c}));let o=new Yt(n,e);for(let c=0,d=t.length;c<d;c++)if(o.test(i(t[c])))return!0}return!1}var z_=t=>t===null,jS={array:Q,boolean:Vr,bool:Vr,date:ci,number:_e,int:_e,long:_e,double:_e,decimal:_e,null:z_,object:Ie,regexp:er,regex:er,string:Fe,undefined:Z,function:t=>{throw new ki("unsupported type key `function`.")},1:_e,2:Fe,3:Ie,4:Q,6:Z,8:Vr,9:ci,10:z_,11:er,16:_e,18:_e,19:_e};function j_(t,r,e){let i=jS[r];return i?i(t):!1}function q_(t,r,e){return Q(r)?r.findIndex(i=>j_(t,i,e))>=0:j_(t,r,e)}function Tl(t,r,e){return dr(t).some(i=>Br(i)===Br(r)&&e(i,r))}var k3=Ni(Dl);var ma=(t,r)=>(e,i,n)=>{W(Q(i),`${t}: expression must be an array.`);let o=F(e,i,null,n);return o.some(Z)?null:(W(o.every(_e),`${t}: expression must evalue to array of numbers.`),r(o))};var wz=ma("$bitAnd",t=>t.reduce((r,e)=>r&e,-1));var Dz=ma("$bitOr",t=>t.reduce((r,e)=>r|e,0));var Rz=ma("$bitXor",t=>t.reduce((r,e)=>r^e,0));var ym={};dc(ym,{$and:()=>HS,$not:()=>US,$or:()=>WS});var HS=(t,r,e)=>{let i=F(t,r,null,e);return Ii(i,e.useStrictMode)&&i.every(n=>Ii(n,e.useStrictMode))};var US=(t,r,e)=>{let i=dr(r);return i.length==0?!1:(W(i.length==1,"Expression $not takes exactly 1 argument"),!F(t,i[0],null,e))};var WS=(t,r,e)=>{let i=F(t,r,null,e),n=e.useStrictMode;return Ii(i,n)&&i.some(o=>Ii(o,n))};var bm={};dc(bm,{$cmp:()=>KS,$eq:()=>qS,$gt:()=>QS,$gte:()=>XS,$lt:()=>YS,$lte:()=>GS,$ne:()=>ZS});var KS=(t,r,e)=>{let i=F(t,r,null,e);return W(Q(i)&&i.length==2,"$cmp: expression must resolve to array of size 2."),ft(i[0],i[1])};var qS=Ni(xs);var QS=Ni(Rl);var XS=Ni(Pl);var YS=Ni(Ml);var GS=Ni(Ol);var ZS=Ni(El);var Q_=(t,r)=>{let e={};return t.split("").forEach((i,n)=>e[i]=r*(n+1)),e},j5=Be(de(de({},Q_("ABCDEFGHIKLM",1)),Q_("NOPQRSTUVWXY",-1)),{Z:0});var Z_={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function gt(t,r=Z_){let e=Object.assign({},Z_,r),i=new Set(Object.keys(e));return(n,o,c)=>{let d=F(n,o,null,c);if(i.has(`${d}`)){let h=e[`${d}`];if(h instanceof Error)throw new ki(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return h}return t(d)}}var rU=gt(Math.acos,{Infinity:1/0,0:new Error});var aU=gt(Math.acosh,{Infinity:1/0,0:new Error});var lU=gt(Math.asin);var mU=gt(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var fU=gt(Math.atan);var xU=gt(Math.atanh,{1:1/0,"-1":-1/0});var SU=gt(Math.cos);var EU=gt(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var sk=Math.PI/180,OU=gt(t=>t*sk,{Infinity:1/0,"-Infinity":1/0});var ck=180/Math.PI,TU=gt(t=>t*ck,{Infinity:1/0,"-Infinity":-1/0});var NU=gt(Math.sin);var VU=gt(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var jU=gt(Math.tan);var lk=Number.MAX_SAFE_INTEGER,dk=Number.MIN_SAFE_INTEGER;var xm=(t,r,e)=>{W(Q(r),"Invalid expression: $and expects value to be an Array.");let i=r.map(n=>new Yt(n,e));return n=>i.every(o=>o.test(n))};var Cs=(t,r,e)=>{W(Q(r),"Invalid expression. $or expects value to be an Array");let i=r.map(n=>new Yt(n,e));return n=>i.some(o=>o.test(n))};var wm=(t,r,e)=>{W(Q(r),"Invalid expression. $nor expects value to be an array.");let i=Cs("$or",r,e);return n=>!i(n)};var Cm=(t,r,e)=>{let i={};i[t]=Sl(r);let n=new Yt(i,e);return o=>!n.test(o)};var Ll=it(xs);var Nl=it(Rl);var Fl=it(Pl);var Bl=it(_m);var Vl=it(Ml);var $l=it(Ol);var zl=it(El);var jl=it(Dl);function fk(t,r,e){return i=>F(i,r,null,e)}function gk(t,r,e){if(!e?.jsonSchemaValidator)throw new ki("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let i=e?.jsonSchemaValidator(r);return n=>i(n)}var Sm=it(H_);var km=it(U_);function _k(t,r,e){W(e.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");let i=r;return W(la(i),"$where only accepts a Function object"),n=>Ii(i.call(n),e?.useStrictMode)}var vk=it(W_);var Im=it(vm);var Em=it(K_);var Dm=(t,r,e)=>{let i=t.includes("."),n=!!r;return!i||t.match(/\.\d+$/)?o=>At(o,t)!==void 0===n:o=>{let c=En(o,t,{preserveIndex:!0}),d=At(c,t.substring(0,t.lastIndexOf(".")));return Q(d)?d.some(h=>h!==void 0)===n:d!==void 0===n}};var Mm=it(q_);var ev=!1;function tv(t){return ev||(pm("pipeline",{$sort:kr,$project:bs}),pm("query",{$and:xm,$eq:Ll,$elemMatch:Im,$exists:Dm,$gt:Nl,$gte:Fl,$in:Bl,$lt:Vl,$lte:$l,$ne:zl,$nin:jl,$mod:Sm,$nor:wm,$not:Cm,$or:Cs,$regex:km,$size:Em,$type:Mm}),ev=!0),new Yt(t)}function On(t,r){var e=ei(t.primaryKey);r=Pe(r);var i=Qt(r);if(typeof i.skip!="number"&&(i.skip=0),i.selector?(i.selector=i.selector,Object.entries(i.selector).forEach(([y,D])=>{(typeof D!="object"||D===null)&&(i.selector[y]={$eq:D})})):i.selector={},i.index){var n=Cn(i.index);n.includes(e)||n.push(e),i.index=n}if(i.sort){var f=i.sort.find(y=>Yg(y)===e);f||(i.sort=i.sort.slice(0),i.sort.push({[e]:"asc"}))}else if(i.index)i.sort=i.index.map(y=>({[y]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(i.selector).forEach(([y,D])=>{var C=!1;typeof D=="object"&&D!==null?C=!!Object.keys(D).find(k=>vl.has(k)):C=!0,C&&o.add(y)});var c=-1,d;t.indexes.forEach(y=>{var D=so(y)?y:[y],C=D.findIndex(k=>!o.has(k));C>0&&C>c&&(c=C,d=D)}),d&&(i.sort=d.map(y=>({[y]:"asc"})))}if(!i.sort)if(t.indexes&&t.indexes.length>0){var h=t.indexes[0],g=so(h)?h:[h];i.sort=g.map(y=>({[y]:"asc"}))}else i.sort=[{[e]:"asc"}]}return i}function Hl(t,r){if(!r.sort)throw ee("SNH",{query:r});var e=[];r.sort.forEach(n=>{var o=Object.keys(n)[0],c=Object.values(n)[0];e.push({key:o,direction:c,getValueFn:Xg(o)})});var i=(n,o)=>{for(var c=0;c<e.length;++c){var d=e[c],h=d.getValueFn(n),g=d.getValueFn(o);if(h!==g){var f=d.direction==="asc"?ft(h,g):ft(g,h);return f}}};return i}function ha(t,r){if(!r.sort)throw ee("SNH",{query:r});var e=tv(r.selector),i=n=>e.test(n);return i}function Rn(t,r){return R(this,null,function*(){var e=yield t.exec();if(!e)return null;if(Array.isArray(e))return Promise.all(e.map(n=>r(n)));if(e instanceof Map)return Promise.all([...e.values()].map(n=>r(n)));var i=yield r(e);return i})}function pa(t,r){if(!r.sort)throw ee("SNH",{query:r});var e=x_(t,r);return{query:r,queryPlan:e}}var iv="_rxdb_internal";function Ss(t,r){return R(this,null,function*(){var e=yield t.findDocumentsById([r],!1),i=e[0];if(i)return i})}function Rm(t,r,e){return R(this,null,function*(){var i=yield t.bulkWrite([r],e);if(i.error.length>0){var n=i.error[0];throw n}else{var o=ei(t.schema.primaryKey),c=ri(o,[r],i),d=c[0];return d}})}function Pn(t){return Object.assign({},...t.filter(r=>!!r))}function fa(t,r,e,i){if(i)throw i.status===409?ee("CONFLICT",{collection:t.name,id:r,writeError:i,data:e}):i.status===422?ee("VD2",{collection:t.name,id:r,writeError:i,data:e}):i}function rv(t,r,e,i,n,o,c){for(var d=!!t.schema.attachments,h=[],g=[],f=[],y=co(10),D={id:y,events:[],checkpoint:null,context:n},C=D.events,k=[],T=[],A=[],ie=e.size>0,ae,se=i.length,Oe=function(){var Qe=i[we],ue=Qe.document,be=Qe.previous,dt=ue[r],jt=ue._deleted,Lt=be&&be._deleted,He=void 0;ie&&(He=e.get(dt));var Ut;if(He){var ir=He._rev;if(!be||be&&ir!==be._rev){var Fi={isError:!0,status:409,documentId:dt,writeRow:Qe,documentInDb:He};return f.push(Fi),1}var Bt=d?Om(Qe):Qe;d&&(jt?be&&Object.keys(be._attachments).forEach(Ge=>{T.push({documentId:dt,attachmentId:Ge,digest:me(be)._attachments[Ge].digest})}):(Object.entries(ue._attachments).find(([Ge,xt])=>{var Ei=be?be._attachments[Ge]:void 0;return!Ei&&!xt.data&&(Ut={documentId:dt,documentInDb:He,isError:!0,status:510,writeRow:Qe,attachmentId:Ge}),!0}),Ut||Object.entries(ue._attachments).forEach(([Ge,xt])=>{var Ei=be?be._attachments[Ge]:void 0;if(!Ei)k.push({documentId:dt,attachmentId:Ge,attachmentData:xt,digest:xt.digest});else{var rr=Bt.document._attachments[Ge].digest;xt.data&&Ei.digest!==rr&&A.push({documentId:dt,attachmentId:Ge,attachmentData:xt,digest:xt.digest})}}))),Ut?f.push(Ut):(d?(g.push(Om(Bt)),c&&c(ue)):(g.push(Bt),c&&c(ue)),ae=Bt);var qi=null,Ne=null,bt=null;if(Lt&&!jt)bt="INSERT",qi=d?tr(ue):ue;else if(be&&!Lt&&!jt)bt="UPDATE",qi=d?tr(ue):ue,Ne=be;else if(jt)bt="DELETE",qi=me(ue),Ne=be;else throw ee("SNH",{args:{writeRow:Qe}});var Wt={documentId:dt,documentData:qi,previousDocumentData:Ne,operation:bt};C.push(Wt)}else{var Nt=!!jt;if(d&&Object.entries(ue._attachments).forEach(([Ge,xt])=>{xt.data?k.push({documentId:dt,attachmentId:Ge,attachmentData:xt,digest:xt.digest}):(Ut={documentId:dt,isError:!0,status:510,writeRow:Qe,attachmentId:Ge},f.push(Ut))}),Ut||(d?(h.push(Om(Qe)),o&&o(ue)):(h.push(Qe),o&&o(ue)),ae=Qe),!Nt){var Ft={documentId:dt,operation:"INSERT",documentData:d?tr(ue):ue,previousDocumentData:d&&be?tr(be):be};C.push(Ft)}}},we=0;we<se;we++)Oe();return{bulkInsertDocs:h,bulkUpdateDocs:g,newestRow:ae,errors:f,eventBulk:D,attachmentsAdd:k,attachmentsRemove:T,attachmentsUpdate:A}}function Om(t){return{previous:t.previous,document:tr(t.document)}}function yk(t){return atob(t).length}function bk(t){var r=t.data;if(!r)return t;var e={length:yk(r),digest:t.digest,type:t.type};return e}function tr(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var r=Pe(t);return r._attachments={},Object.entries(t._attachments).forEach(([e,i])=>{r._attachments[e]=bk(i)}),r}function zr(t){return Object.assign({},t,{_meta:Pe(t._meta)})}function Ul(t,r,e){et.deepFreezeWhenDevMode(e);var i=ei(r.schema.primaryKey),n={originalStorageInstance:r,schema:r.schema,internals:r.internals,collectionName:r.collectionName,databaseName:r.databaseName,options:r.options,bulkWrite(c,d){return R(this,null,function*(){for(var h=t.token,g=new Array(c.length),f=Mt(),y=0;y<c.length;y++){var D=c[y],C=zr(D.document);C._meta.lwt=f;var k=D.previous;C._rev=Si(h,k),g[y]={document:C,previous:k}}Pt("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:g});var T=yield t.lockedRun(()=>r.bulkWrite(g,d)),A={error:[]};av.set(A,g);var ie=T.error.length===0?[]:T.error.filter(ue=>ue.status===409&&!ue.writeRow.previous&&!ue.writeRow.document._deleted&&me(ue.documentInDb)._deleted?!0:(A.error.push(ue),!1));if(ie.length>0){var ae=new Set,se=ie.map(ue=>(ae.add(ue.documentId),{previous:ue.documentInDb,document:Object.assign({},ue.writeRow.document,{_rev:Si(t.token,ue.documentInDb)})})),Oe=yield t.lockedRun(()=>r.bulkWrite(se,d));Ti(A.error,Oe.error);var we=ri(i,g,A,ae),Qe=ri(i,se,Oe);return Ti(we,Qe),A}return A})},query(c){return t.lockedRun(()=>r.query(c))},count(c){return t.lockedRun(()=>r.count(c))},findDocumentsById(c,d){return t.lockedRun(()=>r.findDocumentsById(c,d))},getAttachmentData(c,d,h){return t.lockedRun(()=>r.getAttachmentData(c,d,h))},getChangedDocumentsSince:r.getChangedDocumentsSince?(c,d)=>t.lockedRun(()=>r.getChangedDocumentsSince(me(c),d)):void 0,cleanup(c){return t.lockedRun(()=>r.cleanup(c))},remove(){return t.storageInstances.delete(n),t.lockedRun(()=>r.remove())},close(){return t.storageInstances.delete(n),t.lockedRun(()=>r.close())},changeStream(){return r.changeStream()}};return t.storageInstances.add(n),n}function nv(t){if(t.schema.keyCompression)throw ee("UT5",{args:{params:t}});if(Pm(t.schema))throw ee("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw ee("UT7",{args:{params:t}})}function Pm(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function xk(t,r,e){var i=ei(t.schema.primaryKey),n=e?e.lwt:cs,o=e?e.id:"";return On(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:n}},{"_meta.lwt":{$eq:n},[i]:{$gt:e?o:""}}],"_meta.lwt":{$gte:n}},sort:[{"_meta.lwt":"asc"},{[i]:"asc"}],skip:0,limit:r})}function ov(t,r,e){return R(this,null,function*(){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(r,e);var i=ei(t.schema.primaryKey),n=pa(t.schema,xk(t,r,e)),o=yield t.query(n),c=o.documents,d=Wg(c);return{documents:c,checkpoint:d?{id:d[i],lwt:d._meta.lwt}:e||{id:"",lwt:0}}})}var av=new WeakMap,wk=new WeakMap;function ri(t,r,e,i){return zt(wk,e,()=>{var n=[],o=av.get(e);if(o||(o=r),e.error.length>0||i){for(var c=i||new Set,d=0;d<e.error.length;d++){var h=e.error[d];c.add(h.documentId)}for(var g=0;g<o.length;g++){var f=o[g].document;c.has(f[t])||n.push(tr(f))}}else{n.length=r.length-e.error.length;for(var y=0;y<o.length;y++){var D=o[y].document;n[y]=tr(D)}}return n})}var sv=(function(){function t(e,i,n,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=i,this.preWrite=n,this.postWrite=o}var r=t.prototype;return r.addWrite=function(i,n){var o=i[this.primaryPath],c=zt(this.queueByDocId,o,()=>[]),d=new Promise((h,g)=>{var f={lastKnownDocumentState:i,modifier:n,resolve:h,reject:g};me(c).push(f),this.triggerRun()});return d},r.triggerRun=function(){return R(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var i=[],n=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(n.entries()).map(h=>R(this,[h],function*([c,d]){var g=Ck(d.map(D=>D.lastKnownDocumentState)),f=g;for(var y of d)try{f=yield y.modifier(Qt(f))}catch(D){y.reject(D),y.reject=()=>{},y.resolve=()=>{}}try{yield this.preWrite(f,g)}catch(D){d.forEach(C=>C.reject(D));return}i.push({previous:g,document:f})})));var o=i.length>0?yield this.storageInstance.bulkWrite(i,"incremental-write"):{error:[]};return yield Promise.all(ri(this.primaryPath,i,o).map(c=>{var d=c[this.primaryPath];this.postWrite(c);var h=uo(n,d);h.forEach(g=>g.resolve(c))})),o.error.forEach(c=>{var d=c.documentId,h=uo(n,d),g=ra(c);if(g){var f=zt(this.queueByDocId,d,()=>[]);h.reverse().forEach(D=>{D.lastKnownDocumentState=me(g.documentInDb),me(f).unshift(D)})}else{var y=dl(c);h.forEach(D=>D.reject(y))}}),this.isRunning=!1,this.triggerRun()}})},t})();function Tm(t){var r=e=>R(null,null,function*(){var i=Gg(e);i._deleted=e._deleted;var n=yield t(i),o=Object.assign({},n,{_meta:e._meta,_attachments:e._attachments,_rev:e._rev,_deleted:typeof n._deleted<"u"?n._deleted:e._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return r}function Ck(t){var r=t[0],e=Zi(r._rev);return t.forEach(i=>{var n=Zi(i._rev);n>e&&(r=i,e=n)}),r}var ks={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(ht(r=>r._data._deleted))},get deleted$$(){var t=this,r=t.collection.database.getReactivityFactory();return r.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this,r=this.primary;return t.collection.eventBulks$.pipe(Ae(e=>!e.isLocal),ht(e=>e.events.find(i=>i.documentId===r)),Ae(e=>!!e),ht(e=>y_(me(e))),It(t.collection._docCache.getLatestDocumentData(r)),Io((e,i)=>e._rev===i._rev),ht(e=>this.collection._docCache.getCachedRxDocument(e)),Ba(pl))},get $$(){var t=this,r=t.collection.database.getReactivityFactory();return r.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(et.isDevMode()){if(t.includes(".item."))throw ee("DOC1",{path:t});if(t===this.primaryPath)throw ee("DOC2");if(this.collection.schema.finalFields.includes(t))throw ee("DOC3",{path:t});var r=Sr(this.collection.schema.jsonSchema,t);if(!r)throw ee("DOC4",{path:t})}return this.$.pipe(ht(e=>Fr(e,t)),Io())},get$$(t){var r=this.get$(t),e=this.collection.database.getReactivityFactory();return e.fromObservable(r,this.getLatest().get(t),this.collection.database)},populate(t){var r=Sr(this.collection.schema.jsonSchema,t),e=this.get(t);if(!e)return a_;if(!r)throw ee("DOC5",{path:t});if(!r.ref)throw ee("DOC6",{path:t,schemaObj:r});var i=this.collection.database.collections[r.ref];if(!i)throw ee("DOC7",{ref:r.ref,path:t,schemaObj:r});return r.type==="array"?i.findByIds(e).exec().then(n=>{var o=n.values();return Array.from(o)}):i.findOne(e).exec()},get(t){return dv(this,t)},toJSON(t=!1){if(t)return et.deepFreezeWhenDevMode(this._data);var r=Pe(this._data);return delete r._rev,delete r._attachments,delete r._deleted,delete r._meta,et.deepFreezeWhenDevMode(r)},toMutableJSON(t=!1){return Qt(this.toJSON(t))},update(t){throw Ye("update")},incrementalUpdate(t){throw Ye("update")},updateCRDT(t){throw Ye("crdt")},putAttachment(){throw Ye("attachments")},putAttachmentBase64(){throw Ye("attachments")},getAttachment(){throw Ye("attachments")},allAttachments(){throw Ye("attachments")},get allAttachments$(){throw Ye("attachments")},modify(t,r){return R(this,null,function*(){var e=this._data,i=yield Tm(t)(e);return this._saveData(i,e)})},incrementalModify(t,r){return this.collection.incrementalWriteQueue.addWrite(this._data,Tm(t)).then(e=>this.collection._docCache.getCachedRxDocument(e))},patch(t){var r=this._data,e=Qt(r);return Object.entries(t).forEach(([i,n])=>{e[i]=n}),this._saveData(e,r)},incrementalPatch(t){return this.incrementalModify(r=>(Object.entries(t).forEach(([e,i])=>{r[e]=i}),r))},_saveData(t,r){return R(this,null,function*(){if(t=Pe(t),this._data._deleted)throw ee("DOC11",{id:this.primary,document:this});yield Am(this.collection,t,r);var e=[{previous:r,document:t}],i=yield this.collection.storageInstance.bulkWrite(e,"rx-document-save-data"),n=i.error[0];return fa(this.collection,this.primary,t,n),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(ri(this.collection.schema.primaryPath,e,i)[0])})},remove(){return R(this,null,function*(){if(this.deleted)return Promise.reject(ee("DOC13",{document:this,id:this.primary}));var t=yield this.collection.bulkRemove([this]);if(t.error.length>0){var r=t.error[0];fa(this.collection,this.primary,this._data,r)}return t.success[0]})},incrementalRemove(){return this.incrementalModify(t=>R(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>R(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},close(){throw ee("DOC14")}};function cv(t=ks){var r=function(i,n){this.collection=i,this._data=n,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return r.prototype=t,r}function lv(t,r,e){var i=new t(r,e);return Pt("createRxDocument",i),i}function Am(t,r,e){return r._meta=Object.assign({},e._meta,r._meta),et.isDevMode()&&t.schema.validateChange(e,r),t._runHooks("pre","save",r,e)}function dv(t,r){return zt(t._propertyCache,r,()=>{var e=Fr(t._data,r);if(typeof e!="object"||e===null||Array.isArray(e))return et.deepFreezeWhenDevMode(e);var i=new Proxy(Pe(e),{get(n,o){if(typeof o!="string")return n[o];var c=o.charAt(o.length-1);if(c==="$")if(o.endsWith("$$")){var d=o.slice(0,-2);return t.get$$(lo(r+"."+d))}else{var h=o.slice(0,-1);return t.get$(lo(r+"."+h))}else if(c==="_"){var g=o.slice(0,-1);return t.populate(lo(r+"."+g))}else{var f=n[o];return typeof f=="number"||typeof f=="string"||typeof f=="boolean"?f:dv(t,lo(r+"."+o))}}});return i})}function Wl(t){return t[t.length-1]}function Sk(t){let r=typeof t;return t!==null&&(r==="object"||r==="function")}function Lm(t,r,e){if(Array.isArray(r)&&(r=r.join(".")),!Sk(t)||typeof r!="string")return e===void 0?t:e;let i=r.split(".");if(i.length===0)return e;for(let n=0;n<i.length;n++){let o=i[n];if(kk(t,o)?t=n===i.length-1?void 0:null:t=t[o],t==null){if(n!==i.length-1)return e;break}}return t===void 0?e:t}function kk(t,r){if(typeof r!="number"&&Array.isArray(t)){let e=Number.parseInt(r,10);return Number.isInteger(e)&&t[e]===t[r]}return!1}var Nm=t=>!!t.queryParams.limit,uv=t=>t.queryParams.limit===1,mv=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),hv=t=>t.changeEvent.operation==="DELETE",pv=t=>t.changeEvent.operation==="INSERT",fv=t=>t.changeEvent.operation==="UPDATE",gv=t=>Nm(t)&&t.previousResults.length>=t.queryParams.limit,_v=t=>{let r=t.queryParams.sortFields,e=t.changeEvent.previous,i=t.changeEvent.doc;if(!i)return!1;if(!e)return!0;for(let n=0;n<r.length;n++){let o=r[n],c=Lm(e,o),d=Lm(i,o);if(c!==d)return!0}return!1},vv=t=>{let r=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(r);{let e=t.queryParams.primaryKey,i=t.previousResults;for(let n=0;n<i.length;n++)if(i[n][e]===r)return!0;return!1}},yv=t=>{let r=t.previousResults[0];return!!(r&&r[t.queryParams.primaryKey]===t.changeEvent.id)},bv=t=>{let r=Wl(t.previousResults);return!!(r&&r[t.queryParams.primaryKey]===t.changeEvent.id)},xv=t=>{let r=t.changeEvent.previous;if(!r)return!1;let e=t.previousResults[0];return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)<0:!1},wv=t=>{let r=t.changeEvent.previous;if(!r)return!1;let e=Wl(t.previousResults);return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)>0:!1},Cv=t=>{let r=t.changeEvent.doc;if(!r)return!1;let e=t.previousResults[0];return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)<0:!1},Sv=t=>{let r=t.changeEvent.doc;if(!r)return!1;let e=Wl(t.previousResults);return e?e[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(r,e)>0:!1},kv=t=>{let r=t.changeEvent.previous;return r?t.queryParams.queryMatcher(r):!1},Iv=t=>{let r=t.changeEvent.doc;return r?t.queryParams.queryMatcher(r):!1},Ev=t=>t.previousResults.length===0;var Dv={0:pv,1:fv,2:hv,3:Nm,4:uv,5:mv,6:Ev,7:gv,8:yv,9:bv,10:_v,11:vv,12:xv,13:wv,14:Cv,15:Sv,16:kv,17:Iv};function Mv(t,r,e,i){var n=t.length,o=n-1,c=0;if(n===0)return t.push(r),0;for(var d;i<=o;)c=i+(o-i>>1),d=t[c],e(d,r)<=0?i=c+1:o=c-1;return e(d,r)<=0&&c++,t.splice(c,0,r),c}var Ov=t=>{},Kl=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},ql=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Ql=t=>{let r=t.previousResults.shift();t.keyDocumentMap&&r&&t.keyDocumentMap.delete(r[t.queryParams.primaryKey])},Xl=t=>{let r=t.previousResults.pop();t.keyDocumentMap&&r&&t.keyDocumentMap.delete(r[t.queryParams.primaryKey])},Rv=t=>{Ql(t),ql(t)},Pv=t=>{Xl(t),Kl(t)},Tv=t=>{Ql(t),Kl(t)},Av=t=>{Xl(t),ql(t)},Fm=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let r=t.queryParams.primaryKey,e=t.previousResults;for(let i=0;i<e.length;i++)if(e[i][r]===t.changeEvent.id){e.splice(i,1);break}},Lv=t=>{let r=t.changeEvent.doc,e=t.queryParams.primaryKey,i=t.previousResults;for(let n=0;n<i.length;n++)if(i[n][e]===t.changeEvent.id){i[n]=r,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,r);break}},Nv=t=>{let r={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(r),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(r._id,r))},Bm=t=>{let r=t.changeEvent.id,e=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(r))return;t.keyDocumentMap.set(r,e)}else if(t.previousResults.find(n=>n[t.queryParams.primaryKey]===r))return;Mv(t.previousResults,e,t.queryParams.sortComparator,0)},Fv=t=>{Fm(t),Bm(t)},Bv=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Vv=t=>{throw new Error("Action unknownAction should never be called")};var $v=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],zv={doNothing:Ov,insertFirst:Kl,insertLast:ql,removeFirstItem:Ql,removeLastItem:Xl,removeFirstInsertLast:Rv,removeLastInsertFirst:Pv,removeFirstInsertFirst:Tv,removeLastInsertLast:Av,removeExisting:Fm,replaceExisting:Lv,alwaysWrong:Nv,insertAtSortPosition:Bm,removeExistingAndInsertAtSortPosition:Fv,runFullQueryAgain:Bv,unknownAction:Vv};function Yl(t){return t.charCodeAt(0)-40}function jv(t){return t?"1":"0"}function Ik(t=6){let r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length;for(let n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*i));return r}var aq=Ik(4);function Vm(t,r){let e=[];for(let i=0,n=t.length;i<n;i+=r)e.push(t.substring(i,i+r));return e}function Hv(t){let r=new Map,i=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,n=t.substring(2,i),o=Vm(n,2);for(let T=0;T<o.length;T++){let A=o[T],ie=A.charAt(0),ae=Yl(A.charAt(1));r.set(ie,ae)}let c=t.substring(i,t.length-3),d=Vm(c,4);for(let T=0;T<d.length;T++){let A=d[T],ie=A.charAt(0),ae=A.charAt(1),se=A.charAt(2),Oe=Yl(A.charAt(3));if(!r.has(ae))throw new Error("missing node with id "+ae);if(!r.has(se))throw new Error("missing node with id "+se);let we=r.get(ae),Qe=r.get(se),ue={l:Oe,0:we,1:Qe};r.set(ie,ue)}let h=t.slice(-3),g=h.charAt(0),f=h.charAt(1),y=Yl(h.charAt(2)),D=r.get(g),C=r.get(f);return{l:y,0:D,1:C}}function Uv(t,r,e){let i=t,n=t.l;for(;;){let o=r[n](e),c=jv(o);if(i=i[c],typeof i=="number"||typeof i=="string")return i;n=i.l}}var Ek="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7Fae9\xA1bf9\xA2bq9\xA3cg9\xA4ck9\xA5cn9\xA6nd9\xA7np9\xA8nq9\xA9nf9\xAAng9\xABnm9\xACnk9\xADmr9\xAEms9\xAFmt9\xB0mj9\xB1mk9\xB2ml9\xB3mn9\xB4mc8\xB5\xB3{8\xB6\xAF}8\xB7\xB0\xA48\xB8\xB3\xA78\xB9mn8\xBA\xB3\xAB8\xBB\xB3m8\xBCm\xB44\xBDz\xB24\xBE\xB3w4\xBFz\xB54\xC0\xAF\xB64\xC1\xB0\xB74\xC2\xB3\xBA4\xC3\xB3\xB84\xC4m\xB94\xC5v\xA47\xC6yn7\xC7\xC0\xC17\xC8~\x7F7\xC9\xA5\xA47\xCA\xC3\xC47\xCB\xA8n7\xCC\xBA\xB97\xCD\xAD\xB07\xCE\xAEm7\xCF\xAF\xB07\xD0\xB1m7\xD1\xB3m7\xD2\xBCm5\xD3\xC4m5\xD4\xB9m5\xD5\xBD\xB05\xD6\xBEm5\xD7\xBF\xB05\xD8\xC7\xCF5\xD9\xC2m5\xDA\xCA\xD15\xDB\xB1m5\xDC\xBAm5\xDD\xCC\xD15\xDE\xD5\xCD2\xDF|\x7F2\xE0\xA1u2\xE1\xA3\xC52\xE2\xD6\xCE2\xE3\xA6\xC62\xE4\xA9x2\xE5\xAA\xC62\xE6\xD7\xD82\xE7|\xC82\xE8\xA1\xA22\xE9\xA3\xC92\xEA\xA4\xA52\xEB\xD9\xDA2\xEC\xA6\xCB2\xED\xA9n2\xEE\xAAn2\xEF\xDB\xD02\xF0\xDC\xDD2\xF1\xACn2\xF2\xD2\xD3/\xF3an/\xF4bn/\xF5cn/\xF6\xDE\xE2/\xF7\xDF\xE3/\xF8\xE0\xE4/\xF9\xE1\xE5/\xFA\xE6\xEB/\xFB\xE7\xEC/\xFC\xE8\xED/\xFD\xE9\xEE/\xFE\xCD\xCE/\xFF\xCF\xD1/\u0100\xF2\xD4,\u0101cn,\u0102\xF6\xEF,\u0103\xA4\xF1,\u0104\xFA\xF0,\u0105\xEA\xF1,\u0106\xFE\xD0,\u0107\xFF\xD1,\u0108ac0\u0109bc0\u010A\xF3\xF50\u010B\xF4\u01010\u010C\xDF\xE10\u010D\xE0\xA40\u010E\xE7\xE90\u010F\xE8\xEA0\u0110\xF7\xF90\u0111\xF8\u01030\u0112\xFB\xFD0\u0113\xFC\u01050\u0114m\xD2-\u0115m\u0100-\u0116\xDE\xE6-\u0117\u010C\u010E-\u0118\u010D\u010F-\u0119\u0102\u0104-\u011A\u0110\u0112-\u011B\u0111\u0113-\u011C\xB2\xBB-\u011D\xCD\xCF-\u011E\u0106\u0107-\u011F\xB2\xB3-\u0120\u0114\u01083\u0121\u0115\u010A3\u0122\u0116\u01173\u0123\u0119\u011A3\u0124\u0122\u011D(\u0125\u011C\u011F(\u0126\u0123\u011E(\u0127\u0120\u0121+\u0128\u0109\u010B+\u0129\u0124\u0126+\u012A\u0118\u011B+\u012B\u0127\u01281\u012C\u0129\u012A1\u012D\u012C\u012B*\u012E\u0125m*\u012D\u012E.",$m;function Dk(){return $m||($m=Hv(Ek)),$m}var Wv=t=>Uv(Dk(),Dv,t);function Kv(t){let r=Wv(t);return $v[r]}function qv(t,r,e,i,n){let o=zv[t];return o({queryParams:r,changeEvent:e,previousResults:i,keyDocumentMap:n}),i}function Mk(t,r){return!r.sort||r.sort.length===0?[t]:r.sort.map(e=>Object.keys(e)[0])}var Ok=new WeakMap;function Rk(t){return zt(Ok,t,()=>{var r=t.collection,e=On(r.storageInstance.schema,Qt(t.mangoQuery)),i=r.schema.primaryPath,n=Hl(r.schema.jsonSchema,e),o=(g,f)=>{var y={docA:g,docB:f,rxQuery:t};return n(y.docA,y.docB)},c=ha(r.schema.jsonSchema,e),d=g=>{var f={doc:g,rxQuery:t};return c(f.doc)},h={primaryKey:t.collection.schema.primaryPath,skip:e.skip,limit:e.limit,sortFields:Mk(i,e),sortComparator:o,queryMatcher:d};return h})}function Qv(t,r){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var e=Rk(t),i=me(t._result).docsData.slice(0),n=me(t._result).docsDataMap,o=!1,c=[],d=0;d<r.length;d++){var h=r[d],g=b_(h);g&&c.push(g)}var f=c.find(y=>{var D={queryParams:e,changeEvent:y,previousResults:i,keyDocumentMap:n},C=Kv(D);if(C==="runFullQueryAgain")return!0;if(C!=="doNothing")return o=!0,qv(C,e,y,i,n),!1});return f?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:i}}var Pk=(function(){function t(){this._map=new Map}var r=t.prototype;return r.getByQuery=function(i){var n=i.toString(),o=zt(this._map,n,()=>i);return o},t})();function Yv(){return new Pk}function Xv(t,r){r.uncached=!0;var e=r.toString();t._map.delete(e)}function Tk(t){return t.refCount$.observers.length}var Ak=100,Lk=30*1e3,Nk=(t,r)=>(e,i)=>{if(!(i._map.size<t)){var n=Mt()-r,o=[],c=Array.from(i._map.values());for(var d of c)if(!(Tk(d)>0)){if(d._lastEnsureEqual===0&&d._creationTime<n){Xv(i,d);continue}o.push(d)}var h=o.length-t;if(!(h<=0)){var g=o.sort((y,D)=>y._lastEnsureEqual-D._lastEnsureEqual),f=g.slice(0,h);f.forEach(y=>Xv(i,y))}}},jm=Nk(Ak,Lk),zm=new WeakSet;function Gv(t){zm.has(t)||(zm.add(t),r_().then(()=>s_(200)).then(()=>{t.closed||t.cacheReplacementPolicy(t,t._queryCache),zm.delete(t)}))}var Jv=(function(){function t(e,i,n){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var c=o.docId,d=this.cacheItemByDocId.get(c);d&&(d[0].delete(o.revisionHeight+o.lwt+""),d[0].size===0&&this.cacheItemByDocId.delete(c))}):void 0,this.primaryPath=e,this.changes$=i,this.documentCreator=n,i.subscribe(o=>{this.tasks.add(()=>{for(var c=this.cacheItemByDocId,d=0;d<o.length;d++){var h=o[d],g=c.get(h.documentId);if(g){var f=h.documentData;f||(f=h.previousDocumentData),g[1]=f}}}),this.tasks.size<=1&&na().then(()=>{this.processTasks()})})}var r=t.prototype;return r.processTasks=function(){if(this.tasks.size!==0){var i=Array.from(this.tasks);i.forEach(n=>n()),this.tasks.clear()}},r.getLatestDocumentData=function(i){this.processTasks();var n=uo(this.cacheItemByDocId,i);return n[1]},r.getLatestDocumentDataIfExists=function(i){this.processTasks();var n=this.cacheItemByDocId.get(i);if(n)return n[1]},Ci(t,[{key:"getCachedRxDocuments",get:function(){var e=Zv(this);return zi(this,"getCachedRxDocuments",e)}},{key:"getCachedRxDocument",get:function(){var e=Zv(this);return zi(this,"getCachedRxDocument",i=>e([i])[0])}}])})();function Zv(t){var r=t.primaryPath,e=t.cacheItemByDocId,i=t.registry,n=et.deepFreezeWhenDevMode,o=t.documentCreator,c=d=>{for(var h=new Array(d.length),g=[],f=0;f<d.length;f++){var y=d[f],D=y[r],C=Zi(y._rev),k=void 0,T=void 0,A=e.get(D);A?(k=A[0],T=k.get(C+y._meta.lwt+"")):(k=new Map,A=[k,y],e.set(D,A));var ie=T?T.deref():void 0;ie||(y=n(y),ie=o(y),k.set(C+y._meta.lwt+"",Bk(ie)),i&&g.push(ie)),h[f]=ie}return g.length>0&&i&&(t.tasks.add(()=>{for(var ae=0;ae<g.length;ae++){var se=g[ae];i.register(se,{docId:se.primary,revisionHeight:Zi(se.revision),lwt:se._data._meta.lwt})}}),t.tasks.size<=1&&na().then(()=>{t.processTasks()})),h};return c}function Is(t,r){var e=t.getCachedRxDocuments;return e(r)}var Fk=typeof WeakRef=="function",Bk=Fk?Vk:$k;function Vk(t){return new WeakRef(t)}function $k(t){return{deref(){return t}}}var Hm=(function(){function t(e,i,n){this.time=Mt(),this.query=e,this.count=n,this.documents=Is(this.query.collection._docCache,i)}var r=t.prototype;return r.getValue=function(i){var n=this.query.op;if(n==="count")return this.count;if(n==="findOne"){var o=this.documents.length===0?null:this.documents[0];if(!o&&i)throw ee("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:n});return o}else return n==="findByIds"?this.docsMap:this.documents.slice(0)},Ci(t,[{key:"docsData",get:function(){return zi(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(i=>{e.set(i.primary,i._data)}),zi(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,i=this.documents,n=0;n<i.length;n++){var o=i[n];e.set(o.primary,o)}return zi(this,"docsMap",e)}}])})();var zk=0,jk=function(){return++zk},Um=(function(){function t(e,i,n,o={}){this.id=jk(),this._execOverDatabaseCount=0,this._creationTime=Mt(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Zt(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=Ai,this.op=e,this.mangoQuery=i,this.collection=n,this.other=o,i||(this.mangoQuery=Es()),this.isFindOneByIdQuery=Kk(this.collection.schema.primaryPath,i)}var r=t.prototype;return r._setResultData=function(i){if(typeof i>"u")throw ee("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof i=="number"){this._result=new Hm(this,[],i);return}else i instanceof Map&&(i=Array.from(i.values()));var n=new Hm(this,i,i.length);this._result=n},r._execOverDatabase=function(){return R(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var i=this.getPreparedQuery(),n=yield this.collection.storageInstance.count(i);if(n.mode==="slow"&&!this.collection.database.allowSlowCount)throw ee("QU14",{collection:this.collection,queryObj:this.mangoQuery});return n.count}if(this.op==="findByIds"){var o=me(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,c=new Map,d=[];if(o.forEach(f=>{var y=this.collection._docCache.getLatestDocumentDataIfExists(f);if(y){if(!y._deleted){var D=this.collection._docCache.getCachedRxDocument(y);c.set(f,D)}}else d.push(f)}),d.length>0){var h=yield this.collection.storageInstance.findDocumentsById(d,!1);h.forEach(f=>{var y=this.collection._docCache.getCachedRxDocument(f);c.set(y.primary,y)})}return c}var g=Wk(this);return g.then(f=>f)})},r.exec=function(i){return R(this,null,function*(){if(i&&this.op!=="findOne")throw ee("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});yield ey(this);var n=me(this._result);return n.getValue(i)})},r.toString=function(){var i=ia({op:this.op,query:On(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),n=JSON.stringify(i);return this.toString=()=>n,n},r.getPreparedQuery=function(){var i={rxQuery:this,mangoQuery:On(this.collection.schema.jsonSchema,this.mangoQuery)};i.mangoQuery.selector._deleted={$eq:!1},i.mangoQuery.index&&i.mangoQuery.index.unshift("_deleted"),Pt("prePrepareQuery",i);var n=pa(this.collection.schema.jsonSchema,i.mangoQuery);return this.getPreparedQuery=()=>n,n},r.doesDocumentDataMatch=function(i){return i._deleted?!1:this.queryMatcher(i)},r.remove=function(){return R(this,null,function*(){var i=yield this.exec();if(Array.isArray(i)){var n=yield this.collection.bulkRemove(i);if(n.error.length>0)throw dl(n.error[0]);return n.success}else return i.remove()})},r.incrementalRemove=function(){return Rn(this.asRxQuery,i=>i.incrementalRemove())},r.update=function(i){throw Ye("update")},r.patch=function(i){return Rn(this.asRxQuery,n=>n.patch(i))},r.incrementalPatch=function(i){return Rn(this.asRxQuery,n=>n.incrementalPatch(i))},r.modify=function(i){return Rn(this.asRxQuery,n=>n.modify(i))},r.incrementalModify=function(i){return Rn(this.asRxQuery,n=>n.incrementalModify(i))},r.where=function(i){throw Ye("query-builder")},r.sort=function(i){throw Ye("query-builder")},r.skip=function(i){throw Ye("query-builder")},r.limit=function(i){throw Ye("query-builder")},Ci(t,[{key:"$",get:function(){if(!this._$){var e=this.collection.eventBulks$.pipe(Ae(i=>!i.isLocal),It(null),or(()=>ey(this)),ht(()=>this._result),Ba(pl),Io((i,n)=>!!(i&&i.time===me(n).time)),Ae(i=>!!i),ht(i=>me(i).getValue()));this._$=Mi(e,this.refCount$.pipe(Ae(()=>!1)))}return this._$}},{key:"$$",get:function(){var e=this.collection.database.getReactivityFactory();return e.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var e=this.collection.schema.jsonSchema,i=On(this.collection.schema.jsonSchema,this.mangoQuery);return zi(this,"queryMatcher",ha(e,i))}},{key:"asRxQuery",get:function(){return this}}])})();function Es(){return{selector:{}}}function Hk(t){return t.collection._queryCache.getByQuery(t)}function ga(t,r,e,i){Pt("preCreateRxQuery",{op:t,queryObj:r,collection:e,other:i});var n=new Um(t,r,e,i);return n=Hk(n),Gv(e),n}function ty(t){var r=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=r}function ey(t){return R(this,null,function*(){return t.collection.awaitBeforeReads.size>0&&(yield Promise.all(Array.from(t.collection.awaitBeforeReads).map(r=>r()))),t.collection.database.closed||ty(t)?!1:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>Uk(t)),t._ensureEqualQueue)})}function Uk(t){if(t._lastEnsureEqual=Mt(),t.collection.database.closed||ty(t))return Ai;var r=!1,e=!1;if(t._latestChangeEvent===-1&&(e=!0),!e){var i=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(i===null)e=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var n=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(i);if(t.op==="count"){var o=me(t._result).count,c=o;n.forEach(h=>{var g=h.previousDocumentData&&t.doesDocumentDataMatch(h.previousDocumentData),f=t.doesDocumentDataMatch(h.documentData);!g&&f&&c++,g&&!f&&c--}),c!==o&&(r=!0,t._setResultData(c))}else{var d=Qv(t,n);d.runFullQueryAgain?e=!0:d.changed&&(r=!0,t._setResultData(d.newResults))}}}return e?t._execOverDatabase().then(h=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),typeof h=="number"?((!t._result||h!==t._result.count)&&(r=!0,t._setResultData(h)),r):((!t._result||!Zg(t.collection.schema.primaryPath,h,t._result.docsData))&&(r=!0,t._setResultData(h)),r))):Promise.resolve(r)}function Wk(t){return R(this,null,function*(){var r=[],e=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var i=t.isFindOneByIdQuery;if(i=i.filter(f=>{var y=t.collection._docCache.getLatestDocumentDataIfExists(f);return y?(y._deleted||r.push(y),!1):!0}),i.length>0){var n=yield e.storageInstance.findDocumentsById(i,!1);Ti(r,n)}}else{var o=t.isFindOneByIdQuery,c=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!c){var d=yield e.storageInstance.findDocumentsById([o],!1);d[0]&&(c=d[0])}c&&!c._deleted&&r.push(c)}else{var h=t.getPreparedQuery(),g=yield e.storageInstance.query(h);r=g.documents}return r})}function Kk(t,r){if(!r.skip&&r.selector&&Object.keys(r.selector).length===1&&r.selector[t]){var e=r.selector[t];if(typeof e=="string")return e;if(Object.keys(e).length===1&&typeof e.$eq=="string"||Object.keys(e).length===1&&Array.isArray(e.$eq)&&!e.$eq.find(i=>typeof i!="string"))return e.$eq}return!1}var Tn="collection",Wm="storage-token",qk="rx-migration-status",Qk="rx-pipeline-checkpoint",Xk="RxInternalDocument",Gl=sa({version:0,title:Xk,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Tn,Wm,qk,Qk,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function _a(t,r){return ji(Gl,{key:t,context:r})}function Zl(t){return R(this,null,function*(){var r=pa(t.schema,{selector:{context:Tn,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),e=yield t.query(r),i=e.documents;return i})}var iy="storageToken",Yk=_a(iy,Wm);function ry(t){return R(this,null,function*(){var r=co(10),e=t.password?yield t.hashFunction(JSON.stringify(t.password)):void 0,i={id:Yk,context:Wm,key:iy,data:{rxdbVersion:t.rxdbVersion,token:r,instanceToken:t.token,passwordHash:e},_deleted:!1,_meta:Sn(),_rev:_i(),_attachments:{}},n=[{document:i}],o=yield t.internalStore.bulkWrite(n,"internal-add-storage-token");if(!o.error[0])return ri("id",n,o)[0];var c=me(o.error[0]);if(c.isError&&ra(c)){var d=c;if(!Gk(d.documentInDb.data.rxdbVersion,t.rxdbVersion))throw ee("DM5",{args:{database:t.name,databaseStateVersion:d.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(e&&e!==d.documentInDb.data.passwordHash)throw ee("DB1",{passwordHash:e,existingPasswordHash:d.documentInDb.data.passwordHash});var h=d.documentInDb;return me(h)}throw c})}function Gk(t,r){if(!t)return!1;var e=t.split(".")[0],i=r.split(".")[0];return e==="15"&&i==="16"?!0:e===i}function ny(t,r,e){return R(this,null,function*(){if(t.schema.version!==e.version)throw ee("SNH",{schema:e,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:r}});for(var i=Ds(t.name,t.schema.jsonSchema),n=_a(i,Tn);;){var o=yield Ss(t.database.internalStore,n),c=Qt(me(o)),d=c.data.connectedStorages.find(h=>h.collectionName===r&&h.schema.version===e.version);if(d)return;c.data.connectedStorages.push({collectionName:r,schema:e});try{yield Rm(t.database.internalStore,{previous:me(o),document:c},"add-connected-storage-to-collection")}catch(h){if(!ra(h))throw h}}})}function oy(t,r,e){return R(this,null,function*(){if(t.schema.version!==e.version)throw ee("SNH",{schema:e,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:r}});for(var i=Ds(t.name,t.schema.jsonSchema),n=_a(i,Tn);;){var o=yield Ss(t.database.internalStore,n),c=Qt(me(o)),d=c.data.connectedStorages.find(h=>h.collectionName===r&&h.schema.version===e.version);if(!d)return;c.data.connectedStorages=c.data.connectedStorages.filter(h=>h.collectionName!==r);try{yield Rm(t.database.internalStore,{previous:me(o),document:c},"remove-connected-storage-from-collection")}catch(h){if(!ra(h))throw h}}})}function Ds(t,r){return t+"-"+r.version}function Ms(t,r){return r=Pe(r),r=__(t,r),typeof t.jsonSchema.primaryKey!="string"&&(r=p_(t.primaryPath,t.jsonSchema,r)),r._meta=Sn(),Object.prototype.hasOwnProperty.call(r,"_deleted")||(r._deleted=!1),Object.prototype.hasOwnProperty.call(r,"_attachments")||(r._attachments={}),Object.prototype.hasOwnProperty.call(r,"_rev")||(r._rev=_i()),r}function ay(t,r){return R(this,null,function*(){r.multiInstance=t.multiInstance;var e=yield t.storage.createStorageInstance(r);return e})}function Jl(t,r,e,i,n,o,c,d){return R(this,null,function*(){var h=yield Zl(r),g=h.filter(C=>C.data.name===n),f=[];g.forEach(C=>{f.push({collectionName:C.data.name,schema:C.data.schema,isCollection:!0}),C.data.connectedStorages.forEach(k=>f.push({collectionName:k.collectionName,isCollection:!1,schema:k.schema}))});var y=new Set;if(f=f.filter(C=>{var k=C.collectionName+"||"+C.schema.version;return y.has(k)?!1:(y.add(k),!0)}),yield Promise.all(f.map(C=>R(null,null,function*(){var k=yield t.createStorageInstance({collectionName:C.collectionName,databaseInstanceToken:e,databaseName:i,multiInstance:o,options:{},schema:C.schema,password:c,devMode:et.isDevMode()});yield k.remove(),C.isCollection&&(yield cr("postRemoveRxCollection",{storage:t,databaseName:i,collectionName:n}))}))),d){var D=g.map(C=>{var k=zr(C);return k._deleted=!0,k._meta.lwt=Mt(),k._rev=Si(e,C),{previous:C,document:k}});yield r.bulkWrite(D,"rx-database-remove-collection-all")}})}function Wi(t){if(t.closed)throw ee("COL21",{collection:t.name,version:t.schema.version})}var Zk=(function(){function t(e){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=e,this.subs.push(this.collection.eventBulks$.pipe(Ae(i=>!i.isLocal)).subscribe(i=>{this.tasks.add(()=>this._handleChangeEvents(i.events)),this.tasks.size<=1&&na().then(()=>{this.processTasks()})}))}var r=t.prototype;return r.processTasks=function(){if(this.tasks.size!==0){var i=Array.from(this.tasks);i.forEach(n=>n()),this.tasks.clear()}},r._handleChangeEvents=function(i){var n=this.counter;this.counter=this.counter+i.length,i.length>this.limit?this.buffer=i.slice(i.length*-1):(Ti(this.buffer,i),this.buffer=this.buffer.slice(this.limit*-1));for(var o=n+1,c=this.eventCounterMap,d=0;d<i.length;d++){var h=i[d];c.set(h,o+d)}},r.getCounter=function(){return this.processTasks(),this.counter},r.getBuffer=function(){return this.processTasks(),this.buffer},r.getArrayIndexByPointer=function(i){this.processTasks();var n=this.buffer[0],o=this.eventCounterMap.get(n);if(i<o)return null;var c=i-o;return c},r.getFrom=function(i){this.processTasks();var n=[],o=this.getArrayIndexByPointer(i);if(o===null)return null;for(;;){var c=this.buffer[o];if(o++,c)n.push(c);else return n}},r.runFrom=function(i,n){this.processTasks();var o=this.getFrom(i);if(o===null)throw new Error("out of bounds");o.forEach(c=>n(c))},r.reduceByLastOfDoc=function(i){return this.processTasks(),i.slice(0)},r.close=function(){this.tasks.clear(),this.subs.forEach(i=>i.unsubscribe())},t})();function sy(t){return new Zk(t)}var Jk=new WeakMap;function eI(t){var r=t.schema.getDocumentPrototype(),e=tI(t),i=ks,n={};return[r,e,i].forEach(o=>{var c=Object.getOwnPropertyNames(o);c.forEach(d=>{var h=Object.getOwnPropertyDescriptor(o,d),g=!0;(d.startsWith("_")||d.endsWith("_")||d.startsWith("$")||d.endsWith("$"))&&(g=!1),typeof h.value=="function"?Object.defineProperty(n,d,{get(){return h.value.bind(this)},enumerable:g,configurable:!1}):(h.enumerable=g,h.configurable=!1,h.writable&&(h.writable=!1),Object.defineProperty(n,d,h))})}),n}function cy(t){return zt(Jk,t,()=>cv(eI(t)))}function ly(t,r,e){var i=lv(r,t,et.deepFreezeWhenDevMode(e));return t._runHooksSync("post","create",e,i),Pt("postCreateRxDocument",i),i}function tI(t){var r={};return Object.entries(t.methods).forEach(([e,i])=>{r[e]=i}),r}var Km={isEqual(t,r,e){t=dy(t),r=dy(r);var i=oa(tr(t),tr(r));return i},resolve(t){return t.realMasterState}};function dy(t){return t._attachments||(t=Pe(t),t._attachments={}),t}var my=["pre","post"],hy=["insert","save","remove","create"],uy=!1,va=new Set,qm=(function(){function t(e,i,n,o,c={},d={},h={},g={},f={},y=jm,D={},C=Km){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Yv(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=e,this.name=i,this.schema=n,this.internalStorageInstance=o,this.instanceCreationOptions=c,this.migrationStrategies=d,this.methods=h,this.attachments=g,this.options=f,this.cacheReplacementPolicy=y,this.statics=D,this.conflictHandler=C,iI(this.asRxCollection),e&&(this.eventBulks$=e.eventBulks$.pipe(Ae(k=>k.collectionName===this.name))),this.database&&va.add(this)}var r=t.prototype;return r.prepare=function(){return R(this,null,function*(){if(!(yield gl())){for(var i=0;i<10&&va.size>dm;)i++,yield this.promiseWait(30);if(va.size>dm)throw ee("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(va.values()).map(h=>({db:h.database?h.database.name:"",c:h.name}))}})}this.storageInstance=Ul(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new sv(this.storageInstance,this.schema.primaryPath,(h,g)=>Am(this,h,g),h=>this._runHooks("post","save",h)),this.$=this.eventBulks$.pipe(or(h=>_l(h))),this.checkpoint$=this.eventBulks$.pipe(ht(h=>h.checkpoint)),this._changeEventBuffer=sy(this.asRxCollection);var n;this._docCache=new Jv(this.schema.primaryPath,this.eventBulks$.pipe(Ae(h=>!h.isLocal),ht(h=>h.events)),h=>(n||(n=cy(this.asRxCollection)),ly(this.asRxCollection,n,h)));var o=this.database.internalStore.changeStream().pipe(Ae(h=>{var g=this.name+"-"+this.schema.version,f=h.events.find(y=>y.documentData.context==="collection"&&y.documentData.key===g&&y.operation==="DELETE");return!!f})).subscribe(()=>R(this,null,function*(){yield this.close(),yield Promise.all(this.onRemove.map(h=>h()))}));this._subs.push(o);var c=yield this.database.storageToken,d=this.storageInstance.changeStream().subscribe(h=>{var g={id:h.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:c,events:h.events,databaseToken:this.database.token,checkpoint:h.checkpoint,context:h.context};this.database.$emit(g)});return this._subs.push(d),vi})},r.cleanup=function(i){throw Wi(this),Ye("cleanup")},r.migrationNeeded=function(){throw Ye("migration-schema")},r.getMigrationState=function(){throw Ye("migration-schema")},r.startMigration=function(i=10){return Wi(this),this.getMigrationState().startMigration(i)},r.migratePromise=function(i=10){return this.getMigrationState().migratePromise(i)},r.insert=function(i){return R(this,null,function*(){Wi(this);var n=yield this.bulkInsert([i]),o=n.error[0];fa(this,i[this.schema.primaryPath],i,o);var c=me(n.success[0]);return c})},r.insertIfNotExists=function(i){return R(this,null,function*(){var n=yield this.bulkInsert([i]);if(n.error.length>0){var o=n.error[0];if(o.status===409){var c=o.documentInDb;return Is(this._docCache,[c])[0]}else throw o}return n.success[0]})},r.bulkInsert=function(i){return R(this,null,function*(){if(Wi(this),i.length===0)return{success:[],error:[]};var n=this.schema.primaryPath,o=new Set,c;if(this.hasHooks("pre","insert"))c=yield Promise.all(i.map(A=>{var ie=Ms(this.schema,A);return this._runHooks("pre","insert",ie).then(()=>(o.add(ie[n]),{document:ie}))}));else{c=new Array(i.length);for(var d=this.schema,h=0;h<i.length;h++){var g=i[h],f=Ms(d,g);o.add(f[n]),c[h]={document:f}}}if(o.size!==i.length)throw ee("COL22",{collection:this.name,args:{documents:i}});var y=yield this.storageInstance.bulkWrite(c,"rx-collection-bulk-insert"),D,C=this,k={get success(){if(!D){var A=ri(C.schema.primaryPath,c,y);D=Is(C._docCache,A)}return D},error:y.error};if(this.hasHooks("post","insert")){var T=new Map;c.forEach(A=>{var ie=A.document;T.set(ie[n],ie)}),yield Promise.all(k.success.map(A=>this._runHooks("post","insert",T.get(A.primary),A)))}return k})},r.bulkRemove=function(i){return R(this,null,function*(){Wi(this);var n=this.schema.primaryPath;if(i.length===0)return{success:[],error:[]};var o;typeof i[0]=="string"?o=yield this.findByIds(i).exec():(o=new Map,i.forEach(C=>o.set(C.primary,C)));var c=[],d=new Map;Array.from(o.values()).forEach(C=>{var k=C.toMutableJSON(!0);c.push(k),d.set(C.primary,k)}),yield Promise.all(c.map(C=>{var k=C[this.schema.primaryPath];return this._runHooks("pre","remove",C,o.get(k))}));var h=c.map(C=>{var k=Pe(C);return k._deleted=!0,{previous:C,document:k}}),g=yield this.storageInstance.bulkWrite(h,"rx-collection-bulk-remove"),f=ri(this.schema.primaryPath,h,g),y=[],D=f.map(C=>{var k=C[n],T=this._docCache.getCachedRxDocument(C);return y.push(T),k});return yield Promise.all(D.map(C=>this._runHooks("post","remove",d.get(C),o.get(C)))),{success:y,error:g.error}})},r.bulkUpsert=function(i){return R(this,null,function*(){Wi(this);var n=[],o=new Map;i.forEach(g=>{var f=Ms(this.schema,g),y=f[this.schema.primaryPath];if(!y)throw ee("COL3",{primaryPath:this.schema.primaryPath,data:f,schema:this.schema.jsonSchema});o.set(y,f),n.push(f)});var c=yield this.bulkInsert(n),d=c.success.slice(0),h=[];return yield Promise.all(c.error.map(g=>R(this,null,function*(){if(g.status!==409)h.push(g);else{var f=g.documentId,y=uo(o,f),D=me(g.documentInDb),C=this._docCache.getCachedRxDocuments([D])[0],k=yield C.incrementalModify(()=>y);d.push(k)}}))),{error:h,success:d}})},r.upsert=function(i){return R(this,null,function*(){Wi(this);var n=yield this.bulkUpsert([i]);return fa(this.asRxCollection,i[this.schema.primaryPath],i,n.error[0]),n.success[0]})},r.incrementalUpsert=function(i){Wi(this);var n=Ms(this.schema,i),o=n[this.schema.primaryPath];if(!o)throw ee("COL4",{data:i});var c=this._incrementalUpsertQueues.get(o);return c||(c=vi),c=c.then(()=>nI(this,o,n)).then(d=>d.inserted?d.doc:rI(d.doc,n)),this._incrementalUpsertQueues.set(o,c),c},r.find=function(i){Wi(this),Pt("prePrepareRxQuery",{op:"find",queryObj:i,collection:this}),i||(i=Es());var n=ga("find",i,this);return n},r.findOne=function(i){Wi(this),Pt("prePrepareRxQuery",{op:"findOne",queryObj:i,collection:this});var n;if(typeof i=="string")n=ga("findOne",{selector:{[this.schema.primaryPath]:i},limit:1},this);else{if(i||(i=Es()),i.limit)throw ee("QU6");i=Pe(i),i.limit=1,n=ga("findOne",i,this)}return n},r.count=function(i){Wi(this),i||(i=Es());var n=ga("count",i,this);return n},r.findByIds=function(i){Wi(this);var n={selector:{[this.schema.primaryPath]:{$in:i.slice(0)}}},o=ga("findByIds",n,this);return o},r.exportJSON=function(){throw Ye("json-dump")},r.importJSON=function(i){throw Ye("json-dump")},r.insertCRDT=function(i){throw Ye("crdt")},r.addPipeline=function(i){throw Ye("pipeline")},r.addHook=function(i,n,o,c=!1){if(typeof o!="function")throw ds("COL7",{key:n,when:i});if(!my.includes(i))throw ds("COL8",{key:n,when:i});if(!hy.includes(n))throw ee("COL9",{key:n});if(i==="post"&&n==="create"&&c===!0)throw ee("COL10",{when:i,key:n,parallel:c});var d=o.bind(this),h=c?"parallel":"series";this.hooks[n]=this.hooks[n]||{},this.hooks[n][i]=this.hooks[n][i]||{series:[],parallel:[]},this.hooks[n][i][h].push(d)},r.getHooks=function(i,n){return!this.hooks[n]||!this.hooks[n][i]?{series:[],parallel:[]}:this.hooks[n][i]},r.hasHooks=function(i,n){if(!this.hooks[n]||!this.hooks[n][i])return!1;var o=this.getHooks(i,n);return o?o.series.length>0||o.parallel.length>0:!1},r._runHooks=function(i,n,o,c){var d=this.getHooks(i,n);if(!d)return vi;var h=d.series.map(g=>()=>g(o,c));return c_(h).then(()=>Promise.all(d.parallel.map(g=>g(o,c))))},r._runHooksSync=function(i,n,o,c){if(this.hasHooks(i,n)){var d=this.getHooks(i,n);d&&d.series.forEach(h=>h(o,c))}},r.promiseWait=function(i){var n=new Promise(o=>{var c=setTimeout(()=>{this.timeouts.delete(c),o()},i);this.timeouts.add(c)});return n},r.close=function(){return R(this,null,function*(){return this.closed?Ai:(va.delete(this),yield Promise.all(this.onClose.map(i=>i())),this.closed=!0,Array.from(this.timeouts).forEach(i=>clearTimeout(i)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(i=>i.unsubscribe()),delete this.database.collections[this.name],cr("postCloseRxCollection",this).then(()=>!0))))})},r.remove=function(){return R(this,null,function*(){yield this.close(),yield Promise.all(this.onRemove.map(i=>i())),yield Jl(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)})},Ci(t,[{key:"insert$",get:function(){return this.$.pipe(Ae(e=>e.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Ae(e=>e.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Ae(e=>e.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])})();function iI(t){if(!uy){uy=!0;var r=Object.getPrototypeOf(t);hy.forEach(e=>{my.map(i=>{var n=i+hl(e);r[n]=function(o,c){return this.addHook(i,e,o,c)}})})}}function rI(t,r){return t.incrementalModify(e=>r)}function nI(t,r,e){var i=t._docCache.getLatestDocumentDataIfExists(r);return i?Promise.resolve({doc:t._docCache.getCachedRxDocuments([i])[0],inserted:!1}):t.findOne(r).exec().then(n=>n?{doc:n,inserted:!1}:t.insert(e).then(o=>({doc:o,inserted:!0})))}function py(C){return R(this,arguments,function*({database:t,name:r,schema:e,instanceCreationOptions:i={},migrationStrategies:n={},autoMigrate:o=!0,statics:c={},methods:d={},attachments:h={},options:g={},localDocuments:f=!1,cacheReplacementPolicy:y=jm,conflictHandler:D=Km}){var k={databaseInstanceToken:t.token,databaseName:t.name,collectionName:r,schema:e.jsonSchema,options:i,multiInstance:t.multiInstance,password:t.password,devMode:et.isDevMode()};Pt("preCreateRxStorageInstance",k);var T=yield ay(t,k),A=new qm(t,r,e,T,i,n,d,h,g,y,c,D);try{yield A.prepare(),Object.entries(c).forEach(([ie,ae])=>{Object.defineProperty(A,ie,{get:()=>ae.bind(A)})}),Pt("createRxCollection",{collection:A,creator:{name:r,schema:e,storageInstance:T,instanceCreationOptions:i,migrationStrategies:n,methods:d,attachments:h,options:g,cacheReplacementPolicy:y,localDocuments:f,statics:c}}),o&&A.schema.version!==0&&(yield A.migratePromise())}catch(ie){throw va.delete(A),yield T.close(),ie}return A})}var Ym=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=r||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Ym.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Xm(this)},wrapCall:function(r){var e=this;this._qC++;var i;try{i=r()}catch(n){throw this.unlock(),n}return!i.then||typeof i.then!="function"?(this.unlock(),i):i.then(function(n){return e.unlock(),n}).catch(function(n){throw e.unlock(),n})},requestIdlePromise:function(r){var e=this;r=r||{};var i,n=new Promise(function(d){return i=d}),o=function(){Qm(e,n),i()};if(n._manRes=o,r.timeout){var c=setTimeout(function(){n._manRes()},r.timeout);n._timeoutObj=c}return this._iC.add(n),Xm(this),n},cancelIdlePromise:function(r){Qm(this,r)},requestIdleCallback:function(r,e){var i=this._lHN++,n=this.requestIdlePromise(e);return this._hPM.set(i,n),this._pHM.set(n,i),n.then(function(){return r()}),i},cancelIdleCallback:function(r){var e=this._hPM.get(r);this.cancelIdlePromise(e)},clear:function(){var r=this;this._iC.forEach(function(e){return Qm(r,e)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function oI(t){if(t._iC.size!==0){var r=t._iC.values(),e=r.next().value;e._manRes(),setTimeout(function(){return Xm(t)},0)}}function Qm(t,r){if(r){if(r._timeoutObj&&clearTimeout(r._timeoutObj),t._pHM.has(r)){var e=t._pHM.get(r);t._hPM.delete(e),t._pHM.delete(r)}t._iC.delete(r)}}function Xm(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}oI(t),t._tryIR=!1},0)},0))}var An=class{ttl;map=new Map;_to=!1;constructor(r){this.ttl=r}has(r){return this.map.has(r)}add(r){this.map.set(r,fy()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,aI(this)},0))}clear(){this.map.clear()}};function aI(t){let r=fy()-t.ttl,e=t.map[Symbol.iterator]();for(;;){let i=e.next().value;if(!i)return;let n=i[0];if(i[1]<r)t.map.delete(n);else return}}function fy(){return Date.now()}var Gm=new Set,gy=new Map,_y=0,Zm=(function(){function t(e,i,n,o,c,d,h=!1,g={},f,y,D,C,k,T){this.idleQueue=new Ym,this.rxdbVersion=ms,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new J,this.closePromise=null,this.observable$=this.eventBulks$.pipe(or(A=>_l(A))),this.storageToken=Ai,this.storageTokenDocument=Ai,this.emittedEventBulkIds=new An(60*1e3),this.name=e,this.token=i,this.storage=n,this.instanceCreationOptions=o,this.password=c,this.multiInstance=d,this.eventReduce=h,this.options=g,this.internalStore=f,this.hashFunction=y,this.cleanupPolicy=D,this.allowSlowCount=C,this.reactivity=k,this.onClosed=T,_y++,this.name!=="pseudoInstance"&&(this.internalStore=Ul(this.asRxDatabase,f,Gl),this.storageTokenDocument=ry(this.asRxDatabase).catch(A=>this.startupErrors.push(A)),this.storageToken=this.storageTokenDocument.then(A=>A.data.token).catch(A=>this.startupErrors.push(A)))}var r=t.prototype;return r.getReactivityFactory=function(){if(!this.reactivity)throw ee("DB14",{database:this.name});return this.reactivity},r.$emit=function(i){this.emittedEventBulkIds.has(i.id)||(this.emittedEventBulkIds.add(i.id),this.eventBulks$.next(i))},r.removeCollectionDoc=function(i,n){return R(this,null,function*(){var o=yield Ss(this.internalStore,_a(Ds(i,n),Tn));if(!o)throw ee("SNH",{name:i,schema:n});var c=zr(o);c._deleted=!0,yield this.internalStore.bulkWrite([{document:c,previous:o}],"rx-database-remove-collection")})},r.addCollections=function(i){return R(this,null,function*(){var n={},o={},c=[],d={};yield Promise.all(Object.entries(i).map(D=>R(this,[D],function*([f,y]){var C=f,k=y.schema;n[C]=k;var T=v_(k,this.hashFunction);if(o[C]=T,this.collections[f])throw ee("DB3",{name:f});var A=Ds(f,k),ie={id:_a(A,Tn),key:A,context:Tn,data:{name:C,schemaHash:yield T.hash,schema:T.jsonSchema,version:T.version,connectedStorages:[]},_deleted:!1,_meta:Sn(),_rev:_i(),_attachments:{}};c.push({document:ie});var ae=Object.assign({},y,{name:C,schema:T,database:this}),se=Pe(y);se.database=this,se.name=f,Pt("preCreateRxCollection",se),ae.conflictHandler=se.conflictHandler,d[C]=ae})));var h=yield this.internalStore.bulkWrite(c,"rx-database-add-collection");yield cI(this),yield Promise.all(h.error.map(f=>R(this,null,function*(){if(f.status!==409)throw ee("DB12",{database:this.name,writeError:f});var y=me(f.documentInDb),D=y.data.name,C=o[D];if(y.data.schemaHash!==(yield C.hash))throw ee("DB6",{database:this.name,collection:D,previousSchemaHash:y.data.schemaHash,schemaHash:yield C.hash,previousSchema:y.data.schema,schema:me(n[D])})})));var g={};return yield Promise.all(Object.keys(i).map(f=>R(this,null,function*(){var y=d[f],D=yield py(y);g[f]=D,this.collections[f]=D,this[f]||Object.defineProperty(this,f,{get:()=>this.collections[f]})}))),g})},r.lockedRun=function(i){return this.idleQueue.wrapCall(i)},r.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},r.exportJSON=function(i){throw Ye("json-dump")},r.addState=function(i){throw Ye("state")},r.importJSON=function(i){throw Ye("json-dump")},r.backup=function(i){throw Ye("backup")},r.leaderElector=function(){throw Ye("leader-election")},r.isLeader=function(){throw Ye("leader-election")},r.waitForLeadership=function(){throw Ye("leader-election")},r.migrationStates=function(){throw Ye("migration-schema")},r.close=function(){if(this.closePromise)return this.closePromise;var{promise:i,resolve:n}=vy(),o=c=>{this.onClosed&&this.onClosed(),this.closed=!0,n(c)};return this.closePromise=i,R(this,null,function*(){if(yield cr("preCloseRxDatabase",this),this.eventBulks$.complete(),_y--,this._subs.map(c=>c.unsubscribe()),this.name==="pseudoInstance"){o(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(c=>c()))).then(()=>Promise.all(Object.keys(this.collections).map(c=>this.collections[c]).map(c=>c.close()))).then(()=>this.internalStore.close()).then(()=>o(!0))}),i},r.remove=function(){return this.close().then(()=>ed(this.name,this.storage,this.multiInstance,this.password))},Ci(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])})();function sI(t,r){if(Gm.has(yy(t,r)))throw ee("DB8",{name:t,storage:r.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function vy(){var t,r,e=new Promise((i,n)=>{t=i,r=n});return{promise:e,resolve:t,reject:r}}function yy(t,r){return r.name+"|"+t}function by(t,r,e,i,n,o){return R(this,null,function*(){var c=yield r.createStorageInstance({databaseInstanceToken:t,databaseName:e,collectionName:iv,schema:Gl,options:i,multiInstance:n,password:o,devMode:et.isDevMode()});return c})}function Jm({storage:t,instanceCreationOptions:r,name:e,password:i,multiInstance:n=!0,eventReduce:o=!0,ignoreDuplicate:c=!1,options:d={},cleanupPolicy:h,closeDuplicates:g=!1,allowSlowCount:f=!1,localDocuments:y=!1,hashFunction:D=ml,reactivity:C}){Pt("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:e,password:i,multiInstance:n,eventReduce:o,ignoreDuplicate:c,options:d,localDocuments:y});var k=yy(e,t),T=gy.get(k)||new Set,A=vy(),ie=Array.from(T),ae=()=>{T.delete(A.promise),Gm.delete(k)};return T.add(A.promise),gy.set(k,T),R(null,null,function*(){if(g&&(yield Promise.all(ie.map(Qe=>Qe.catch(()=>null).then(ue=>ue&&ue.close())))),c){if(!et.isDevMode())throw ee("DB9",{database:e})}else sI(e,t);Gm.add(k);var se=co(10),Oe=yield by(se,t,e,r,n,i),we=new Zm(e,se,t,r,i,n,o,d,Oe,D,h,f,C,ae);return yield cr("createRxDatabase",{database:we,creator:{storage:t,instanceCreationOptions:r,name:e,password:i,multiInstance:n,eventReduce:o,ignoreDuplicate:c,options:d,localDocuments:y}}),we}).then(se=>{A.resolve(se)}).catch(se=>{A.reject(se),ae()}),A.promise}function ed(t,r,e=!0,i){return R(this,null,function*(){var n=co(10),o=yield by(n,r,t,{},e,i),c=yield Zl(o),d=new Set;c.forEach(g=>d.add(g.data.name));var h=Array.from(d);return yield Promise.all(h.map(g=>Jl(r,o,n,t,g,e,i))),yield cr("postRemoveRxDatabase",{databaseName:t,storage:r}),yield o.remove(),h})}function cI(t){return R(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var lI={RxSchema:mm.prototype,RxDocument:ks,RxQuery:Um.prototype,RxCollection:qm.prototype,RxDatabase:Zm.prototype},eh=new Set,xy=new Set;function td(t){if(Pt("preAddRxPlugin",{plugin:t,plugins:eh}),!eh.has(t)){{if(xy.has(t.name))throw ee("PL3",{name:t.name,plugin:t});eh.add(t),xy.add(t.name)}if(!t.rxdb)throw ds("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([r,e])=>e(lI[r])),t.overwritable&&Object.assign(et,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([r,e])=>{e.after&&aa[r].push(e.after),e.before&&aa[r].unshift(e.before)})}}function ya(t,r){return R(this,null,function*(){var e=ji(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:r}),i=yield t.input.metaInstance.findDocumentsById([e],!1),n=i[0];if(t.lastCheckpointDoc[r]=n,n)return n.checkpointData})}function ba(t,r,e){return R(this,null,function*(){t.checkpointQueue=t.checkpointQueue.then(()=>R(null,null,function*(){var i=t.lastCheckpointDoc[r];if(e&&!t.events.canceled.getValue()&&(!i||JSON.stringify(i.checkpointData)!==JSON.stringify(e))){var n={id:"",isCheckpoint:"1",itemId:r,_deleted:!1,_attachments:{},checkpointData:e,_meta:Sn(),_rev:_i()};for(n.id=ji(t.input.metaInstance.schema,n);!t.events.canceled.getValue();){if(i&&(n.checkpointData=Pn([i.checkpointData,n.checkpointData])),n._meta.lwt=Mt(),n._rev=Si(yield t.checkpointKey,i),t.events.canceled.getValue())return;var o=[{previous:i,document:n}],c=yield t.input.metaInstance.bulkWrite(o,"replication-set-checkpoint"),d=ri(t.primaryPath,o,c)[0];if(d){t.lastCheckpointDoc[r]=d;return}else{var h=c.error[0];if(h.status!==409)throw h;i=me(h.documentInDb),n._rev=Si(yield t.checkpointKey,i)}}}})),yield t.checkpointQueue})}function wy(t){return R(this,null,function*(){var r=yield t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+r})}function Os(t,r,e){var i=Pe(t);return r||delete i._attachments,e||(delete i._meta,delete i._rev),i}function Rs(t,r){return t.hasAttachments?r.map(e=>{var i=Qt(e.document);return i.docData=tr(i.docData),{document:i,previous:e.previous}}):r}function th(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var dI="RxReplicationProtocolMetaData";function Cy(t,r){var e=f_(t),i={title:dI,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:e+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:e>4?e:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};r&&(i.encrypted=["docData"]);var n=sa(i);return n}function id(t,r){return t.input.metaInstance.findDocumentsById(r.map(e=>{var i=ji(t.input.metaInstance.schema,{itemId:e,isCheckpoint:"0"});return i}),!0).then(e=>{var i={};return Object.values(e).forEach(n=>{i[n.itemId]={docData:n.docData,metaDocument:n}}),i})}function xa(t,r,e,i){return R(this,null,function*(){var n=r[t.primaryPath],o=e?zr(e):{id:"",isCheckpoint:"0",itemId:n,docData:r,_attachments:{},_deleted:!1,_rev:_i(),_meta:{lwt:0}};o.docData=r,i&&(o.isResolvedConflict=i),o._meta.lwt=Mt(),o.id=ji(t.input.metaInstance.schema,o),o._rev=Si(yield t.checkpointKey,e);var c={previous:e,document:o};return c})}function Sy(t){return R(this,null,function*(){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var r=yield ya(t,"down");r||(yield ba(t,"down",t.input.initialCheckpoint.downstream))}var e=yield t.input.hashFunction(t.input.identifier),i=t.input.replicationHandler,n=0,o=[];function c(k){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var T={time:n++,task:k};o.push(T),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var A=[];o.length>0;){t.events.active.down.next(!0);var ie=me(o.shift());if(!(ie.time<h)){if(ie.task==="RESYNC")if(A.length===0){A.push(ie.task);break}else break;A.push(ie.task)}}if(A.length!==0)return A[0]==="RESYNC"?g():f(A)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(c("RESYNC"),!t.events.canceled.getValue()){var d=i.masterChangeStream$.pipe(or(k=>R(null,null,function*(){return yield Kn(t.events.active.up.pipe(Ae(T=>!T))),k}))).subscribe(k=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,c(k)});Kn(t.events.canceled.pipe(Ae(k=>!!k))).then(()=>d.unsubscribe())}var h=-1;function g(){return R(this,null,function*(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>ya(t,"down"));for(var k=yield t.checkpointQueue,T=[];!t.events.canceled.getValue();){h=n++;var A=yield i.masterChangesSince(k,t.input.pullBatchSize);if(A.documents.length===0||(k=Pn([k,A.checkpoint]),T.push(C(A.documents,k)),A.documents.length<t.input.pullBatchSize))break}yield Promise.all(T)}})}function f(k){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var T=[],A=null;return k.forEach(ie=>{if(ie==="RESYNC")throw new Error("SNH");Ti(T,ie.documents),A=Pn([A,ie.checkpoint])}),C(T,me(A))}var y=vi,D={docs:{}};function C(k,T){var A=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,k.forEach(ie=>{var ae=ie[A];D.docs[ae]=ie}),D.checkpoint=T,y=y.then(()=>{var ie=D.docs;D.docs={};var ae=D.checkpoint,se=Object.keys(ie);if(t.events.canceled.getValue()||se.length===0)return vi;var Oe=[],we={},Qe={},ue=[];return Promise.all([t.input.forkInstance.findDocumentsById(se,!0),id(t,se)]).then(([be,dt])=>{var jt=new Map;return be.forEach(Lt=>jt.set(Lt[A],Lt)),Promise.all(se.map(Lt=>R(null,null,function*(){var He=jt.get(Lt),Ut=He?Os(He,t.hasAttachments,!1):void 0,Nt=ie[Lt],Ft=dt[Lt];Ft&&He&&Ft.metaDocument.isResolvedConflict===He._rev&&(yield t.streamQueue.up);var ir=!Ft||!Ut?!1:t.input.conflictHandler.isEqual(Ft.docData,Ut,"downstream-check-if-equal-0");if(!ir&&Ft&&Ft.docData._rev&&He&&He._meta[t.input.identifier]&&Zi(He._rev)===He._meta[t.input.identifier]&&(ir=!0),He&&Ft&&ir===!1||He&&!Ft)return vi;var Fi=Ut?t.input.conflictHandler.isEqual(Nt,Ut,"downstream-check-if-equal-1"):!1;if(Ut&&Fi)return(!Ft||ir===!1)&&ue.push(yield xa(t,Ut,Ft?Ft.metaDocument:void 0)),vi;var Bt=Object.assign({},Nt,He?{_meta:Pe(He._meta),_attachments:t.hasAttachments&&Nt._attachments?Nt._attachments:{},_rev:_i()}:{_meta:{lwt:Mt()},_rev:_i(),_attachments:t.hasAttachments&&Nt._attachments?Nt._attachments:{}});if(Nt._rev){var qi=He?Zi(He._rev)+1:1;Bt._meta[t.input.identifier]=qi,t.input.keepMeta&&(Bt._rev=Nt._rev)}t.input.keepMeta&&Nt._meta&&(Bt._meta=Nt._meta);var Ne={previous:He,document:Bt};Ne.document._rev=Ne.document._rev?Ne.document._rev:Si(e,Ne.previous),Oe.push(Ne),we[Lt]=Ne,Qe[Lt]=yield xa(t,Nt,Ft?Ft.metaDocument:void 0)})))}).then(()=>R(null,null,function*(){if(Oe.length>0)return t.input.forkInstance.bulkWrite(Oe,yield t.downstreamBulkWriteFlag).then(be=>{var dt=ri(t.primaryPath,Oe,be);dt.forEach(Lt=>{var He=Lt[A];t.events.processed.down.next(we[He]),ue.push(Qe[He])});var jt;if(be.error.forEach(Lt=>{if(Lt.status!==409){var He=ee("RC_PULL",{writeError:Lt});t.events.error.next(He),jt=He}}),jt)throw jt})})).then(()=>{if(ue.length>0)return t.input.metaInstance.bulkWrite(Rs(t,ue),"replication-down-write-meta").then(be=>{be.error.forEach(dt=>{t.events.error.next(ee("RC_PULL",{id:dt.documentId,writeError:dt}))})})}).then(()=>{ba(t,"down",ae)})}).catch(ie=>t.events.error.next(ie)),y}})}function ky(t,r,e){return R(this,null,function*(){var i=t.input.conflictHandler,n=i.isEqual(r.realMasterState,r.newDocumentState,"replication-resolve-conflict");if(!n){var o=yield i.resolve(r,"replication-resolve-conflict"),c=Object.assign({},o,{_meta:Pe(e._meta),_rev:_i(),_attachments:Pe(e._attachments)});return c._meta.lwt=Mt(),c._rev=Si(yield t.checkpointKey,e),c}})}function Iy(t,r,e,i){return R(this,null,function*(){if(!e._attachments||i&&!i._attachments)throw new Error("_attachments missing");var n=e[t],o=new Set(i&&i._attachments?Object.keys(i._attachments):[]);return yield Promise.all(Object.entries(e._attachments).map(h=>R(null,[h],function*([c,d]){if((!o.has(c)||i&&me(i._attachments)[c].digest!==d.digest)&&!d.data){var g=yield r.getAttachmentData(n,c,d.digest);d.data=g}}))),e})}function Ey(t){return R(this,null,function*(){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var r=yield ya(t,"up");r||(yield ba(t,"up",t.input.initialCheckpoint.upstream))}var e=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>f().then(()=>y()));var i=0,n=-1,o=[],c=Ai,d={docs:{}},h=t.input.forkInstance.changeStream().subscribe(C=>{if(!t.events.paused.getValue())return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,o.push({task:C,time:i++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>y()):y()}),g=e.masterChangeStream$.pipe(Ae(C=>C==="RESYNC")).subscribe(()=>{o.push({task:"RESYNC",time:i++}),y()});Kn(t.events.canceled.pipe(Ae(C=>!!C))).then(()=>{h.unsubscribe(),g.unsubscribe()});function f(){return R(this,null,function*(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>ya(t,"up"));for(var C=yield t.checkpointQueue,k=new Set,T=function(){return R(this,null,function*(){n=i++,k.size>3&&(yield Promise.race(Array.from(k)));var ae=yield ov(t.input.forkInstance,t.input.pushBatchSize,C);if(ae.documents.length===0)return 1;C=Pn([C,ae.checkpoint]);var se=D(ae.documents,me(C));k.add(se),se.catch().then(()=>k.delete(se))})};!t.events.canceled.getValue()&&!(yield T()););var A=yield Promise.all(k),ie=A.find(ae=>!!ae);ie?yield f():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}})}function y(){if(t.events.canceled.getValue()||o.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(()=>R(null,null,function*(){for(var C=[],k;o.length>0;){var T=me(o.shift());if(!(T.time<n)){if(T.task==="RESYNC"){t.events.active.up.next(!1),yield f();return}T.task.context!==(yield t.downstreamBulkWriteFlag)&&Ti(C,T.task.events.map(A=>A.documentData)),k=Pn([k,T.task.checkpoint])}}if(yield D(C,k),o.length===0)t.events.active.up.next(!1);else return y()}))}function D(C,k){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,C.forEach(T=>{var A=T[t.primaryPath];d.docs[A]=T}),d.checkpoint=k,c=c.then(()=>R(null,null,function*(){if(t.events.canceled.getValue())return!1;var T=d.docs;d.docs={};var A=d.checkpoint,ie=Object.keys(T);function ae(){return ba(t,"up",A)}if(ie.length===0)return ae(),!1;var se=yield id(t,ie),Oe={},we=[],Qe={},ue={};if(yield Promise.all(ie.map(Ne=>R(null,null,function*(){var bt=T[Ne];ue[Ne]=bt;var Wt=Os(bt,t.hasAttachments,!!t.input.keepMeta),Ge=se[Ne];Ge&&Ge.metaDocument.isResolvedConflict!==bt._rev&&t.input.conflictHandler.isEqual(Ge.docData,Wt,"upstream-check-if-equal")||Ge&&Ge.docData._rev&&Zi(bt._rev)===bt._meta[t.input.identifier]||(we.push(Ne),Oe[Ne]={assumedMasterState:Ge?Ge.docData:void 0,newDocumentState:Wt},Qe[Ne]=yield xa(t,Wt,Ge?Ge.metaDocument:void 0))}))),we.length===0)return ae(),!1;var be=Object.values(Oe),dt=new Set,jt={},Lt=Kg(be,t.input.pushBatchSize);yield Promise.all(Lt.map(Ne=>R(null,null,function*(){t.hasAttachments&&(yield Promise.all(Ne.map(Wt=>R(null,null,function*(){Wt.newDocumentState=yield Iy(t.primaryPath,t.input.forkInstance,Qt(Wt.newDocumentState),Wt.assumedMasterState)}))));var bt=yield e.masterWrite(Ne);bt.forEach(Wt=>{var Ge=Wt[t.primaryPath];dt.add(Ge),jt[Ge]=Wt})})));var He=[];if(we.forEach(Ne=>{dt.has(Ne)||(t.events.processed.up.next(Oe[Ne]),He.push(Qe[Ne]))}),t.events.canceled.getValue())return!1;He.length>0&&(yield t.input.metaInstance.bulkWrite(Rs(t,He),"replication-up-write-meta"));var Ut=!1;if(dt.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var Nt=[],Ft={};if(yield Promise.all(Object.entries(jt).map(([Ne,bt])=>{var Wt=Oe[Ne],Ge={newDocumentState:Wt.newDocumentState,assumedMasterState:Wt.assumedMasterState,realMasterState:bt};return ky(t,Ge,ue[Ne]).then(xt=>R(null,null,function*(){if(xt){t.events.resolvedConflicts.next({input:Ge,output:xt}),Nt.push({previous:ue[Ne],document:xt});var Ei=se[Ne];Ft[Ne]=yield xa(t,me(bt),Ei?Ei.metaDocument:void 0,xt._rev)}}))})),Nt.length>0){Ut=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var ir=yield t.input.forkInstance.bulkWrite(Nt,"replication-up-write-conflict"),Fi;if(ir.error.forEach(Ne=>{if(Ne.status!==409){var bt=ee("RC_PUSH",{writeError:Ne});t.events.error.next(bt),Fi=bt}}),Fi)throw Fi;var Bt=[],qi=ri(t.primaryPath,Nt,ir);qi.forEach(Ne=>{var bt=Ne[t.primaryPath];Bt.push(Ft[bt])}),Bt.length>0&&(yield t.input.metaInstance.bulkWrite(Rs(t,Bt),"replication-up-write-conflict-meta"))}}return ae(),Ut})).catch(T=>(t.events.error.next(T),!1)),c}})}function Dy(t){t=Pe(t),t.forkInstance=th(t.forkInstance),t.metaInstance=th(t.metaInstance);var r=wy(t),e={primaryPath:ei(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:r,downstreamBulkWriteFlag:r.then(i=>"replication-downstream-"+i),events:{canceled:new Zt(!1),paused:new Zt(!1),active:{down:new Zt(!0),up:new Zt(!0)},processed:{down:new J,up:new J},resolvedConflicts:new J,error:new J},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Zt(!1),up:new Zt(!1)},streamQueue:{down:vi,up:vi},checkpointQueue:vi,lastCheckpointDoc:{}};return Sy(e),Ey(e),e}function rd(t){return Kn(uc([t.firstSyncDone.down.pipe(Ae(r=>!!r)),t.firstSyncDone.up.pipe(Ae(r=>!!r))])).then(()=>{})}function ih(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function My(t){return R(this,null,function*(){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),yield t.checkpointQueue})}function Oy(t){return t&&typeof t.then=="function"}var uI=Promise.resolve(!1),Ry=Promise.resolve(!0),Ki=Promise.resolve();function Ir(t,r){return t||(t=0),new Promise(function(e){return setTimeout(function(){return e(r)},t)})}function Py(t,r){return Math.floor(Math.random()*(r-t+1)+t)}function jr(){return Math.random().toString(36).substring(2)}var rh=0;function Hr(){var t=Date.now()*1e3;return t<=rh&&(t=rh+1),rh=t,t}function Ty(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var mI=Hr,hI="native";function pI(t){var r={time:Hr(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return r.bc.onmessage=function(e){r.messagesCallback&&r.messagesCallback(e.data)},r}function fI(t){t.bc.close(),t.subFns=[]}function gI(t,r){try{return t.bc.postMessage(r,!1),Ki}catch(e){return Promise.reject(e)}}function _I(t,r){t.messagesCallback=r}function vI(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function yI(){return 150}var Ay={create:pI,close:fI,onMessage:_I,postMessage:gI,canBeUsed:vI,type:hI,averageResponseTime:yI,microSeconds:mI};function wa(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=JSON.parse(JSON.stringify(t));return typeof r.webWorkerSupport>"u"&&(r.webWorkerSupport=!0),r.idb||(r.idb={}),r.idb.ttl||(r.idb.ttl=1e3*45),r.idb.fallbackInterval||(r.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(r.idb.onclose=t.idb.onclose),r.localstorage||(r.localstorage={}),r.localstorage.removeTimeout||(r.localstorage.removeTimeout=1e3*60),t.methods&&(r.methods=t.methods),r.node||(r.node={}),r.node.ttl||(r.node.ttl=1e3*60*2),r.node.maxParallelWrites||(r.node.maxParallelWrites=2048),typeof r.node.useFastPath>"u"&&(r.node.useFastPath=!0),r}var bI=Hr,xI="pubkey.broadcast-channel-0-",Ur="messages",nd={durability:"relaxed"},wI="idb";function Ly(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function nh(t){t.commit&&t.commit()}function CI(t){var r=Ly(),e=xI+t,i=r.open(e);return i.onupgradeneeded=function(n){var o=n.target.result;o.createObjectStore(Ur,{keyPath:"id",autoIncrement:!0})},new Promise(function(n,o){i.onerror=function(c){return o(c)},i.onsuccess=function(){n(i.result)}})}function SI(t,r,e){var i=Date.now(),n={uuid:r,time:i,data:e},o=t.transaction([Ur],"readwrite",nd);return new Promise(function(c,d){o.oncomplete=function(){return c()},o.onerror=function(g){return d(g)};var h=o.objectStore(Ur);h.add(n),nh(o)})}function kI(t,r){var e=t.transaction(Ur,"readonly",nd),i=e.objectStore(Ur),n=[],o=IDBKeyRange.bound(r+1,1/0);if(i.getAll){var c=i.getAll(o);return new Promise(function(h,g){c.onerror=function(f){return g(f)},c.onsuccess=function(f){h(f.target.result)}})}function d(){try{return o=IDBKeyRange.bound(r+1,1/0),i.openCursor(o)}catch{return i.openCursor()}}return new Promise(function(h,g){var f=d();f.onerror=function(y){return g(y)},f.onsuccess=function(y){var D=y.target.result;D?D.value.id<r+1?D.continue(r+1):(n.push(D.value),D.continue()):(nh(e),h(n))}})}function II(t,r){if(t.closed)return Promise.resolve([]);var e=t.db.transaction(Ur,"readwrite",nd),i=e.objectStore(Ur);return Promise.all(r.map(function(n){var o=i.delete(n);return new Promise(function(c){o.onsuccess=function(){return c()}})}))}function EI(t,r){var e=Date.now()-r,i=t.transaction(Ur,"readonly",nd),n=i.objectStore(Ur),o=[];return new Promise(function(c){n.openCursor().onsuccess=function(d){var h=d.target.result;if(h){var g=h.value;g.time<e?(o.push(g),h.continue()):(nh(i),c(o))}else c(o)}})}function DI(t){return EI(t.db,t.options.idb.ttl).then(function(r){return II(t,r.map(function(e){return e.id}))})}function MI(t,r){return r=wa(r),CI(t).then(function(e){var i={closed:!1,lastCursorId:0,channelName:t,options:r,uuid:jr(),eMIs:new An(r.idb.ttl*2),writeBlockPromise:Ki,messagesCallback:null,readQueuePromises:[],db:e};return e.onclose=function(){i.closed=!0,r.idb.onclose&&r.idb.onclose()},Ny(i),i})}function Ny(t){t.closed||Fy(t).then(function(){return Ir(t.options.idb.fallbackInterval)}).then(function(){return Ny(t)})}function OI(t,r){return!(t.uuid===r.uuid||r.eMIs.has(t.id)||t.data.time<r.messagesCallbackTime)}function Fy(t){return t.closed?Ki:t.messagesCallback?kI(t.db,t.lastCursorId).then(function(r){var e=r.filter(function(i){return!!i}).map(function(i){return i.id>t.lastCursorId&&(t.lastCursorId=i.id),i}).filter(function(i){return OI(i,t)}).sort(function(i,n){return i.time-n.time});return e.forEach(function(i){t.messagesCallback&&(t.eMIs.add(i.id),t.messagesCallback(i.data))}),Ki}):Ki}function RI(t){t.closed=!0,t.db.close()}function PI(t,r){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return SI(t.db,t.uuid,r)}).then(function(){Py(0,10)===0&&DI(t)}),t.writeBlockPromise}function TI(t,r,e){t.messagesCallbackTime=e,t.messagesCallback=r,Fy(t)}function AI(){return!!Ly()}function LI(t){return t.idb.fallbackInterval*2}var By={create:MI,close:RI,onMessage:TI,postMessage:PI,canBeUsed:AI,type:wI,averageResponseTime:LI,microSeconds:bI};var NI=Hr,FI="pubkey.broadcastChannel-",BI="localstorage";function Vy(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function $y(t){return FI+t}function VI(t,r){return new Promise(function(e){Ir().then(function(){var i=$y(t.channelName),n={token:jr(),time:Date.now(),data:r,uuid:t.uuid},o=JSON.stringify(n);Vy().setItem(i,o);var c=document.createEvent("Event");c.initEvent("storage",!0,!0),c.key=i,c.newValue=o,window.dispatchEvent(c),e()})})}function $I(t,r){var e=$y(t),i=function(o){o.key===e&&r(JSON.parse(o.newValue))};return window.addEventListener("storage",i),i}function zI(t){window.removeEventListener("storage",t)}function jI(t,r){if(r=wa(r),!zy())throw new Error("BroadcastChannel: localstorage cannot be used");var e=jr(),i=new An(r.localstorage.removeTimeout),n={channelName:t,uuid:e,eMIs:i};return n.listener=$I(t,function(o){n.messagesCallback&&o.uuid!==e&&(!o.token||i.has(o.token)||o.data.time&&o.data.time<n.messagesCallbackTime||(i.add(o.token),n.messagesCallback(o.data)))}),n}function HI(t){zI(t.listener)}function UI(t,r,e){t.messagesCallbackTime=e,t.messagesCallback=r}function zy(){var t=Vy();if(!t)return!1;try{var r="__broadcastchannel_check";t.setItem(r,"works"),t.removeItem(r)}catch{return!1}return!0}function WI(){var t=120,r=navigator.userAgent.toLowerCase();return r.includes("safari")&&!r.includes("chrome")?t*2:t}var jy={create:jI,close:HI,onMessage:UI,postMessage:VI,canBeUsed:zy,type:BI,averageResponseTime:WI,microSeconds:NI};var Hy=Hr,KI="simulate",oh=new Set;function qI(t){var r={time:Hy(),name:t,messagesCallback:null};return oh.add(r),r}function QI(t){oh.delete(t)}var Uy=5;function XI(t,r){return new Promise(function(e){return setTimeout(function(){var i=Array.from(oh);i.forEach(function(n){n.name===t.name&&n!==t&&n.messagesCallback&&n.time<r.time&&n.messagesCallback(r)}),e()},Uy)})}function YI(t,r){t.messagesCallback=r}function GI(){return!0}function ZI(){return Uy}var Wy={create:qI,close:QI,onMessage:YI,postMessage:XI,canBeUsed:GI,type:KI,averageResponseTime:ZI,microSeconds:Hy};var Ky=[Ay,By,jy];function qy(t){var r=[].concat(t.methods,Ky).filter(Boolean);if(t.type){if(t.type==="simulate")return Wy;var e=r.find(function(n){return n.type===t.type});if(e)return e;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(r=r.filter(function(n){return n.type!=="idb"}));var i=r.find(function(n){return n.canBeUsed()});if(i)return i;throw new Error("No usable method found in "+JSON.stringify(Ky.map(function(n){return n.type})))}var ah=new Set,JI=0,Ps=function(r,e){this.id=JI++,ah.add(this),this.name=r,Qy&&(e=Qy),this.options=wa(e),this.method=qy(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,eE(this)};Ps._pubkey=!0;var Qy;Ps.prototype={postMessage:function(r){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(r));return Xy(this,"message",r)},postInternal:function(r){return Xy(this,"internal",r)},set onmessage(t){var r=this.method.microSeconds(),e={time:r,fn:t};Gy(this,"message",this._onML),t&&typeof t=="function"?(this._onML=e,Yy(this,"message",e)):this._onML=null},addEventListener:function(r,e){var i=this.method.microSeconds(),n={time:i,fn:e};Yy(this,r,n)},removeEventListener:function(r,e){var i=this._addEL[r].find(function(n){return n.fn===e});Gy(this,r,i)},close:function(){var r=this;if(!this.closed){ah.delete(this),this.closed=!0;var e=this._prepP?this._prepP:Ki;return this._onML=null,this._addEL.message=[],e.then(function(){return Promise.all(Array.from(r._uMP))}).then(function(){return Promise.all(r._befC.map(function(i){return i()}))}).then(function(){return r.method.close(r._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Xy(t,r,e){var i=t.method.microSeconds(),n={time:i,type:r,data:e},o=t._prepP?t._prepP:Ki;return o.then(function(){var c=t.method.postMessage(t._state,n);return t._uMP.add(c),c.catch().then(function(){return t._uMP.delete(c)}),c})}function eE(t){var r=t.method.create(t.name,t.options);Oy(r)?(t._prepP=r,r.then(function(e){t._state=e})):t._state=r}function Zy(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function Yy(t,r,e){t._addEL[r].push(e),tE(t)}function Gy(t,r,e){t._addEL[r]=t._addEL[r].filter(function(i){return i!==e}),iE(t)}function tE(t){if(!t._iL&&Zy(t)){var r=function(n){t._addEL[n.type].forEach(function(o){n.time>=o.time&&o.fn(n.data)})},e=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,r,e)}):(t._iL=!0,t.method.onMessage(t._state,r,e))}}function iE(t){if(t._iL&&!Zy(t)){t._iL=!1;var r=t.method.microSeconds();t.method.onMessage(t._state,null,r)}}function Jy(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var r=self.close.bind(self);self.close=function(){return t(),r()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function eb(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(r){return t().then(function(){console.trace(r),process.exit(101)})})}var rE=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",nE=rE?eb:Jy,Ts=new Set,tb=!1;function oE(){tb||(tb=!0,nE(aE))}function ib(t){if(oE(),typeof t!="function")throw new Error("Listener is no function");Ts.add(t);var r={remove:function(){return Ts.delete(t)},run:function(){return Ts.delete(t),t()}};return r}function aE(){var t=[];return Ts.forEach(function(r){t.push(r()),Ts.delete(r)}),Promise.all(t)}function Wr(t,r){var e={context:"leader",action:r,token:t.token};return t.broadcastChannel.postInternal(e)}function od(t){t.isLeader=!0,t._hasLeader=!0;var r=ib(function(){return t.die()});t._unl.push(r);var e=function(n){n.context==="leader"&&n.action==="apply"&&Wr(t,"tell"),n.context==="leader"&&n.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Wr(t,"tell"))};return t.broadcastChannel.addEventListener("internal",e),t._lstns.push(e),Wr(t,"tell")}var sh=function(r,e){var i=this;this.broadcastChannel=r,r._befC.push(function(){return i.die()}),this._options=e,this.isLeader=!1,this.isDead=!1,this.token=jr(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+r.method.type+"||"+r.name};sh.prototype={hasLeader:function(){var r=this;return navigator.locks.query().then(function(e){var i=e.held?e.held.filter(function(n){return n.name===r.lN}):[];return!!(i&&i.length>0)})},awaitLeadership:function(){var r=this;if(!this._wLMP){this._wKMC.c=new AbortController;var e=new Promise(function(i,n){r._wKMC.res=i,r._wKMC.rej=n});this._wLMP=new Promise(function(i){navigator.locks.request(r.lN,{signal:r._wKMC.c.signal},function(){return r._wKMC.c=void 0,od(r),i(),e}).catch(function(){})})}return this._wLMP},set onduplicate(t){},die:function(){var r=this;return this._lstns.forEach(function(e){return r.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Wr(this,"death")}};var rb=function(r,e){var i=this;this.broadcastChannel=r,this._options=e,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=jr(),this._aplQ=Ki,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var n=function(c){c.context==="leader"&&(c.action==="death"&&(i._hasLeader=!1),c.action==="tell"&&(i._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",n),this._lstns.push(n)};rb.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(r){var e=this;if(this.isLeader)return Ir(0,!0);if(this.isDead)return Ir(0,!1);if(this._aplQC>1)return this._aplQ;var i=function(){if(e.isLeader)return Ry;var o=!1,c,d=new Promise(function(f){c=function(){o=!0,f()}}),h=function(y){y.context==="leader"&&y.token!=e.token&&(y.action==="apply"&&y.token>e.token&&c(),y.action==="tell"&&(c(),e._hasLeader=!0))};e.broadcastChannel.addEventListener("internal",h);var g=r?e._options.responseTime*4:e._options.responseTime;return Wr(e,"apply").then(function(){return Promise.race([Ir(g),d.then(function(){return Promise.reject(new Error)})])}).then(function(){return Wr(e,"apply")}).then(function(){return Promise.race([Ir(g),d.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return e.broadcastChannel.removeEventListener("internal",h),o?!1:od(e).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return i()}).then(function(){e._aplQC=e._aplQC-1}),this._aplQ.then(function(){return e.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=sE(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var r=this;return this._lstns.forEach(function(e){return r.broadcastChannel.removeEventListener("internal",e)}),this._lstns=[],this._unl.forEach(function(e){return e.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Wr(this,"death")}};function sE(t){return t.isLeader?Ki:new Promise(function(r){var e=!1;function i(){e||(e=!0,t.broadcastChannel.removeEventListener("internal",o),r(!0))}t.applyOnce().then(function(){t.isLeader&&i()});var n=function(){return Ir(t._options.fallbackInterval).then(function(){if(!(t.isDead||e))if(t.isLeader)i();else return t.applyOnce(!0).then(function(){t.isLeader?i():n()})})};n();var o=function(d){d.context==="leader"&&d.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&i()}))};t.broadcastChannel.addEventListener("internal",o),t._lstns.push(o)})}function cE(t,r){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=r.method.averageResponseTime(r.options)),t}function ch(t,r){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");r=cE(r,t);var e=Ty()?new sh(t,r):new rb(t,r);return t._befC.push(function(){return e.die()}),t._leaderElector=e,e}var ad=new Map;function lh(t,r,e,i){var n=ad.get(r);return n||(n={bc:new Ps(["RxDB:",t,e].join("|")),refs:new Set},ad.set(r,n)),n.refs.add(i),n.bc}function sd(t,r){var e=ad.get(t);if(e&&(e.refs.delete(r),e.refs.size===0))return ad.delete(t),e.bc.close()}function nb(t,r,e,i){if(r.multiInstance){var n=i||lh(t,r.databaseInstanceToken,e.databaseName,e),o=new J,c=D=>{D.storageName===t&&D.databaseName===r.databaseName&&D.collectionName===r.collectionName&&D.version===r.schema.version&&o.next(D.eventBulk)};n.addEventListener("message",c);var d=e.changeStream(),h=!1,g=d.subscribe(D=>{h||n.postMessage({storageName:t,databaseName:r.databaseName,collectionName:r.collectionName,version:r.schema.version,eventBulk:D})});e.changeStream=function(){return o.asObservable().pipe(yp(d))};var f=e.close.bind(e);e.close=function(){return R(this,null,function*(){return h=!0,g.unsubscribe(),n.removeEventListener("message",c),i||(yield sd(r.databaseInstanceToken,e)),f()})};var y=e.remove.bind(e);e.remove=function(){return R(this,null,function*(){return h=!0,g.unsubscribe(),n.removeEventListener("message",c),i||(yield sd(r.databaseInstanceToken,e)),y()})}}}var cd=ox(ob(),1),ab=Symbol.for("Dexie"),As=globalThis[ab]||(globalThis[ab]=cd.default);if(cd.default.semVer!==As.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${cd.default.semVer} and ${As.semVer}`);var{liveQuery:uG,mergeRanges:mG,rangesOverlap:hG,RangeSet:pG,cmp:fG,Entity:gG,PropModSymbol:_G,PropModification:vG,replacePrefix:yG,add:bG,remove:xG}=As;var Ls="docs",lE="changes",sb="attachments",dd="dexie",cb=new Map,ld=new Map;function lb(t,r,e,i){var n="rxdb-dexie-"+t+"--"+i.version+"--"+r,o=zt(cb,n,()=>{var c=R(null,null,function*(){var d=Pe(e);d.autoOpen=!1;var h=new As(n,d);e.onCreate&&(yield e.onCreate(h,n));var g={[Ls]:dE(i),[lE]:"++sequence, id",[sb]:"id"};return h.version(1).stores(g),yield h.open(),{dexieDb:h,dexieTable:h[Ls],dexieAttachmentsTable:h[sb],booleanIndexes:uE(i)}});return cb.set(n,o),ld.set(o,0),c});return o}function db(t){return R(this,null,function*(){var r=yield t,e=ld.get(t),i=e-1;i===0?(r.dexieDb.close(),ld.delete(t)):ld.set(t,i)})}var mh="__";function go(t){var r=t.split(".");if(r.length>1)return r.map(i=>go(i)).join(".");if(t.startsWith("|")){var e=t.substring(1);return mh+e}else return t}function ub(t){var r=t.split(".");if(r.length>1)return r.map(i=>ub(i)).join(".");if(t.startsWith(mh)){var e=t.substring(mh.length);return"|"+e}else return t}function mb(t,r){if(!r)return r;var e=Pe(r);return e=hh(e),t.forEach(i=>{var n=Fr(r,i),o=n?"1":"0",c=go(i);am(e,c,o)}),e}function fh(t,r){return r&&(r=Pe(r),r=ph(r),t.forEach(e=>{var i=Fr(r,e),n=i==="1";am(r,e,n)}),r)}function hh(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(e=>hh(e));if(typeof t=="object"){var r={};return Object.entries(t).forEach(([e,i])=>{typeof i=="object"&&(i=hh(i)),r[go(e)]=i}),r}}function ph(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(e=>ph(e));if(typeof t=="object"){var r={};return Object.entries(t).forEach(([e,i])=>{(typeof i=="object"||Array.isArray(t))&&(i=ph(i)),r[ub(e)]=i}),r}}function dE(t){var r=[],e=ei(t.primaryKey);r.push([e]),r.push(["_deleted",e]),t.indexes&&t.indexes.forEach(o=>{var c=Cn(o);r.push(c)}),r.push(["_meta.lwt",e]),r.push(["_meta.lwt"]),r=r.map(o=>o.map(c=>go(c)));var i=r.map(o=>o.length===1?o[0]:"["+o.join("+")+"]");i=i.filter((o,c,d)=>d.indexOf(o)===c);var n=i.join(", ");return n}function gh(t,r){return R(this,null,function*(){var e=yield t,i=yield e.dexieTable.bulkGet(r);return i.map(n=>fh(e.booleanIndexes,n))})}function Ns(t,r){return t+"||"+r}function uE(t){var r=new Set,e=[];return t.indexes?(t.indexes.forEach(i=>{var n=Cn(i);n.forEach(o=>{if(!r.has(o)){r.add(o);var c=Sr(t,o);c.type==="boolean"&&e.push(o)}})}),e.push("_deleted"),Qg(e)):e}function hb(t){return t===ho?-1/0:t}function pb(t,r,e){if(t.includes(r)){var i=e===mo||e===!0?"1":"0";return i}else return e}function fb(t,r,e){if(!e){if(typeof window>"u")throw new Error("IDBKeyRange missing");e=window.IDBKeyRange}var i=r.startKeys.map((c,d)=>{var h=r.index[d];return pb(t,h,c)}).map(hb),n=r.endKeys.map((c,d)=>{var h=r.index[d];return pb(t,h,c)}).map(hb),o=e.bound(i,n,!r.inclusiveStart,!r.inclusiveEnd);return o}function _h(t,r){return R(this,null,function*(){var e=yield t.internals,i=r.query,n=i.skip?i.skip:0,o=i.limit?i.limit:1/0,c=n+o,d=r.queryPlan,h=!1;d.selectorSatisfiedByIndex||(h=ha(t.schema,r.query));var g=fb(e.booleanIndexes,d,e.dexieDb._options.IDBKeyRange),f=d.index,y=[];if(yield e.dexieDb.transaction("r",e.dexieTable,C=>R(null,null,function*(){var k=C.idbtrans,T=k.objectStore(Ls),A,ie;ie="["+f.map(se=>go(se)).join("+")+"]",A=T.index(ie);var ae=A.openCursor(g);yield new Promise(se=>{ae.onsuccess=function(Oe){var we=Oe.target.result;if(we){var Qe=fh(e.booleanIndexes,we.value);(!h||h(Qe))&&y.push(Qe),d.sortSatisfiedByIndex&&y.length===c?se():we.continue()}else se()}})})),!d.sortSatisfiedByIndex){var D=Hl(t.schema,r.query);y=y.sort(D)}return y=y.slice(n,c),{documents:y}})}function gb(t,r){return R(this,null,function*(){var e=yield t.internals,i=r.queryPlan,n=i.index,o=fb(e.booleanIndexes,i,e.dexieDb._options.IDBKeyRange),c=-1;return yield e.dexieDb.transaction("r",e.dexieTable,d=>R(null,null,function*(){var h=d.idbtrans,g=h.objectStore(Ls),f,y;y="["+n.map(C=>go(C)).join("+")+"]",f=g.index(y);var D=f.count(o);c=yield new Promise((C,k)=>{D.onsuccess=function(){C(D.result)},D.onerror=T=>k(T)})})),c})}var mE=Mt(),vh=!1,hE=(function(){function t(e,i,n,o,c,d,h,g){this.changes$=new J,this.instanceId=mE++,this.storage=e,this.databaseName=i,this.collectionName=n,this.schema=o,this.internals=c,this.options=d,this.settings=h,this.devMode=g,this.primaryPath=ei(this.schema.primaryKey)}var r=t.prototype;return r.bulkWrite=function(i,n){return R(this,null,function*(){_o(this),!vh&&!(yield gl())&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),vh=!0,i.forEach(f=>{if(!f.document._rev||f.previous&&!f.previous._rev)throw ee("SNH",{args:{row:f}})});var o=yield this.internals,c={error:[]};this.devMode&&(i=i.map(f=>{var y=zr(f.document);return{previous:f.previous,document:y}}));var d=i.map(f=>f.document[this.primaryPath]),h;if(yield o.dexieDb.transaction("rw",o.dexieTable,o.dexieAttachmentsTable,()=>R(this,null,function*(){var f=new Map,y=yield gh(this.internals,d);y.forEach(k=>{var T=k;return T&&f.set(T[this.primaryPath],T),T}),h=rv(this,this.primaryPath,f,i,n),c.error=h.errors;var D=[];h.bulkInsertDocs.forEach(k=>{D.push(k.document)}),h.bulkUpdateDocs.forEach(k=>{D.push(k.document)}),D=D.map(k=>mb(o.booleanIndexes,k)),D.length>0&&(yield o.dexieTable.bulkPut(D));var C=[];h.attachmentsAdd.forEach(k=>{C.push({id:Ns(k.documentId,k.attachmentId),data:k.attachmentData.data})}),h.attachmentsUpdate.forEach(k=>{C.push({id:Ns(k.documentId,k.attachmentId),data:k.attachmentData.data})}),yield o.dexieAttachmentsTable.bulkPut(C),yield o.dexieAttachmentsTable.bulkDelete(h.attachmentsRemove.map(k=>Ns(k.documentId,k.attachmentId)))})),h=me(h),h.eventBulk.events.length>0){var g=me(h.newestRow).document;h.eventBulk.checkpoint={id:g[this.primaryPath],lwt:g._meta.lwt},this.changes$.next(h.eventBulk)}return c})},r.findDocumentsById=function(i,n){return R(this,null,function*(){_o(this);var o=yield this.internals,c=[];return yield o.dexieDb.transaction("r",o.dexieTable,()=>R(this,null,function*(){var d=yield gh(this.internals,i);d.forEach(h=>{h&&(!h._deleted||n)&&c.push(h)})})),c})},r.query=function(i){return _o(this),_h(this,i)},r.count=function(i){return R(this,null,function*(){if(i.queryPlan.selectorSatisfiedByIndex){var n=yield gb(this,i);return{count:n,mode:"fast"}}else{var o=yield _h(this,i);return{count:o.documents.length,mode:"slow"}}})},r.changeStream=function(){return _o(this),this.changes$.asObservable()},r.cleanup=function(i){return R(this,null,function*(){_o(this);var n=yield this.internals;return yield n.dexieDb.transaction("rw",n.dexieTable,()=>R(this,null,function*(){var o=Mt()-i,c=yield n.dexieTable.where("_meta.lwt").below(o).toArray(),d=[];c.forEach(h=>{h._deleted==="1"&&d.push(h[this.primaryPath])}),yield n.dexieTable.bulkDelete(d)})),!0})},r.getAttachmentData=function(i,n,o){return R(this,null,function*(){_o(this);var c=yield this.internals,d=Ns(i,n);return yield c.dexieDb.transaction("r",c.dexieAttachmentsTable,()=>R(this,null,function*(){var h=yield c.dexieAttachmentsTable.get(d);if(h)return h.data;throw new Error("attachment missing documentId: "+i+" attachmentId: "+n)}))})},r.remove=function(){return R(this,null,function*(){_o(this);var i=yield this.internals;return yield i.dexieTable.clear(),this.close()})},r.close=function(){return this.closed?this.closed:(this.closed=R(this,null,function*(){this.changes$.complete(),yield db(this.internals)}),this.closed)},t})();function _b(t,r,e){return R(this,null,function*(){var i=lb(r.databaseName,r.collectionName,e,r.schema),n=new hE(t,r.databaseName,r.collectionName,r.schema,i,r.options,e,r.devMode);return yield nb(dd,r,n),Promise.resolve(n)})}function _o(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var pE=(function(){function t(e){this.name=dd,this.rxdbVersion=ms,this.settings=e}var r=t.prototype;return r.createStorageInstance=function(i){if(nv(i),i.schema.indexes){var n=i.schema.indexes.flat();n.filter(o=>!o.includes(".")).forEach(o=>{if(!i.schema.required||!i.schema.required.includes(o))throw ee("DXE1",{field:o,schema:i.schema})})}return _b(this,i,this.settings)},t})();function yh(t={}){var r=new pE(t);return r}var yb=new WeakMap,fE=new WeakMap;function vb(t){return zt(fE,t,()=>ch(t))}function gE(){var t=lh(this.storage.name,this.token,this.name,this),r=this.close.bind(this);this.close=function(){return sd(this.token,this),r()};var e=vb(t);return e||(e=vb(t),yb.set(this,e)),this.leaderElector=()=>e,e}function _E(){return this.multiInstance?this.leaderElector().isLeader:!0}function vE(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):us}function yE(t){var r=yb.get(t);r&&r.die()}var bE=!0,xE={RxDatabase:t=>{t.leaderElector=gE,t.isLeader=_E,t.waitForLeadership=vE}},bb={name:"leader-election",rxdb:bE,prototypes:xE,hooks:{preCloseRxDatabase:{after:yE}}};var bh=t=>Promise.resolve(t);function xh(t,r){if(t==="_deleted")return r;r=Pe(r);var e=!!r._deleted;return r[t]=e,delete r._deleted,r}function ud(t,r,e){return e.map(i=>{var n=Pe(i);if(r!=="_deleted"){var o=!!n[r];n._deleted=o,delete n[r]}else n._deleted=!!n._deleted;var c=t.schema.primaryPath;return n[c]=ji(t.schema.jsonSchema,n),n})}function wh(t,r){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(r);var e,i=new Promise(n=>{e=()=>{window.removeEventListener("online",e),n()},window.addEventListener("online",e)});return Promise.race([i,t.promiseWait(r)]).then(()=>{window.removeEventListener("online",e)})}function xb(t){function r(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var i=new Event("mousemove");document.dispatchEvent(i)}}var e=setInterval(r,20*1e3);t.onCancel.push(()=>clearInterval(e))}var wE=new WeakMap,CE=(function(){function t(e,i,n,o,c,d,h,g,f){this.subs=[],this.subjects={received:new J,sent:new J,error:new J,canceled:new Zt(!1),active:new Zt(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=vi,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new J,this.replicationIdentifier=e,this.collection=i,this.deletedField=n,this.pull=o,this.push=c,this.live=d,this.retryTime=h,this.autoStart=g,this.toggleOnDocumentVisible=f,this.metaInfoPromise=R(this,null,function*(){var C="rx-replication-meta-"+(yield i.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-"))),k=Cy(this.collection.schema.jsonSchema,Pm(this.collection.schema.jsonSchema));return{collectionName:C,schema:k}});var y=zt(wE,i,()=>[]);y.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(C=>{Object.defineProperty(this,C+"$",{get:function(){return this.subjects[C].asObservable()}})});var D=new Promise(C=>{this.callOnStart=C});this.startPromise=D}var r=t.prototype;return r.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},r._start=function(){return R(this,null,function*(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||xb(this);var i=this.pull&&this.pull.modifier?this.pull.modifier:bh,n=this.push&&this.push.modifier?this.push.modifier:bh,o=this.collection.database,c=yield this.metaInfoPromise,[d]=yield Promise.all([this.collection.database.storage.createStorageInstance({databaseName:o.name,collectionName:c.collectionName,databaseInstanceToken:o.token,multiInstance:o.multiInstance,options:{},schema:c.schema,password:o.password,devMode:et.isDevMode()}),ny(this.collection,c.collectionName,c.schema)]);this.metaInstance=d,this.internalReplicationState=Dy({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:o.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(Ae(h=>!!this.pull),or(h=>R(this,null,function*(){if(h==="RESYNC")return h;var g=Pe(h);return g.documents=ud(this.collection,this.deletedField,g.documents),g.documents=yield Promise.all(g.documents.map(f=>i(f))),g}))),masterChangesSince:(h,g)=>R(this,null,function*(){if(!this.pull)return{checkpoint:null,documents:[]};for(var f=!1,y={};!f&&!this.isStoppedOrPaused();)try{y=yield this.pull.handler(h,g),f=!0}catch(k){var D=ee("RC_PULL",{checkpoint:h,errors:Cn(k).map(T=>sm(T)),direction:"pull"});this.subjects.error.next(D),yield wh(this.collection,me(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var C=Pe(y);return C.documents=ud(this.collection,this.deletedField,C.documents),C.documents=yield Promise.all(C.documents.map(k=>i(k))),C}),masterWrite:h=>R(this,null,function*(){if(!this.push)return[];var g=!1;yield cr("preReplicationMasterWrite",{rows:h,collection:this.collection});var f=yield Promise.all(h.map(T=>R(this,null,function*(){return T.newDocumentState=yield n(T.newDocumentState),T.newDocumentState===null?null:(T.assumedMasterState&&(T.assumedMasterState=yield n(T.assumedMasterState)),this.deletedField!=="_deleted"&&(T.newDocumentState=xh(this.deletedField,T.newDocumentState),T.assumedMasterState&&(T.assumedMasterState=xh(this.deletedField,T.assumedMasterState))),T)}))),y=f.filter(qg),D=null;for(y.length===0&&(g=!0,D=[]);!g&&!this.isStoppedOrPaused();)try{if(D=yield this.push.handler(y),!Array.isArray(D))throw ee("RC_PUSH_NO_AR",{pushRows:h,direction:"push",args:{result:D}});g=!0}catch(T){var C=T.rxdb?T:ee("RC_PUSH",{pushRows:h,errors:Cn(T).map(A=>sm(A)),direction:"push"});this.subjects.error.next(C),yield wh(this.collection,me(this.retryTime))}if(this.isStoppedOrPaused())return[];yield cr("preReplicationMasterWriteDocumentsHandle",{result:D,collection:this.collection});var k=ud(this.collection,this.deletedField,me(D));return k})}}),this.subs.push(this.internalReplicationState.events.error.subscribe(h=>{this.subjects.error.next(h)}),this.internalReplicationState.events.processed.down.subscribe(h=>this.subjects.received.next(h.document)),this.internalReplicationState.events.processed.up.subscribe(h=>{this.subjects.sent.next(h.newDocumentState)}),uc([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([h,g])=>{var f=h||g;this.subjects.active.next(f)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:h=>{this.isStoppedOrPaused()||this.remoteEvents$.next(h)},error:h=>{this.subjects.error.next(h)}})),this.live||(yield rd(this.internalReplicationState),yield ih(this.internalReplicationState),yield this._cancel()),this.callOnStart()}})},r.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},r.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},r.isStopped=function(){return!!this.subjects.canceled.getValue()},r.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},r.awaitInitialReplication=function(){return R(this,null,function*(){return yield this.startPromise,rd(me(this.internalReplicationState))})},r.awaitInSync=function(){return R(this,null,function*(){yield this.startPromise,yield rd(me(this.internalReplicationState));for(var i=2;i>0;)i--,yield this.collection.database.requestIdlePromise(),yield ih(me(this.internalReplicationState));return!0})},r.reSync=function(){this.remoteEvents$.next("RESYNC")},r.emitEvent=function(i){this.remoteEvents$.next(i)},r.cancel=function(){return R(this,null,function*(){this.startQueue=this.startQueue.catch(()=>{}).then(()=>R(this,null,function*(){yield this._cancel()})),yield this.startQueue})},r._cancel=function(i=!1){return R(this,null,function*(){if(this.isStopped())return Ai;var n=this.onCancel.map(o=>o_(o()));return this.internalReplicationState&&(yield My(this.internalReplicationState)),this.metaInstance&&!i&&n.push(me(this.internalReplicationState).checkpointQueue.then(()=>me(this.metaInstance).close())),this.subs.forEach(o=>o.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(n)})},r.remove=function(){return R(this,null,function*(){return this.startQueue=this.startQueue.then(()=>R(this,null,function*(){var i=yield this.metaInfoPromise;yield this._cancel(!0),yield me(this.internalReplicationState).checkpointQueue.then(()=>me(this.metaInstance).remove()),yield oy(this.collection,i.collectionName,i.schema)})),this.startQueue})},t})();function wb({replicationIdentifier:t,collection:r,deletedField:e="_deleted",pull:i,push:n,live:o=!0,retryTime:c=1e3*5,waitForLeadership:d=!0,autoStart:h=!0,toggleOnDocumentVisible:g=!1}){if(td(bb),!i&&!n)throw ee("UT3",{collection:r.name,args:{replicationIdentifier:t}});var f=new CE(t,r,e,i,n,o,c,h,g);if(g&&typeof document<"u"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"){var y=()=>{if(!f.isStopped()){var D=document.visibilityState==="visible";D?f.start():r.database.isLeader()||f.pause()}};document.addEventListener("visibilitychange",y),f.onCancel.push(()=>document.removeEventListener("visibilitychange",y))}return SE(d,f),f}function SE(t,r){var e=t&&r.collection.database.multiInstance,i=e?r.collection.database.waitForLeadership():us;return i.then(()=>{r.isStopped()||r.autoStart&&r.start()})}var md={};dc(md,{$addToSet:()=>IE,$bit:()=>DE,$currentDate:()=>ME,$inc:()=>OE,$max:()=>RE,$min:()=>PE,$mul:()=>TE,$pop:()=>AE,$pull:()=>Sh,$pullAll:()=>LE,$push:()=>FE,$rename:()=>BE,$set:()=>kh,$unset:()=>VE});var Ch={};dc(Ch,{$all:()=>vk,$and:()=>xm,$bitsAllClear:()=>Cb,$bitsAllSet:()=>Sb,$bitsAnyClear:()=>kb,$bitsAnySet:()=>Ib,$elemMatch:()=>Im,$eq:()=>Ll,$exists:()=>Dm,$expr:()=>fk,$gt:()=>Nl,$gte:()=>Fl,$in:()=>Bl,$jsonSchema:()=>gk,$lt:()=>Vl,$lte:()=>$l,$mod:()=>Sm,$ne:()=>zl,$nin:()=>jl,$nor:()=>wm,$not:()=>Cm,$or:()=>Cs,$regex:()=>km,$size:()=>Em,$type:()=>Mm,$where:()=>_k});var Ln=t=>it((r,e,i)=>{let n=0;if(Q(e))for(let o of e)n=n|1<<o;else n=e;return t(r&n,n)});var Cb=Ln((t,r)=>t==0);var Sb=Ln((t,r)=>t==r);var kb=Ln((t,r)=>t<r);var Ib=Ln((t,r)=>t>0);var rt={cloneMode:"copy",queryOptions:fo({context:Mn.init().addQueryOps(Ch).addExpressionOps(ym).addExpressionOps(bm)})},Ca=(t,r)=>{switch(t){case"deep":return lr(r);case"copy":return ci(r)?new Date(r):Q(r)?[...r]:Ie(r)?de({},r):er(r)?new RegExp(r):r;default:return r}},kE=/^[a-z]+[a-zA-Z0-9]*$/;function Eb(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];let r=t.indexOf(".$"),e=t.indexOf("]"),i=t.substring(0,r),n=t.substring(r+3,e);W(n===""||kE.test(n),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let o=t.substring(e+2),[c,d]=o?Eb(o):[];return[{selector:t,parent:i,child:n||"$",next:c},[n,...d||[]].filter(Boolean)]}var mt=(t,r,e,i,n)=>{let{parent:o,child:c,next:d}=r;if(!c){let g=!1;return ca(t,o,(y,D)=>g=!!i(y,D)||g,n),g}let h=At(t,o);return Q(h)?h.map((g,f)=>e[c]&&!e[c].test({[c]:g})?!1:d?mt(g,d,e,i,n):i(h,f)).some(Boolean):!1};function _t(t,r,e,i){let n=[];for(let[o,c]of Object.entries(t)){let[d,h]=Eb(o);if(!h.length)i(c,d,{})&&n.push(d.parent);else{let g={};r.forEach(y=>{Object.keys(y).forEach(D=>{h.forEach(C=>{(D===C||D.startsWith(C+"."))&&(g[C]=g[C]||{},Object.assign(g[C],{[D]:y[D]}))})})});let f={};for(let[y,D]of Object.entries(g))f[y]=new Yt(D,e.queryOptions);i(c,d,f)&&n.push(d.parent)}}return n}var IE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>{let d={$each:[n]};return Ie(n)&&Tt(n,"$each")&&Object.assign(d,n),mt(t,o,c,(h,g)=>{let f=h[g]||=[];return fs([f,d.$each]).length===d.$each.length?!1:(h[g]=Ca(i.cloneMode,wl(f.concat(d.$each))),!0)},{buildGraph:!0})});var EE=new Set(["and","or","xor"]),DE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>{let d=Object.keys(n);return W(d.length===1&&EE.has(d[0]),`Invalid bit operator '${d[0]}'. Must be one of 'and', 'or', or 'xor'.`),mt(t,o,c,(h,g)=>{let f=h[g],y=n[d[0]];if(f!==void 0&&!(_e(f)&&_e(y)))return!1;switch(f=f||0,d[0]){case"and":h[g]=f&y;break;case"or":h[g]=f|y;break;case"xor":h[g]=f^y;break}return h[g]!==f},{buildGraph:!0})});var ME=(t,r,e=[],i=rt)=>{let n=Date.now();return _t(r,e,i,(o,c,d)=>mt(t,c,d,(h,g)=>(h[g]=n,!0),{buildGraph:!0}))};var OE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>{if(!o.child){let d=At(t,o.parent);W(d===void 0||_e(d),"cannot apply $inc to a value of non-numeric type")}return mt(t,o,c,(d,h)=>(d[h]=(d[h]||=0)+n,!0),{buildGraph:!0})});var RE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>mt(t,o,c,(d,h)=>d[h]!==void 0&&ft(d[h],n)>-1?!1:(d[h]=n,!0),{buildGraph:!0}));var PE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>mt(t,o,c,(d,h)=>d[h]!==void 0&&ft(d[h],n)<1?!1:(d[h]=n,!0),{buildGraph:!0}));var TE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>mt(t,o,c,(d,h)=>{let g=d[h];return d[h]=d[h]===void 0?0:d[h]*n,d[h]!==g},{buildGraph:!0}));var AE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>mt(t,o,c,(d,h)=>{let g=d[h];return W(Q(g),`path '${o.selector}' contains an element of non-array type.`),g.length?(n===-1?g.splice(0,1):g.pop(),!0):!1}));var Sh=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>{let d=!Ie(n)||Object.keys(n).some(Li),h=new Yt(d?{k:n}:n,i.queryOptions),g=d?f=>h.test({k:f}):f=>h.test(f);return mt(t,o,c,(f,y)=>{let D=f[y],C=new Array;return D.map(T=>{let A=g(T);return A||C.push(T),A}).some(Boolean)?(f[y]=C,!0):!1})});var LE=(t,r,e=[],i=rt)=>{let n={};return Object.entries(r).forEach(([o,c])=>{n[o]={$in:c}}),Sh(t,n,e,i)};var NE=Object.freeze(["$each","$slice","$sort","$position"]),FE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>{let d={$each:[n]};return Ie(n)&&NE.some(h=>Tt(n,h))&&Object.assign(d,n),mt(t,o,c,(h,g)=>{let f=h[g]||=[],y=f.slice(0,d.$slice||f.length),D=f.length,C=_e(d.$position)?d.$position:f.length;if(f.splice(C,0,...Ca(i.cloneMode,d.$each)),d.$sort){let k=Ie(d.$sort)?Object.keys(d.$sort||{}).pop():"",T=k?d.$sort[k]:d.$sort,A=k?ie=>At(ie,k):ie=>ie;f.sort((ie,ae)=>T*ft(A(ie),A(ae)))}return _e(d.$slice)&&(d.$slice<0?f.splice(0,f.length+d.$slice):f.splice(d.$slice)),D!=f.length||!Xt(y,f)},{descendArray:!0,buildGraph:!0})});var kh=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>mt(t,o,c,(d,h)=>Xt(d[h],n)?!1:(d[h]=Ca(i.cloneMode,n),!0),{buildGraph:!0}));var BE=(t,r,e=[],i=rt)=>{let n=[],o=_t(r,e,i,(c,d,h)=>mt(t,d,h,(g,f)=>Tt(g,f)?(n.push(...kh(t,{[c]:g[f]},e,i)),delete g[f],!0):!1));return Array.from(new Set(o.concat(n)))};var VE=(t,r,e=[],i=rt)=>_t(r,e,i,(n,o,c)=>mt(t,o,c,(d,h)=>Tt(d,h)?(Q(d)?d[h]=null:delete d[h],!0):!1));function Ih(t){return t=t??rt,(r,e,i=[],n={},o=t)=>{let c=Object.entries(e);W(c.length===1,"Update expression must contain only one operator.");let[d,h]=c[0];W(Tt(md,d),`Update operator '${d}' is not supported.`);let g=md[d];return Object.keys(n).length&&!new Yt(n,o.queryOptions).test(r)?[]:g(r,h,i,o)}}var qJ=Ih();var Eh;function Dh(t,r){if(!Eh){var e=Ih({cloneMode:"none"});Eh=(i,n)=>{var o=Qt(i);return e(o,n),o}}return Eh(t,r)}function $E(t){return this.incrementalModify(r=>{var e=Dh(r,t);return e})}function zE(t){var r=this._data,e=Dh(r,t);return this._saveData(e,r)}function jE(t){return R(this,null,function*(){return Rn(this.asRxQuery,r=>r.update(t))})}var Db={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=zE,t.incrementalUpdate=$E},RxQuery:t=>{t.update=jE}}};var Mb={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},listName:{type:"string",maxLength:200},items:{type:"array",items:{type:"string"}},sortedItems:{type:"array",items:{type:"string"}},tieredItems:{type:"array",items:{type:"object",properties:{tier:{type:"string"},items:{type:"array",items:{type:"string"}}},required:["tier","items"]}},completed:{type:"boolean"},createdAt:{type:"number"},completedAt:{type:"number"},userId:{type:"string",maxLength:100},updatedAt:{type:"number"}},required:["id","listName","items","completed","createdAt","userId","updatedAt"],indexes:["createdAt","userId","updatedAt"]};td(Db);var hd=class t{db=null;replicationState=null;isBrowser;dbReady;authService;syncStatusSubject=new Zt({isSetup:!1,isActive:!1});constructor(){let r=x(xp);this.authService=x(yc),this.isBrowser=Bp(r),this.isBrowser?this.dbReady=this.initDatabase():this.dbReady=Promise.resolve(),this.isBrowser&&this.authService.currentUser$.subscribe(e=>{e?this.setupSync():this.cancelSync()})}initDatabase(){return R(this,null,function*(){try{console.log("Starting RxDB initialization...");let r="list-sorter-db",e=yh();try{console.log("Creating RxDB database:",r),this.db=yield Jm({name:r,storage:e,multiInstance:!1,ignoreDuplicate:!1}),console.log("Database created successfully")}catch(n){if(n.code==="DB9"||n.parameters?.database===r)console.log("Database already exists, removing and recreating..."),yield ed(r,e),this.db=yield Jm({name:r,storage:e,multiInstance:!1,ignoreDuplicate:!1}),console.log("Database recreated successfully");else throw n}console.log("Adding collections..."),yield this.db.addCollections({lists:{schema:Mb}}),console.log("Collections added successfully"),console.log("RxDB initialized and ready. Database:",this.db),console.log("Database name:",this.db.name),console.log("Collections:",Object.keys(this.db.collections));let i=yield this.db.lists.find().exec();console.log("Test query result - existing documents:",i.length),this.setupSyncInternal()}catch(r){throw console.error("Error initializing RxDB:",r),r}})}ensureReady(){return R(this,null,function*(){console.log("ensureReady: waiting for dbReady promise...");try{yield this.dbReady,console.log("ensureReady: dbReady promise resolved")}catch(r){throw console.error("ensureReady: dbReady promise rejected:",r),r}})}setupSync(){return R(this,null,function*(){yield this.ensureReady(),this.setupSyncInternal()})}setupSyncInternal(){return R(this,null,function*(){if(!this.db||!this.isBrowser)return;let r=this.authService.currentUserValue;if(r)try{let n,o,e=yield this.migrateLocalListsToUser(r.userId);e>0&&console.log(`Migrated ${e} local lists to user account`),this.cancelSync();let i=yield this.authService.getAppwriteConfig();if(!i){console.error("Failed to get AppWrite configuration");return}console.log("Setting up RxDB replication with AppWrite"),this.replicationState=wb({collection:this.db.lists,replicationIdentifier:"appwrite-lists-replication",live:!0,retryTime:5e3,autoStart:!0,pull:{handler(c,d){return R(this,null,function*(){let h=c||0;try{let g=yield i.pullHandler(h,d);return{documents:g.map(f=>Be(de({},f),{_deleted:!1})),checkpoint:g.length>0?Math.max(...g.map(f=>f.updatedAt)):h}}catch(g){return console.error("Pull replication error:",g),{documents:[],checkpoint:h}}})},batchSize:20},push:{handler(c){return R(this,null,function*(){try{return yield i.pushHandler(c),[]}catch(d){throw console.error("Push replication error:",d),d}})},batchSize:20}}),this.replicationState.error$.subscribe(c=>{console.error("Replication error:",c)}),this.replicationState.active$.subscribe(c=>{console.log("Replication active:",c),this.updateSyncStatus()}),this.updateSyncStatus(),console.log("Replication setup complete")}catch(e){console.error("Error setting up sync:",e)}})}cancelSync(){this.replicationState&&(console.log("Cancelling replication"),this.replicationState.cancel(),this.replicationState=null),this.updateSyncStatus()}updateSyncStatus(){this.syncStatusSubject.next({isSetup:!!this.replicationState,isActive:!!this.replicationState&&!!this.authService.currentUserValue})}forceSyncNow(){return R(this,null,function*(){if(!this.replicationState||!this.isBrowser){console.log("Cannot force sync: replication not active");return}try{console.log("Forcing immediate sync..."),yield this.replicationState.reSync(),console.log("Force sync complete")}catch(r){console.error("Error during force sync:",r)}})}getSyncStatus(){return this.syncStatusSubject.value}saveSortedList(r){return R(this,null,function*(){if(console.log("saveSortedList called, isBrowser:",this.isBrowser),!this.isBrowser)return console.log("Not in browser, returning null"),null;if(console.log("Ensuring database is ready..."),yield this.ensureReady(),console.log("Database ready, db exists:",!!this.db),!this.db)return console.error("Database is null after ensureReady!"),null;let e=this.authService.currentUserValue,i=r._id||`list_${Date.now()}`,n=Date.now();console.log("User:",e,"ID:",i);let o={id:i,listName:r.listName,items:r.items,sortedItems:r.sortedItems,tieredItems:r.tieredItems,completed:r.completed,createdAt:r.createdAt?r.createdAt.getTime():n,completedAt:r.completedAt?r.completedAt.getTime():void 0,userId:e?e.userId:"local",updatedAt:n};try{console.log("Saving list with id:",i,"userId:",o.userId);let c=yield this.db.lists.findOne({selector:{id:i}}).exec();return c?(console.log("Updating existing list"),yield c.update({$set:o})):(console.log("Inserting new list"),yield this.db.lists.insert(o)),console.log("List saved successfully"),{id:i}}catch(c){throw console.error("Error saving list:",c),c}})}getSortedList(r){return R(this,null,function*(){if(!this.isBrowser||(yield this.ensureReady(),!this.db))return null;try{let e=yield this.db.lists.findOne({selector:{id:r}}).exec();return e?this.convertToSortedList(e.toJSON()):null}catch(e){return console.error("Error getting list:",e),null}})}getAllLists(){return R(this,null,function*(){if(!this.isBrowser)return[];if(yield this.ensureReady(),!this.db)return[];let r=this.authService.currentUserValue,e=r?r.userId:"local";try{let i=yield this.db.lists.find({selector:{userId:e},sort:[{createdAt:"desc"}]}).exec();return console.log("getAllLists: Retrieved",i.length,"lists"),i.map(n=>this.convertToSortedList(n.toJSON()))}catch(i){return console.error("Error in getAllLists:",i),[]}})}getAllLists$(){if(!this.isBrowser||!this.db)return new Wn(i=>i.next([]));let r=this.authService.currentUserValue,e=r?r.userId:"local";return this.db.lists.find({selector:{userId:e},sort:[{createdAt:"desc"}]}).$.pipe(ht(i=>i.map(n=>this.convertToSortedList(n.toJSON()))))}updateSortedList(r){return R(this,null,function*(){return this.saveSortedList(r)})}deleteList(r){return R(this,null,function*(){if(!this.isBrowser||(yield this.ensureReady(),!this.db))return null;try{let e=yield this.db.lists.findOne({selector:{id:r}}).exec();e&&(yield e.remove())}catch(e){throw console.error("Error deleting list:",e),e}})}clearDatabase(){return R(this,null,function*(){if(this.isBrowser&&(yield this.ensureReady(),!!this.db))try{let r="list-sorter-db",e=yh();yield this.db.remove(),this.db=null,yield ed(r,e),yield this.initDatabase()}catch(r){console.error("Error clearing database:",r)}})}convertToSortedList(r){return{_id:r.id,listName:r.listName,items:r.items,sortedItems:r.sortedItems,tieredItems:r.tieredItems,completed:r.completed,createdAt:new Date(r.createdAt),completedAt:r.completedAt?new Date(r.completedAt):void 0}}migrateLocalListsToUser(r){return R(this,null,function*(){if(!this.isBrowser||!this.db)return 0;try{let e=yield this.db.lists.find({selector:{userId:"local"}}).exec();console.log(`Migrating ${e.length} local lists to user ${r}`);for(let i of e)yield i.update({$set:{userId:r,updatedAt:Date.now()}});return e.length}catch(e){return console.error("Error migrating local lists:",e),0}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})};var pd=class t{sortStateSubject=new Zt({isActive:!1,currentPair:null,progress:0,totalComparisons:0,completedComparisons:0});sortState$=this.sortStateSubject.asObservable();items=[];comparisons=new Map;pendingComparisons=[];resolveComparison=null;sortPromiseResolve=null;sortedItems=[];newItems=[];startSort(r,e){return R(this,null,function*(){if(this.items=[...r],this.comparisons.clear(),this.pendingComparisons=[],e&&e.length>0){if(this.sortedItems=[...e],this.newItems=r.filter(n=>!e.includes(n)),this.newItems.length===0)return e;let i=this.newItems.length*Math.ceil(Math.log2(e.length+1));return this.updateState({isActive:!0,currentPair:null,progress:0,totalComparisons:i,completedComparisons:0}),new Promise(n=>{this.sortPromiseResolve=n,this.performIncrementalSort().then(o=>{this.updateState({isActive:!1,currentPair:null,progress:100,totalComparisons:this.sortStateSubject.value.totalComparisons,completedComparisons:this.sortStateSubject.value.totalComparisons}),n(o)})})}else{let i=Math.ceil(r.length*Math.log2(r.length));return this.updateState({isActive:!0,currentPair:null,progress:0,totalComparisons:i,completedComparisons:0}),new Promise(n=>{this.sortPromiseResolve=n,this.performMergeSort(this.items).then(o=>{this.updateState({isActive:!1,currentPair:null,progress:100,totalComparisons:this.sortStateSubject.value.totalComparisons,completedComparisons:this.sortStateSubject.value.totalComparisons}),n(o)})})}})}performMergeSort(r){return R(this,null,function*(){if(r.length<=1)return r;let e=Math.floor(r.length/2),i=yield this.performMergeSort(r.slice(0,e)),n=yield this.performMergeSort(r.slice(e));return yield this.merge(i,n)})}merge(r,e){return R(this,null,function*(){let i=[],n=0,o=0;for(;n<r.length&&o<e.length;)(yield this.compare(r[n],e[o]))<=0?(i.push(r[n]),n++):(i.push(e[o]),o++);return i.concat(r.slice(n)).concat(e.slice(o))})}compare(r,e){return R(this,null,function*(){let i=this.getComparisonKey(r,e);return this.comparisons.has(i)?this.comparisons.get(i):new Promise(n=>{this.resolveComparison=n,this.updateState(Be(de({},this.sortStateSubject.value),{currentPair:{itemA:r,itemB:e}}))})})}submitComparison(r,e,i){let n=this.getComparisonKey(r,e),o=i==="A"?-1:i==="B"?1:0;this.comparisons.set(n,o);let c=this.sortStateSubject.value,d=c.completedComparisons+1,h=c.totalComparisons>0?Math.round(d/c.totalComparisons*100):0;this.updateState(Be(de({},c),{currentPair:null,completedComparisons:d,progress:h})),this.resolveComparison&&(this.resolveComparison(o),this.resolveComparison=null)}cancelSort(){this.updateState({isActive:!1,currentPair:null,progress:0,totalComparisons:0,completedComparisons:0}),this.sortPromiseResolve&&(this.sortPromiseResolve([]),this.sortPromiseResolve=null)}getComparisonKey(r,e){return[r,e].sort().join("|||")}updateState(r){this.sortStateSubject.next(r)}performIncrementalSort(){return R(this,null,function*(){let r=[...this.sortedItems];for(let e of this.newItems){let i=yield this.findInsertPosition(r,e);r.splice(i,0,e)}return r})}findInsertPosition(r,e){return R(this,null,function*(){if(r.length===0)return 0;let i=0,n=r.length;for(;i<n;){let o=Math.floor((i+n)/2);(yield this.compare(e,r[o]))<=0?n=o:i=o+1}return i})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})};function WE(t,r){if(t&1){let e=tt();S(0,"app-list-input",7),re("listNameChange",function(n){X(e);let o=j();return Y(o.listName.set(n))})("currentItemChange",function(n){X(e);let o=j();return Y(o.currentItem.set(n))})("pastedTextChange",function(n){X(e);let o=j();return Y(o.pastedText.set(n))})("addItem",function(){X(e);let n=j();return Y(n.addItem())})("removeItem",function(n){X(e);let o=j();return Y(o.removeItem(n))})("startSort",function(){X(e);let n=j();return Y(n.startSort())})("clearList",function(){X(e);let n=j();return Y(n.clearList())})("fileSelected",function(n){X(e);let o=j();return Y(o.onFileSelected(n))})("addPastedItems",function(){X(e);let n=j();return Y(n.addPastedItems())})("editItem",function(n){X(e);let o=j();return Y(o.editItemInList(n))}),M()}if(t&2){let e=j();le("listName",e.listName())("items",e.items())("currentItem",e.currentItem())("pastedText",e.pastedText())("isDisabled",e.sortState().isActive)("canAddItem",e.canAddItem())("canStartSort",e.canStartSort())("currentListId",e.currentListId())}}function KE(t,r){if(t&1){let e=tt();S(0,"app-sorting-comparison",8),re("selectOption",function(n){X(e);let o=j();return Y(o.selectOption(n))})("cancelSort",function(){X(e);let n=j();return Y(n.cancelSort())}),M()}if(t&2){let e=j();le("sortState",e.sortState())}}function qE(t,r){if(t&1){let e=tt();S(0,"app-tier-results",9),re("updateTierPercentage",function(n){X(e);let o=j();return Y(o.updateTierPercentage(n.index,n.value))})("recalculateTiers",function(){X(e);let n=j();return Y(n.recalculateTiers())})("resetTierPercentages",function(){X(e);let n=j();return Y(n.resetTierPercentages())})("itemDrop",function(n){X(e);let o=j();return Y(o.onItemDrop(n))})("hideResults",function(){X(e);let n=j();return Y(n.showResults.set(!1))})("resortEntireList",function(){X(e);let n=j();return Y(n.resortEntireList())})("createNewList",function(){X(e);let n=j();return Y(n.clearList())})("listNameChange",function(n){X(e);let o=j();return Y(o.updateListName(n))})("itemNameChange",function(n){X(e);let o=j();return Y(o.updateItemName(n))}),M()}if(t&2){let e=j();le("listName",e.listName())("tieredItems",e.tieredItems())("tierPercentages",e.tierPercentages())("tierNames",e.tierNames)}}var Ob=class t{constructor(r,e,i){this.databaseService=r;this.mergeSortService=e;this.snackBar=i;this.mergeSortService.sortState$.subscribe(n=>{this.sortState.set(n)}),this.loadLists()}listName=Se("");currentItem=Se("");pastedText=Se("");items=Se([]);sortState=Se({isActive:!1,currentPair:null,progress:0,totalComparisons:0,completedComparisons:0});sortedItems=Se([]);tieredItems=Se([]);showResults=Se(!1);tierPercentages=Se([10,20,20,20,20,10]);tierNames=["S","A","B","C","D","F"];lists=Se([]);currentListId=Se(void 0);canAddItem=vr(()=>this.currentItem().trim().length>0&&!this.sortState().isActive);canStartSort=vr(()=>this.items().length>=2&&!this.sortState().isActive&&this.listName().trim().length>0);addItem(){let r=this.currentItem().trim();r&&!this.items().includes(r)?(this.items.update(e=>[...e,r]),this.currentItem.set("")):this.items().includes(r)&&this.snackBar.open("Item already exists in the list","Close",{duration:3e3})}removeItem(r){this.items.update(e=>e.filter(i=>i!==r))}editItemInList(r){let e=[...this.items()],i=e.indexOf(r.oldName);i!==-1&&(e[i]=r.newName,this.items.set(e),this.snackBar.open("Item name updated","Close",{duration:2e3}))}startSort(r=!1){return R(this,null,function*(){if(this.canStartSort()){this.showResults.set(!1);try{let e=!r&&this.sortedItems().length>0?this.sortedItems():void 0,i=yield this.mergeSortService.startSort(this.items(),e);this.sortedItems.set(i);let n=this.calculateTiers(i);this.tieredItems.set(n),this.showResults.set(!0);let o=this.currentListId()||`list_${Date.now()}`,c={_id:o,listName:this.listName(),items:this.items(),sortedItems:i,tieredItems:n,completed:!0,createdAt:new Date,completedAt:new Date};if(console.log("About to save list:",c),this.currentListId()){let g=yield this.databaseService.getSortedList(this.currentListId());g&&g._rev&&(c._rev=g._rev,c.createdAt=g.createdAt)}yield this.databaseService.saveSortedList(c),console.log("List saved, reloading lists..."),this.currentListId.set(o),yield this.loadLists();let d=e&&e.length>0,h=r?"Entire list resorted from scratch!":d?"New items sorted and added to list!":"Sort completed and saved!";this.snackBar.open(h,"Close",{duration:3e3})}catch(e){console.error("Error during sorting/saving:",e),console.error("Error details:",e?.message,e?.stack),this.snackBar.open(`Error during sorting: ${e?.message||"Unknown error"}`,"Close",{duration:5e3})}}})}selectOption(r){let e=this.sortState();e.currentPair&&this.mergeSortService.submitComparison(e.currentPair.itemA,e.currentPair.itemB,r)}cancelSort(){this.mergeSortService.cancelSort(),this.showResults.set(!1)}clearList(){this.items.set([]),this.currentItem.set(""),this.listName.set(""),this.sortedItems.set([]),this.tieredItems.set([]),this.showResults.set(!1),this.currentListId.set(void 0)}resortEntireList(){return R(this,null,function*(){yield this.startSort(!0)})}loadList(r){return R(this,null,function*(){this.listName.set(r.listName),this.items.set([...r.items]),this.currentListId.set(r._id),r.sortedItems?(this.sortedItems.set([...r.sortedItems]),r.tieredItems?this.tieredItems.set([...r.tieredItems]):this.tieredItems.set(this.calculateTiers(r.sortedItems)),this.showResults.set(!0)):(this.sortedItems.set([]),this.tieredItems.set([]),this.showResults.set(!1)),this.snackBar.open("List loaded - you can add more items and re-sort","Close",{duration:3e3})})}deleteList(r){return R(this,null,function*(){r._id&&(yield this.databaseService.deleteList(r._id),yield this.loadLists(),this.snackBar.open("List deleted","Close",{duration:2e3}))})}loadLists(){return R(this,null,function*(){let r=yield this.databaseService.getAllLists();this.lists.set(r.sort((e,i)=>new Date(i.createdAt).getTime()-new Date(e.createdAt).getTime()))})}onFileSelected(r){let e=new FileReader;e.onload=i=>{let n=i.target?.result;this.parseFileContent(n,r.name)},e.onerror=()=>{this.snackBar.open("Error reading file","Close",{duration:3e3})},e.readAsText(r)}addPastedItems(){let r=this.pastedText().trim();if(!r)return;let e=this.parseTextContent(r),i=this.items(),n=e.filter(o=>!i.includes(o));n.length>0?(this.items.update(o=>[...o,...n]),this.snackBar.open(`Added ${n.length} item${n.length!==1?"s":""} from pasted text`,"Close",{duration:3e3}),this.pastedText.set("")):this.snackBar.open("No new items found in pasted text","Close",{duration:3e3})}parseFileContent(r,e){let n=e.toLowerCase().endsWith(".csv")?this.parseCsvContent(r):this.parseTextContent(r),o=this.items(),c=n.filter(d=>!o.includes(d));c.length>0?(this.items.update(d=>[...d,...c]),this.snackBar.open(`Added ${c.length} item${c.length!==1?"s":""} from file`,"Close",{duration:3e3})):this.snackBar.open("No new items found in file","Close",{duration:3e3})}parseCsvContent(r){let e=[],i=r.split(/\r?\n/);for(let n of i){let o=n.includes(",")?n.split(","):n.split(";");e.push(...o.map(c=>c.trim()).filter(c=>c.length>0))}return e}parseTextContent(r){let e=r.split(/\r?\n/).map(i=>i.trim()).filter(i=>i.length>0);return e.length===1&&e[0].includes(",")&&(e=e[0].split(",").map(i=>i.trim()).filter(i=>i.length>0)),e}calculateTiers(r){let e=r.length,i=this.tierPercentages(),n=[],o=0,c=[],d=0;for(let g=0;g<this.tierNames.length;g++){if(i[g]===0){c.push(0);continue}let f=e*i[g]/100,y=Math.floor(f);c.push(y),d+=y}let h=e-d;if(h>0){let g=i.map((f,y)=>({index:y,fraction:e*f/100-c[y]}));g.sort((f,y)=>y.fraction-f.fraction);for(let f=0;f<h;f++)c[g[f].index]++}for(let g=0;g<this.tierNames.length;g++){if(i[g]===0)continue;let f=c[g],y=Math.min(o+f,e);n.push({tier:this.tierNames[g],items:o<e?r.slice(o,y):[]}),o=y}return n}onItemDrop(r){r.previousContainer===r.container?Hc(r.container.data,r.previousIndex,r.currentIndex):$f(r.previousContainer.data,r.container.data,r.previousIndex,r.currentIndex),this.tieredItems.update(e=>[...e]),this.saveCurrentList()}updateTierPercentage(r,e){let i=[...this.tierPercentages()];i[r]=e,this.tierPercentages.set(i)}recalculateTiers(){let r=this.tieredItems().flatMap(i=>i.items),e=this.calculateTiers(r);this.tieredItems.set(e),this.saveCurrentList(),this.snackBar.open("Tiers recalculated with new percentages","Close",{duration:3e3})}resetTierPercentages(){this.tierPercentages.set([10,20,20,20,20,10]),this.snackBar.open("Tier percentages reset to defaults","Close",{duration:2e3})}saveCurrentList(){return R(this,null,function*(){if(!(!this.currentListId()||!this.showResults()))try{let r=this.tieredItems().flatMap(n=>n.items),e={_id:this.currentListId(),listName:this.listName(),items:this.items(),sortedItems:r,tieredItems:this.tieredItems(),completed:!0,createdAt:new Date,completedAt:new Date},i=yield this.databaseService.getSortedList(this.currentListId());i&&i._rev&&(e._rev=i._rev,e.createdAt=i.createdAt),yield this.databaseService.saveSortedList(e),yield this.loadLists()}catch(r){console.error("Error saving list:",r)}})}updateListName(r){this.listName.set(r),this.saveCurrentList(),this.snackBar.open("List name updated","Close",{duration:2e3})}updateItemName(r){let e=[...this.tieredItems()];e[r.tierIndex]&&(e[r.tierIndex]=Be(de({},e[r.tierIndex]),{items:[...e[r.tierIndex].items]}),e[r.tierIndex].items[r.itemIndex]=r.newName,this.tieredItems.set(e));let i=[...this.items()],n=i.indexOf(r.oldName);n!==-1&&(i[n]=r.newName,this.items.set(i));let o=[...this.sortedItems()],c=o.indexOf(r.oldName);c!==-1&&(o[c]=r.newName,this.sortedItems.set(o)),this.saveCurrentList(),this.snackBar.open("Item name updated","Close",{duration:2e3})}static \u0275fac=function(e){return new(e||t)(Mo(hd),Mo(pd),Mo(io))};static \u0275cmp=ye({type:t,selectors:[["app-list-sorter"]],decls:8,vars:5,consts:[[1,"list-sorter-container"],[1,"main-content"],[3,"listName","items","currentItem","pastedText","isDisabled","canAddItem","canStartSort","currentListId","listNameChange","currentItemChange","pastedTextChange","addItem","removeItem","startSort","clearList","fileSelected","addPastedItems","editItem",4,"ngIf"],[3,"sortState","selectOption","cancelSort",4,"ngIf"],[3,"listName","tieredItems","tierPercentages","tierNames","updateTierPercentage","recalculateTiers","resetTierPercentages","itemDrop","hideResults","resortEntireList","createNewList","listNameChange","itemNameChange",4,"ngIf"],[1,"sidebar"],[3,"loadList","deleteList","lists","isDisabled"],[3,"listNameChange","currentItemChange","pastedTextChange","addItem","removeItem","startSort","clearList","fileSelected","addPastedItems","editItem","listName","items","currentItem","pastedText","isDisabled","canAddItem","canStartSort","currentListId"],[3,"selectOption","cancelSort","sortState"],[3,"updateTierPercentage","recalculateTiers","resetTierPercentages","itemDrop","hideResults","resortEntireList","createNewList","listNameChange","itemNameChange","listName","tieredItems","tierPercentages","tierNames"]],template:function(e,i){e&1&&(S(0,"div",0)(1,"div",1),lt(2,WE,1,8,"app-list-input",2)(3,KE,1,1,"app-sorting-comparison",3)(4,qE,1,4,"app-tier-results",4),M(),S(5,"div",5),pt(6,"app-auth-widget"),S(7,"app-saved-lists-sidebar",6),re("loadList",function(o){return i.loadList(o)})("deleteList",function(o){return i.deleteList(o)}),M()()()),e&2&&(V(2),le("ngIf",!i.sortState().isActive&&!i.showResults()),V(),le("ngIf",i.sortState().isActive&&i.sortState().currentPair),V(),le("ngIf",i.showResults()),V(3),le("lists",i.lists())("isDisabled",i.sortState().isActive))},dependencies:[mi,Ao,Fc,Yc,Jc,ol,al,sl],styles:[".list-sorter-container[_ngcontent-%COMP%]{display:flex;gap:2rem;padding:2rem;max-width:1400px;margin:0 auto;min-height:calc(100vh - 4rem);background:linear-gradient(135deg,#ff6b6b,#ee5a6f 10%,#feca57,#f39c12,#48dbfb,#0abde3,#1dd1a1,#10ac84,#a29bfe,#6c5ce7 90%,#636e72 95%,#2d3436)}@media (max-width: 968px){.list-sorter-container[_ngcontent-%COMP%]{flex-direction:column;padding:1rem;min-height:calc(100vh - 2rem)}}.main-content[_ngcontent-%COMP%]{flex:1;min-width:0}.sidebar[_ngcontent-%COMP%]{width:350px;flex-shrink:0}@media (max-width: 968px){.sidebar[_ngcontent-%COMP%]{width:100%}}"]})};export{Ob as ListSorterComponent};
