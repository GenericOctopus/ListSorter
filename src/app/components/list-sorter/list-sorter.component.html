<div class="list-sorter-container">
  <div class="main-content">
    <!-- Input Section -->
    <app-list-input
      *ngIf="!sortState().isActive && !showResults()"
      [listName]="listName()"
      [items]="items()"
      [currentItem]="currentItem()"
      [pastedText]="pastedText()"
      [isDisabled]="sortState().isActive"
      [canAddItem]="canAddItem()"
      [canStartSort]="canStartSort()"
      [currentListId]="currentListId()"
      (listNameChange)="listName.set($event)"
      (currentItemChange)="currentItem.set($event)"
      (pastedTextChange)="pastedText.set($event)"
      (addItem)="addItem()"
      (removeItem)="removeItem($event)"
      (startSort)="startSort()"
      (clearList)="clearList()"
      (fileSelected)="onFileSelected($event)"
      (addPastedItems)="addPastedItems()">
    </app-list-input>

    <!-- Sorting Section -->
    <app-sorting-comparison
      *ngIf="sortState().isActive && sortState().currentPair"
      [sortState]="sortState()"
      (selectOption)="selectOption($event)"
      (cancelSort)="cancelSort()">
    </app-sorting-comparison>

    <!-- Results Section -->
    <app-tier-results
      *ngIf="showResults()"
      [listName]="listName()"
      [tieredItems]="tieredItems()"
      [tierPercentages]="tierPercentages()"
      [tierNames]="tierNames"
      [showAdvancedSettings]="showAdvancedSettings()"
      (showAdvancedSettingsChange)="showAdvancedSettings.set($event)"
      (updateTierPercentage)="updateTierPercentage($event.index, $event.value)"
      (validateTierPercentage)="validateTierPercentage($event)"
      (recalculateTiers)="recalculateTiers()"
      (resetTierPercentages)="resetTierPercentages()"
      (itemDrop)="onItemDrop($event)"
      (hideResults)="showResults.set(false)"
      (resortEntireList)="resortEntireList()"
      (createNewList)="clearList()">
    </app-tier-results>
  </div>

  <!-- Sidebar with auth widget and saved lists -->
  <div class="sidebar">
    <app-auth-widget></app-auth-widget>
    
    <app-saved-lists-sidebar
      [lists]="lists()"
      [isDisabled]="sortState().isActive"
      (loadList)="loadList($event)"
      (deleteList)="deleteList($event)">
    </app-saved-lists-sidebar>
  </div>
</div>
