<div class="forgot-password-container">
  <mat-card class="forgot-password-card">
    <mat-card-header>
      <mat-card-title>Reset Your Password</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      @if (!success) {
        <p class="instructions">
          Enter your email address and we'll send you a link to reset your password.
        </p>

        <form (ngSubmit)="onSubmit()" #forgotForm="ngForm">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input
              matInput
              type="email"
              [(ngModel)]="email"
              name="email"
              required
              [disabled]="loading"
              autocomplete="email"
            />
          </mat-form-field>

          @if (error) {
            <div class="error-message">
              <mat-icon>error</mat-icon>
              {{ error }}
            </div>
          }

          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="full-width"
            [disabled]="loading || !forgotForm.valid"
          >
            @if (loading) {
              <mat-spinner diameter="20"></mat-spinner>
            } @else {
              Send Reset Link
            }
          </button>
        </form>
      } @else {
        <div class="success-message">
          <mat-icon class="success-icon">check_circle</mat-icon>
          <h3>Check Your Email</h3>
          <p>
            We've sent a password reset link to <strong>{{ email }}</strong>.
            Please check your inbox and follow the instructions to reset your password.
          </p>
          <p class="note">
            The link will expire in 1 hour. If you don't see the email, check your spam folder.
          </p>
        </div>
      }

      <div class="back-link">
        <a routerLink="/login">
          <mat-icon>arrow_back</mat-icon>
          Back to Login
        </a>
      </div>
    </mat-card-content>
  </mat-card>
</div>
