import{a as te,b as ne}from"./chunk-264RZIGB.js";import{a as ie,b as oe}from"./chunk-HA56QZ4S.js";import{N as j,O as D,P as G,S as H,T as Y,b as T,ba as J,ca as K,d as z,e as F,f as N,fa as Q,g as V,ga as U,h as A,ia as X,ja as Z,l as q,m as W,n as B,ra as $,sa as ee}from"./chunk-YSJ6QNQG.js";import{$ as g,$a as P,Ab as _,Bb as w,Cb as h,Da as M,Ra as c,Ta as p,Ya as C,Za as t,_a as e,aa as u,eb as b,fc as k,g as x,gb as v,ib as l,nc as y,pc as R,qc as E,sb as O,sc as I,tc as L,ua as d,wb as n,ya as f,yb as S}from"./chunk-PHHO7NXX.js";function ae(i,r){i&1&&(t(0,"div",3)(1,"mat-icon",6),n(2,"error"),e(),t(3,"h3"),n(4,"Invalid Reset Link"),e(),t(5,"p"),n(6," This password reset link is invalid or has expired. Please request a new password reset. "),e(),t(7,"button",7),n(8," Request New Link "),e()())}function se(i,r){if(i&1&&(t(0,"div",13)(1,"mat-icon"),n(2,"error"),e(),n(3),e()),i&2){let a=l(2);d(3),S(" ",a.error," ")}}function de(i,r){i&1&&P(0,"mat-spinner",15)}function le(i,r){i&1&&n(0," Reset Password ")}function me(i,r){if(i&1){let a=b();t(0,"p",8),n(1," Enter your new password below. Make sure it's at least 8 characters long. "),e(),t(2,"form",9,0),v("ngSubmit",function(){g(a);let s=l();return u(s.onSubmit())}),t(4,"mat-form-field",10)(5,"mat-label"),n(6,"New Password"),e(),t(7,"input",11),h("ngModelChange",function(s){g(a);let m=l();return w(m.password,s)||(m.password=s),u(s)}),e(),t(8,"mat-hint"),n(9,"At least 8 characters"),e()(),t(10,"mat-form-field",10)(11,"mat-label"),n(12,"Confirm Password"),e(),t(13,"input",12),h("ngModelChange",function(s){g(a);let m=l();return w(m.passwordConfirm,s)||(m.passwordConfirm=s),u(s)}),e()(),c(14,se,4,1,"div",13),t(15,"button",14),c(16,de,1,0,"mat-spinner",15)(17,le,1,0),e()()}if(i&2){let a=O(3),o=l();d(7),_("ngModel",o.password),C("disabled",o.loading),d(6),_("ngModel",o.passwordConfirm),C("disabled",o.loading),d(),p(o.error?14:-1),d(),C("disabled",o.loading||!a.valid),d(),p(o.loading?16:17)}}function ce(i,r){i&1&&(t(0,"div",4)(1,"mat-icon",16),n(2,"check_circle"),e(),t(3,"h3"),n(4,"Password Reset Successful!"),e(),t(5,"p"),n(6," Your password has been successfully reset. You will be redirected to the login page in a moment. "),e(),t(7,"button",17),n(8," Go to Login "),e()())}function pe(i,r){i&1&&(t(0,"div",5)(1,"a",18)(2,"mat-icon"),n(3,"arrow_back"),e(),n(4," Back to Login "),e()())}var re=class i{constructor(r,a,o){this.authService=r;this.router=a;this.route=o}password="";passwordConfirm="";loading=!1;error="";success=!1;userId="";secret="";invalidLink=!1;ngOnInit(){this.route.queryParams.subscribe(r=>{this.userId=r.userId||"",this.secret=r.secret||"",(!this.userId||!this.secret)&&(this.invalidLink=!0,this.error="Invalid or expired reset link")})}onSubmit(){return x(this,null,function*(){if(!this.password||!this.passwordConfirm){this.error="Please fill in all fields";return}if(this.password.length<8){this.error="Password must be at least 8 characters long";return}if(this.password!==this.passwordConfirm){this.error="Passwords do not match";return}this.loading=!0,this.error="";let r=yield this.authService.completePasswordReset(this.userId,this.secret,this.password,this.passwordConfirm);this.loading=!1,r.success?(this.success=!0,setTimeout(()=>{this.router.navigate(["/login"])},3e3)):this.error=r.error||"Failed to reset password"})}static \u0275fac=function(a){return new(a||i)(f(L),f(R),f(y))};static \u0275cmp=M({type:i,selectors:[["app-reset-password"]],decls:10,vars:2,consts:[["resetForm","ngForm"],[1,"reset-password-container"],[1,"reset-password-card"],[1,"invalid-link-message"],[1,"success-message"],[1,"back-link"],[1,"error-icon"],["mat-raised-button","","color","primary","routerLink","/forgot-password",1,"full-width"],[1,"instructions"],[3,"ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","type","password","name","password","required","","minlength","8","autocomplete","new-password",3,"ngModelChange","ngModel","disabled"],["matInput","","type","password","name","passwordConfirm","required","","autocomplete","new-password",3,"ngModelChange","ngModel","disabled"],[1,"error-message"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20"],[1,"success-icon"],["mat-raised-button","","color","primary","routerLink","/login",1,"full-width"],["routerLink","/login"]],template:function(a,o){a&1&&(t(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),n(4,"Set New Password"),e()(),t(5,"mat-card-content"),c(6,ae,9,0,"div",3)(7,me,18,7)(8,ce,9,0,"div",4),c(9,pe,5,0,"div",5),e()()()),a&2&&(d(6),p(o.invalidLink?6:o.success?8:7),d(3),p(!o.invalidLink&&!o.success?9:-1))},dependencies:[k,B,A,T,z,F,q,W,V,N,I,E,Y,j,G,H,D,U,Q,J,K,Z,X,ee,$,ne,te,oe,ie],styles:[".reset-password-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.reset-password-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:20px}mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;text-align:center}.instructions[_ngcontent-%COMP%]{text-align:center;color:#0009;margin-bottom:24px;line-height:1.5}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f44336;background-color:#ffebee;padding:12px;border-radius:4px;margin-bottom:16px;font-size:14px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.success-message[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.success-message[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;margin-bottom:16px}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;font-weight:500}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#000000b3;line-height:1.6}.success-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px}.invalid-link-message[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.invalid-link-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#f44336;margin-bottom:16px}.invalid-link-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;font-weight:500}.invalid-link-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#000000b3;line-height:1.6}.invalid-link-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px}.back-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#667eea;text-decoration:none;font-size:14px;transition:color .2s}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#764ba2}.back-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}button[type=submit][_ngcontent-%COMP%]{margin-top:8px;height:48px;font-size:16px}button[type=submit][_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-hint{font-size:12px}"]})};export{re as ResetPasswordComponent};
